"use strict";var fC=Object.defineProperty,pC=Object.defineProperties,gC=Object.getOwnPropertyDescriptors,pw=Object.getOwnPropertySymbols,mC=Object.prototype.hasOwnProperty,_C=Object.prototype.propertyIsEnumerable,gw=(Ut,We,$)=>We in Ut?fC(Ut,We,{enumerable:!0,configurable:!0,writable:!0,value:$}):Ut[We]=$,mw=(Ut,We)=>{for(var $ in We||(We={}))mC.call(We,$)&&gw(Ut,$,We[$]);if(pw)for(var $ of pw(We))_C.call(We,$)&&gw(Ut,$,We[$]);return Ut},_w=(Ut,We)=>pC(Ut,gC(We));(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[179],{440:(Ut,We,$)=>{$.d(We,{nm:()=>Yr});var w=$(5813);$(5e3),$(5867);var ct=$(5861),it=$(9681),Qe=$(4859),ze=$(2090),It=$(1877);const le=new Map,ut={activated:!1,tokenObservers:[]},me={initialized:!1,enabled:!1};function je(Be){return le.get(Be)||ut}function He(Be,be){le.set(Be,be)}function tt(){return me}class dn{constructor(be,Je,bt,Pt,Zt){if(this.operation=be,this.retryPolicy=Je,this.getWaitDuration=bt,this.lowerBound=Pt,this.upperBound=Zt,this.pending=null,this.nextErrorWaitInterval=Pt,Pt>Zt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(be){var Je=this;return(0,ct.Z)(function*(){Je.stop();try{Je.pending=new ze.BH,yield function Kt(Be){return new Promise(be=>{setTimeout(be,Be)})}(Je.getNextRun(be)),Je.pending.resolve(),yield Je.pending.promise,Je.pending=new ze.BH,yield Je.operation(),Je.pending.resolve(),yield Je.pending.promise,Je.process(!0).catch(()=>{})}catch(bt){Je.retryPolicy(bt)?Je.process(!1).catch(()=>{}):Je.stop()}})()}getNextRun(be){if(be)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Je=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Je}}}const Ht=new ze.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wn(Be){if(!je(Be).activated)throw Ht.create("use-before-activation",{appName:Be.name})}function kr(Be,be){return wr.apply(this,arguments)}function wr(){return(wr=(0,ct.Z)(function*({url:Be,body:be},Je){const bt={"Content-Type":"application/json"},Pt=Je.getImmediate({optional:!0});if(Pt){const Oi=yield Pt.getHeartbeatsHeader();Oi&&(bt["X-Firebase-Client"]=Oi)}const Zt={method:"POST",body:JSON.stringify(be),headers:bt};let mr,$r;try{mr=yield fetch(Be,Zt)}catch(Oi){throw Ht.create("fetch-network-error",{originalErrorMessage:Oi.message})}if(200!==mr.status)throw Ht.create("fetch-status-error",{httpStatus:mr.status});try{$r=yield mr.json()}catch(Oi){throw Ht.create("fetch-parse-error",{originalErrorMessage:Oi.message})}const rr=$r.ttl.match(/^([\d.]+)(s)$/);if(!rr||!rr[2]||isNaN(Number(rr[1])))throw Ht.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${$r.ttl}`});const ns=1e3*Number(rr[1]),wo=Date.now();return{token:$r.token,expireTimeMillis:wo+ns,issuedAtTimeMillis:wo}})).apply(this,arguments)}function Mr(Be,be){const{projectId:Je,appId:bt,apiKey:Pt}=Be.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Je}/apps/${bt}:exchangeDebugToken?key=${Pt}`,body:{debug_token:be}}}const Vn="firebase-app-check-store";let hn=null;function Zi(){return hn||(hn=new Promise((Be,be)=>{try{const Je=indexedDB.open("firebase-app-check-database",1);Je.onsuccess=bt=>{Be(bt.target.result)},Je.onerror=bt=>{var Pt;be(Ht.create("storage-open",{originalErrorMessage:null===(Pt=bt.target.error)||void 0===Pt?void 0:Pt.message}))},Je.onupgradeneeded=bt=>{0===bt.oldVersion&&bt.target.result.createObjectStore(Vn,{keyPath:"compositeKey"})}}catch(Je){be(Ht.create("storage-open",{originalErrorMessage:Je.message}))}}),hn)}function Bt(){return(Bt=(0,ct.Z)(function*(Be,be){const bt=(yield Zi()).transaction(Vn,"readwrite"),Zt=bt.objectStore(Vn).put({compositeKey:Be,value:be});return new Promise((mr,$r)=>{Zt.onsuccess=rr=>{mr()},bt.onerror=rr=>{var ns;$r(Ht.create("storage-set",{originalErrorMessage:null===(ns=rr.target.error)||void 0===ns?void 0:ns.message}))}})})).apply(this,arguments)}const pi=new It.Yd("@firebase/app-check");function dr(Be,be){return(0,ze.hl)()?function fi(Be,be){return function Lr(Be,be){return Bt.apply(this,arguments)}(function li(Be){return`${Be.options.appId}-${Be.name}`}(Be),be)}(Be,be).catch(Je=>{pi.warn(`Failed to write token to IndexedDB. Error: ${Je}`)}):Promise.resolve()}function Se(){return tt().enabled}function xe(){return Et.apply(this,arguments)}function Et(){return(Et=(0,ct.Z)(function*(){const Be=tt();if(Be.enabled&&Be.token)return Be.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const $e={error:"UNKNOWN_ERROR"};function wt(Be){return ze.US.encodeString(JSON.stringify(Be),!1)}function Vt(Be){return zt.apply(this,arguments)}function zt(){return(zt=(0,ct.Z)(function*(Be,be=!1){const Je=Be.app;wn(Je);const bt=je(Je);let Zt,Pt=bt.token;if(!Pt){const rr=yield bt.cachedTokenPromise;rr&&Ur(rr)&&(Pt=rr)}if(!be&&Pt&&Ur(Pt))return{token:Pt.token};let $r,mr=!1;if(Se()){bt.exchangeTokenPromise||(bt.exchangeTokenPromise=kr(Mr(Je,yield xe()),Be.heartbeatServiceProvider).then(ns=>(bt.exchangeTokenPromise=void 0,ns)),mr=!0);const rr=yield bt.exchangeTokenPromise;return yield dr(Je,rr),He(Je,Object.assign(Object.assign({},bt),{token:rr})),{token:rr.token}}try{bt.exchangeTokenPromise||(bt.exchangeTokenPromise=bt.provider.getToken().then(rr=>(bt.exchangeTokenPromise=void 0,rr)),mr=!0),Pt=yield bt.exchangeTokenPromise}catch(rr){"appCheck/throttled"===rr.code?pi.warn(rr.message):pi.error(rr),Zt=rr}return Pt?($r={token:Pt.token},He(Je,Object.assign(Object.assign({},bt),{token:Pt})),yield dr(Je,Pt)):$r=ui(Zt),mr&&ri(Je,$r),$r})).apply(this,arguments)}function Dr(Be,be){const Je=je(Be),bt=Je.tokenObservers.filter(Pt=>Pt.next!==be);0===bt.length&&Je.tokenRefresher&&Je.tokenRefresher.isRunning()&&Je.tokenRefresher.stop(),He(Be,Object.assign(Object.assign({},Je),{tokenObservers:bt}))}function _n(Be){const{app:be}=Be,Je=je(be);let bt=Je.tokenRefresher;bt||(bt=function xr(Be){const{app:be}=Be;return new dn((0,ct.Z)(function*(){let bt;if(bt=je(be).token?yield Vt(Be,!0):yield Vt(Be),bt.error)throw bt.error}),()=>!0,()=>{const Je=je(be);if(Je.token){let bt=Je.token.issuedAtTimeMillis+.5*(Je.token.expireTimeMillis-Je.token.issuedAtTimeMillis)+3e5;return bt=Math.min(bt,Je.token.expireTimeMillis-3e5),Math.max(0,bt-Date.now())}return 0},3e4,96e4)}(Be),He(be,Object.assign(Object.assign({},Je),{tokenRefresher:bt}))),!bt.isRunning()&&Je.isTokenAutoRefreshEnabled&&bt.start()}function ri(Be,be){const Je=je(Be).tokenObservers;for(const bt of Je)try{"EXTERNAL"===bt.type&&null!=be.error?bt.error(be.error):bt.next(be)}catch(Pt){}}function Ur(Be){return Be.expireTimeMillis-Date.now()>0}function ui(Be){return{token:wt($e),error:Be}}class Ii{constructor(be,Je){this.app=be,this.heartbeatServiceProvider=Je}_delete(){const{tokenObservers:be}=je(this.app);for(const Je of be)Dr(this.app,Je.next);return Promise.resolve()}}const _i="app-check-internal";!function Wr(){(0,it._registerComponent)(new Qe.wA("app-check",Be=>function Tn(Be,be){return new Ii(Be,be)}(Be.getProvider("app").getImmediate(),Be.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Be,be,Je)=>{Be.getProvider(_i).initialize()})),(0,it._registerComponent)(new Qe.wA(_i,Be=>function Vr(Be){return{getToken:be=>Vt(Be,be),addTokenListener:be=>function an(Be,be,Je,bt){const{app:Pt}=Be,Zt=je(Pt),mr={next:Je,error:bt,type:be};if(He(Pt,Object.assign(Object.assign({},Zt),{tokenObservers:[...Zt.tokenObservers,mr]})),Zt.token&&Ur(Zt.token)){const $r=Zt.token;Promise.resolve().then(()=>{Je({token:$r.token}),_n(Be)}).catch(()=>{})}Zt.cachedTokenPromise.then(()=>_n(Be))}(Be,"INTERNAL",be),removeTokenListener:be=>Dr(Be.app,be)}}(Be.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,it.registerVersion)("@firebase/app-check","0.5.8")}();class Yr{constructor(){return(0,w.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Ut,We,$)=>{$.d(We,{zQ:()=>Me,rT:()=>me,f7:()=>He,L6:()=>le,_Q:()=>ut,lh:()=>je,Qv:()=>It,nw:()=>tt});var w=$(5e3),m=$(7579),ie=$(9646),Fe=$(8306),z=$(8996),De=$(6451),Ve=$(6063);class ke extends m.x{constructor(ft=1/0,Ot=1/0,lt=Ve.l){super(),this._bufferSize=ft,this._windowTime=Ot,this._timestampProvider=lt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ot===1/0,this._bufferSize=Math.max(1,ft),this._windowTime=Math.max(1,Ot)}next(ft){const{isStopped:Ot,_buffer:lt,_infiniteTimeWindow:dn,_timestampProvider:Kt,_windowTime:qt}=this;Ot||(lt.push(ft),!dn&&lt.push(Kt.now()+qt)),this._trimBuffer(),super.next(ft)}_subscribe(ft){this._throwIfClosed(),this._trimBuffer();const Ot=this._innerSubscribe(ft),{_infiniteTimeWindow:lt,_buffer:dn}=this,Kt=dn.slice();for(let qt=0;qt<Kt.length&&!ft.closed;qt+=lt?1:2)ft.next(Kt[qt]);return this._checkFinalizedStatuses(ft),Ot}_trimBuffer(){const{_bufferSize:ft,_timestampProvider:Ot,_buffer:lt,_infiniteTimeWindow:dn}=this,Kt=(dn?1:2)*ft;if(ft<1/0&&Kt<lt.length&&lt.splice(0,lt.length-Kt),!dn){const qt=Ot.now();let Ht=0;for(let mn=1;mn<lt.length&&lt[mn]<=qt;mn+=2)Ht=mn;Ht&&lt.splice(0,Ht+1)}}}var Ge=$(3099);function pe(Le,ft,Ot){let lt,dn=!1;return Le&&"object"==typeof Le?({bufferSize:lt=1/0,windowTime:ft=1/0,refCount:dn=!1,scheduler:Ot}=Le):lt=null!=Le?Le:1/0,(0,Ge.B)({connector:()=>new ke(lt,ft,Ot),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:dn})}var ue=$(3900),Pe=$(576);function Tt(Le,ft){return(0,Pe.m)(ft)?(0,ue.w)(()=>Le,ft):(0,ue.w)(()=>Le)}var Ke=$(5363),rt=$(4004),ht=$(590),Xe=$(9468),ot=$(9300),Oe=$(5813),Lt=$(2011),ct=$(9808),it=$(440);$(127);const It=new w.OlP("angularfire2.auth.use-emulator"),le=new w.OlP("angularfire2.auth.settings"),ut=new w.OlP("angularfire2.auth.tenant-id"),me=new w.OlP("angularfire2.auth.langugage-code"),je=new w.OlP("angularfire2.auth.use-device-language"),He=new w.OlP("angularfire.auth.persistence"),tt=(Le,ft,Ot,lt,dn,Kt,qt,Ht)=>(0,Lt.cc)(`${Le.name}.auth`,"AngularFireAuth",Le.name,()=>{const mn=ft.runOutsideAngular(()=>Le.auth());if(Ot&&mn.useEmulator(...Ot),lt&&(mn.tenantId=lt),mn.languageCode=dn,Kt&&mn.useDeviceLanguage(),qt)for(const[wn,vn]of Object.entries(qt))mn.settings[wn]=vn;return Ht&&mn.setPersistence(Ht),mn},[Ot,lt,dn,Kt,qt,Ht]);let Me=(()=>{class Le{constructor(Ot,lt,dn,Kt,qt,Ht,mn,wn,vn,Ln,pr,kr){const wr=new m.x,ni=(0,ie.of)(void 0).pipe((0,Ke.Q)(qt.outsideAngular),(0,ue.w)(()=>Kt.runOutsideAngular(()=>Promise.resolve().then($.bind($,9606)))),(0,rt.U)(()=>(0,Lt.on)(Ot,Kt,lt)),(0,rt.U)(ar=>tt(ar,Kt,Ht,wn,vn,Ln,mn,pr)),pe({bufferSize:1,refCount:!1}));if((0,ct.PM)(dn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ie.of)(null);else{ni.pipe((0,ht.P)()).subscribe();const Mr=ni.pipe((0,ue.w)(Vn=>Vn.getRedirectResult().then(Rn=>Rn,()=>null)),Oe.iC,pe({bufferSize:1,refCount:!1})),Yn=ni.pipe((0,ue.w)(Vn=>new Fe.y(Rn=>({unsubscribe:Kt.runOutsideAngular(()=>Vn.onAuthStateChanged(hn=>Rn.next(hn),hn=>Rn.error(hn),()=>Rn.complete()))})))),on=ni.pipe((0,ue.w)(Vn=>new Fe.y(Rn=>({unsubscribe:Kt.runOutsideAngular(()=>Vn.onIdTokenChanged(hn=>Rn.next(hn),hn=>Rn.error(hn),()=>Rn.complete()))}))));this.authState=Mr.pipe(Tt(Yn),(0,Xe.R)(qt.outsideAngular),(0,Ke.Q)(qt.insideAngular)),this.user=Mr.pipe(Tt(on),(0,Xe.R)(qt.outsideAngular),(0,Ke.Q)(qt.insideAngular)),this.idToken=this.user.pipe((0,ue.w)(Vn=>Vn?(0,z.D)(Vn.getIdToken()):(0,ie.of)(null))),this.idTokenResult=this.user.pipe((0,ue.w)(Vn=>Vn?(0,z.D)(Vn.getIdTokenResult()):(0,ie.of)(null))),this.credential=(0,De.T)(Mr,wr,this.authState.pipe((0,ot.h)(Vn=>!Vn))).pipe((0,rt.U)(Vn=>(null==Vn?void 0:Vn.user)?Vn:null),(0,Xe.R)(qt.outsideAngular),(0,Ke.Q)(qt.insideAngular))}return(0,Lt.pX)(this,ni,Kt,{spy:{apply:(ar,Mr,Yn)=>{(ar.startsWith("signIn")||ar.startsWith("createUser"))&&Yn.then(on=>wr.next(on))}}})}}return Le.\u0275fac=function(Ot){return new(Ot||Le)(w.LFG(Lt.Dh),w.LFG(Lt.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Oe.HU),w.LFG(It,8),w.LFG(le,8),w.LFG(ut,8),w.LFG(me,8),w.LFG(je,8),w.LFG(He,8),w.LFG(it.nm,8))},Le.\u0275prov=w.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"any"}),Le})()},7407:(Ut,We,$)=>{$.d(We,{ST:()=>vl});var w=$(5e3),m=$(4986),ie=$(8306),Fe=$(8996),z=$(9646),De=$(5813),Ve=$(4482),ke=$(5403);function Ge(){return(0,Ve.e)((o,e)=>{let t,l=!1;o.subscribe((0,ke.x)(e,h=>{const _=t;t=h,l&&e.next([_,h]),l=!0}))})}var le,pe=$(8675),ue=$(4004),Pe=$(5026),Tt=$(1884),Ke=$(9300),rt=$(2011),ht=$(9808),ot=($(9606),$(3942)),Oe=$(5861),Lt=$(9681),ct=$(4859),it=$(1877),Qe=$(2090),ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},It={},ut=ut||{},me=ze||self;function je(){}function He(o){var e=typeof o;return"array"==(e="object"!=e?e:o?Array.isArray(o)?"array":e:"null")||"object"==e&&"number"==typeof o.length}function tt(o){var e=typeof o;return"object"==e&&null!=o||"function"==e}var mt="closure_uid_"+(1e9*Math.random()>>>0),Le=0;function ft(o,e,t){return o.call.apply(o.bind,arguments)}function Ot(o,e,t){if(!o)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,l),o.apply(e,h)}}return function(){return o.apply(e,arguments)}}function lt(o,e,t){return(lt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ft:Ot).apply(null,arguments)}function dn(o,e){var t=Array.prototype.slice.call(arguments,1);return function(){var l=t.slice();return l.push.apply(l,arguments),o.apply(this,l)}}function Kt(o,e){function t(){}t.prototype=e.prototype,o.Z=e.prototype,o.prototype=new t,o.prototype.constructor=o,o.Vb=function(l,h,_){for(var C=Array(arguments.length-2),R=2;R<arguments.length;R++)C[R-2]=arguments[R];return e.prototype[h].apply(l,C)}}function qt(){this.s=this.s,this.o=this.o}var mn={};qt.prototype.s=!1,qt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var o=function Me(o){return Object.prototype.hasOwnProperty.call(o,mt)&&o[mt]||(o[mt]=++Le)}(this);delete mn[o]}},qt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wn=Array.prototype.indexOf?function(o,e){return Array.prototype.indexOf.call(o,e,void 0)}:function(o,e){if("string"==typeof o)return"string"!=typeof e||1!=e.length?-1:o.indexOf(e,0);for(let t=0;t<o.length;t++)if(t in o&&o[t]===e)return t;return-1},vn=Array.prototype.forEach?function(o,e,t){Array.prototype.forEach.call(o,e,t)}:function(o,e,t){const l=o.length,h="string"==typeof o?o.split(""):o;for(let _=0;_<l;_++)_ in h&&e.call(t,h[_],_,o)};function pr(o){return Array.prototype.concat.apply([],arguments)}function kr(o){const e=o.length;if(0<e){const t=Array(e);for(let l=0;l<e;l++)t[l]=o[l];return t}return[]}function wr(o){return/^[\s\xa0]*$/.test(o)}var Yn,ni=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function ar(o,e){return-1!=o.indexOf(e)}function Mr(o,e){return o<e?-1:o>e?1:0}e:{var on=me.navigator;if(on){var Vn=on.userAgent;if(Vn){Yn=Vn;break e}}Yn=""}function Rn(o,e,t){for(const l in o)e.call(t,o[l],l,o)}function hn(o){const e={};for(const t in o)e[t]=o[t];return e}var Zi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xr(o,e){let t,l;for(let h=1;h<arguments.length;h++){for(t in l=arguments[h],l)o[t]=l[t];for(let _=0;_<Zi.length;_++)t=Zi[_],Object.prototype.hasOwnProperty.call(l,t)&&(o[t]=l[t])}}function fi(o){return fi[" "](o),o}fi[" "]=je;var $n,o,Hi=ar(Yn,"Opera"),Lr=ar(Yn,"Trident")||ar(Yn,"MSIE"),Bt=ar(Yn,"Edge"),Xt=Bt||Lr,tn=ar(Yn,"Gecko")&&!(ar(Yn.toLowerCase(),"webkit")&&!ar(Yn,"Edge"))&&!(ar(Yn,"Trident")||ar(Yn,"MSIE"))&&!ar(Yn,"Edge"),li=ar(Yn.toLowerCase(),"webkit")&&!ar(Yn,"Edge");function pi(){var o=me.document;return o?o.documentMode:void 0}e:{var xs="",dr=(o=Yn,tn?/rv:([^\);]+)(\)|;)/.exec(o):Bt?/Edge\/([\d\.]+)/.exec(o):Lr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):li?/WebKit\/(\S+)/.exec(o):Hi?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(dr&&(xs=dr?dr[1]:""),Lr){var Tr=pi();if(null!=Tr&&Tr>parseFloat(xs)){$n=String(Tr);break e}}$n=xs}var ye={};var we=me.document&&Lr&&(pi()||parseInt($n,10))||void 0,$e=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var o=!1,e=Object.defineProperty({},"passive",{get:function(){o=!0}});try{me.addEventListener("test",je,e),me.removeEventListener("test",je,e)}catch(t){}return o}();function wt(o,e){this.type=o,this.g=this.target=e,this.defaultPrevented=!1}function Vt(o,e){if(wt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var t=this.type=o.type,l=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=e,e=o.relatedTarget){if(tn){e:{try{fi(e.nodeName);var h=!0;break e}catch(_){}h=!1}h||(e=null)}}else"mouseover"==t?e=o.fromElement:"mouseout"==t&&(e=o.toElement);this.relatedTarget=e,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:zt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Vt.Z.h.call(this)}}wt.prototype.h=function(){this.defaultPrevented=!0},Kt(Vt,wt);var zt={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.Z.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),Dr=0;function _n(o,e,t,l,h){this.listener=o,this.proxy=null,this.src=e,this.type=t,this.capture=!!l,this.ia=h,this.key=++Dr,this.ca=this.fa=!1}function xr(o){o.ca=!0,o.listener=null,o.proxy=null,o.src=null,o.ia=null}function ri(o){this.src=o,this.g={},this.h=0}function Ur(o,e){var t=e.type;if(t in o.g){var _,l=o.g[t],h=wn(l,e);(_=0<=h)&&Array.prototype.splice.call(l,h,1),_&&(xr(e),0==o.g[t].length&&(delete o.g[t],o.h--))}}function ui(o,e,t,l){for(var h=0;h<o.length;++h){var _=o[h];if(!_.ca&&_.listener==e&&_.capture==!!t&&_.ia==l)return h}return-1}ri.prototype.add=function(o,e,t,l,h){var _=o.toString();(o=this.g[_])||(o=this.g[_]=[],this.h++);var C=ui(o,e,l,h);return-1<C?(e=o[C],t||(e.fa=!1)):((e=new _n(e,this.src,_,!!l,h)).fa=t,o.push(e)),e};var Ii="closure_lm_"+(1e6*Math.random()|0),Tn={};function Vr(o,e,t,l,h){if(l&&l.once)return er(o,e,t,l,h);if(Array.isArray(e)){for(var _=0;_<e.length;_++)Vr(o,e[_],t,l,h);return null}return t=Kr(t),o&&o[an]?o.N(e,t,tt(l)?!!l.capture:!!l,h):hr(o,e,t,!1,l,h)}function hr(o,e,t,l,h,_){if(!e)throw Error("Invalid event type");var C=tt(h)?!!h.capture:!!h,R=mi(o);if(R||(o[Ii]=R=new ri(o)),(t=R.add(e,t,l,C,_)).proxy)return t;if(l=function Di(){var e=Xi;return function o(t){return e.call(o.src,o.listener,t)}}(),t.proxy=l,l.src=o,l.listener=t,o.addEventListener)$e||(h=C),void 0===h&&(h=!1),o.addEventListener(e.toString(),l,h);else if(o.attachEvent)o.attachEvent(Rs(e.toString()),l);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(l)}return t}function er(o,e,t,l,h){if(Array.isArray(e)){for(var _=0;_<e.length;_++)er(o,e[_],t,l,h);return null}return t=Kr(t),o&&o[an]?o.O(e,t,tt(l)?!!l.capture:!!l,h):hr(o,e,t,!0,l,h)}function gi(o,e,t,l,h){if(Array.isArray(e))for(var _=0;_<e.length;_++)gi(o,e[_],t,l,h);else l=tt(l)?!!l.capture:!!l,t=Kr(t),o&&o[an]?(o=o.i,(e=String(e).toString())in o.g&&-1<(t=ui(_=o.g[e],t,l,h))&&(xr(_[t]),Array.prototype.splice.call(_,t,1),0==_.length&&(delete o.g[e],o.h--))):o&&(o=mi(o))&&(e=o.g[e.toString()],o=-1,e&&(o=ui(e,t,l,h)),(t=-1<o?e[o]:null)&&$s(t))}function $s(o){if("number"!=typeof o&&o&&!o.ca){var e=o.src;if(e&&e[an])Ur(e.i,o);else{var t=o.type,l=o.proxy;e.removeEventListener?e.removeEventListener(t,l,o.capture):e.detachEvent?e.detachEvent(Rs(t),l):e.addListener&&e.removeListener&&e.removeListener(l),(t=mi(e))?(Ur(t,o),0==t.h&&(t.src=null,e[Ii]=null)):xr(o)}}}function Rs(o){return o in Tn?Tn[o]:Tn[o]="on"+o}function Xi(o,e){if(o.ca)o=!0;else{e=new Vt(e,this);var t=o.listener,l=o.ia||o.src;o.fa&&$s(o),o=t.call(l,e)}return o}function mi(o){return(o=o[Ii])instanceof ri?o:null}var tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kr(o){return"function"==typeof o?o:(o[tr]||(o[tr]=function(e){return o.handleEvent(e)}),o[tr])}function qn(){qt.call(this),this.i=new ri(this),this.P=this,this.I=null}function Mt(o,e){var t,l=o.I;if(l)for(t=[];l;l=l.I)t.push(l);if(o=o.P,l=e.type||e,"string"==typeof e)e=new wt(e,o);else if(e instanceof wt)e.target=e.target||o;else{var h=e;Xr(e=new wt(l,o),h)}if(h=!0,t)for(var _=t.length-1;0<=_;_--){var C=e.g=t[_];h=Yt(C,l,!0,e)&&h}if(h=Yt(C=e.g=o,l,!0,e)&&h,h=Yt(C,l,!1,e)&&h,t)for(_=0;_<t.length;_++)h=Yt(C=e.g=t[_],l,!1,e)&&h}function Yt(o,e,t,l){if(!(e=o.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,_=0;_<e.length;++_){var C=e[_];if(C&&!C.ca&&C.capture==t){var R=C.listener,Y=C.ia||C.src;C.fa&&Ur(o.i,C),h=!1!==R.call(Y,l)&&h}}return h&&!l.defaultPrevented}Kt(qn,qt),qn.prototype[an]=!0,qn.prototype.removeEventListener=function(o,e,t,l){gi(this,o,e,t,l)},qn.prototype.M=function(){if(qn.Z.M.call(this),this.i){var e,o=this.i;for(e in o.g){for(var t=o.g[e],l=0;l<t.length;l++)xr(t[l]);delete o.g[e],o.h--}}this.I=null},qn.prototype.N=function(o,e,t,l){return this.i.add(String(o),e,!1,t,l)},qn.prototype.O=function(o,e,t,l){return this.i.add(String(o),e,!0,t,l)};var On=me.JSON.stringify;function Br(){var o=vs;let e=null;return o.g&&(e=o.g,o.g=o.g.next,o.g||(o.h=null),e.next=null),e}var Rr,jr=new class{constructor(o,e){this.i=o,this.j=e,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}(()=>new Ki,o=>o.reset());class Ki{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gr(o){me.setTimeout(()=>{throw o},0)}function $i(o,e){Rr||function Mn(){var o=me.Promise.resolve(void 0);Rr=function(){o.then(Ns)}}(),Yi||(Rr(),Yi=!0),vs.add(o,e)}var Yi=!1,vs=new class es{constructor(){this.h=this.g=null}add(e,t){const l=jr.get();l.set(e,t),this.h?this.h.next=l:this.g=l,this.h=l}};function Ns(){for(var o;o=Br();){try{o.h.call(o.g)}catch(t){gr(t)}var e=jr;e.j(o),100>e.h&&(e.h++,o.next=e.g,e.g=o)}Yi=!1}function _i(o,e){qn.call(this),this.h=o||1,this.g=e||me,this.j=lt(this.kb,this),this.l=Date.now()}function Wr(o){o.da=!1,o.S&&(o.g.clearTimeout(o.S),o.S=null)}function ei(o,e,t){if("function"==typeof o)t&&(o=lt(o,t));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=lt(o.handleEvent,o)}return 2147483647<Number(e)?-1:me.setTimeout(o,e||0)}function ii(o){o.g=ei(()=>{o.g=null,o.i&&(o.i=!1,ii(o))},o.j);const e=o.h;o.h=null,o.m.apply(null,e)}Kt(_i,qn),(le=_i.prototype).da=!1,le.S=null,le.kb=function(){if(this.da){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-o):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Mt(this,"tick"),this.da&&(Wr(this),this.start()))}},le.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},le.M=function(){_i.Z.M.call(this),Wr(this),delete this.g};class Yr extends qt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ii(this)}M(){super.M(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nr(o){qt.call(this),this.h=o,this.g={}}Kt(nr,qt);var Qr=[];function Si(o,e,t,l){Array.isArray(t)||(t&&(Qr[0]=t.toString()),t=Qr);for(var h=0;h<t.length;h++){var _=Vr(e,t[h],l||o.handleEvent,!1,o.h||o);if(!_)break;o.g[_.key]=_}}function ci(o){Rn(o.g,function(e,t){this.g.hasOwnProperty(t)&&$s(e)},o),o.g={}}function di(){this.g=!0}function Pi(o,e,t,l){o.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Es(o,e){if(!o.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(o=0;o<t.length;o++)if(Array.isArray(t[o])){var l=t[o];if(!(2>l.length)){var h=l[1];if(Array.isArray(h)&&!(1>h.length)){var _=h[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var C=1;C<h.length;C++)h[C]=""}}}return On(t)}catch(R){return e}}(o,t)+(l?" "+l:"")})}nr.prototype.M=function(){nr.Z.M.call(this),ci(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},di.prototype.Aa=function(){this.g=!1},di.prototype.info=function(){};var Gs={},Qo=null;function zr(){return Qo=Qo||new qn}function cs(o){wt.call(this,Gs.Ma,o)}function ts(o){const e=zr();Mt(e,new cs(e,o))}function Be(o,e){wt.call(this,Gs.STAT_EVENT,o),this.stat=e}function be(o){const e=zr();Mt(e,new Be(e,o))}function Je(o,e){wt.call(this,Gs.Na,o),this.size=e}function bt(o,e){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){o()},e)}Gs.Ma="serverreachability",Kt(cs,wt),Gs.STAT_EVENT="statevent",Kt(Be,wt),Gs.Na="timingevent",Kt(Je,wt);var Pt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function mr(){}function rr(){}mr.prototype.h=null;var ko,ns={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function wo(){wt.call(this,"d")}function Oi(){wt.call(this,"c")}function ws(){}function qs(o,e,t,l){this.l=o,this.j=e,this.m=t,this.X=l||1,this.V=new nr(this),this.P=fa,this.W=new _i(o=Xt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Jo}function Jo(){this.i=null,this.g="",this.h=!1}Kt(wo,wt),Kt(Oi,wt),Kt(ws,mr),ws.prototype.g=function(){return new XMLHttpRequest},ws.prototype.i=function(){return{}},ko=new ws;var fa=45e3,si={},bs={};function Cs(o,e,t){o.K=1,o.v=st(ir(e)),o.s=t,o.U=!0,Ps(o,null)}function Ps(o,e){o.F=Date.now(),yi(o),o.A=ir(o.v);var t=o.A,l=o.X;Array.isArray(l)||(l=[String(l)]),po(t.h,"t",l),o.C=0,t=o.l.H,o.h=new Jo,o.g=Ku(o.l,t?e:null,!o.s),0<o.O&&(o.L=new Yr(lt(o.Ia,o,o.g),o.O)),Si(o.V,o.g,"readystatechange",o.gb),e=o.H?hn(o.H):{},o.s?(o.u||(o.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.s,e)):(o.u="GET",o.g.ea(o.A,o.u,null,e)),ts(1),function no(o,e,t,l,h,_){o.info(function(){if(o.g)if(_)for(var C="",R=_.split("&"),Y=0;Y<R.length;Y++){var J=R[Y].split("=");if(1<J.length){var ge=J[0];J=J[1];var Re=ge.split("_");C=2<=Re.length&&"type"==Re[1]?C+(ge+"=")+J+"&":C+(ge+"=redacted&")}}else C=null;else C=_;return"XMLHTTP REQ ("+l+") [attempt "+h+"]: "+e+"\n"+t+"\n"+C})}(o.j,o.u,o.A,o.m,o.X,o.s)}function Fo(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Ba}function Os(o,e,t){let h,l=!0;for(;!o.I&&o.C<t.length;){if(h=ba(o,t),h==bs){4==e&&(o.o=4,be(14),l=!1),Pi(o.j,o.m,null,"[Incomplete Response]");break}if(h==si){o.o=4,be(15),Pi(o.j,o.m,t,"[Invalid Chunk]"),l=!1;break}Pi(o.j,o.m,h,null),Ws(o,h)}Fo(o)&&h!=bs&&h!=si&&(o.h.g="",o.C=0),4!=e||0!=t.length||o.h.h||(o.o=1,be(16),l=!1),o.i=o.i&&l,l?0<t.length&&!o.aa&&(o.aa=!0,(e=o.l).g==o&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),na(e),e.L=!0,be(11))):(Pi(o.j,o.m,t,"[Invalid Chunked Response]"),vi(o),Co(o))}function ba(o,e){var t=o.C,l=e.indexOf("\n",t);return-1==l?bs:(t=Number(e.substring(t,l)),isNaN(t)?si:(l+=1)+t>e.length?bs:(e=e.substr(l,t),o.C=l+t,e))}function yi(o){o.Y=Date.now()+o.P,bo(o,o.P)}function bo(o,e){if(null!=o.B)throw Error("WatchDog timer not null");o.B=bt(lt(o.eb,o),e)}function Gi(o){o.B&&(me.clearTimeout(o.B),o.B=null)}function Co(o){0==o.l.G||o.I||hu(o.l,o)}function vi(o){Gi(o);var e=o.L;e&&"function"==typeof e.na&&e.na(),o.L=null,Wr(o.W),ci(o.V),o.g&&(e=o.g,o.g=null,e.abort(),e.na())}function Ws(o,e){try{var t=o.l;if(0!=t.G&&(t.g==o||W(t.i,o)))if(t.I=o.N,!o.J&&W(t.i,o)&&3==t.G){try{var l=t.Ca.g.parse(e)}catch(J){l=null}if(Array.isArray(l)&&3==l.length){var h=l;if(0==h[0])e:if(t.u)t.ta=h[1],0<t.ta-t.U&&37500>h[2]&&t.N&&0==t.A&&!t.v&&(t.v=bt(lt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<o.F))break e;sr(t),Is(t)}Ks(t),be(18)}if(1>=Dt(t.i)&&t.ka){try{t.ka()}catch(J){}t.ka=void 0}}else ce(t,11)}else if((o.J||t.g==o)&&sr(t),!wr(e))for(h=t.Ca.g.parse(e),e=0;e<h.length;e++){let J=h[e];if(t.U=J[0],J=J[1],2==t.G)if("c"==J[0]){t.J=J[1],t.la=J[2];const ge=J[3];null!=ge&&(t.ma=ge,t.h.info("VER="+t.ma));const Re=J[4];null!=Re&&(t.za=Re,t.h.info("SVER="+t.za));const at=J[5];null!=at&&"number"==typeof at&&0<at&&(t.K=l=1.5*at,t.h.info("backChannelRequestTimeoutMs_="+l)),l=t;const At=o.g;if(At){const Nt=At.g?At.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nt){var _=l.i;!_.g&&(ar(Nt,"spdy")||ar(Nt,"quic")||ar(Nt,"h2"))&&(_.j=_.l,_.g=new Set,_.h&&(j(_,_.h),_.h=null))}if(l.D){const pn=At.g?At.g.getResponseHeader("X-HTTP-Session-Id"):null;pn&&(l.sa=pn,ve(l.F,l.D,pn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-o.F,t.h.info("Handshake RTT: "+t.O+"ms"));var C=o;if((l=t).oa=Bo(l,l.H?l.la:null,l.W),C.J){ne(l.i,C);var R=C,Y=l.K;Y&&R.setTimeout(Y),R.B&&(Gi(R),yi(R)),l.g=C}else hd(l);0<t.l.length&&ll(t)}else"stop"!=J[0]&&"close"!=J[0]||ce(t,7);else 3==t.G&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?ce(t,7):Ga(t):"noop"!=J[0]&&t.j&&t.j.wa(J),t.A=0)}ts(4)}catch(J){}}function Lo(o,e){if(o.forEach&&"function"==typeof o.forEach)o.forEach(e,void 0);else if(He(o)||"string"==typeof o)vn(o,e,void 0);else{if(o.T&&"function"==typeof o.T)var t=o.T();else if(o.R&&"function"==typeof o.R)t=void 0;else if(He(o)||"string"==typeof o){t=[];for(var l=o.length,h=0;h<l;h++)t.push(h)}else for(h in t=[],l=0,o)t[l++]=h;l=function Ai(o){if(o.R&&"function"==typeof o.R)return o.R();if("string"==typeof o)return o.split("");if(He(o)){for(var e=[],t=o.length,l=0;l<t;l++)e.push(o[l]);return e}for(l in e=[],t=0,o)e[t++]=o[l];return e}(o),h=l.length;for(var _=0;_<h;_++)e.call(void 0,l[_],t&&t[_],o)}}function Ts(o,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var l=0;l<t;l+=2)this.set(arguments[l],arguments[l+1])}else if(o)if(o instanceof Ts)for(t=o.T(),l=0;l<t.length;l++)this.set(t[l],o.get(t[l]));else for(l in o)this.set(l,o[l])}function To(o){if(o.i!=o.g.length){for(var e=0,t=0;e<o.g.length;){var l=o.g[e];rs(o.h,l)&&(o.g[t++]=l),e++}o.g.length=t}if(o.i!=o.g.length){var h={};for(t=e=0;e<o.g.length;)rs(h,l=o.g[e])||(o.g[t++]=l,h[l]=1),e++;o.g.length=t}}function rs(o,e){return Object.prototype.hasOwnProperty.call(o,e)}(le=qs.prototype).setTimeout=function(o){this.P=o},le.gb=function(o){o=o.target;const e=this.L;e&&3==Ta(o)?e.l():this.Ia(o)},le.Ia=function(o){try{if(o==this.g)e:{const ge=Ta(this.g);var e=this.g.Da();const Re=this.g.ba();if(!(3>ge)&&(3!=ge||Xt||this.g&&(this.h.h||this.g.ga()||al(this.g)))){this.I||4!=ge||7==e||ts(8==e||0>=Re?3:2),Gi(this);var t=this.g.ba();this.N=t;t:if(Fo(this)){var l=al(this.g);o="";var h=l.length,_=4==Ta(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vi(this),Co(this);var C="";break t}this.h.i=new me.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,o+=this.h.i.decode(l[e],{stream:_&&e==h-1});l.splice(0,h),this.h.g+=o,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==t,function ha(o,e,t,l,h,_,C){o.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+_+" "+C})}(this.j,this.u,this.A,this.m,this.X,ge,t),this.i){if(this.$&&!this.J){t:{if(this.g){var R,Y=this.g;if((R=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wr(R)){var J=R;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,be(12),vi(this),Co(this);break e}Pi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ws(this,t)}this.U?(Os(this,ge,C),Xt&&this.i&&3==ge&&(Si(this.V,this.W,"tick",this.fb),this.W.start())):(Pi(this.j,this.m,C,null),Ws(this,C)),4==ge&&vi(this),this.i&&!this.I&&(4==ge?hu(this.l,this):(this.i=!1,yi(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,be(12)):(this.o=0,be(13)),vi(this),Co(this)}}}catch(ge){}},le.fb=function(){if(this.g){var o=Ta(this.g),e=this.g.ga();this.C<e.length&&(Gi(this),Os(this,o,e),this.i&&4!=o&&yi(this))}},le.cancel=function(){this.I=!0,vi(this)},le.eb=function(){this.B=null;const o=Date.now();0<=o-this.Y?(function Hr(o,e){o.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ts(3),be(17)),vi(this),this.o=2,Co(this)):bo(this,this.Y-o)},(le=Ts.prototype).R=function(){To(this);for(var o=[],e=0;e<this.g.length;e++)o.push(this.h[this.g[e]]);return o},le.T=function(){return To(this),this.g.concat()},le.get=function(o,e){return rs(this.h,o)?this.h[o]:e},le.set=function(o,e){rs(this.h,o)||(this.i++,this.g.push(o)),this.h[o]=e},le.forEach=function(o,e){for(var t=this.T(),l=0;l<t.length;l++){var h=t[l],_=this.get(h);o.call(e,_,h,this)}};var ks=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fo(o,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,o instanceof fo){this.g=void 0!==e?e:o.g,B(this,o.j),this.s=o.s,X(this,o.i),V(this,o.m),this.l=o.l,e=o.h;var t=new qi;t.i=e.i,e.g&&(t.g=new Ts(e.g),t.h=e.h),ae(this,t),this.o=o.o}else o&&(t=String(o).match(ks))?(this.g=!!e,B(this,t[1]||"",!0),this.s=ln(t[2]||""),X(this,t[3]||"",!0),V(this,t[4]),this.l=ln(t[5]||"",!0),ae(this,t[6]||"",!0),this.o=ln(t[7]||"")):(this.g=!!e,this.h=new qi(null,this.g))}function ir(o){return new fo(o)}function B(o,e,t){o.j=t?ln(e,!0):e,o.j&&(o.j=o.j.replace(/:$/,""))}function X(o,e,t){o.i=t?ln(e,!0):e}function V(o,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);o.m=e}else o.m=null}function ae(o,e,t){e instanceof qi?(o.h=e,function G(o,e){e&&!o.j&&(un(o),o.i=null,o.g.forEach(function(t,l){var h=l.toLowerCase();l!=h&&(Wi(this,l),po(this,h,t))},o)),o.j=e}(o.h,o.g)):(t||(e=Kn(e,Gr)),o.h=new qi(e,o.g))}function ve(o,e,t){o.h.set(e,t)}function st(o){return ve(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ln(o,e){return o?e?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Kn(o,e,t){return"string"==typeof o?(o=encodeURI(o).replace(e,kn),t&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function kn(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}fo.prototype.toString=function(){var o=[],e=this.j;e&&o.push(Kn(e,Wn,!0),":");var t=this.i;return(t||"file"==e)&&(o.push("//"),(e=this.s)&&o.push(Kn(e,Wn,!0),"@"),o.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&o.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&o.push("/"),o.push(Kn(t,"/"==t.charAt(0)?br:Jr,!0))),(t=this.h.toString())&&o.push("?",t),(t=this.o)&&o.push("#",Kn(t,Ei)),o.join("")};var Wn=/[#\/\?@]/g,Jr=/[#\?:]/g,br=/[#\?]/g,Gr=/[#\?@]/g,Ei=/#/g;function qi(o,e){this.h=this.g=null,this.i=o||null,this.j=!!e}function un(o){o.g||(o.g=new Ts,o.h=0,o.i&&function zs(o,e){if(o){o=o.split("&");for(var t=0;t<o.length;t++){var l=o[t].indexOf("="),h=null;if(0<=l){var _=o[t].substring(0,l);h=o[t].substring(l+1)}else _=o[t];e(_,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(o.i,function(e,t){o.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Wi(o,e){un(o),e=ro(o,e),rs(o.g.h,e)&&(o.i=null,o.h-=o.g.get(e).length,rs((o=o.g).h,e)&&(delete o.h[e],o.i--,o.g.length>2*o.i&&To(o)))}function Xo(o,e){return un(o),e=ro(o,e),rs(o.g.h,e)}function po(o,e,t){Wi(o,e),0<t.length&&(o.i=null,o.g.set(ro(o,e),kr(t)),o.h+=t.length)}function ro(o,e){return e=String(e),o.j&&(e=e.toLowerCase()),e}function k(o){this.l=o||re,o=me.PerformanceNavigationTiming?0<(o=me.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(me.g&&me.g.Ea&&me.g.Ea()&&me.g.Ea().Zb),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(le=qi.prototype).add=function(o,e){un(this),this.i=null,o=ro(this,o);var t=this.g.get(o);return t||this.g.set(o,t=[]),t.push(e),this.h+=1,this},le.forEach=function(o,e){un(this),this.g.forEach(function(t,l){vn(t,function(h){o.call(e,h,l,this)},this)},this)},le.T=function(){un(this);for(var o=this.g.R(),e=this.g.T(),t=[],l=0;l<e.length;l++)for(var h=o[l],_=0;_<h.length;_++)t.push(e[l]);return t},le.R=function(o){un(this);var e=[];if("string"==typeof o)Xo(this,o)&&(e=pr(e,this.g.get(ro(this,o))));else{o=this.g.R();for(var t=0;t<o.length;t++)e=pr(e,o[t])}return e},le.set=function(o,e){return un(this),this.i=null,Xo(this,o=ro(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[e]),this.h+=1,this},le.get=function(o,e){return o&&0<(o=this.R(o)).length?String(o[0]):e},le.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var o=[],e=this.g.T(),t=0;t<e.length;t++){var l=e[t],h=encodeURIComponent(String(l));l=this.R(l);for(var _=0;_<l.length;_++){var C=h;""!==l[_]&&(C+="="+encodeURIComponent(String(l[_]))),o.push(C)}}return this.i=o.join("&")};var re=10;function Ee(o){return!!o.h||!!o.g&&o.g.size>=o.j}function Dt(o){return o.h?1:o.g?o.g.size:0}function W(o,e){return o.h?o.h==e:!!o.g&&o.g.has(e)}function j(o,e){o.g?o.g.add(e):o.h=e}function ne(o,e){o.h&&o.h==e?o.h=null:o.g&&o.g.has(e)&&o.g.delete(e)}function de(o){if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){let e=o.i;for(const t of o.g.values())e=e.concat(t.D);return e}return kr(o.i)}function Ce(){}function et(){this.g=new Ce}function St(o,e,t){const l=t||"";try{Lo(o,function(h,_){let C=h;tt(h)&&(C=On(h)),e.push(l+_+"="+encodeURIComponent(C))})}catch(h){throw e.push(l+"type="+encodeURIComponent("_badmap")),h}}function Wt(o,e,t,l,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(l)}catch(_){}}function Fn(o){this.l=o.$b||null,this.j=o.ib||!1}function Un(o,e){qn.call(this),this.D=o,this.u=e,this.m=void 0,this.readyState=lr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}k.prototype.cancel=function(){if(this.i=de(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const o of this.g.values())o.cancel();this.g.clear()}},Ce.prototype.stringify=function(o){return me.JSON.stringify(o,void 0)},Ce.prototype.parse=function(o){return me.JSON.parse(o,void 0)},Kt(Fn,mr),Fn.prototype.g=function(){return new Un(this.l,this.j)},Fn.prototype.i=function(o){return function(){return o}}({}),Kt(Un,qn);var lr=0;function _r(o){o.j.read().then(o.Sa.bind(o)).catch(o.ha.bind(o))}function oi(o){o.readyState=4,o.l=null,o.j=null,o.A=null,Nr(o)}function Nr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(le=Un.prototype).open=function(o,e){if(this.readyState!=lr)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=e,this.readyState=1,Nr(this)},le.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(e.body=o),(this.D||me).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,oi(this)),this.readyState=lr},le.Va=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==me.ReadableStream&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_r(this)}else o.text().then(this.Ua.bind(this),this.ha.bind(this))},le.Sa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var e=o.value?o.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!o.done}))&&(this.response=this.responseText+=e)}o.done?oi(this):Nr(this),3==this.readyState&&_r(this)}},le.Ua=function(o){this.g&&(this.response=this.responseText=o,oi(this))},le.Ta=function(o){this.g&&(this.response=o,oi(this))},le.ha=function(){this.g&&oi(this)},le.setRequestHeader=function(o,e){this.v.append(o,e)},le.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},le.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],e=this.h.entries();for(var t=e.next();!t.done;)o.push((t=t.value)[0]+": "+t[1]),t=e.next();return o.join("\r\n")},Object.defineProperty(Un.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var wi=me.JSON.parse;function Gn(o){qn.call(this),this.headers=new Ts,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Fs,this.K=this.L=!1}Kt(Gn,qn);var Fs="",Zs=/^https?$/i,Qi=["POST","PUT"];function io(o){return"content-type"==o.toLowerCase()}function ea(o,e){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=e,o.m=5,$a(o),Uo(o)}function $a(o){o.D||(o.D=!0,Mt(o,"complete"),Mt(o,"error"))}function pa(o){if(o.h&&void 0!==ut&&(!o.C[1]||4!=Ta(o)||2!=o.ba()))if(o.v&&4==Ta(o))ei(o.Fa,0,o);else if(Mt(o,"readystatechange"),4==Ta(o)){o.h=!1;try{const R=o.ba();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var l;if(l=0===R){var h=String(o.H).match(ks)[1]||null;if(!h&&me.self&&me.self.location){var _=me.self.location.protocol;h=_.substr(0,_.length-1)}l=!Zs.test(h?h.toLowerCase():"")}t=l}if(t)Mt(o,"complete"),Mt(o,"success");else{o.m=6;try{var C=2<Ta(o)?o.g.statusText:""}catch(Y){C=""}o.j=C+" ["+o.ba()+"]",$a(o)}}finally{Uo(o)}}}function Uo(o,e){if(o.g){Ca(o);const t=o.g,l=o.C[0]?je:null;o.g=null,o.C=null,e||Mt(o,"ready");try{t.onreadystatechange=l}catch(h){}}}function Ca(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(me.clearTimeout(o.A),o.A=null)}function Ta(o){return o.g?o.g.readyState:0}function al(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case Fs:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch(e){return null}}function El(o,e,t){e:{for(l in t){var l=!1;break e}l=!0}l||(t=function Zu(o){let e="";return Rn(o,function(t,l){e+=l,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof o?null!=t&&encodeURIComponent(String(t)):ve(o,e,t))}function ta(o,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[o]||e}function vc(o){this.za=0,this.l=[],this.h=new di,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ta("failFast",!1,o),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ta("baseRetryDelayMs",5e3,o),this.$a=ta("retryDelaySeedMs",1e4,o),this.Ya=ta("forwardChannelMaxRetries",2,o),this.ra=ta("forwardChannelRequestTimeoutMs",2e4,o),this.qa=o&&o.xmlHttpFactory||void 0,this.Ba=o&&o.Yb||!1,this.K=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.J="",this.i=new k(o&&o.concurrentRequestLimit),this.Ca=new et,this.ja=o&&o.fastHandshake||!1,this.Ra=o&&o.Wb||!1,o&&o.Aa&&this.h.Aa(),o&&o.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&o&&o.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!o||!1!==o.Xb}function Ga(o){if(qa(o),3==o.G){var e=o.V++,t=ir(o.F);ve(t,"SID",o.J),ve(t,"RID",e),ve(t,"TYPE","terminate"),ul(o,t),(e=new qs(o,o.h,e,void 0)).K=2,e.v=st(ir(t)),t=!1,me.navigator&&me.navigator.sendBeacon&&(t=me.navigator.sendBeacon(e.v.toString(),"")),!t&&me.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ku(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yi(e)}Vo(o)}function Is(o){o.g&&(na(o),o.g.cancel(),o.g=null)}function qa(o){Is(o),o.u&&(me.clearTimeout(o.u),o.u=null),sr(o),o.i.cancel(),o.m&&("number"==typeof o.m&&me.clearTimeout(o.m),o.m=null)}function Mi(o,e){o.l.push(new class{constructor(o,e){this.h=o,this.g=e}}(o.Za++,e)),3==o.G&&ll(o)}function ll(o){Ee(o.i)||o.m||(o.m=!0,$i(o.Ha,o),o.C=0)}function Jd(o,e){var t;t=e?e.m:o.V++;const l=ir(o.F);ve(l,"SID",o.J),ve(l,"RID",t),ve(l,"AID",o.U),ul(o,l),o.o&&o.s&&El(l,o.o,o.s),t=new qs(o,o.h,t,o.C+1),null===o.o&&(t.H=o.s),e&&(o.l=e.D.concat(o.l)),e=dd(o,t,1e3),t.setTimeout(Math.round(.5*o.ra)+Math.round(.5*o.ra*Math.random())),j(o.i,t),Cs(t,l,e)}function ul(o,e){o.j&&Lo({},function(t,l){ve(e,l,t)})}function dd(o,e,t){t=Math.min(o.l.length,t);var l=o.j?lt(o.j.Oa,o.j,o):null;e:{var h=o.l;let _=-1;for(;;){const C=["count="+t];-1==_?0<t?(_=h[0].h,C.push("ofs="+_)):_=0:C.push("ofs="+_);let R=!0;for(let Y=0;Y<t;Y++){let J=h[Y].h;const ge=h[Y].g;if(J-=_,0>J)_=Math.max(0,h[Y].h-100),R=!1;else try{St(ge,C,"req"+J+"_")}catch(Re){l&&l(ge)}}if(R){l=C.join("&");break e}}}return o=o.l.splice(0,t),e.D=o,l}function hd(o){o.g||o.u||(o.Y=1,$i(o.Ga,o),o.A=0)}function Ks(o){return!(o.g||o.u||3<=o.A||(o.Y++,o.u=bt(lt(o.Ga,o),wl(o,o.A)),o.A++,0))}function na(o){null!=o.B&&(me.clearTimeout(o.B),o.B=null)}function Wa(o){o.g=new qs(o,o.h,"rpc",o.Y),null===o.o&&(o.g.H=o.s),o.g.O=0;var e=ir(o.oa);ve(e,"RID","rpc"),ve(e,"SID",o.J),ve(e,"CI",o.N?"0":"1"),ve(e,"AID",o.U),ul(o,e),ve(e,"TYPE","xmlhttp"),o.o&&o.s&&El(e,o.o,o.s),o.K&&o.g.setTimeout(o.K);var t=o.g;o=o.la,t.K=1,t.v=st(ir(e)),t.s=null,t.U=!0,Ps(t,o)}function sr(o){null!=o.v&&(me.clearTimeout(o.v),o.v=null)}function hu(o,e){var t=null;if(o.g==e){sr(o),na(o),o.g=null;var l=2}else{if(!W(o.i,e))return;t=e.D,ne(o.i,e),l=1}if(o.I=e.N,0!=o.G)if(e.i)if(1==l){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=o.C;Mt(l=zr(),new Je(l,t,e,h)),ll(o)}else hd(o);else if(3==(h=e.o)||0==h&&0<o.I||!(1==l&&function Qd(o,e){return!(Dt(o.i)>=o.i.j-(o.m?1:0)||(o.m?(o.l=e.D.concat(o.l),0):1==o.G||2==o.G||o.C>=(o.Xa?0:o.Ya)||(o.m=bt(lt(o.Ha,o,e),wl(o,o.C)),o.C++,0)))}(o,e)||2==l&&Ks(o)))switch(t&&0<t.length&&(e=o.i,e.i=e.i.concat(t)),h){case 1:ce(o,5);break;case 4:ce(o,10);break;case 3:ce(o,6);break;default:ce(o,2)}}function wl(o,e){let t=o.Pa+Math.floor(Math.random()*o.$a);return o.j||(t*=2),t*e}function ce(o,e){if(o.h.info("Error code "+e),2==e){var t=null;o.j&&(t=null);var l=lt(o.jb,o);t||(t=new fo("//www.google.com/images/cleardot.gif"),me.location&&"http"==me.location.protocol||B(t,"https"),st(t)),function nn(o,e){const t=new di;if(me.Image){const l=new Image;l.onload=dn(Wt,t,l,"TestLoadImage: loaded",!0,e),l.onerror=dn(Wt,t,l,"TestLoadImage: error",!1,e),l.onabort=dn(Wt,t,l,"TestLoadImage: abort",!1,e),l.ontimeout=dn(Wt,t,l,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=o}else e(!1)}(t.toString(),l)}else be(2);o.G=0,o.j&&o.j.va(e),Vo(o),qa(o)}function Vo(o){o.G=0,o.I=-1,o.j&&((0!=de(o.i).length||0!=o.l.length)&&(o.i.i.length=0,kr(o.l),o.l.length=0),o.j.ua())}function Bo(o,e,t){let l=function vt(o){return o instanceof fo?ir(o):new fo(o,void 0)}(t);if(""!=l.i)e&&X(l,e+"."+l.i),V(l,l.m);else{const h=me.location;l=function en(o,e,t,l){var h=new fo(null,void 0);return o&&B(h,o),e&&X(h,e),t&&V(h,t),l&&(h.l=l),h}(h.protocol,e?e+"."+h.hostname:h.hostname,+h.port,t)}return o.aa&&Rn(o.aa,function(h,_){ve(l,_,h)}),t=o.sa,(e=o.D)&&t&&ve(l,e,t),ve(l,"VER",o.ma),ul(o,l),l}function Ku(o,e,t){if(e&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gn(t&&o.Ba&&!o.qa?new Fn({ib:!0}):o.qa)).L=o.H,e}function Io(){}function Ia(){if(Lr&&!(10<=Number(we)))throw Error("Environmental error: no available transport.")}function Do(o,e){qn.call(this),this.g=new vc(e),this.l=o,this.h=e&&e.messageUrlParams||null,o=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(o?o["X-WebChannel-Content-Type"]=e.messageContentType:o={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(o?o["X-WebChannel-Client-Profile"]=e.ya:o={"X-WebChannel-Client-Profile":e.ya}),this.g.P=o,(o=e&&e.httpHeadersOverwriteParam)&&!wr(o)&&(this.g.o=o),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wr(e)&&(this.g.D=e,null!==(o=this.h)&&e in o&&e in(o=this.h)&&delete o[e]),this.j=new xi(this)}function Yu(o){wo.call(this);var e=o.__sm__;if(e){e:{for(const t in e){o=t;break e}o=void 0}(this.i=o)&&(o=this.i,e=null!==e&&o in e?e[o]:void 0),this.data=e}else this.data=o}function Qu(){Oi.call(this),this.status=1}function xi(o){this.g=o}(le=Gn.prototype).ea=function(o,e,t,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);e=e?e.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ko.g(),this.C=function $r(o){return o.h||(o.h=o.i())}(this.u?this.u:ko),this.g.onreadystatechange=lt(this.Fa,this);try{this.F=!0,this.g.open(e,String(o),!0),this.F=!1}catch(_){return void ea(this,_)}o=t||"";const h=new Ts(this.headers);l&&Lo(l,function(_,C){h.set(C,_)}),l=function Ln(o){e:{var e=io;const t=o.length,l="string"==typeof o?o.split(""):o;for(let h=0;h<t;h++)if(h in l&&e.call(void 0,l[h],h,o)){e=h;break e}e=-1}return 0>e?null:"string"==typeof o?o.charAt(e):o[e]}(h.T()),t=me.FormData&&o instanceof me.FormData,!(0<=wn(Qi,e))||l||t||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(_,C){this.g.setRequestHeader(C,_)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ca(this),0<this.B&&((this.K=function ki(o){return Lr&&function Se(){return function Fr(o){var e=ye;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=o(9)}(function(){let o=0;const e=ni(String($n)).split("."),t=ni("9").split("."),l=Math.max(e.length,t.length);for(let C=0;0==o&&C<l;C++){var h=e[C]||"",_=t[C]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==h[0].length&&0==_[0].length)break;o=Mr(0==h[1].length?0:parseInt(h[1],10),0==_[1].length?0:parseInt(_[1],10))||Mr(0==h[2].length,0==_[2].length)||Mr(h[2],_[2]),h=h[3],_=_[3]}while(0==o)}return 0<=o})}()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lt(this.pa,this)):this.A=ei(this.pa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(_){ea(this,_)}},le.pa=function(){void 0!==ut&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mt(this,"timeout"),this.abort(8))},le.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,Mt(this,"complete"),Mt(this,"abort"),Uo(this))},le.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Uo(this,!0)),Gn.Z.M.call(this)},le.Fa=function(){this.s||(this.F||this.v||this.l?pa(this):this.cb())},le.cb=function(){pa(this)},le.ba=function(){try{return 2<Ta(this)?this.g.status:-1}catch(o){return-1}},le.ga=function(){try{return this.g?this.g.responseText:""}catch(o){return""}},le.Qa=function(o){if(this.g){var e=this.g.responseText;return o&&0==e.indexOf(o)&&(e=e.substring(o.length)),wi(e)}},le.Da=function(){return this.m},le.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(le=vc.prototype).ma=8,le.G=1,le.hb=function(o){try{this.h.info("Origin Trials invoked: "+o)}catch(e){}},le.Ha=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.V=Math.floor(1e5*Math.random()),o=this.V++;const h=new qs(this,this.h,o,void 0);let _=this.s;if(this.P&&(_?(_=hn(_),Xr(_,this.P)):_=this.P),null===this.o&&(h.H=_),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var l=this.l[t];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(e+=l)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=dd(this,h,e),ve(t=ir(this.F),"RID",o),ve(t,"CVER",22),this.D&&ve(t,"X-HTTP-Session-Id",this.D),ul(this,t),this.o&&_&&El(t,this.o,_),j(this.i,h),this.Ra&&ve(t,"TYPE","init"),this.ja?(ve(t,"$req",e),ve(t,"SID","null"),h.$=!0,Cs(h,t,null)):Cs(h,t,e),this.G=2}}else 3==this.G&&(o?Jd(this,o):0==this.l.length||Ee(this.i)||Jd(this))},le.Ga=function(){if(this.u=null,Wa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var o=2*this.O;this.h.info("BP detection timer enabled: "+o),this.B=bt(lt(this.bb,this),o)}},le.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,be(10),Is(this),Wa(this))},le.ab=function(){null!=this.v&&(this.v=null,Is(this),Ks(this),be(19))},le.jb=function(o){o?(this.h.info("Successfully pinged google.com"),be(2)):(this.h.info("Failed to ping google.com"),be(1))},(le=Io.prototype).xa=function(){},le.wa=function(){},le.va=function(){},le.ua=function(){},le.Oa=function(){},Ia.prototype.g=function(o,e){return new Do(o,e)},Kt(Do,qn),Do.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var o=this.g,e=this.l,t=this.h||void 0;o.Wa&&(o.h.info("Origin Trials enabled."),$i(lt(o.hb,o,e))),be(0),o.W=e,o.aa=t||{},o.N=o.X,o.F=Bo(o,null,o.W),ll(o)},Do.prototype.close=function(){Ga(this.g)},Do.prototype.u=function(o){if("string"==typeof o){var e={};e.__data__=o,Mi(this.g,e)}else this.v?((e={}).__data__=On(o),Mi(this.g,e)):Mi(this.g,o)},Do.prototype.M=function(){this.g.j=null,delete this.j,Ga(this.g),delete this.g,Do.Z.M.call(this)},Kt(Yu,wo),Kt(Qu,Oi),Kt(xi,Io),xi.prototype.xa=function(){Mt(this.g,"a")},xi.prototype.wa=function(o){Mt(this.g,new Yu(o))},xi.prototype.va=function(o){Mt(this.g,new Qu(o))},xi.prototype.ua=function(){Mt(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Do.prototype.send=Do.prototype.u,Do.prototype.open=Do.prototype.m,Do.prototype.close=Do.prototype.close,Pt.NO_ERROR=0,Pt.TIMEOUT=8,Pt.HTTP_ERROR=6,Zt.COMPLETE="complete",rr.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",qn.prototype.listen=qn.prototype.N,Gn.prototype.listenOnce=Gn.prototype.O,Gn.prototype.getLastError=Gn.prototype.La,Gn.prototype.getLastErrorCode=Gn.prototype.Da,Gn.prototype.getStatus=Gn.prototype.ba,Gn.prototype.getResponseJson=Gn.prototype.Qa,Gn.prototype.getResponseText=Gn.prototype.ga,Gn.prototype.send=Gn.prototype.ea;var za=It.createWebChannelTransport=function(){return new Ia},jo=It.getStatEventTarget=function(){return zr()},go=It.ErrorCode=Pt,bl=It.EventType=Zt,Cl=It.Event=Gs,So=It.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Da=It.FetchXmlHttpFactory=Fn,Fi=It.WebChannel=rr,bi=It.XhrIo=Gn;const Ho="@firebase/firestore";class Ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let Ys="9.8.0";const Ni=new it.Yd("@firebase/firestore");function Tl(){return Ni.logLevel}function kt(o,...e){if(Ni.logLevel<=it.in.DEBUG){const t=e.map(mo);Ni.debug(`Firestore (${Ys}): ${o}`,...t)}}function yr(o,...e){if(Ni.logLevel<=it.in.ERROR){const t=e.map(mo);Ni.error(`Firestore (${Ys}): ${o}`,...t)}}function ds(o,...e){if(Ni.logLevel<=it.in.WARN){const t=e.map(mo);Ni.warn(`Firestore (${Ys}): ${o}`,...t)}}function mo(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(t){return o}}function M(o="Unexpected state"){const e=`FIRESTORE (${Ys}) INTERNAL ASSERTION FAILED: `+o;throw yr(e),new Error(e)}function S(o,e){o||M()}function N(o,e){return o}const P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Qe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class he{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ie{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ri.UNAUTHENTICATED))}shutdown(){}}class Qt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zn{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var l=this;let h=this.i;const _=J=>this.i!==h?(h=this.i,t(J)):Promise.resolve();let C=new he;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new he,e.enqueueRetryable(()=>_(this.currentUser))};const R=()=>{const J=C;e.enqueueRetryable((0,Oe.Z)(function*(){yield J.promise,yield _(l.currentUser)}))},Y=J=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(J=>Y(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?Y(J):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new he)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(l=>this.i!==e?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(S("string"==typeof l.accessToken),new Ie(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return S(null===e||"string"==typeof e),new Ri(e)}}class rn{constructor(e,t,l){this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const h=e.auth.getAuthHeaderValueForFirstParty([]);h&&this.headers.set("Authorization",h),l&&this.headers.set("X-Goog-Iam-Authorization-Token",l)}}class Cr{constructor(e,t,l){this.h=e,this.l=t,this.m=l}getToken(){return Promise.resolve(new rn(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ls{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const l=_=>{null!=_.error&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const C=_.token!==this.p;return this.p=_.token,kt("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>l(_))};const h=_=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.g.onInit(_=>h(_)),setTimeout(()=>{if(!this.appCheck){const _=this.g.getImmediate({optional:!0});_?h(_):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(S("string"==typeof t.token),this.p=t.token,new fr(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class hs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=l=>this.I(l),this.T=l=>t.writeSequenceNumber(l))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Fl(o){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(o);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let l=0;l<o;l++)t[l]=Math.floor(256*Math.random());return t}hs.A=-1;class Ds{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let l="";for(;l.length<20;){const h=Fl(40);for(let _=0;_<h.length;++_)l.length<20&&h[_]<t&&(l+=e.charAt(h[_]%e.length))}return l}}function Nn(o,e){return o<e?-1:o>e?1:0}function $o(o,e,t){return o.length===e.length&&o.every((l,h)=>t(l,e[h]))}function fu(o){return o+"\0"}class zi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Z(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Z(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Z(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zi.fromMillis(Date.now())}static fromDate(e){return zi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),l=Math.floor(1e6*(e-1e3*t));return new zi(t,l)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nn(this.nanoseconds,e.nanoseconds):Nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class In{constructor(e){this.timestamp=e}static fromTimestamp(e){return new In(e)}static min(){return new In(new zi(0,0))}static max(){return new In(new zi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ec(o){let e=0;for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&e++;return e}function cl(o,e){for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&e(t,o[t])}function Ji(o){for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e))return!1;return!0}class pu{constructor(e,t,l){void 0===t?t=0:t>e.length&&M(),void 0===l?l=e.length-t:l>e.length-t&&M(),this.segments=e,this.offset=t,this.len=l}get length(){return this.len}isEqual(e){return 0===pu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pu?e.forEach(l=>{t.push(l)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,l=this.limit();t<l;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const l=Math.min(e.length,t.length);for(let h=0;h<l;h++){const _=e.get(h),C=t.get(h);if(_<C)return-1;if(_>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qr extends pu{construct(e,t,l){return new qr(e,t,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const l of e){if(l.indexOf("//")>=0)throw new Z(P.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);t.push(...l.split("/").filter(h=>h.length>0))}return new qr(t)}static emptyPath(){return new qr([])}}const ff=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fs extends pu{construct(e,t,l){return new fs(e,t,l)}static isValidIdentifier(e){return ff.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fs(["__name__"])}static fromServerFormat(e){const t=[];let l="",h=0;const _=()=>{if(0===l.length)throw new Z(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(l),l=""};let C=!1;for(;h<e.length;){const R=e[h];if("\\"===R){if(h+1===e.length)throw new Z(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Y=e[h+1];if("\\"!==Y&&"."!==Y&&"`"!==Y)throw new Z(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);l+=Y,h+=2}else"`"===R?(C=!C,h++):"."!==R||C?(l+=R,h++):(_(),h++)}if(_(),C)throw new Z(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fs(t)}static emptyPath(){return new fs([])}}class Ll{constructor(e){this.fields=e,e.sort(fs.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(t,l)=>t.isEqual(l))}}class Qs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Qs(t)}static fromUint8Array(e){const t=function(l){let h="";for(let _=0;_<l.length;++_)h+=String.fromCharCode(l[_]);return h}(e);return new Qs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let l=0;l<e.length;l++)t[l]=e.charCodeAt(l);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qs.EMPTY_BYTE_STRING=new Qs("");const Ul=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(o){if(S(!!o),"string"==typeof o){let e=0;const t=Ul.exec(o);if(S(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const l=new Date(o);return{seconds:Math.floor(l.getTime()/1e3),nanos:e}}return{seconds:Qn(o.seconds),nanos:Qn(o.nanos)}}function Qn(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function Aa(o){return"string"==typeof o?Qs.fromBase64String(o):Qs.fromUint8Array(o)}function gu(o){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==o?void 0:o.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wc(o){const e=o.mapValue.fields.__previous_value__;return gu(e)?wc(e):e}function Ju(o){const e=Sa(o.mapValue.fields.__local_write_time__.timestampValue);return new zi(e.seconds,e.nanos)}class Mo{constructor(e,t,l,h,_,C,R,Y){this.databaseId=e,this.appId=t,this.persistenceKey=l,this.host=h,this.ssl=_,this.forceLongPolling=C,this.autoDetectLongPolling=R,this.useFetchStreams=Y}}class ps{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ps("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ps&&e.projectId===this.projectId&&e.database===this.database}}function dl(o){return null==o}function Ma(o){return 0===o&&1/o==-1/0}function xa(o){return"number"==typeof o&&Number.isInteger(o)&&!Ma(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}class jt{constructor(e){this.path=e}static fromPath(e){return new jt(qr.fromString(e))}static fromName(e){return new jt(qr.fromString(e).popFirst(5))}static empty(){return new jt(qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jt(new qr(e.slice()))}}const _o={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Il={nullValue:"NULL_VALUE"};function Dl(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?gu(o)?4:Sl(o)?9007199254740991:10:M()}function Ra(o,e){if(o===e)return!0;const t=Dl(o);if(t!==Dl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return o.booleanValue===e.booleanValue;case 4:return Ju(o).isEqual(Ju(e));case 3:return function(l,h){if("string"==typeof l.timestampValue&&"string"==typeof h.timestampValue&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const _=Sa(l.timestampValue),C=Sa(h.timestampValue);return _.seconds===C.seconds&&_.nanos===C.nanos}(o,e);case 5:return o.stringValue===e.stringValue;case 6:return h=e,Aa(o.bytesValue).isEqual(Aa(h.bytesValue));case 7:return o.referenceValue===e.referenceValue;case 8:return function(l,h){return Qn(l.geoPointValue.latitude)===Qn(h.geoPointValue.latitude)&&Qn(l.geoPointValue.longitude)===Qn(h.geoPointValue.longitude)}(o,e);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return Qn(l.integerValue)===Qn(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const _=Qn(l.doubleValue),C=Qn(h.doubleValue);return _===C?Ma(_)===Ma(C):isNaN(_)&&isNaN(C)}return!1}(o,e);case 9:return $o(o.arrayValue.values||[],e.arrayValue.values||[],Ra);case 10:return function(l,h){const _=l.mapValue.fields||{},C=h.mapValue.fields||{};if(Ec(_)!==Ec(C))return!1;for(const R in _)if(_.hasOwnProperty(R)&&(void 0===C[R]||!Ra(_[R],C[R])))return!1;return!0}(o,e);default:return M()}var h}function mu(o,e){return void 0!==(o.values||[]).find(t=>Ra(t,e))}function is(o,e){if(o===e)return 0;const t=Dl(o),l=Dl(e);if(t!==l)return Nn(t,l);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nn(o.booleanValue,e.booleanValue);case 2:return function(h,_){const C=Qn(h.integerValue||h.doubleValue),R=Qn(_.integerValue||_.doubleValue);return C<R?-1:C>R?1:C===R?0:isNaN(C)?isNaN(R)?0:-1:1}(o,e);case 3:return bc(o.timestampValue,e.timestampValue);case 4:return bc(Ju(o),Ju(e));case 5:return Nn(o.stringValue,e.stringValue);case 6:return function(h,_){const C=Aa(h),R=Aa(_);return C.compareTo(R)}(o.bytesValue,e.bytesValue);case 7:return function(h,_){const C=h.split("/"),R=_.split("/");for(let Y=0;Y<C.length&&Y<R.length;Y++){const J=Nn(C[Y],R[Y]);if(0!==J)return J}return Nn(C.length,R.length)}(o.referenceValue,e.referenceValue);case 8:return function(h,_){const C=Nn(Qn(h.latitude),Qn(_.latitude));return 0!==C?C:Nn(Qn(h.longitude),Qn(_.longitude))}(o.geoPointValue,e.geoPointValue);case 9:return function(h,_){const C=h.values||[],R=_.values||[];for(let Y=0;Y<C.length&&Y<R.length;++Y){const J=is(C[Y],R[Y]);if(J)return J}return Nn(C.length,R.length)}(o.arrayValue,e.arrayValue);case 10:return function(h,_){if(h===_o.mapValue&&_===_o.mapValue)return 0;if(h===_o.mapValue)return 1;if(_===_o.mapValue)return-1;const C=h.fields||{},R=Object.keys(C),Y=_.fields||{},J=Object.keys(Y);R.sort(),J.sort();for(let ge=0;ge<R.length&&ge<J.length;++ge){const Re=Nn(R[ge],J[ge]);if(0!==Re)return Re;const at=is(C[R[ge]],Y[J[ge]]);if(0!==at)return at}return Nn(R.length,J.length)}(o.mapValue,e.mapValue);default:throw M()}}function bc(o,e){if("string"==typeof o&&"string"==typeof e&&o.length===e.length)return Nn(o,e);const t=Sa(o),l=Sa(e),h=Nn(t.seconds,l.seconds);return 0!==h?h:Nn(t.nanos,l.nanos)}function Na(o){return Xd(o)}function Xd(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?function(l){const h=Sa(l);return`time(${h.seconds},${h.nanos})`}(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?Aa(o.bytesValue).toBase64():"referenceValue"in o?jt.fromName(o.referenceValue).toString():"geoPointValue"in o?`geo(${(e=o.geoPointValue).latitude},${e.longitude})`:"arrayValue"in o?function(l){let h="[",_=!0;for(const C of l.values||[])_?_=!1:h+=",",h+=Xd(C);return h+"]"}(o.arrayValue):"mapValue"in o?function(l){const h=Object.keys(l.fields||{}).sort();let _="{",C=!0;for(const R of h)C?C=!1:_+=",",_+=`${R}:${Xd(l.fields[R])}`;return _+"}"}(o.mapValue):M();var e}function ss(o,e){return{referenceValue:`projects/${o.projectId}/databases/${o.database}/documents/${e.path.canonicalString()}`}}function _u(o){return!!o&&"integerValue"in o}function Vl(o){return!!o&&"arrayValue"in o}function eh(o){return!!o&&"nullValue"in o}function ra(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function Pa(o){return!!o&&"mapValue"in o}function ia(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){const e={mapValue:{fields:{}}};return cl(o.mapValue.fields,(t,l)=>e.mapValue.fields[t]=ia(l)),e}if(o.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(o.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ia(o.arrayValue.values[t]);return e}return Object.assign({},o)}function Sl(o){return"__max__"===(((o.mapValue||{}).fields||{}).__type__||{}).stringValue}function fd(o){return"nullValue"in o?Il:"booleanValue"in o?{booleanValue:!1}:"integerValue"in o||"doubleValue"in o?{doubleValue:NaN}:"timestampValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in o?{stringValue:""}:"bytesValue"in o?{bytesValue:""}:"referenceValue"in o?ss(ps.empty(),jt.empty()):"geoPointValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in o?{arrayValue:{}}:"mapValue"in o?{mapValue:{}}:M()}function gf(o){return"nullValue"in o?{booleanValue:!1}:"booleanValue"in o?{doubleValue:NaN}:"integerValue"in o||"doubleValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in o?{stringValue:""}:"stringValue"in o?{bytesValue:""}:"bytesValue"in o?ss(ps.empty(),jt.empty()):"referenceValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in o?{arrayValue:{}}:"arrayValue"in o?{mapValue:{}}:"mapValue"in o?_o:M()}function Al(o,e){const t=is(o.value,e.value);return 0!==t?t:o.inclusive&&!e.inclusive?-1:!o.inclusive&&e.inclusive?1:0}function Ml(o,e){const t=is(o.value,e.value);return 0!==t?t:o.inclusive&&!e.inclusive?1:!o.inclusive&&e.inclusive?-1:0}class gs{constructor(e){this.value=e}static empty(){return new gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let l=0;l<e.length-1;++l)if(t=(t.mapValue.fields||{})[e.get(l)],!Pa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(t)}setAll(e){let t=fs.emptyPath(),l={},h=[];e.forEach((C,R)=>{if(!t.isImmediateParentOf(R)){const Y=this.getFieldsMap(t);this.applyChanges(Y,l,h),l={},h=[],t=R.popLast()}C?l[R.lastSegment()]=ia(C):h.push(R.lastSegment())});const _=this.getFieldsMap(t);this.applyChanges(_,l,h)}delete(e){const t=this.field(e.popLast());Pa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let l=0;l<e.length;++l){let h=t.mapValue.fields[e.get(l)];Pa(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(l)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,l){cl(t,(h,_)=>e[h]=_);for(const h of l)delete e[h]}clone(){return new gs(ia(this.value))}}function L(o){const e=[];return cl(o.fields,(t,l)=>{const h=new fs([t]);if(Pa(l)){const _=L(l.mapValue).fields;if(0===_.length)e.push(h);else for(const C of _)e.push(h.child(C))}else e.push(h)}),new Ll(e)}class H{constructor(e,t,l,h,_,C){this.key=e,this.documentType=t,this.version=l,this.readTime=h,this.data=_,this.documentState=C}static newInvalidDocument(e){return new H(e,0,In.min(),In.min(),gs.empty(),0)}static newFoundDocument(e,t,l){return new H(e,1,t,In.min(),l,0)}static newNoDocument(e,t){return new H(e,2,t,In.min(),gs.empty(),0)}static newUnknownDocument(e,t){return new H(e,3,t,In.min(),gs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof H&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new H(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class se{constructor(e,t,l,h){this.indexId=e,this.collectionGroup=t,this.fields=l,this.indexState=h}}function _e(o){return o.fields.find(e=>2===e.kind)}function qe(o){return o.fields.filter(e=>2!==e.kind)}se.UNKNOWN_ID=-1;class nt{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rt{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rt(0,En.min())}}function fn(o,e){const t=o.toTimestamp().seconds,l=o.toTimestamp().nanoseconds+1,h=In.fromTimestamp(1e9===l?new zi(t+1,0):new zi(t,l));return new En(h,jt.empty(),e)}function gn(o){return new En(o.readTime,o.key,-1)}class En{constructor(e,t,l){this.readTime=e,this.documentKey=t,this.largestBatchId=l}static min(){return new En(In.min(),jt.empty(),-1)}static max(){return new En(In.max(),jt.empty(),-1)}}function Pr(o,e){let t=o.readTime.compareTo(e.readTime);return 0!==t?t:(t=jt.comparator(o.documentKey,e.documentKey),0!==t?t:Nn(o.largestBatchId,e.largestBatchId))}class cn{constructor(e,t){this.comparator=e,this.root=t||Or.EMPTY}insert(e,t){return new cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const l=this.comparator(e,t.key);if(0===l)return t.value;l<0?t=t.left:l>0&&(t=t.right)}return null}indexOf(e){let t=0,l=this.root;for(;!l.isEmpty();){const h=this.comparator(e,l.key);if(0===h)return t+l.left.size;h<0?l=l.left:(t+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,l)=>(e(t,l),!1))}toString(){const e=[];return this.inorderTraversal((t,l)=>(e.push(`${t}:${l}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new os(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new os(this.root,e,this.comparator,!1)}getReverseIterator(){return new os(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new os(this.root,e,this.comparator,!0)}}class os{constructor(e,t,l,h){this.isReverse=h,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=t?l(e.key,t):1,t&&h&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,t,l,h,_){this.key=e,this.value=t,this.color=null!=l?l:Or.RED,this.left=null!=h?h:Or.EMPTY,this.right=null!=_?_:Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,l,h,_){return new Or(null!=e?e:this.key,null!=t?t:this.value,null!=l?l:this.color,null!=h?h:this.left,null!=_?_:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,l){let h=this;const _=l(e,h.key);return h=_<0?h.copy(null,null,null,h.left.insert(e,t,l),null):0===_?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,l)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let l,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return Or.EMPTY;l=h.right.min(),h=h.copy(l.key,l.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw M();const e=this.left.check();if(e!==this.right.check())throw M();return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1,Or.EMPTY=new class{constructor(){this.size=0}get key(){throw M()}get value(){throw M()}get color(){throw M()}get left(){throw M()}get right(){throw M()}copy(o,e,t,l,h){return this}insert(o,e,t){return new Or(o,e)}remove(o,e){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,l)=>(e(t),!1))}forEachInRange(e,t){const l=this.data.getIteratorFrom(e[0]);for(;l.hasNext();){const h=l.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let l;for(l=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();l.hasNext();)if(!e(l.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vr(this.data.getIterator())}getIteratorFrom(e){return new vr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(l=>{t=t.add(l)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),l=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,_=l.getNext().key;if(0!==this.comparator(h,_))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class vr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xn(o){return o.hasNext()?o.getNext():void 0}class Us{constructor(e,t=null,l=[],h=[],_=null,C=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=l,this.filters=h,this.limit=_,this.startAt=C,this.endAt=R,this.P=null}}function Ir(o,e=null,t=[],l=[],h=null,_=null,C=null){return new Us(o,e,t,l,h,_,C)}function Go(o){const e=N(o);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(l=>{return(h=l).field.canonicalString()+h.op.toString()+Na(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(l=>{return(h=l).field.canonicalString()+h.dir;var h}).join(","),dl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(l=>Na(l)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(l=>Na(l)).join(",")),e.P=t}return e.P}function hl(o,e){if(o.limit!==e.limit||o.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<o.orderBy.length;h++)if(!th(o.orderBy[h],e.orderBy[h]))return!1;if(o.filters.length!==e.filters.length)return!1;for(let h=0;h<o.filters.length;h++)if((t=o.filters[h]).op!==(l=e.filters[h]).op||!t.field.isEqual(l.field)||!Ra(t.value,l.value))return!1;var t,l;return o.collectionGroup===e.collectionGroup&&!!o.path.isEqual(e.path)&&!!Xu(o.startAt,e.startAt)&&Xu(o.endAt,e.endAt)}function yu(o){return jt.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}function hi(o,e){return o.filters.filter(t=>t instanceof xo&&t.field.isEqual(e))}function ur(o,e,t){let l=Il,h=!0;for(const _ of hi(o,e)){let C=Il,R=!0;switch(_.op){case"<":case"<=":C=fd(_.value);break;case"==":case"in":case">=":C=_.value;break;case">":C=_.value,R=!1;break;case"!=":case"not-in":C=Il}Al({value:l,inclusive:h},{value:C,inclusive:R})<0&&(l=C,h=R)}if(null!==t)for(let _=0;_<o.orderBy.length;++_)if(o.orderBy[_].field.isEqual(e)){const C=t.position[_];Al({value:l,inclusive:h},{value:C,inclusive:t.inclusive})<0&&(l=C,h=t.inclusive);break}return{value:l,inclusive:h}}function yo(o,e,t){let l=_o,h=!0;for(const _ of hi(o,e)){let C=_o,R=!0;switch(_.op){case">=":case">":C=gf(_.value),R=!1;break;case"==":case"in":case"<=":C=_.value;break;case"<":C=_.value,R=!1;break;case"!=":case"not-in":C=_o}Ml({value:l,inclusive:h},{value:C,inclusive:R})>0&&(l=C,h=R)}if(null!==t)for(let _=0;_<o.orderBy.length;++_)if(o.orderBy[_].field.isEqual(e)){const C=t.position[_];Ml({value:l,inclusive:h},{value:C,inclusive:t.inclusive})>0&&(l=C,h=t.inclusive);break}return{value:l,inclusive:h}}class xo extends class{}{constructor(e,t,l){super(),this.field=e,this.op=t,this.value=l}static create(e,t,l){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,l):new vu(e,t,l):"array-contains"===t?new xp(e,l):"in"===t?new _f(e,l):"not-in"===t?new Cc(e,l):"array-contains-any"===t?new Tc(e,l):new xo(e,t,l)}static V(e,t,l){return"in"===t?new qo(e,l):new mf(e,l)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(is(t,this.value)):null!==t&&Dl(this.value)===Dl(t)&&this.v(is(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return M()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class vu extends xo{constructor(e,t,l){super(e,t,l),this.key=jt.fromName(l.referenceValue)}matches(e){const t=jt.comparator(e.key,this.key);return this.v(t)}}class qo extends xo{constructor(e,t){super(e,"in",t),this.keys=nm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mf extends xo{constructor(e,t){super(e,"not-in",t),this.keys=nm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nm(o,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(l=>jt.fromName(l.referenceValue))}class xp extends xo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vl(t)&&mu(t.arrayValue,this.value)}}class _f extends xo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mu(this.value.arrayValue,t)}}class Cc extends xo{constructor(e,t){super(e,"not-in",t)}matches(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mu(this.value.arrayValue,t)}}class Tc extends xo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(l=>mu(this.value.arrayValue,l))}}class Za{constructor(e,t){this.position=e,this.inclusive=t}}class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function th(o,e){return o.dir===e.dir&&o.field.isEqual(e.field)}function pd(o,e,t){let l=0;for(let h=0;h<o.position.length;h++){const _=e[h],C=o.position[h];if(l=_.field.isKeyField()?jt.comparator(jt.fromName(C.referenceValue),t.key):is(C,t.data.field(_.field)),"desc"===_.dir&&(l*=-1),0!==l)break}return l}function Xu(o,e){if(null===o)return null===e;if(null===e||o.inclusive!==e.inclusive||o.position.length!==e.position.length)return!1;for(let t=0;t<o.position.length;t++)if(!Ra(o.position[t],e.position[t]))return!1;return!0}class Bl{constructor(e,t=null,l=[],h=[],_=null,C="F",R=null,Y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=l,this.filters=h,this.limit=_,this.limitType=C,this.startAt=R,this.endAt=Y,this.D=null,this.C=null}}function Rp(o,e,t,l,h,_,C,R){return new Bl(o,e,t,l,h,_,C,R)}function Dc(o){return new Bl(o)}function cr(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function ec(o){for(const e of o.filters)if(e.S())return e.field;return null}function tc(o){return null!==o.collectionGroup}function Eu(o){const e=N(o);if(null===e.D){e.D=[];const t=ec(e),l=cr(e);if(null!==t&&null===l)t.isKeyField()||e.D.push(new Ic(t)),e.D.push(new Ic(fs.keyField(),"asc"));else{let h=!1;for(const _ of e.explicitOrderBy)e.D.push(_),_.field.isKeyField()&&(h=!0);if(!h){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ic(fs.keyField(),_))}}}return e.D}function Ss(o){const e=N(o);if(!e.C)if("F"===e.limitType)e.C=Ir(e.path,e.collectionGroup,Eu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const _ of Eu(e))t.push(new Ic(_.field,"desc"===_.dir?"asc":"desc"));const l=e.endAt?new Za(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new Za(e.startAt.position,e.startAt.inclusive):null;e.C=Ir(e.path,e.collectionGroup,t,e.filters,e.limit,l,h)}return e.C}function Sc(o,e,t){return new Bl(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),e,t,o.startAt,o.endAt)}function sa(o,e){return hl(Ss(o),Ss(e))&&o.limitType===e.limitType}function Np(o){return`${Go(Ss(o))}|lt:${o.limitType}`}function Wo(o){return`Query(target=${function Mp(o){let e=o.path.canonicalString();return null!==o.collectionGroup&&(e+=" collectionGroup="+o.collectionGroup),o.filters.length>0&&(e+=`, filters: [${o.filters.map(t=>{return`${(l=t).field.canonicalString()} ${l.op} ${Na(l.value)}`;var l}).join(", ")}]`),dl(o.limit)||(e+=", limit: "+o.limit),o.orderBy.length>0&&(e+=`, orderBy: [${o.orderBy.map(t=>{return`${(l=t).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),o.startAt&&(e+=", startAt: ",e+=o.startAt.inclusive?"b:":"a:",e+=o.startAt.position.map(t=>Na(t)).join(",")),o.endAt&&(e+=", endAt: ",e+=o.endAt.inclusive?"a:":"b:",e+=o.endAt.position.map(t=>Na(t)).join(",")),`Target(${e})`}(Ss(o))}; limitType=${o.limitType})`}function yf(o,e){return e.isFoundDocument()&&function(t,l){const h=l.key.path;return null!==t.collectionGroup?l.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):jt.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(o,e)&&function(t,l){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===l.data.field(h.field))return!1;return!0}(o,e)&&function(t,l){for(const h of t.filters)if(!h.matches(l))return!1;return!0}(o,e)&&(l=e,!((t=o).startAt&&!function(h,_,C){const R=pd(h,_,C);return h.inclusive?R<=0:R<0}(t.startAt,Eu(t),l)||t.endAt&&!function(h,_,C){const R=pd(h,_,C);return h.inclusive?R>=0:R>0}(t.endAt,Eu(t),l)));var t,l}function Oa(o){return o.collectionGroup||(o.path.length%2==1?o.path.lastSegment():o.path.get(o.path.length-2))}function wu(o){return(e,t)=>{let l=!1;for(const h of Eu(o)){const _=vf(h,e,t);if(0!==_)return _;l=l||h.field.isKeyField()}return 0}}function vf(o,e,t){const l=o.field.isKeyField()?jt.comparator(e.key,t.key):function(h,_,C){const R=_.data.field(h),Y=C.data.field(h);return null!==R&&null!==Y?is(R,Y):M()}(o.field,e,t);switch(o.dir){case"asc":return l;case"desc":return-1*l;default:return M()}}function Pp(o,e){if(o.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ma(e)?"-0":e}}function Ef(o){return{integerValue:""+o}}function Op(o,e){return xa(e)?Ef(e):Pp(o,e)}class xl{constructor(){this._=void 0}}function rm(o,e,t){return o instanceof Ac?function(l,h){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&(_.fields.__previous_value__=h),{mapValue:_}}(t,e):o instanceof nc?Li(o,e):o instanceof gd?bu(o,e):function(l,h){const _=wf(l,h),C=md(_)+md(l.k);return _u(_)&&_u(l.k)?Ef(C):Pp(l.M,C)}(o,e)}function nh(o,e,t){return o instanceof nc?Li(o,e):o instanceof gd?bu(o,e):t}function wf(o,e){return o instanceof Ya?_u(t=e)||(l=t)&&"doubleValue"in l?e:{integerValue:0}:null;var l,t}class Ac extends xl{}class nc extends xl{constructor(e){super(),this.elements=e}}function Li(o,e){const t=vo(e);for(const l of o.elements)t.some(h=>Ra(h,l))||t.push(l);return{arrayValue:{values:t}}}class gd extends xl{constructor(e){super(),this.elements=e}}function bu(o,e){let t=vo(e);for(const l of o.elements)t=t.filter(h=>!Ra(h,l));return{arrayValue:{values:t}}}class Ya extends xl{constructor(e,t){super(),this.M=e,this.k=t}}function md(o){return Qn(o.integerValue||o.doubleValue)}function vo(o){return Vl(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}class Ro{constructor(e,t){this.field=e,this.transform=t}}class Jn{constructor(e,t){this.version=e,this.transformResults=t}}class Vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vs}static exists(e){return new Vs(void 0,e)}static updateTime(e){return new Vs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jl(o,e){return void 0!==o.updateTime?e.isFoundDocument()&&e.version.isEqual(o.updateTime):void 0===o.exists||o.exists===e.isFoundDocument()}class bf{}function As(o,e,t){o instanceof Rc?function(l,h,_){const C=l.value.clone(),R=ih(l.fieldTransforms,h,_.transformResults);C.setAll(R),h.convertToFoundDocument(_.version,C).setHasCommittedMutations()}(o,e,t):o instanceof $l?function(l,h,_){if(!jl(l.precondition,h))return void h.convertToUnknownDocument(_.version);const C=ih(l.fieldTransforms,h,_.transformResults),R=h.data;R.setAll(rh(l)),R.setAll(C),h.convertToFoundDocument(_.version,R).setHasCommittedMutations()}(o,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Hl(o,e,t){var h;o instanceof Rc?function(l,h,_){if(!jl(l.precondition,h))return;const C=l.value.clone(),R=Tf(l.fieldTransforms,_,h);C.setAll(R),h.convertToFoundDocument(xc(h),C).setHasLocalMutations()}(o,e,t):o instanceof $l?function(l,h,_){if(!jl(l.precondition,h))return;const C=Tf(l.fieldTransforms,_,h),R=h.data;R.setAll(rh(l)),R.setAll(C),h.convertToFoundDocument(xc(h),R).setHasLocalMutations()}(o,e,t):jl(o.precondition,h=e)&&h.convertToNoDocument(In.min())}function Cf(o,e){let t=null;for(const l of o.fieldTransforms){const h=e.data.field(l.field),_=wf(l.transform,h||null);null!=_&&(null==t&&(t=gs.empty()),t.set(l.field,_))}return t||null}function Mc(o,e){return o.type===e.type&&!!o.key.isEqual(e.key)&&!!o.precondition.isEqual(e.precondition)&&(l=e.fieldTransforms,!!(void 0===(t=o.fieldTransforms)&&void 0===l||t&&l&&$o(t,l,(h,_)=>function Cu(o,e){return o.field.isEqual(e.field)&&(l=e.transform,(t=o.transform)instanceof nc&&l instanceof nc||t instanceof gd&&l instanceof gd?$o(t.elements,l.elements,Ra):t instanceof Ya&&l instanceof Ya?Ra(t.k,l.k):t instanceof Ac&&l instanceof Ac);var t,l}(h,_))))&&(0===o.type?o.value.isEqual(e.value):1!==o.type||o.data.isEqual(e.data)&&o.fieldMask.isEqual(e.fieldMask));var t,l}function xc(o){return o.isFoundDocument()?o.version:In.min()}class Rc extends bf{constructor(e,t,l,h=[]){super(),this.key=e,this.value=t,this.precondition=l,this.fieldTransforms=h,this.type=0}}class $l extends bf{constructor(e,t,l,h,_=[]){super(),this.key=e,this.data=t,this.fieldMask=l,this.precondition=h,this.fieldTransforms=_,this.type=1}}function rh(o){const e=new Map;return o.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const l=o.data.field(t);e.set(t,l)}}),e}function ih(o,e,t){const l=new Map;S(o.length===t.length);for(let h=0;h<t.length;h++){const _=o[h],C=_.transform,R=e.data.field(_.field);l.set(_.field,nh(C,R,t[h]))}return l}function Tf(o,e,t){const l=new Map;for(const h of o){const _=h.transform,C=t.data.field(h.field);l.set(h.field,rm(_,C,e))}return l}class Nc extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class rc extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class fl{constructor(e){this.count=e}}var as,Er;function _d(o){switch(o){default:return M();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function ms(o){if(void 0===o)return yr("GRPC error has no .code"),P.UNKNOWN;switch(o){case as.OK:return P.OK;case as.CANCELLED:return P.CANCELLED;case as.UNKNOWN:return P.UNKNOWN;case as.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case as.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case as.INTERNAL:return P.INTERNAL;case as.UNAVAILABLE:return P.UNAVAILABLE;case as.UNAUTHENTICATED:return P.UNAUTHENTICATED;case as.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case as.NOT_FOUND:return P.NOT_FOUND;case as.ALREADY_EXISTS:return P.ALREADY_EXISTS;case as.PERMISSION_DENIED:return P.PERMISSION_DENIED;case as.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case as.ABORTED:return P.ABORTED;case as.OUT_OF_RANGE:return P.OUT_OF_RANGE;case as.UNIMPLEMENTED:return P.UNIMPLEMENTED;case as.DATA_LOSS:return P.DATA_LOSS;default:return M()}}(Er=as||(as={}))[Er.OK=0]="OK",Er[Er.CANCELLED=1]="CANCELLED",Er[Er.UNKNOWN=2]="UNKNOWN",Er[Er.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Er[Er.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Er[Er.NOT_FOUND=5]="NOT_FOUND",Er[Er.ALREADY_EXISTS=6]="ALREADY_EXISTS",Er[Er.PERMISSION_DENIED=7]="PERMISSION_DENIED",Er[Er.UNAUTHENTICATED=16]="UNAUTHENTICATED",Er[Er.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Er[Er.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Er[Er.ABORTED=10]="ABORTED",Er[Er.OUT_OF_RANGE=11]="OUT_OF_RANGE",Er[Er.UNIMPLEMENTED=12]="UNIMPLEMENTED",Er[Er.INTERNAL=13]="INTERNAL",Er[Er.UNAVAILABLE=14]="UNAVAILABLE",Er[Er.DATA_LOSS=15]="DATA_LOSS";class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0!==l)for(const[h,_]of l)if(this.equalsFn(h,e))return _}has(e){return void 0!==this.get(e)}set(e,t){const l=this.mapKeyFn(e),h=this.inner[l];if(void 0===h)return this.inner[l]=[[e,t]],void this.innerSize++;for(let _=0;_<h.length;_++)if(this.equalsFn(h[_][0],e))return void(h[_]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0===l)return!1;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],e))return 1===l.length?delete this.inner[t]:l.splice(h,1),this.innerSize--,!0;return!1}forEach(e){cl(this.inner,(t,l)=>{for(const[h,_]of l)e(h,_)})}isEmpty(){return Ji(this.inner)}size(){return this.innerSize}}const im=new cn(jt.comparator);function Eo(){return im}const kp=new cn(jt.comparator);function If(...o){let e=kp;for(const t of o)e=e.insert(t.key,t);return e}function yd(){return new Qa(o=>o.toString(),(o,e)=>o.isEqual(e))}const Df=new cn(jt.comparator),vd=new yn(jt.comparator);function ti(...o){let e=vd;for(const t of o)e=e.add(t);return e}const sm=new yn(Nn);function Pc(){return sm}class Rl{constructor(e,t,l,h,_){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=l,this.documentUpdates=h,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,t){const l=new Map;return l.set(e,Js.createSynthesizedTargetChangeForCurrentChange(e,t)),new Rl(In.min(),l,Pc(),Eo(),ti())}}class Js{constructor(e,t,l,h,_){this.resumeToken=e,this.current=t,this.addedDocuments=l,this.modifiedDocuments=h,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Js(Qs.EMPTY_BYTE_STRING,t,ti(),ti(),ti())}}class Gl{constructor(e,t,l,h){this.O=e,this.removedTargetIds=t,this.key=l,this.F=h}}class sh{constructor(e,t){this.targetId=e,this.$=t}}class Tu{constructor(e,t,l=Qs.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=l,this.cause=h}}class ls{constructor(){this.B=0,this.L=oh(),this.U=Qs.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=ti(),t=ti(),l=ti();return this.L.forEach((h,_)=>{switch(_){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:l=l.add(h);break;default:M()}}),new Js(this.U,this.q,e,t,l)}J(){this.K=!1,this.L=oh()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Iu{constructor(e){this.nt=e,this.st=new Map,this.it=Eo(),this.rt=Oc(),this.ot=new yn(Nn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const l=this.lt(t);switch(e.state){case 0:this.ft(t)&&l.W(e.resumeToken);break;case 1:l.tt(),l.G||l.J(),l.W(e.resumeToken);break;case 2:l.tt(),l.G||this.removeTarget(t);break;case 3:this.ft(t)&&(l.et(),l.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),l.W(e.resumeToken));break;default:M()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((l,h)=>{this.ft(h)&&t(h)})}_t(e){const t=e.targetId,l=e.$.count,h=this.wt(t);if(h){const _=h.target;if(yu(_))if(0===l){const C=new jt(_.path);this.ct(t,C,H.newNoDocument(C,In.min()))}else S(1===l);else this.gt(t)!==l&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((_,C)=>{const R=this.wt(C);if(R){if(_.current&&yu(R.target)){const Y=new jt(R.target.path);null!==this.it.get(Y)||this.It(C,Y)||this.ct(C,Y,H.newNoDocument(Y,e))}_.j&&(t.set(C,_.H()),_.J())}});let l=ti();this.rt.forEach((_,C)=>{let R=!0;C.forEachWhile(Y=>{const J=this.wt(Y);return!J||2===J.purpose||(R=!1,!1)}),R&&(l=l.add(_))}),this.it.forEach((_,C)=>C.setReadTime(e));const h=new Rl(e,t,this.ot,this.it,l);return this.it=Eo(),this.rt=Oc(),this.ot=new yn(Nn),h}at(e,t){if(!this.ft(e))return;const l=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,l),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,l){if(!this.ft(e))return;const h=this.lt(e);this.It(e,t)?h.Y(t,1):h.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),l&&(this.it=this.it.insert(t,l))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new ls,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new yn(Nn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||kt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new ls),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Oc(){return new cn(jt.comparator)}function oh(){return new cn(jt.comparator)}const om={asc:"ASCENDING",desc:"DESCENDING"},oa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ed{constructor(e,t){this.databaseId=e,this.N=t}}function ic(o,e){return o.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fp(o,e){return o.N?e.toBase64():e.toUint8Array()}function aa(o,e){return ic(o,e.toTimestamp())}function Ms(o){return S(!!o),In.fromTimestamp(function(e){const t=Sa(e);return new zi(t.seconds,t.nanos)}(o))}function wd(o,e){return(t=o,new qr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function sc(o){const e=qr.fromString(o);return S(K(e)),e}function Du(o,e){return wd(o.databaseId,e.path)}function Bs(o,e){const t=sc(e);if(t.get(1)!==o.databaseId.projectId)throw new Z(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+o.databaseId.projectId);if(t.get(3)!==o.databaseId.database)throw new Z(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+o.databaseId.database);return new jt(bd(t))}function Ja(o,e){return wd(o.databaseId,e)}function oc(o){const e=sc(o);return 4===e.length?qr.emptyPath():bd(e)}function Xa(o){return new qr(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function bd(o){return S(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function Sf(o,e,t){return{name:Du(o,e),fields:t.value.mapValue.fields}}function so(o,e,t){const l=Bs(o,e.name),h=Ms(e.updateTime),_=new gs({mapValue:{fields:e.fields}}),C=H.newFoundDocument(l,h,_);return t&&C.setHasCommittedMutations(),t?C.setHasCommittedMutations():C}function Su(o,e){let t;if(e instanceof Rc)t={update:Sf(o,e.key,e.value)};else if(e instanceof Nc)t={delete:Du(o,e.key)};else if(e instanceof $l)t={update:Sf(o,e.key,e.data),updateMask:A(e.fieldMask)};else{if(!(e instanceof rc))return M();t={verify:Du(o,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(l=>function(h,_){const C=_.transform;if(C instanceof Ac)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof nc)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof gd)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof Ya)return{fieldPath:_.field.canonicalString(),increment:C.k};throw M()}(0,l))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:aa(o,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:M()),t;var h}function zo(o,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Vs.updateTime(Ms(h.updateTime)):void 0!==h.exists?Vs.exists(h.exists):Vs.none():Vs.none(),l=e.updateTransforms?e.updateTransforms.map(h=>function(_,C){let R=null;"setToServerValue"in C?(S("REQUEST_TIME"===C.setToServerValue),R=new Ac):"appendMissingElements"in C?R=new nc(C.appendMissingElements.values||[]):"removeAllFromArray"in C?R=new gd(C.removeAllFromArray.values||[]):"increment"in C?R=new Ya(_,C.increment):M();const Y=fs.fromServerFormat(C.fieldPath);return new Ro(Y,R)}(o,h)):[];var h;if(e.update){const h=Bs(o,e.update.name),_=new gs({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Ll((e.updateMask.fieldPaths||[]).map(J=>fs.fromServerFormat(J)));return new $l(h,_,C,t,l)}return new Rc(h,_,t,l)}if(e.delete){const h=Bs(o,e.delete);return new Nc(h,t)}if(e.verify){const h=Bs(o,e.verify);return new rc(h,t)}return M()}function Fc(o,e){return{documents:[Ja(o,e.path)]}}function ql(o,e){const t={structuredQuery:{}},l=e.path;null!==e.collectionGroup?(t.parent=Ja(o,l),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ja(o,l.popLast()),t.structuredQuery.from=[{collectionId:l.lastSegment()}]);const h=function(Y){if(0===Y.length)return;const J=Y.map(ge=>function(Re){if("=="===Re.op){if(ra(Re.value))return{unaryFilter:{field:ka(Re.field),op:"IS_NAN"}};if(eh(Re.value))return{unaryFilter:{field:ka(Re.field),op:"IS_NULL"}}}else if("!="===Re.op){if(ra(Re.value))return{unaryFilter:{field:ka(Re.field),op:"IS_NOT_NAN"}};if(eh(Re.value))return{unaryFilter:{field:ka(Re.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(Re.field),op:Cd(Re.op),value:Re.value}}}(ge));return 1===J.length?J[0]:{compositeFilter:{op:"AND",filters:J}}}(e.filters);h&&(t.structuredQuery.where=h);const _=function(Y){if(0!==Y.length)return Y.map(J=>{return{field:ka((ge=J).field),direction:pl(ge.dir)};var ge})}(e.orderBy);_&&(t.structuredQuery.orderBy=_);const C=(J=e.limit,o.N||dl(J)?J:{value:J});var J,R,Y;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(Y=e.endAt).inclusive,values:Y.position}),t}function ah(o){let e=oc(o.parent);const t=o.structuredQuery,l=t.from?t.from.length:0;let h=null;if(l>0){S(1===l);const ge=t.from[0];ge.allDescendants?h=ge.collectionId:e=e.child(ge.collectionId)}let _=[];t.where&&(_=Ui(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(ge=>{return new Ic(b((Re=ge).field),function(at){switch(at){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Re.direction));var Re}));let R=null;t.limit&&(R=function(ge){let Re;return Re="object"==typeof ge?ge.value:ge,dl(Re)?null:Re}(t.limit));let Y=null;var ge;t.startAt&&(Y=new Za((ge=t.startAt).values||[],!!ge.before));let J=null;return t.endAt&&(J=function(ge){return new Za(ge.values||[],!ge.before)}(t.endAt)),Rp(e,h,C,_,R,"F",Y,J)}function Ui(o){return o?void 0!==o.unaryFilter?[y(o)]:void 0!==o.fieldFilter?[g(o)]:void 0!==o.compositeFilter?o.compositeFilter.filters.map(e=>Ui(e)).reduce((e,t)=>e.concat(t)):M():[]}function pl(o){return om[o]}function Cd(o){return oa[o]}function ka(o){return{fieldPath:o.canonicalString()}}function b(o){return fs.fromServerFormat(o.fieldPath)}function g(o){return xo.create(b(o.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return M()}}(o.fieldFilter.op),o.fieldFilter.value)}function y(o){switch(o.unaryFilter.op){case"IS_NAN":const e=b(o.unaryFilter.field);return xo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=b(o.unaryFilter.field);return xo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=b(o.unaryFilter.field);return xo.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=b(o.unaryFilter.field);return xo.create(h,"!=",{nullValue:"NULL_VALUE"});default:return M()}}function A(o){const e=[];return o.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function K(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function oe(o){let e="";for(let t=0;t<o.length;t++)e.length>0&&(e=pt(e)),e=Ue(o.get(t),e);return pt(e)}function Ue(o,e){let t=e;const l=o.length;for(let h=0;h<l;h++){const _=o.charAt(h);switch(_){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=_}}return t}function pt(o){return o+"\x01\x01"}function Ft(o){const e=o.length;if(S(e>=2),2===e)return S("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),qr.emptyPath();const t=e-2,l=[];let h="";for(let _=0;_<e;){const C=o.indexOf("\x01",_);switch((C<0||C>t)&&M(),o.charAt(C+1)){case"\x01":const R=o.substring(_,C);let Y;0===h.length?Y=R:(h+=R,Y=h,h=""),l.push(Y);break;case"\x10":h+=o.substring(_,C),h+="\0";break;case"\x11":h+=o.substring(_,C+1);break;default:M()}_=C+2}return new qr(l)}const sn=["userId","batchId"];function Dn(o,e){return[o,oe(e)]}function Sn(o,e,t){return[o,oe(e),t]}const Xs={},Fa=["prefixPath","collectionGroup","readTime","documentId"],Lc=["prefixPath","collectionGroup","documentId"],Rf=["collectionGroup","readTime","prefixPath","documentId"],Nf=["canonicalId","targetId"],Au=["targetId","path"],lh=["path","targetId"],uh=["collectionId","parent"],Lp=["indexId","uid"],ch=["uid","sequenceNumber"],Pf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Up=["indexId","uid","orderedDocumentKey"],dh=["userId","collectionPath","documentId"],Td=["userId","collectionPath","largestBatchId"],Vp=["userId","collectionGroup","largestBatchId"],Of=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],I_=[...Of,"documentOverlays"],hh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],am=[...hh,"indexConfiguration","indexState","indexEntries"],kf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class gt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&M(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new gt((l,h)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(l,h)},this.catchCallback=_=>{this.wrapFailure(t,_).next(l,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof gt?t:gt.resolve(t)}catch(t){return gt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):gt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):gt.reject(t)}static resolve(e){return new gt((t,l)=>{t(e)})}static reject(e){return new gt((t,l)=>{l(e)})}static waitFor(e){return new gt((t,l)=>{let h=0,_=0,C=!1;e.forEach(R=>{++h,R.next(()=>{++_,C&&_===h&&t()},Y=>l(Y))}),C=!0,_===h&&t()})}static or(e){let t=gt.resolve(!1);for(const l of e)t=t.next(h=>h?gt.resolve(h):l());return t}static forEach(e,t){const l=[];return e.forEach((h,_)=>{l.push(t.call(this,h,_))}),this.waitFor(l)}}class fh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new he,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new ph(e,t.error)):this.At.resolve()},this.transaction.onerror=l=>{const h=gh(l.target.error);this.At.reject(new ph(e,h))}}static open(e,t,l,h){try{return new fh(t,e.transaction(h,l))}catch(_){throw new ph(t,_)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(kt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Vy(t)}}class el{constructor(e,t,l){this.name=e,this.version=t,this.Pt=l,12.2===el.Vt((0,Qe.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return kt("SimpleDb","Removing database:",e),Wl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Qe.hl)())return!1;if(el.St())return!0;const e=(0,Qe.z$)(),t=el.Vt(e),l=0<t&&t<10,h=el.Dt(e),_=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||l||_)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(l)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),l=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(l)}Nt(e){var t=this;return(0,Oe.Z)(function*(){return t.db||(kt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((l,h)=>{const _=indexedDB.open(t.name,t.version);_.onsuccess=C=>{l(C.target.result)},_.onblocked=()=>{h(new ph(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=C=>{const R=C.target.error;h("VersionError"===R.name?new Z(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Z(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new ph(e,R))},_.onupgradeneeded=C=>{kt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.Pt.kt(C.target.result,_.transaction,C.oldVersion,t.version).next(()=>{kt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=l=>t.Mt(l)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,l,h){var _=this;return(0,Oe.Z)(function*(){const C="readonly"===t;let R=0;for(;;){++R;try{_.db=yield _.Nt(e);const Y=fh.open(_.db,e,C?"readonly":"readwrite",l),J=h(Y).next(ge=>(Y.bt(),ge)).catch(ge=>(Y.abort(ge),gt.reject(ge))).toPromise();return J.catch(()=>{}),yield Y.Rt,J}catch(Y){const J="FirebaseError"!==Y.name&&R<3;if(kt("SimpleDb","Transaction failed with error:",Y.message,"Retrying:",J),_.close(),!J)return Promise.reject(Y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Id{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Wl(this.Ft.delete())}}class ph extends Z{constructor(e,t){super(P.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uc(o){return"IndexedDbTransactionError"===o.name}class Vy{constructor(e){this.store=e}put(e,t){let l;return void 0!==t?(kt("SimpleDb","PUT",this.store.name,e,t),l=this.store.put(t,e)):(kt("SimpleDb","PUT",this.store.name,"<auto-key>",e),l=this.store.put(e)),Wl(l)}add(e){return kt("SimpleDb","ADD",this.store.name,e,e),Wl(this.store.add(e))}get(e){return Wl(this.store.get(e)).next(t=>(void 0===t&&(t=null),kt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return kt("SimpleDb","DELETE",this.store.name,e),Wl(this.store.delete(e))}count(){return kt("SimpleDb","COUNT",this.store.name),Wl(this.store.count())}qt(e,t){const l=this.options(e,t);if(l.index||"function"!=typeof this.store.getAll){const h=this.cursor(l),_=[];return this.Kt(h,(C,R)=>{_.push(R)}).next(()=>_)}{const h=this.store.getAll(l.range);return new gt((_,C)=>{h.onerror=R=>{C(R.target.error)},h.onsuccess=R=>{_(R.target.result)}})}}Gt(e,t){const l=this.store.getAll(e,null===t?void 0:t);return new gt((h,_)=>{l.onerror=C=>{_(C.target.error)},l.onsuccess=C=>{h(C.target.result)}})}Qt(e,t){kt("SimpleDb","DELETE ALL",this.store.name);const l=this.options(e,t);l.jt=!1;const h=this.cursor(l);return this.Kt(h,(_,C,R)=>R.delete())}Wt(e,t){let l;t?l=e:(l={},t=e);const h=this.cursor(l);return this.Kt(h,t)}zt(e){const t=this.cursor({});return new gt((l,h)=>{t.onerror=_=>{const C=gh(_.target.error);h(C)},t.onsuccess=_=>{const C=_.target.result;C?e(C.primaryKey,C.value).next(R=>{R?C.continue():l()}):l()}})}Kt(e,t){const l=[];return new gt((h,_)=>{e.onerror=C=>{_(C.target.error)},e.onsuccess=C=>{const R=C.target.result;if(!R)return void h();const Y=new Id(R),J=t(R.primaryKey,R.value,Y);if(J instanceof gt){const ge=J.catch(Re=>(Y.done(),gt.reject(Re)));l.push(ge)}Y.isDone?h():null===Y.Lt?R.continue():R.continue(Y.Lt)}}).next(()=>gt.waitFor(l))}options(e,t){let l;return void 0!==e&&("string"==typeof e?l=e:t=e),{index:l,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const l=this.store.index(e.index);return e.jt?l.openKeyCursor(e.range,t):l.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wl(o){return new gt((e,t)=>{o.onsuccess=l=>{e(l.target.result)},o.onerror=l=>{const h=gh(l.target.error);t(h)}})}let Ff=!1;function gh(o){const e=el.Vt((0,Qe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(t)>=0){const l=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ff||(Ff=!0,setTimeout(()=>{throw l},0)),l}}return o}class Bp extends D_{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function No(o,e){const t=N(o);return el.xt(t.Ht,e)}class mh{constructor(e,t,l,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=l,this.mutations=h}applyToRemoteDocument(e,t){const l=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const _=this.mutations[h];_.key.isEqual(e.key)&&As(_,e,l[h])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Hl(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Hl(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const l=e.get(t.key),h=l;this.applyToLocalView(h),l.isValidDocument()||h.convertToNoDocument(In.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ti())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(t,l)=>Mc(t,l))&&$o(this.baseMutations,e.baseMutations,(t,l)=>Mc(t,l))}}class _h{constructor(e,t,l,h){this.batch=e,this.commitVersion=t,this.mutationResults=l,this.docVersions=h}static from(e,t,l){S(e.mutations.length===l.length);let h=Df;const _=e.mutations;for(let C=0;C<_.length;C++)h=h.insert(_[C].key,l[C].version);return new _h(e,t,l,h)}}class yh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zl{constructor(e,t,l,h,_=In.min(),C=In.min(),R=Qs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=l,this.sequenceNumber=h,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=R}withSequenceNumber(e){return new zl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lm{constructor(e){this.Jt=e}}function cm(o,e){const t=e.key,l={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())l.document={name:Du(h=o.Jt,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:ic(h,_.version.toTimestamp())};else if(e.isNoDocument())l.noDocument={path:t.path.toArray(),readTime:Zl(e.version)};else{if(!e.isUnknownDocument())return M();l.unknownDocument={path:t.path.toArray(),version:Zl(e.version)}}var h,_;return l}function vh(o){const e=o.toTimestamp();return[e.seconds,e.nanoseconds]}function Zl(o){const e=o.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vc(o){const e=new zi(o.seconds,o.nanoseconds);return In.fromTimestamp(e)}function Dd(o,e){const t=(e.baseMutations||[]).map(_=>zo(o.Jt,_));for(let _=0;_<e.mutations.length-1;++_){const C=e.mutations[_];_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(C.updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_)}const l=e.mutations.map(_=>zo(o.Jt,_)),h=zi.fromMillis(e.localWriteTimeMs);return new mh(e.batchId,h,t,l)}function Eh(o){const e=Vc(o.readTime),t=void 0!==o.lastLimboFreeSnapshotVersion?Vc(o.lastLimboFreeSnapshotVersion):In.min();let l;var h;return void 0!==o.query.documents?(S(1===(h=o.query).documents.length),l=Ss(Dc(oc(h.documents[0])))):l=Ss(ah(o.query)),new zl(l,o.targetId,0,o.lastListenSequenceNumber,e,t,Qs.fromBase64String(o.resumeToken))}function dm(o,e){const t=Zl(e.snapshotVersion),l=Zl(e.lastLimboFreeSnapshotVersion);let h;h=yu(e.target)?Fc(o.Jt,e.target):ql(o.Jt,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Go(e.target),readTime:t,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:l,query:h}}function jp(o){const e=ah({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?Sc(e,e.limit,"L"):e}function wh(o,e){return new yh(e.largestBatchId,zo(o.Jt,e.overlayMutation))}function bh(o,e){const t=e.path.lastSegment();return[o,oe(e.path.popLast()),t]}class By{getBundleMetadata(e,t){return hm(e).get(t).next(l=>{if(l)return{id:(h=l).bundleId,createTime:Vc(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return hm(e).put({bundleId:(l=t).id,createTime:Zl(Ms(l.createTime)),version:l.version});var l}getNamedQuery(e,t){return S_(e).get(t).next(l=>{if(l)return{name:(h=l).name,query:jp(h.bundledQuery),readTime:Vc(h.readTime)};var h})}saveNamedQuery(e,t){return S_(e).put({name:(l=t).name,readTime:Zl(Ms(l.readTime)),bundledQuery:l.bundledQuery});var l}}function hm(o){return No(o,"bundles")}function S_(o){return No(o,"namedQueries")}class Hp{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Hp(e,t.uid||"")}getOverlay(e,t){return Sd(e).get(bh(this.userId,t)).next(l=>l?wh(this.M,l):null)}saveOverlays(e,t,l){const h=[];return l.forEach((_,C)=>{const R=new yh(t,C);h.push(this.Xt(e,R))}),gt.waitFor(h)}removeOverlaysForBatchId(e,t,l){const h=new Set;t.forEach(C=>h.add(oe(C.getCollectionPath())));const _=[];return h.forEach(C=>{const R=IDBKeyRange.bound([this.userId,C,l],[this.userId,C,l+1],!1,!0);_.push(Sd(e).Qt("collectionPathOverlayIndex",R))}),gt.waitFor(_)}getOverlaysForCollection(e,t,l){const h=yd(),_=oe(t),C=IDBKeyRange.bound([this.userId,_,l],[this.userId,_,Number.POSITIVE_INFINITY],!0);return Sd(e).qt("collectionPathOverlayIndex",C).next(R=>{for(const Y of R){const J=wh(this.M,Y);h.set(J.getKey(),J)}return h})}getOverlaysForCollectionGroup(e,t,l,h){const _=yd();let C;const R=IDBKeyRange.bound([this.userId,t,l],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sd(e).Wt({index:"collectionGroupOverlayIndex",range:R},(Y,J,ge)=>{const Re=wh(this.M,J);_.size()<h||Re.largestBatchId===C?(_.set(Re.getKey(),Re),C=Re.largestBatchId):ge.done()}).next(()=>_)}Xt(e,t){return Sd(e).put(function(l,h,_){const[C,R,Y]=bh(h,_.mutation.key);return{userId:h,collectionPath:R,documentId:Y,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Su(l.Jt,_.mutation)}}(this.M,this.userId,t))}}function Sd(o){return No(o,"documentOverlays")}class Bc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Qn(e.integerValue));else if("doubleValue"in e){const l=Qn(e.doubleValue);isNaN(l)?this.ne(t,13):(this.ne(t,15),Ma(l)?t.se(0):t.se(l))}else if("timestampValue"in e){const l=e.timestampValue;this.ne(t,20),"string"==typeof l?t.ie(l):(t.ie(`${l.seconds||""}`),t.se(l.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Aa(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const l=e.geoPointValue;this.ne(t,45),t.se(l.latitude||0),t.se(l.longitude||0)}else"mapValue"in e?Sl(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):M()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const l=e.fields||{};this.ne(t,55);for(const h of Object.keys(l))this.re(h,t),this.te(l[h],t)}he(e,t){const l=e.values||[];this.ne(t,50);for(const h of l)this.te(h,t)}ae(e,t){this.ne(t,37),jt.fromName(e).path.forEach(l=>{this.ne(t,60),this.le(l,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Kl(o){if(0===o)return 8;let e=0;return o>>4==0&&(e+=4,o<<=4),o>>6==0&&(e+=2,o<<=2),o>>7==0&&(e+=1),e}function A_(o){const e=64-function(t){let l=0;for(let h=0;h<8;++h){const _=Kl(255&t[h]);if(l+=_,8!==_)break}return l}(o);return Math.ceil(e/8)}Bc.fe=new Bc;class fm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this._e(l.value),l=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this.ge(l.value),l=t.next();this.ye()}pe(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this._e(l);else if(l<2048)this._e(960|l>>>6),this._e(128|63&l);else if(t<"\ud800"||"\udbff"<t)this._e(480|l>>>12),this._e(128|63&l>>>6),this._e(128|63&l);else{const h=t.codePointAt(0);this._e(240|h>>>18),this._e(128|63&h>>>12),this._e(128|63&h>>>6),this._e(128|63&h)}}this.we()}Ie(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this.ge(l);else if(l<2048)this.ge(960|l>>>6),this.ge(128|63&l);else if(t<"\ud800"||"\udbff"<t)this.ge(480|l>>>12),this.ge(128|63&l>>>6),this.ge(128|63&l);else{const h=t.codePointAt(0);this.ge(240|h>>>18),this.ge(128|63&h>>>12),this.ge(128|63&h>>>6),this.ge(128|63&h)}}this.ye()}Te(e){const t=this.Ee(e),l=A_(t);this.Ae(1+l),this.buffer[this.position++]=255&l;for(let h=t.length-l;h<t.length;++h)this.buffer[this.position++]=255&t[h]}Re(e){const t=this.Ee(e),l=A_(t);this.Ae(1+l),this.buffer[this.position++]=~(255&l);for(let h=t.length-l;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(h){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,h,!1),new Uint8Array(_.buffer)}(e),l=0!=(128&t[0]);t[0]^=l?255:128;for(let h=1;h<t.length;++h)t[h]^=l?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let l=2*this.buffer.length;l<t&&(l=t);const h=new Uint8Array(l);h.set(this.buffer),this.buffer=h}}class jc{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class M_{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Ch{constructor(){this.De=new fm,this.Ce=new jc(this.De),this.xe=new M_(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class tl{constructor(e,t,l,h){this.indexId=e,this.documentKey=t,this.arrayValue=l,this.directionalValue=h}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,l=new Uint8Array(t);return l.set(this.directionalValue,0),t!==e?l.set([0],this.directionalValue.length):++l[l.length-1],new tl(this.indexId,this.documentKey,this.arrayValue,l)}}function Yl(o,e){let t=o.indexId-e.indexId;return 0!==t?t:(t=Lf(o.arrayValue,e.arrayValue),0!==t?t:(t=Lf(o.directionalValue,e.directionalValue),0!==t?t:jt.comparator(o.documentKey,e.documentKey)))}function Lf(o,e){for(let t=0;t<o.length&&t<e.length;++t){const l=o[t]-e[t];if(0!==l)return l}return o.length-e.length}class jy{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const l=t;l.S()?this.Fe=l:this.Oe.push(l)}}$e(e){const t=_e(e);if(void 0!==t&&!this.Be(t))return!1;const l=qe(e);let h=0,_=0;for(;h<l.length&&this.Be(l[h]);++h);if(h===l.length)return!0;if(void 0!==this.Fe){const C=l[h];if(!this.Le(this.Fe,C)||!this.Ue(this.Me[_++],C))return!1;++h}for(;h<l.length;++h){const C=l[h];if(_>=this.Me.length||!this.Ue(this.Me[_++],C))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Hy{constructor(){this.qe=new Xn}addToCollectionParentIndex(e,t){return this.qe.add(t),gt.resolve()}getCollectionParents(e,t){return gt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return gt.resolve()}deleteFieldIndex(e,t){return gt.resolve()}getDocumentsMatchingTarget(e,t){return gt.resolve(null)}getIndexType(e,t){return gt.resolve(0)}getFieldIndexes(e,t){return gt.resolve([])}getNextCollectionGroupToUpdate(e){return gt.resolve(null)}getMinOffset(e,t){return gt.resolve(En.min())}updateCollectionGroup(e,t,l){return gt.resolve()}updateIndexEntries(e,t){return gt.resolve()}}class Xn{constructor(){this.index={}}add(e){const t=e.lastSegment(),l=e.popLast(),h=this.index[t]||new yn(qr.comparator),_=!h.has(l);return this.index[t]=h.add(l),_}has(e){const t=e.lastSegment(),l=e.popLast(),h=this.index[t];return h&&h.has(l)}getEntries(e){return(this.index[e]||new yn(qr.comparator)).toArray()}}const Th=new Uint8Array(0);class $p{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Xn,this.Ge=new Qa(l=>Go(l),(l,h)=>hl(l,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const l=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const _={collectionId:l,parent:oe(h)};return pm(e).put(_)}return gt.resolve()}getCollectionParents(e,t){const l=[],h=IDBKeyRange.bound([t,""],[fu(t),""],!1,!0);return pm(e).qt(h).next(_=>{for(const C of _){if(C.collectionId!==t)break;l.push(Ft(C.parent))}return l})}addFieldIndex(e,t){const l=Zo(e),h={indexId:(_=t).indexId,collectionGroup:_.collectionGroup,fields:_.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var _;return delete h.indexId,l.add(h).next()}deleteFieldIndex(e,t){const l=Zo(e),h=Uf(e),_=La(e);return l.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const l=La(e);let h=!0;const _=new Map;return gt.forEach(this.Qe(t),C=>this.je(e,C).next(R=>{h&&(h=!!R),_.set(C,R)})).next(()=>{if(h){let C=ti();const R=[];return gt.forEach(_,(Y,J)=>{var ge;kt("IndexedDbIndexManager",`Using index ${ge=Y,`id=${ge.indexId}|cg=${ge.collectionGroup}|f=${ge.fields.map(Bi=>`${Bi.fieldPath}:${Bi.kind}`).join(",")}`} to execute ${Go(t)}`);const Re=function(Bi,co){const ji=_e(co);if(void 0===ji)return null;for(const Hs of hi(Bi,ji.fieldPath))switch(Hs.op){case"array-contains-any":return Hs.value.arrayValue.values||[];case"array-contains":return[Hs.value]}return null}(J,Y),at=function(Bi,co){const ji=new Map;for(const Hs of qe(co))for(const Ea of hi(Bi,Hs.fieldPath))switch(Ea.op){case"==":case"in":ji.set(Hs.fieldPath.canonicalString(),Ea.value);break;case"not-in":case"!=":return ji.set(Hs.fieldPath.canonicalString(),Ea.value),Array.from(ji.values())}return null}(J,Y),At=function(Bi,co){const ji=[];let Hs=!0;for(const Ea of qe(co)){const Sp=0===Ea.kind?ur(Bi,Ea.fieldPath,Bi.startAt):yo(Bi,Ea.fieldPath,Bi.startAt);ji.push(Sp.value),Hs&&(Hs=Sp.inclusive)}return new Za(ji,Hs)}(J,Y),Nt=function(Bi,co){const ji=[];let Hs=!0;for(const Ea of qe(co)){const Sp=0===Ea.kind?yo(Bi,Ea.fieldPath,Bi.endAt):ur(Bi,Ea.fieldPath,Bi.endAt);ji.push(Sp.value),Hs&&(Hs=Sp.inclusive)}return new Za(ji,Hs)}(J,Y),pn=this.We(Y,J,At),Bn=this.We(Y,J,Nt),Vi=this.ze(Y,J,at),uo=this.He(Y.indexId,Re,pn,At.inclusive,Bn,Nt.inclusive,Vi);return gt.forEach(uo,Bi=>l.Gt(Bi,t.limit).next(co=>{co.forEach(ji=>{const Hs=jt.fromSegments(ji.documentKey);C.has(Hs)||(C=C.add(Hs),R.push(Hs))})}))}).next(()=>R)}return gt.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,l,h,_,C,R){const Y=(null!=t?t.length:1)*Math.max(l.length,_.length),J=Y/(null!=t?t.length:1),ge=[];for(let Re=0;Re<Y;++Re){const at=t?this.Je(t[Re/J]):Th,At=this.Ye(e,at,l[Re%J],h),Nt=this.Xe(e,at,_[Re%J],C),pn=R.map(Bn=>this.Ye(e,at,Bn,!0));ge.push(...this.createRange(At,Nt,pn))}return ge}Ye(e,t,l,h){const _=new tl(e,jt.empty(),t,l);return h?_:_.ke()}Xe(e,t,l,h){const _=new tl(e,jt.empty(),t,l);return h?_.ke():_}je(e,t){const l=new jy(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(_=>{let C=null;for(const R of _)l.$e(R)&&(!C||R.fields.length>C.fields.length)&&(C=R);return C})}getIndexType(e,t){let l=2;return gt.forEach(this.Qe(t),h=>this.je(e,h).next(_=>{_?0!==l&&_.fields.length<function(C){let R=new yn(fs.comparator),Y=!1;for(const J of C.filters){const ge=J;ge.field.isKeyField()||("array-contains"===ge.op||"array-contains-any"===ge.op?Y=!0:R=R.add(ge.field))}for(const J of C.orderBy)J.field.isKeyField()||(R=R.add(J.field));return R.size+(Y?1:0)}(h)&&(l=1):l=0})).next(()=>l)}Ze(e,t){const l=new Ch;for(const h of qe(e)){const _=t.data.field(h.fieldPath);if(null==_)return null;const C=l.Ne(h.kind);Bc.fe.Zt(_,C)}return l.Se()}Je(e){const t=new Ch;return Bc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const l=new Ch;return Bc.fe.Zt(ss(this.databaseId,t),l.Ne(function(h){const _=qe(h);return 0===_.length?0:_[_.length-1].kind}(e))),l.Se()}ze(e,t,l){if(null===l)return[];let h=[];h.push(new Ch);let _=0;for(const C of qe(e)){const R=l[_++];for(const Y of h)if(this.en(t,C.fieldPath)&&Vl(R))h=this.nn(h,C,R);else{const J=Y.Ne(C.kind);Bc.fe.Zt(R,J)}}return this.sn(h)}We(e,t,l){return this.ze(e,t,l.position)}sn(e){const t=[];for(let l=0;l<e.length;++l)t[l]=e[l].Se();return t}nn(e,t,l){const h=[...e],_=[];for(const C of l.arrayValue.values||[])for(const R of h){const Y=new Ch;Y.seed(R.Se()),Bc.fe.Zt(C,Y.Ne(t.kind)),_.push(Y)}return _}en(e,t){return!!e.filters.find(l=>l instanceof xo&&l.field.isEqual(t)&&("in"===l.op||"not-in"===l.op))}getFieldIndexes(e,t){const l=Zo(e),h=Uf(e);return(t?l.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):l.qt()).next(_=>{const C=[];return gt.forEach(_,R=>h.get([R.indexId,this.uid]).next(Y=>{C.push(function(J,ge){const Re=ge?new Rt(ge.sequenceNumber,new En(Vc(ge.readTime),new jt(Ft(ge.documentKey)),ge.largestBatchId)):Rt.empty(),at=J.fields.map(([At,Nt])=>new nt(fs.fromServerFormat(At),Nt));return new se(J.indexId,J.collectionGroup,at,Re)}(R,Y))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((l,h)=>{const _=l.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==_?_:Nn(l.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,l){const h=Zo(e),_=Uf(e);return this.rn(e).next(C=>h.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>gt.forEach(R,Y=>{return _.put({indexId:Y.indexId,uid:this.user.uid||"",sequenceNumber:C,readTime:Zl((at=l).readTime),documentKey:oe(at.documentKey.path),largestBatchId:at.largestBatchId});var at})))}updateIndexEntries(e,t){const l=new Map;return gt.forEach(t,(h,_)=>{const C=l.get(h.collectionGroup);return(C?gt.resolve(C):this.getFieldIndexes(e,h.collectionGroup)).next(R=>(l.set(h.collectionGroup,R),gt.forEach(R,Y=>this.on(e,h,Y).next(J=>{const ge=this.un(_,Y);return J.isEqual(ge)?gt.resolve():this.an(e,_,Y,J,ge)}))))})}cn(e,t,l,h){return La(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.tn(l,t.key),documentKey:t.key.path.toArray()})}hn(e,t,l,h){return La(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.tn(l,t.key),t.key.path.toArray()])}on(e,t,l){const h=La(e);let _=new yn(Yl);return h.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([l.indexId,this.uid,this.tn(l,t)])},(C,R)=>{_=_.add(new tl(l.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>_)}un(e,t){let l=new yn(Yl);const h=this.Ze(t,e);if(null==h)return l;const _=_e(t);if(null!=_){const C=e.data.field(_.fieldPath);if(Vl(C))for(const R of C.arrayValue.values||[])l=l.add(new tl(t.indexId,e.key,this.Je(R),h))}else l=l.add(new tl(t.indexId,e.key,Th,h));return l}an(e,t,l,h,_){kt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(R,Y,J,ge,Re){const at=R.getIterator(),At=Y.getIterator();let Nt=xn(at),pn=xn(At);for(;Nt||pn;){let Bn=!1,Vi=!1;if(Nt&&pn){const uo=J(Nt,pn);uo<0?Vi=!0:uo>0&&(Bn=!0)}else null!=Nt?Vi=!0:Bn=!0;Bn?(ge(pn),pn=xn(At)):Vi?(Re(Nt),Nt=xn(at)):(Nt=xn(at),pn=xn(At))}}(h,_,Yl,R=>{C.push(this.cn(e,t,l,R))},R=>{C.push(this.hn(e,t,l,R))}),gt.waitFor(C)}rn(e){let t=1;return Uf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(l,h,_)=>{_.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,l){l=l.sort((C,R)=>Yl(C,R)).filter((C,R,Y)=>!R||0!==Yl(C,Y[R-1]));const h=[];h.push(e);for(const C of l){const R=Yl(C,e),Y=Yl(C,t);if(0===R)h[0]=e.ke();else if(R>0&&Y<0)h.push(C),h.push(C.ke());else if(Y>0)break}h.push(t);const _=[];for(let C=0;C<h.length;C+=2)_.push(IDBKeyRange.bound([h[C].indexId,this.uid,h[C].arrayValue,h[C].directionalValue,Th,[]],[h[C+1].indexId,this.uid,h[C+1].arrayValue,h[C+1].directionalValue,Th,[]]));return _}getMinOffset(e,t){let l;return gt.forEach(this.Qe(t),h=>this.je(e,h).next(_=>{_?(!l||Pr(_.indexState.offset,l)<0)&&(l=_.indexState.offset):l=En.min()})).next(()=>l)}}function pm(o){return No(o,"collectionParents")}function La(o){return No(o,"indexEntries")}function Zo(o){return No(o,"indexConfiguration")}function Uf(o){return No(o,"indexState")}const x_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ga{constructor(e,t,l){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=l}static withCacheSize(e){return new ga(e,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Nl(o,e,t){const l=o.store("mutations"),h=o.store("documentMutations"),_=[],C=IDBKeyRange.only(t.batchId);let R=0;const Y=l.Wt({range:C},(ge,Re,at)=>(R++,at.delete()));_.push(Y.next(()=>{S(1===R)}));const J=[];for(const ge of t.mutations){const Re=Sn(e,ge.key.path,t.batchId);_.push(h.delete(Re)),J.push(ge.key)}return gt.waitFor(_).next(()=>J)}function Ih(o){if(!o)return 0;let e;if(o.document)e=o.document;else if(o.unknownDocument)e=o.unknownDocument;else{if(!o.noDocument)throw M();e=o.noDocument}return JSON.stringify(e).length}ga.DEFAULT_COLLECTION_PERCENTILE=10,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ga.DEFAULT=new ga(41943040,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ga.DISABLED=new ga(-1,0,0);class Gp{constructor(e,t,l,h){this.userId=e,this.M=t,this.indexManager=l,this.referenceDelegate=h,this.ln={}}static Yt(e,t,l,h){S(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new Gp(_,t,l,h)}checkEmpty(e){let t=!0;const l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mu(e).Wt({index:"userMutationsIndex",range:l},(h,_,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,l,h){const _=Ad(e),C=Mu(e);return C.add({}).next(R=>{S("number"==typeof R);const Y=new mh(R,t,l,h),J=function(at,At,Nt){const pn=Nt.baseMutations.map(Vi=>Su(at.Jt,Vi)),Bn=Nt.mutations.map(Vi=>Su(at.Jt,Vi));return{userId:At,batchId:Nt.batchId,localWriteTimeMs:Nt.localWriteTime.toMillis(),baseMutations:pn,mutations:Bn}}(this.M,this.userId,Y),ge=[];let Re=new yn((at,At)=>Nn(at.canonicalString(),At.canonicalString()));for(const at of h){const At=Sn(this.userId,at.key.path,R);Re=Re.add(at.key.path.popLast()),ge.push(C.put(J)),ge.push(_.put(At,Xs))}return Re.forEach(at=>{ge.push(this.indexManager.addToCollectionParentIndex(e,at))}),e.addOnCommittedListener(()=>{this.ln[R]=Y.keys()}),gt.waitFor(ge).next(()=>Y)})}lookupMutationBatch(e,t){return Mu(e).get(t).next(l=>l?(S(l.userId===this.userId),Dd(this.M,l)):null)}fn(e,t){return this.ln[t]?gt.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(l=>{if(l){const h=l.keys();return this.ln[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const l=t+1,h=IDBKeyRange.lowerBound([this.userId,l]);let _=null;return Mu(e).Wt({index:"userMutationsIndex",range:h},(C,R,Y)=>{R.userId===this.userId&&(S(R.batchId>=l),_=Dd(this.M,R)),Y.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let l=-1;return Mu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(h,_,C)=>{l=_.batchId,C.done()}).next(()=>l)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mu(e).qt("userMutationsIndex",t).next(l=>l.map(h=>Dd(this.M,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const l=Dn(this.userId,t.path),h=IDBKeyRange.lowerBound(l),_=[];return Ad(e).Wt({range:h},(C,R,Y)=>{const[J,ge,Re]=C,at=Ft(ge);if(J===this.userId&&t.path.isEqual(at))return Mu(e).get(Re).next(At=>{if(!At)throw M();S(At.userId===this.userId),_.push(Dd(this.M,At))});Y.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new yn(Nn);const h=[];return t.forEach(_=>{const C=Dn(this.userId,_.path),R=IDBKeyRange.lowerBound(C),Y=Ad(e).Wt({range:R},(J,ge,Re)=>{const[at,At,Nt]=J,pn=Ft(At);at===this.userId&&_.path.isEqual(pn)?l=l.add(Nt):Re.done()});h.push(Y)}),gt.waitFor(h).next(()=>this.dn(e,l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,h=l.length+1,_=Dn(this.userId,l),C=IDBKeyRange.lowerBound(_);let R=new yn(Nn);return Ad(e).Wt({range:C},(Y,J,ge)=>{const[Re,at,At]=Y,Nt=Ft(at);Re===this.userId&&l.isPrefixOf(Nt)?Nt.length===h&&(R=R.add(At)):ge.done()}).next(()=>this.dn(e,R))}dn(e,t){const l=[],h=[];return t.forEach(_=>{h.push(Mu(e).get(_).next(C=>{if(null===C)throw M();S(C.userId===this.userId),l.push(Dd(this.M,C))}))}),gt.waitFor(h).next(()=>l)}removeMutationBatch(e,t){return Nl(e.Ht,this.userId,t).next(l=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),gt.forEach(l,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return gt.resolve();const l=IDBKeyRange.lowerBound([this.userId]),h=[];return Ad(e).Wt({range:l},(_,C,R)=>{if(_[0]===this.userId){const Y=Ft(_[1]);h.push(Y)}else R.done()}).next(()=>{S(0===h.length)})})}containsKey(e,t){return Vf(e,this.userId,t)}wn(e){return Dh(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vf(o,e,t){const l=Dn(e,t.path),h=l[1],_=IDBKeyRange.lowerBound(l);let C=!1;return Ad(o).Wt({range:_,jt:!0},(R,Y,J)=>{const[ge,Re,at]=R;ge===e&&Re===h&&(C=!0),J.done()}).next(()=>C)}function Mu(o){return No(o,"mutations")}function Ad(o){return No(o,"documentMutations")}function Dh(o){return No(o,"mutationQueues")}class Ql{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Ql(0)}static yn(){return new Ql(-1)}}class Bf{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const l=new Ql(t.highestTargetId);return t.highestTargetId=l.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>In.fromTimestamp(new zi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,l){return this.pn(e).next(h=>(h.highestListenSequenceNumber=t,l&&(h.lastRemoteSnapshotVersion=l.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.In(e,h)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(l=>(l.targetCount+=1,this.En(t,l),this.In(e,l))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ac(e).delete(t.targetId)).next(()=>this.pn(e)).next(l=>(S(l.targetCount>0),l.targetCount-=1,this.In(e,l)))}removeTargets(e,t,l){let h=0;const _=[];return ac(e).Wt((C,R)=>{const Y=Eh(R);Y.sequenceNumber<=t&&null===l.get(Y.targetId)&&(h++,_.push(this.removeTargetData(e,Y)))}).next(()=>gt.waitFor(_)).next(()=>h)}forEachTarget(e,t){return ac(e).Wt((l,h)=>{const _=Eh(h);t(_)})}pn(e){return Md(e).get("targetGlobalKey").next(t=>(S(null!==t),t))}In(e,t){return Md(e).put("targetGlobalKey",t)}Tn(e,t){return ac(e).put(dm(this.M,t))}En(e,t){let l=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,l=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,l=!0),l}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const l=Go(t),h=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]);let _=null;return ac(e).Wt({range:h,index:"queryTargetsIndex"},(C,R,Y)=>{const J=Eh(R);hl(t,J.target)&&(_=J,Y.done())}).next(()=>_)}addMatchingKeys(e,t,l){const h=[],_=gl(e);return t.forEach(C=>{const R=oe(C.path);h.push(_.put({targetId:l,path:R})),h.push(this.referenceDelegate.addReference(e,l,C))}),gt.waitFor(h)}removeMatchingKeys(e,t,l){const h=gl(e);return gt.forEach(t,_=>{const C=oe(_.path);return gt.waitFor([h.delete([l,C]),this.referenceDelegate.removeReference(e,l,_)])})}removeMatchingKeysForTargetId(e,t){const l=gl(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return l.delete(h)}getMatchingKeysForTargetId(e,t){const l=IDBKeyRange.bound([t],[t+1],!1,!0),h=gl(e);let _=ti();return h.Wt({range:l,jt:!0},(C,R,Y)=>{const J=Ft(C[1]),ge=new jt(J);_=_.add(ge)}).next(()=>_)}containsKey(e,t){const l=oe(t.path),h=IDBKeyRange.bound([l],[fu(l)],!1,!0);let _=0;return gl(e).Wt({index:"documentTargetsIndex",jt:!0,range:h},([C,R],Y,J)=>{0!==C&&(_++,J.done())}).next(()=>_>0)}Et(e,t){return ac(e).get(t).next(l=>l?Eh(l):null)}}function ac(o){return No(o,"targets")}function Md(o){return No(o,"targetGlobal")}function gl(o){return No(o,"targetDocuments")}function Hc(o){return jf.apply(this,arguments)}function jf(){return jf=(0,Oe.Z)(function*(o){if(o.code!==P.FAILED_PRECONDITION||o.message!==kf)throw o;kt("LocalStore","Unexpectedly lost primary lease")}),jf.apply(this,arguments)}function qp([o,e],[t,l]){const h=Nn(o,t);return 0===h?Nn(e,l):h}class $y{constructor(e){this.An=e,this.buffer=new yn(qp),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const l=this.buffer.last();qp(t,l)<0&&(this.buffer=this.buffer.delete(l).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hf{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const l=this.Vn?3e5:6e4;kt("LruGarbageCollector",`Garbage collection scheduled in ${l}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",l,(0,Oe.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(h){Uc(h)?kt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",h):yield Hc(h)}yield t.Sn(e)}))}}class R_{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(l=>Math.floor(t/100*l))}nthSequenceNumber(e,t){if(0===t)return gt.resolve(hs.A);const l=new $y(t);return this.Dn.forEachTarget(e,h=>l.Pn(h.sequenceNumber)).next(()=>this.Dn.xn(e,h=>l.Pn(h))).next(()=>l.maxValue)}removeTargets(e,t,l){return this.Dn.removeTargets(e,t,l)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(x_)):this.getCacheSize(e).next(l=>l<this.params.cacheSizeCollectionThreshold?(kt("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x_):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let l,h,_,C,R,Y,J;const ge=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Re=>(Re>this.params.maximumSequenceNumbersToCollect?(kt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Re}`),h=this.params.maximumSequenceNumbersToCollect):h=Re,C=Date.now(),this.nthSequenceNumber(e,h))).next(Re=>(l=Re,R=Date.now(),this.removeTargets(e,l,t))).next(Re=>(_=Re,Y=Date.now(),this.removeOrphanedDocuments(e,l))).next(Re=>(J=Date.now(),Tl()<=it.in.DEBUG&&kt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-ge}ms\n\tDetermined least recently used ${h} in `+(R-C)+`ms\n\tRemoved ${_} targets in `+(Y-R)+`ms\n\tRemoved ${Re} documents in `+(J-Y)+`ms\nTotal Duration: ${J-ge}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:_,documentsRemoved:Re})))}}class Pv{constructor(e,t){this.db=e,this.garbageCollector=new R_(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(l=>t.next(h=>l+h))}kn(e){let t=0;return this.xn(e,l=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(l,h)=>t(h))}addReference(e,t,l){return Wp(e,l)}removeReference(e,t,l){return Wp(e,l)}removeTargets(e,t,l){return this.db.getTargetCache().removeTargets(e,t,l)}markPotentiallyOrphaned(e,t){return Wp(e,t)}On(e,t){return function(l,h){let _=!1;return Dh(l).zt(C=>Vf(l,C,h).next(R=>(R&&(_=!0),gt.resolve(!R)))).next(()=>_)}(e,t)}removeOrphanedDocuments(e,t){const l=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let _=0;return this.Mn(e,(C,R)=>{if(R<=t){const Y=this.On(e,C).next(J=>{if(!J)return _++,l.getEntry(e,C).next(()=>(l.removeEntry(C,In.min()),gl(e).delete([0,oe(C.path)])))});h.push(Y)}}).next(()=>gt.waitFor(h)).next(()=>l.apply(e)).next(()=>_)}removeTarget(e,t){const l=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,l)}updateLimboDocument(e,t){return Wp(e,t)}Mn(e,t){const l=gl(e);let h,_=hs.A;return l.Wt({index:"documentTargetsIndex"},([C,R],{path:Y,sequenceNumber:J})=>{0===C?(_!==hs.A&&t(new jt(Ft(h)),_),_=J,h=Y):_=hs.A}).next(()=>{_!==hs.A&&t(new jt(Ft(h)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wp(o,e){return gl(o).put((l=o.currentSequenceNumber,{targetId:0,path:oe(e.path),sequenceNumber:l}));var l}class gm{constructor(){this.changes=new Qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,H.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const l=this.changes.get(t);return void 0!==l?gt.resolve(l):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zp{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,l){return lc(e).put(l)}removeEntry(e,t,l){return lc(e).delete(function(h,_){const C=h.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],vh(_),C[C.length-1]]}(t,l))}updateMetadata(e,t){return this.getMetadata(e).next(l=>(l.byteSize+=t,this.Fn(e,l)))}getEntry(e,t){let l=H.newInvalidDocument(t);return lc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Zp(t))},(h,_)=>{l=this.$n(t,_)}).next(()=>l)}Bn(e,t){let l={size:0,document:H.newInvalidDocument(t)};return lc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Zp(t))},(h,_)=>{l={document:this.$n(t,_),size:Ih(_)}}).next(()=>l)}getEntries(e,t){let l=Eo();return this.Ln(e,t,(h,_)=>{const C=this.$n(h,_);l=l.insert(h,C)}).next(()=>l)}Un(e,t){let l=Eo(),h=new cn(jt.comparator);return this.Ln(e,t,(_,C)=>{const R=this.$n(_,C);l=l.insert(_,R),h=h.insert(_,Ih(C))}).next(()=>({documents:l,qn:h}))}Ln(e,t,l){if(t.isEmpty())return gt.resolve();let h=new yn(_m);t.forEach(Y=>h=h.add(Y));const _=IDBKeyRange.bound(Zp(h.first()),Zp(h.last())),C=h.getIterator();let R=C.getNext();return lc(e).Wt({index:"documentKeyIndex",range:_},(Y,J,ge)=>{const Re=jt.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;R&&_m(R,Re)<0;)l(R,null),R=C.getNext();R&&R.isEqual(Re)&&(l(R,J),R=C.hasNext()?C.getNext():null),R?ge.Ut(Zp(R)):ge.done()}).next(()=>{for(;R;)l(R,null),R=C.hasNext()?C.getNext():null})}getAllFromCollection(e,t,l){const h=[t.popLast().toArray(),t.lastSegment(),vh(l.readTime),l.documentKey.path.isEmpty()?"":l.documentKey.path.lastSegment()],_=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lc(e).qt(IDBKeyRange.bound(h,_,!0)).next(C=>{let R=Eo();for(const Y of C){const J=this.$n(jt.fromSegments(Y.prefixPath.concat(Y.collectionGroup,Y.documentId)),Y);R=R.insert(J.key,J)}return R})}getAllFromCollectionGroup(e,t,l,h){let _=Eo();const C=P_(t,l),R=P_(t,En.max());return lc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,R,!0)},(Y,J,ge)=>{const Re=this.$n(jt.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);_=_.insert(Re.key,Re),_.size===h&&ge.done()}).next(()=>_)}newChangeBuffer(e){return new N_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mm(e).get("remoteDocumentGlobalKey").next(t=>(S(!!t),t))}Fn(e,t){return mm(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const l=function um(o,e){let t;if(e.document)t=so(o.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const l=jt.fromSegments(e.noDocument.path),h=Vc(e.noDocument.readTime);t=H.newNoDocument(l,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return M();{const l=jt.fromSegments(e.unknownDocument.path),h=Vc(e.unknownDocument.version);t=H.newUnknownDocument(l,h)}}return e.readTime&&t.setReadTime(function(l){const h=new zi(l[0],l[1]);return In.fromTimestamp(h)}(e.readTime)),t}(this.M,t);if(!l.isNoDocument()||!l.version.isEqual(In.min()))return l}return H.newInvalidDocument(e)}}class N_ extends gm{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Qa(l=>l.toString(),(l,h)=>l.isEqual(h))}applyChanges(e){const t=[];let l=0,h=new yn((_,C)=>Nn(_.canonicalString(),C.canonicalString()));return this.changes.forEach((_,C)=>{const R=this.Gn.get(_);if(t.push(this.Kn.removeEntry(e,_,R.readTime)),C.isValidDocument()){const Y=cm(this.Kn.M,C);h=h.add(_.path.popLast()),l+=Ih(Y)-R.size,t.push(this.Kn.addEntry(e,_,Y))}else if(l-=R.size,this.trackRemovals){const Y=cm(this.Kn.M,C.convertToNoDocument(In.min()));t.push(this.Kn.addEntry(e,_,Y))}}),h.forEach(_=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,_))}),t.push(this.Kn.updateMetadata(e,l)),gt.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(l=>(this.Gn.set(t,{size:l.size,readTime:l.document.readTime}),l.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:l,qn:h})=>(h.forEach((_,C)=>{this.Gn.set(_,{size:C,readTime:l.get(_).readTime})}),l))}}function mm(o){return No(o,"remoteDocumentGlobal")}function lc(o){return No(o,"remoteDocumentsV14")}function Zp(o){const e=o.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function P_(o,e){const t=e.documentKey.path.toArray();return[o,vh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _m(o,e){const t=o.path.toArray(),l=e.path.toArray();let h=0;for(let _=0;_<t.length-2&&_<l.length-2;++_)if(h=Nn(t[_],l[_]),h)return h;return h=Nn(t.length,l.length),h||(h=Nn(t[t.length-2],l[l.length-2]),h||Nn(t[t.length-1],l[l.length-1]))}class O_{constructor(e){this.M=e}kt(e,t,l,h){const _=new fh("createOrUpgrade",t);var R;l<1&&h>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sn,{unique:!0}),R.createObjectStore("documentMutations"),ym(e),function(R){R.createObjectStore("remoteDocuments")}(e));let C=gt.resolve();return l<3&&h>=3&&(0!==l&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),ym(e)),C=C.next(()=>function(R){const Y=R.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:In.min().toTimestamp(),targetCount:0};return Y.put("targetGlobalKey",J)}(_))),l<4&&h>=4&&(0!==l&&(C=C.next(()=>function(R,Y){return Y.store("mutations").qt().next(J=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sn,{unique:!0});const ge=Y.store("mutations"),Re=J.map(at=>ge.put(at));return gt.waitFor(Re)})}(e,_))),C=C.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),l<5&&h>=5&&(C=C.next(()=>this.Qn(_))),l<6&&h>=6&&(C=C.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.jn(_)))),l<7&&h>=7&&(C=C.next(()=>this.Wn(_))),l<8&&h>=8&&(C=C.next(()=>this.zn(e,_))),l<9&&h>=9&&(C=C.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),l<10&&h>=10&&(C=C.next(()=>this.Hn(_))),l<11&&h>=11&&(C=C.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),l<12&&h>=12&&(C=C.next(()=>{!function(R){const Y=R.createObjectStore("documentOverlays",{keyPath:dh});Y.createIndex("collectionPathOverlayIndex",Td,{unique:!1}),Y.createIndex("collectionGroupOverlayIndex",Vp,{unique:!1})}(e)})),l<13&&h>=13&&(C=C.next(()=>function(R){const Y=R.createObjectStore("remoteDocumentsV14",{keyPath:Fa});Y.createIndex("documentKeyIndex",Lc),Y.createIndex("collectionGroupIndex",Rf)}(e)).next(()=>this.Jn(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),l<14&&h>=14&&(C=C.next(()=>{!function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:Lp}).createIndex("sequenceNumberIndex",ch,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:Pf}).createIndex("documentKeyIndex",Up,{unique:!1})}(e)})),C}jn(e){let t=0;return e.store("remoteDocuments").Wt((l,h)=>{t+=Ih(h)}).next(()=>{const l={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",l)})}Qn(e){const t=e.store("mutationQueues"),l=e.store("mutations");return t.qt().next(h=>gt.forEach(h,_=>{const C=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return l.qt("userMutationsIndex",C).next(R=>gt.forEach(R,Y=>{S(Y.userId===_.userId);const J=Dd(this.M,Y);return Nl(e,_.userId,J).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),l=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const _=[];return l.Wt((C,R)=>{const Y=new qr(C),J=[0,oe(Y)];_.push(t.get(J).next(ge=>ge?gt.resolve():t.put({targetId:0,path:oe(Y),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>gt.waitFor(_))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:uh});const l=t.store("collectionParents"),h=new Xn,_=C=>{if(h.add(C)){const R=C.lastSegment(),Y=C.popLast();return l.put({collectionId:R,parent:oe(Y)})}};return t.store("remoteDocuments").Wt({jt:!0},(C,R)=>{const Y=new qr(C);return _(Y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([C,R,Y],J)=>{const ge=Ft(R);return _(ge.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((l,h)=>{const _=Eh(h),C=dm(this.M,_);return t.put(C)})}Jn(e,t){const l=t.store("remoteDocuments"),h=[];return l.Wt((_,C)=>{const R=t.store("remoteDocumentsV14"),Y=(J=C,J.document?new jt(qr.fromString(J.document.name).popFirst(5)):J.noDocument?jt.fromSegments(J.noDocument.path):J.unknownDocument?jt.fromSegments(J.unknownDocument.path):M()).path.toArray();var J;const ge={prefixPath:Y.slice(0,Y.length-2),collectionGroup:Y[Y.length-2],documentId:Y[Y.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};h.push(R.put(ge))}).next(()=>gt.waitFor(h))}}function ym(o){o.createObjectStore("targetDocuments",{keyPath:Au}).createIndex("documentTargetsIndex",lh,{unique:!0}),o.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Nf,{unique:!0}),o.createObjectStore("targetGlobal")}const $f="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $c{constructor(e,t,l,h,_,C,R,Y,J,ge,Re=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=l,this.Yn=_,this.window=C,this.document=R,this.Xn=J,this.Zn=ge,this.ts=Re,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=at=>Promise.resolve(),!$c.vt())throw new Z(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pv(this,h),this.hs=t+"main",this.M=new lm(Y),this.ls=new el(this.hs,this.ts,new O_(this.M)),this.fs=new Bf(this.referenceDelegate,this.M),this.ds=new zp(this.M),this._s=new By,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===ge&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(P.FAILED_PRECONDITION,$f);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new hs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var l=(0,Oe.Z)(function*(h){if(t.started)return e(h)});return function(h){return l.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Oe.Z)(function*(l){null===l.newVersion&&(yield e())});return function(l){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Oe.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Kp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Uc(e))return kt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return kt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Sh(e).get("owner").next(t=>gt.resolve(this.Ps(t)))}Vs(e){return Kp(e).delete(this.clientId)}vs(){var e=this;return(0,Oe.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",l=>{const h=No(l,"clientMetadata");return h.qt().next(_=>{const C=e.Ds(_,18e5),R=_.filter(Y=>-1===C.indexOf(Y));return gt.forEach(R,Y=>h.delete(Y.clientId)).next(()=>R)})}).catch(()=>[]);if(e.ws)for(const l of t)e.ws.removeItem(e.Cs(l.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?gt.resolve(!0):Sh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Z(P.FAILED_PRECONDITION,$f);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kp(e).qt().next(l=>void 0===this.Ds(l,5e3).find(h=>{if(this.clientId!==h.clientId){const C=!this.inForeground&&h.inForeground,R=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||C&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&kt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Oe.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const l=new Bp(t,hs.A);return e.Rs(l).next(()=>e.Vs(l))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(l=>this.Ss(l.updateTimeMs,t)&&!this.xs(l.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Kp(e).qt().next(t=>this.Ds(t,18e5).map(l=>l.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Gp.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new $p(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Hp.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,l){kt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",_=14===(C=this.ts)?am:13===C?hh:12===C?I_:11===C?Of:void M();var C;let R;return this.ls.runTransaction(e,h,_,Y=>(R=new Bp(Y,this.es?this.es.next():hs.A),"readwrite-primary"===t?this.Es(R).next(J=>!!J||this.As(R)).next(J=>{if(!J)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Z(P.FAILED_PRECONDITION,kf);return l(R)}).next(J=>this.bs(R).next(()=>J)):this.$s(R).next(()=>l(R)))).then(Y=>(R.raiseOnCommittedEvent(),Y))}$s(e){return Sh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Z(P.FAILED_PRECONDITION,$f)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sh(e).put("owner",t)}static vt(){return el.vt()}Rs(e){const t=Sh(e);return t.get("owner").next(l=>this.Ps(l)?(kt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):gt.resolve())}Ss(e,t){const l=Date.now();return!(e<l-t||e>l&&(yr(`Detected an update time that is in the future: ${e} > ${l}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Qe.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const l=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return kt("IndexedDbPersistence",`Client '${e}' ${l?"is":"is not"} zombied in LocalStorage`),l}catch(l){return yr("IndexedDbPersistence","Failed to get zombied client id.",l),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Sh(o){return No(o,"owner")}function Kp(o){return No(o,"clientMetadata")}function k_(o,e){let t=o.projectId;return o.isDefaultDatabase||(t+="."+o.database),"firestore/"+e+"/"+t+"/"}class Jl{constructor(e,t,l){this.ds=e,this.Bs=t,this.indexManager=l}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(l=>this.Us(e,t,l))}Us(e,t,l){return this.ds.getEntry(e,t).next(h=>{for(const _ of l)_.applyToLocalView(h);return h})}qs(e,t){e.forEach((l,h)=>{for(const _ of t)_.applyToLocalView(h)})}Ks(e,t){return this.ds.getEntries(e,t).next(l=>this.Gs(e,l).next(()=>l))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>this.qs(t,l))}Qs(e,t,l){return jt.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.js(e,t.path):tc(t)?this.Ws(e,t,l):this.zs(e,t,l);var h}js(e,t){return this.Ls(e,new jt(t)).next(l=>{let h=If();return l.isFoundDocument()&&(h=h.insert(l.key,l)),h})}Ws(e,t,l){const h=t.collectionGroup;let _=If();return this.indexManager.getCollectionParents(e,h).next(C=>gt.forEach(C,R=>{const Y=(J=t,ge=R.child(h),new Bl(ge,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,ge;return this.zs(e,Y,l).next(J=>{J.forEach((ge,Re)=>{_=_.insert(ge,Re)})})}).next(()=>_))}zs(e,t,l){let h;return this.ds.getAllFromCollection(e,t.path,l).next(_=>(h=_,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(_=>{for(const C of _)for(const R of C.mutations){const Y=R.key;let J=h.get(Y);null==J&&(J=H.newInvalidDocument(Y),h=h.insert(Y,J)),Hl(R,J,C.localWriteTime),J.isFoundDocument()||(h=h.remove(Y))}}).next(()=>(h.forEach((_,C)=>{yf(t,C)||(h=h.remove(_))}),h))}}class Ah{constructor(e,t,l,h){this.targetId=e,this.fromCache=t,this.Hs=l,this.Js=h}static Ys(e,t){let l=ti(),h=ti();for(const _ of t.docChanges)switch(_.type){case 0:l=l.add(_.doc.key);break;case 1:h=h.add(_.doc.key)}return new Ah(e,t.fromCache,l,h)}}class F_{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,l,h){return this.ti(e,t).next(_=>_||this.ei(e,t,h,l)).next(_=>_||this.ni(e,t))}ti(e,t){return gt.resolve(null)}ei(e,t,l,h){return function Ka(o){return 0===o.filters.length&&null===o.limit&&null==o.startAt&&null==o.endAt&&(0===o.explicitOrderBy.length||1===o.explicitOrderBy.length&&o.explicitOrderBy[0].field.isKeyField())}(t)||h.isEqual(In.min())?this.ni(e,t):this.Zs.Ks(e,l).next(_=>{const C=this.si(t,_);return this.ii(t,C,l,h)?this.ni(e,t):(Tl()<=it.in.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Wo(t)),this.ri(e,C,t,fn(h,-1)))})}si(e,t){let l=new yn(wu(e));return t.forEach((h,_)=>{yf(e,_)&&(l=l.add(_))}),l}ii(e,t,l,h){if(null===e.limit)return!1;if(l.size!==t.size)return!0;const _="F"===e.limitType?t.last():t.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(h)>0)}ni(e,t){return Tl()<=it.in.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",Wo(t)),this.Zs.Qs(e,t,En.min())}ri(e,t,l,h){return this.Zs.Qs(e,l,h).next(_=>(t.forEach(C=>{_=_.insert(C.key,C)}),_))}}class Mh{constructor(e,t,l,h){this.persistence=e,this.oi=t,this.M=h,this.ui=new cn(Nn),this.ai=new Qa(_=>Go(_),hl),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(l)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Jl(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function xh(o,e,t,l){return new Mh(o,e,t,l)}function vm(o,e){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,Oe.Z)(function*(o,e){const t=N(o);return yield t.persistence.runTransaction("Handle user change","readonly",l=>{let h;return t.Bs.getAllMutationBatches(l).next(_=>(h=_,t.li(e),t.Bs.getAllMutationBatches(l))).next(_=>{const C=[],R=[];let Y=ti();for(const J of h){C.push(J.batchId);for(const ge of J.mutations)Y=Y.add(ge.key)}for(const J of _){R.push(J.batchId);for(const ge of J.mutations)Y=Y.add(ge.key)}return t.fi.Ks(l,Y).next(J=>({di:J,removedBatchIds:C,addedBatchIds:R}))})})}),Gf.apply(this,arguments)}function Gy(o,e){const t=N(o);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const h=e.batch.keys(),_=t.hi.newChangeBuffer({trackRemovals:!0});return function(C,R,Y,J){const ge=Y.batch,Re=ge.keys();let at=gt.resolve();return Re.forEach(At=>{at=at.next(()=>J.getEntry(R,At)).next(Nt=>{const pn=Y.docVersions.get(At);S(null!==pn),Nt.version.compareTo(pn)<0&&(ge.applyToRemoteDocument(Nt,Y),Nt.isValidDocument()&&(Nt.setReadTime(Y.commitVersion),J.addEntry(Nt)))})}),at.next(()=>C.Bs.removeMutationBatch(R,ge))}(t,l,e,_).next(()=>_.apply(l)).next(()=>t.Bs.performConsistencyCheck(l)).next(()=>t.fi.Ks(l,h))})}function Xl(o){const e=N(o);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function qf(o,e){const t=N(o),l=e.snapshotVersion;let h=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const C=t.hi.newChangeBuffer({trackRemovals:!0});h=t.ui;const R=[];e.targetChanges.forEach((J,ge)=>{const Re=h.get(ge);if(!Re)return;R.push(t.fs.removeMatchingKeys(_,J.removedDocuments,ge).next(()=>t.fs.addMatchingKeys(_,J.addedDocuments,ge)));let at=Re.withSequenceNumber(_.currentSequenceNumber);var At,Nt,pn;e.targetMismatches.has(ge)?at=at.withResumeToken(Qs.EMPTY_BYTE_STRING,In.min()).withLastLimboFreeSnapshotVersion(In.min()):J.resumeToken.approximateByteSize()>0&&(at=at.withResumeToken(J.resumeToken,l)),h=h.insert(ge,at),Nt=at,pn=J,(0===(At=Re).resumeToken.approximateByteSize()||Nt.snapshotVersion.toMicroseconds()-At.snapshotVersion.toMicroseconds()>=3e8||pn.addedDocuments.size+pn.modifiedDocuments.size+pn.removedDocuments.size>0)&&R.push(t.fs.updateTargetData(_,at))});let Y=Eo();if(e.documentUpdates.forEach(J=>{e.resolvedLimboDocuments.has(J)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(_,J))}),R.push(Em(_,C,e.documentUpdates).next(J=>{Y=J})),!l.isEqual(In.min())){const J=t.fs.getLastRemoteSnapshotVersion(_).next(ge=>t.fs.setTargetsMetadata(_,_.currentSequenceNumber,l));R.push(J)}return gt.waitFor(R).next(()=>C.apply(_)).next(()=>t.fi.Gs(_,Y)).next(()=>Y)}).then(_=>(t.ui=h,_))}function Em(o,e,t){let l=ti();return t.forEach(h=>l=l.add(h)),e.getEntries(o,l).next(h=>{let _=Eo();return t.forEach((C,R)=>{const Y=h.get(C);R.isNoDocument()&&R.version.isEqual(In.min())?(e.removeEntry(C,R.readTime),_=_.insert(C,R)):!Y.isValidDocument()||R.version.compareTo(Y.version)>0||0===R.version.compareTo(Y.version)&&Y.hasPendingWrites?(e.addEntry(R),_=_.insert(C,R)):kt("LocalStore","Ignoring outdated watch update for ",C,". Current version:",Y.version," Watch version:",R.version)}),_})}function wm(o,e){const t=N(o);return t.persistence.runTransaction("Get next mutation batch","readonly",l=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(l,e)))}function xu(o,e){const t=N(o);return t.persistence.runTransaction("Allocate target","readwrite",l=>{let h;return t.fs.getTargetData(l,e).next(_=>_?(h=_,gt.resolve(h)):t.fs.allocateTargetId(l).next(C=>(h=new zl(e,C,0,l.currentSequenceNumber),t.fs.addTargetData(l,h).next(()=>h))))}).then(l=>{const h=t.ui.get(l.targetId);return(null===h||l.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.ui=t.ui.insert(l.targetId,l),t.ai.set(e,l.targetId)),l})}function ma(o,e,t){return xd.apply(this,arguments)}function xd(){return xd=(0,Oe.Z)(function*(o,e,t){const l=N(o),h=l.ui.get(e),_=t?"readwrite":"readwrite-primary";try{t||(yield l.persistence.runTransaction("Release target",_,C=>l.persistence.referenceDelegate.removeTarget(C,h)))}catch(C){if(!Uc(C))throw C;kt("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}l.ui=l.ui.remove(e),l.ai.delete(h.target)}),xd.apply(this,arguments)}function Yp(o,e,t){const l=N(o);let h=In.min(),_=ti();return l.persistence.runTransaction("Execute query","readonly",C=>function(R,Y,J){const ge=N(R),Re=ge.ai.get(J);return void 0!==Re?gt.resolve(ge.ui.get(Re)):ge.fs.getTargetData(Y,J)}(l,C,Ss(e)).next(R=>{if(R)return h=R.lastLimboFreeSnapshotVersion,l.fs.getMatchingKeysForTargetId(C,R.targetId).next(Y=>{_=Y})}).next(()=>l.oi.Qs(C,e,t?h:In.min(),t?_:ti())).next(R=>(Gc(l,Oa(e),R),{documents:R,_i:_})))}function Rd(o,e){const t=N(o),l=N(t.fs),h=t.ui.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",_=>l.Et(_,e).next(C=>C?C.target:null))}function uc(o,e){const t=N(o),l=t.ci.get(e)||In.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.hi.getAllFromCollectionGroup(h,e,fn(l,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Gc(t,e,h),h))}function Gc(o,e,t){let l=In.min();t.forEach((h,_)=>{_.readTime.compareTo(l)>0&&(l=_.readTime)}),o.ci.set(e,l)}function Nd(){return Nd=(0,Oe.Z)(function*(o,e,t,l){const h=N(o);let _=ti(),C=Eo();for(const J of t){const ge=e.wi(J.metadata.name);J.document&&(_=_.add(ge));const Re=e.mi(J);Re.setReadTime(e.gi(J.metadata.readTime)),C=C.insert(ge,Re)}const R=h.hi.newChangeBuffer({trackRemovals:!0}),Y=yield xu(h,(J=l,Ss(Dc(qr.fromString(`__bundle__/docs/${J}`)))));var J;return h.persistence.runTransaction("Apply bundle documents","readwrite",J=>Em(J,R,C).next(ge=>(R.apply(J),ge)).next(ge=>h.fs.removeMatchingKeysForTargetId(J,Y.targetId).next(()=>h.fs.addMatchingKeys(J,_,Y.targetId)).next(()=>h.fi.Gs(J,ge)).next(()=>ge)))}),Nd.apply(this,arguments)}function la(o,e){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,Oe.Z)(function*(o,e,t=ti()){const l=yield xu(o,Ss(jp(e.bundledQuery))),h=N(o);return h.persistence.runTransaction("Save named query","readwrite",_=>{const C=Ms(e.readTime);if(l.snapshotVersion.compareTo(C)>=0)return h._s.saveNamedQuery(_,e);const R=l.withResumeToken(Qs.EMPTY_BYTE_STRING,C);return h.ui=h.ui.insert(R.targetId,R),h.fs.updateTargetData(_,R).next(()=>h.fs.removeMatchingKeysForTargetId(_,l.targetId)).next(()=>h.fs.addMatchingKeys(_,t,l.targetId)).next(()=>h._s.saveNamedQuery(_,e))})}),Qp.apply(this,arguments)}class L_{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return gt.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var l;return this.yi.set(t.id,{id:(l=t).id,version:l.version,createTime:Ms(l.createTime)}),gt.resolve()}getNamedQuery(e,t){return gt.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(l=t).name,query:jp(l.bundledQuery),readTime:Ms(l.readTime)}),gt.resolve();var l}}class Wf{constructor(){this.overlays=new cn(jt.comparator),this.Ii=new Map}getOverlay(e,t){return gt.resolve(this.overlays.get(t))}saveOverlays(e,t,l){return l.forEach((h,_)=>{this.Xt(e,t,_)}),gt.resolve()}removeOverlaysForBatchId(e,t,l){const h=this.Ii.get(l);return void 0!==h&&(h.forEach(_=>this.overlays=this.overlays.remove(_)),this.Ii.delete(l)),gt.resolve()}getOverlaysForCollection(e,t,l){const h=yd(),_=t.length+1,C=new jt(t.child("")),R=this.overlays.getIteratorFrom(C);for(;R.hasNext();){const Y=R.getNext().value,J=Y.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===_&&Y.largestBatchId>l&&h.set(Y.getKey(),Y)}return gt.resolve(h)}getOverlaysForCollectionGroup(e,t,l,h){let _=new cn((J,ge)=>J-ge);const C=this.overlays.getIterator();for(;C.hasNext();){const J=C.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>l){let ge=_.get(J.largestBatchId);null===ge&&(ge=yd(),_=_.insert(J.largestBatchId,ge)),ge.set(J.getKey(),J)}}const R=yd(),Y=_.getIterator();for(;Y.hasNext()&&(Y.getNext().value.forEach((J,ge)=>R.set(J,ge)),!(R.size()>=h)););return gt.resolve(R)}Xt(e,t,l){if(null===l)return;const h=this.overlays.get(l.key);if(null!==h){const C=this.Ii.get(h.largestBatchId).delete(l.key);this.Ii.set(h.largestBatchId,C)}this.overlays=this.overlays.insert(l.key,new yh(t,l));let _=this.Ii.get(t);void 0===_&&(_=ti(),this.Ii.set(t,_)),this.Ii.set(t,_.add(l.key))}}class Pd{constructor(){this.Ti=new yn(Ci.Ei),this.Ai=new yn(Ci.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const l=new Ci(e,t);this.Ti=this.Ti.add(l),this.Ai=this.Ai.add(l)}bi(e,t){e.forEach(l=>this.addReference(l,t))}removeReference(e,t){this.Pi(new Ci(e,t))}Vi(e,t){e.forEach(l=>this.removeReference(l,t))}vi(e){const t=new jt(new qr([])),l=new Ci(t,e),h=new Ci(t,e+1),_=[];return this.Ai.forEachInRange([l,h],C=>{this.Pi(C),_.push(C.key)}),_}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new jt(new qr([])),l=new Ci(t,e),h=new Ci(t,e+1);let _=ti();return this.Ai.forEachInRange([l,h],C=>{_=_.add(C.key)}),_}containsKey(e){const t=new Ci(e,0),l=this.Ti.firstAfterOrEqual(t);return null!==l&&e.isEqual(l.key)}}class Ci{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return jt.comparator(e.key,t.key)||Nn(e.Ci,t.Ci)}static Ri(e,t){return Nn(e.Ci,t.Ci)||jt.comparator(e.key,t.key)}}class bm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new yn(Ci.Ei)}checkEmpty(e){return gt.resolve(0===this.Bs.length)}addMutationBatch(e,t,l,h){const _=this.xi;this.xi++;const C=new mh(_,t,l,h);this.Bs.push(C);for(const R of h)this.Ni=this.Ni.add(new Ci(R.key,_)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return gt.resolve(C)}lookupMutationBatch(e,t){return gt.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.Mi(t+1),_=h<0?0:h;return gt.resolve(this.Bs.length>_?this.Bs[_]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return gt.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const l=new Ci(t,0),h=new Ci(t,Number.POSITIVE_INFINITY),_=[];return this.Ni.forEachInRange([l,h],C=>{const R=this.ki(C.Ci);_.push(R)}),gt.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new yn(Nn);return t.forEach(h=>{const _=new Ci(h,0),C=new Ci(h,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([_,C],R=>{l=l.add(R.Ci)})}),gt.resolve(this.Oi(l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,h=l.length+1;let _=l;jt.isDocumentKey(_)||(_=_.child(""));const C=new Ci(new jt(_),0);let R=new yn(Nn);return this.Ni.forEachWhile(Y=>{const J=Y.key.path;return!!l.isPrefixOf(J)&&(J.length===h&&(R=R.add(Y.Ci)),!0)},C),gt.resolve(this.Oi(R))}Oi(e){const t=[];return e.forEach(l=>{const h=this.ki(l);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){S(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let l=this.Ni;return gt.forEach(t.mutations,h=>{const _=new Ci(h.key,t.batchId);return l=l.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.Ni=l})}_n(e){}containsKey(e,t){const l=new Ci(t,0),h=this.Ni.firstAfterOrEqual(l);return gt.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return gt.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Jp{constructor(e){this.$i=e,this.docs=new cn(jt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const l=t.key,h=this.docs.get(l),_=h?h.size:0,C=this.$i(t);return this.docs=this.docs.insert(l,{document:t.mutableCopy(),size:C}),this.size+=C-_,this.indexManager.addToCollectionParentIndex(e,l.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const l=this.docs.get(t);return gt.resolve(l?l.document.mutableCopy():H.newInvalidDocument(t))}getEntries(e,t){let l=Eo();return t.forEach(h=>{const _=this.docs.get(h);l=l.insert(h,_?_.document.mutableCopy():H.newInvalidDocument(h))}),gt.resolve(l)}getAllFromCollection(e,t,l){let h=Eo();const _=new jt(t.child("")),C=this.docs.getIteratorFrom(_);for(;C.hasNext();){const{key:R,value:{document:Y}}=C.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||Pr(gn(Y),l)<=0||(h=h.insert(Y.key,Y.mutableCopy()))}return gt.resolve(h)}getAllFromCollectionGroup(e,t,l,h){M()}Bi(e,t){return gt.forEach(this.docs,l=>t(l))}newChangeBuffer(e){return new U_(this)}getSize(e){return gt.resolve(this.size)}}class U_ extends gm{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((l,h)=>{h.isValidDocument()?t.push(this.Kn.addEntry(e,h)):this.Kn.removeEntry(l)}),gt.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class V_{constructor(e){this.persistence=e,this.Li=new Qa(t=>Go(t),hl),this.lastRemoteSnapshotVersion=In.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Pd,this.targetCount=0,this.Ki=Ql.gn()}forEachTarget(e,t){return this.Li.forEach((l,h)=>t(h)),gt.resolve()}getLastRemoteSnapshotVersion(e){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gt.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,l){return l&&(this.lastRemoteSnapshotVersion=l),t>this.Ui&&(this.Ui=t),gt.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Ql(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,gt.resolve()}updateTargetData(e,t){return this.Tn(t),gt.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,gt.resolve()}removeTargets(e,t,l){let h=0;const _=[];return this.Li.forEach((C,R)=>{R.sequenceNumber<=t&&null===l.get(R.targetId)&&(this.Li.delete(C),_.push(this.removeMatchingKeysForTargetId(e,R.targetId)),h++)}),gt.waitFor(_).next(()=>h)}getTargetCount(e){return gt.resolve(this.targetCount)}getTargetData(e,t){const l=this.Li.get(t)||null;return gt.resolve(l)}addMatchingKeys(e,t,l){return this.qi.bi(t,l),gt.resolve()}removeMatchingKeys(e,t,l){this.qi.Vi(t,l);const h=this.persistence.referenceDelegate,_=[];return h&&t.forEach(C=>{_.push(h.markPotentiallyOrphaned(e,C))}),gt.waitFor(_)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),gt.resolve()}getMatchingKeysForTargetId(e,t){const l=this.qi.Di(t);return gt.resolve(l)}containsKey(e,t){return gt.resolve(this.qi.containsKey(t))}}class Ov{constructor(e,t){this.Gi={},this.overlays={},this.es=new hs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new V_(this),this.indexManager=new Hy,this.ds=new Jp(l=>this.referenceDelegate.Qi(l)),this.M=new lm(t),this._s=new L_(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let l=this.Gi[e.toKey()];return l||(l=new bm(t,this.referenceDelegate),this.Gi[e.toKey()]=l),l}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,l){kt("MemoryPersistence","Starting transaction:",e);const h=new B_(this.es.next());return this.referenceDelegate.ji(),l(h).next(_=>this.referenceDelegate.Wi(h).next(()=>_)).toPromise().then(_=>(h.raiseOnCommittedEvent(),_))}zi(e,t){return gt.or(Object.values(this.Gi).map(l=>()=>l.containsKey(e,t)))}}class B_ extends D_{constructor(e){super(),this.currentSequenceNumber=e}}class zf{constructor(e){this.persistence=e,this.Hi=new Pd,this.Ji=null}static Yi(e){return new zf(e)}get Xi(){if(this.Ji)return this.Ji;throw M()}addReference(e,t,l){return this.Hi.addReference(l,t),this.Xi.delete(l.toString()),gt.resolve()}removeReference(e,t,l){return this.Hi.removeReference(l,t),this.Xi.add(l.toString()),gt.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),gt.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(h=>this.Xi.add(h.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(_=>this.Xi.add(_.toString()))}).next(()=>l.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.Xi,l=>{const h=jt.fromPath(l);return this.Zi(e,h).next(_=>{_||t.removeEntry(h,In.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(l=>{l?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return gt.or([()=>gt.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Rh(o,e){return`firestore_clients_${o}_${e}`}function Xp(o,e,t){let l=`firestore_mutations_${o}_${t}`;return e.isAuthenticated()&&(l+=`_${e.uid}`),l}function eg(o,e){return`firestore_targets_${o}_${e}`}class tg{constructor(e,t,l,h){this.user=e,this.batchId=t,this.state=l,this.error=h}static tr(e,t,l){const h=JSON.parse(l);let _,C="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return C&&h.error&&(C="string"==typeof h.error.message&&"string"==typeof h.error.code,C&&(_=new Z(h.error.code,h.error.message))),C?new tg(e,t,h.state,_):(yr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${l}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Po{constructor(e,t,l){this.targetId=e,this.state=t,this.error=l}static tr(e,t){const l=JSON.parse(t);let h,_="object"==typeof l&&-1!==["not-current","current","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return _&&l.error&&(_="string"==typeof l.error.message&&"string"==typeof l.error.code,_&&(h=new Z(l.error.code,l.error.message))),_?new Po(e,l.state,h):(yr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Od{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const l=JSON.parse(t);let h="object"==typeof l&&l.activeTargetIds instanceof Array,_=Pc();for(let C=0;h&&C<l.activeTargetIds.length;++C)h=xa(l.activeTargetIds[C]),_=_.add(l.activeTargetIds[C]);return h?new Od(e,_):(yr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Cm{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Cm(t.clientId,t.onlineState):(yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ng{constructor(){this.activeTargetIds=Pc()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j_{constructor(e,t,l,h,_){this.window=e,this.Yn=t,this.persistenceKey=l,this.ir=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new cn(Nn),this.started=!1,this.cr=[];const C=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.hr=Rh(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ng),this.dr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.syncEngine.Fs();for(const h of t){if(h===e.ir)continue;const _=e.getItem(Rh(e.persistenceKey,h));if(_){const C=Od.tr(h,_);C&&(e.ar=e.ar.insert(C.clientId,C))}}e.yr();const l=e.storage.getItem(e.mr);if(l){const h=e.pr(l);h&&e.Ir(h)}for(const h of e.cr)e.ur(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((l,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,l){this.Er(e,t,l),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(eg(this.persistenceKey,e));if(l){const h=Po.tr(e,l);h&&(t=h.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eg(this.persistenceKey,e))}updateQueryState(e,t,l){this.br(e,t,l)}handleUserChange(e,t,l){t.forEach(h=>{this.Ar(h)}),this.currentUser=e,l.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return kt("SharedClientState","READ",e,t),t}setItem(e,t){kt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){kt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const l=e;if(l.storageArea===this.storage){if(kt("SharedClientState","EVENT",l.key,l.newValue),l.key===this.hr)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Oe.Z)(function*(){if(t.started){if(null!==l.key)if(t.dr.test(l.key)){if(null==l.newValue){const h=t.vr(l.key);return t.Sr(h,null)}{const h=t.Dr(l.key,l.newValue);if(h)return t.Sr(h.clientId,h)}}else if(t._r.test(l.key)){if(null!==l.newValue){const h=t.Cr(l.key,l.newValue);if(h)return t.Nr(h)}}else if(t.wr.test(l.key)){if(null!==l.newValue){const h=t.kr(l.key,l.newValue);if(h)return t.Mr(h)}}else if(l.key===t.mr){if(null!==l.newValue){const h=t.pr(l.newValue);if(h)return t.Ir(h)}}else if(l.key===t.lr){const h=function(_){let C=hs.A;if(null!=_)try{const R=JSON.parse(_);S("number"==typeof R),C=R}catch(R){yr("SharedClientState","Failed to read sequence number from WebStorage",R)}return C}(l.newValue);h!==hs.A&&t.sequenceNumberHandler(h)}else if(l.key===t.gr){const h=t.Or(l.newValue);yield Promise.all(h.map(_=>t.syncEngine.Fr(_)))}}else t.cr.push(l)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,l){const h=new tg(this.currentUser,e,t,l),_=Xp(this.persistenceKey,this.currentUser,e);this.setItem(_,h.er())}Ar(e){const t=Xp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,l){const h=eg(this.persistenceKey,e),_=new Po(e,t,l);this.setItem(h,_.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const l=this.vr(e);return Od.tr(l,t)}Cr(e,t){const l=this._r.exec(e),h=Number(l[1]);return tg.tr(new Ri(void 0!==l[2]?l[2]:null),h,t)}kr(e,t){const l=this.wr.exec(e),h=Number(l[1]);return Po.tr(h,t)}pr(e){return Cm.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);kt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const l=t?this.ar.insert(e,t):this.ar.remove(e),h=this.Tr(this.ar),_=this.Tr(l),C=[],R=[];return _.forEach(Y=>{h.has(Y)||C.push(Y)}),h.forEach(Y=>{_.has(Y)||R.push(Y)}),this.syncEngine.Lr(C,R).then(()=>{this.ar=l})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Pc();return e.forEach((l,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class Tm{constructor(){this.Ur=new ng,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,l){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,l){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ng,Promise.resolve()}handleUserChange(e,t,l){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kv{Kr(e){}shutdown(){}}class Im{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Dm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class H_{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class qy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,l,h,_){const C=this.ho(e,t);kt("RestConnection","Sending: ",C,l);const R={};return this.lo(R,h,_),this.fo(e,C,R,l).then(Y=>(kt("RestConnection","Received: ",Y),Y),Y=>{throw ds("RestConnection",`${e} failed with error: `,Y,"url: ",C,"request:",l),Y})}_o(e,t,l,h,_){return this.co(e,t,l,h,_)}lo(e,t,l){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ys,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,_)=>e[_]=h),l&&l.headers.forEach((h,_)=>e[_]=h)}ho(e,t){return`${this.uo}/v1/${t}:${Dm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,l,h){return new Promise((_,C)=>{const R=new bi;R.listenOnce(bl.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case go.NO_ERROR:const J=R.getResponseJson();kt("Connection","XHR received:",JSON.stringify(J)),_(J);break;case go.TIMEOUT:kt("Connection",'RPC "'+e+'" timed out'),C(new Z(P.DEADLINE_EXCEEDED,"Request time out"));break;case go.HTTP_ERROR:const ge=R.getStatus();if(kt("Connection",'RPC "'+e+'" failed with status:',ge,"response text:",R.getResponseText()),ge>0){const Re=R.getResponseJson().error;if(Re&&Re.status&&Re.message){const at=function(At){const Nt=At.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(Nt)>=0?Nt:P.UNKNOWN}(Re.status);C(new Z(at,Re.message))}else C(new Z(P.UNKNOWN,"Server responded with status "+R.getStatus()))}else C(new Z(P.UNAVAILABLE,"Connection failed."));break;default:M()}}finally{kt("Connection",'RPC "'+e+'" completed.')}});const Y=JSON.stringify(h);R.send(t,"POST",Y,l,15)})}wo(e,t,l){const h=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=za(),C=jo(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new Da({})),this.lo(R.initMessageHeaders,t,l),(0,Qe.uI)()||(0,Qe.b$)()||(0,Qe.d)()||(0,Qe.w1)()||(0,Qe.Mn)()||(0,Qe.ru)()||(R.httpHeadersOverwriteParam="$httpHeaders");const Y=h.join("");kt("Connection","Creating WebChannel: "+Y,R);const J=_.createWebChannel(Y,R);let ge=!1,Re=!1;const at=new H_({Jr:Nt=>{Re?kt("Connection","Not sending because WebChannel is closed:",Nt):(ge||(kt("Connection","Opening WebChannel transport."),J.open(),ge=!0),kt("Connection","WebChannel sending:",Nt),J.send(Nt))},Yr:()=>J.close()}),At=(Nt,pn,Bn)=>{Nt.listen(pn,Vi=>{try{Bn(Vi)}catch(uo){setTimeout(()=>{throw uo},0)}})};return At(J,Fi.EventType.OPEN,()=>{Re||kt("Connection","WebChannel transport opened.")}),At(J,Fi.EventType.CLOSE,()=>{Re||(Re=!0,kt("Connection","WebChannel transport closed"),at.ro())}),At(J,Fi.EventType.ERROR,Nt=>{Re||(Re=!0,ds("Connection","WebChannel transport errored:",Nt),at.ro(new Z(P.UNAVAILABLE,"The operation could not be completed")))}),At(J,Fi.EventType.MESSAGE,Nt=>{var pn;if(!Re){const Bn=Nt.data[0];S(!!Bn);const Vi=Bn,uo=Vi.error||(null===(pn=Vi[0])||void 0===pn?void 0:pn.error);if(uo){kt("Connection","WebChannel received error:",uo);const Bi=uo.status;let co=function(Hs){const Ea=as[Hs];if(void 0!==Ea)return ms(Ea)}(Bi),ji=uo.message;void 0===co&&(co=P.INTERNAL,ji="Unknown error status: "+Bi+" with message "+uo.message),Re=!0,at.ro(new Z(co,ji)),J.close()}else kt("Connection","WebChannel received:",Bn),at.oo(Bn)}}),At(C,Cl.STAT_EVENT,Nt=>{Nt.stat===So.PROXY?kt("Connection","Detected buffering proxy"):Nt.stat===So.NOPROXY&&kt("Connection","Detected no buffering proxy")}),setTimeout(()=>{at.io()},0),at}}function rg(){return"undefined"!=typeof window?window:null}function Zf(){return"undefined"!=typeof document?document:null}function Nh(o){return new Ed(o,!0)}class qc{constructor(e,t,l=1e3,h=1.5,_=6e4){this.Yn=e,this.timerId=t,this.mo=l,this.yo=h,this.po=_,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),l=Math.max(0,Date.now()-this.Eo),h=Math.max(0,t-l);h>0&&kt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${l} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Nu{constructor(e,t,l,h,_,C,R,Y){this.Yn=e,this.Vo=l,this.vo=h,this.So=_,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=R,this.listener=Y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new qc(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Oe.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Oe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var l=this;return(0,Oe.Z)(function*(){l.Uo(),l.qo(),l.No.cancel(),l.Do++,4!==e?l.No.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),l.No.Ao()):t&&t.code===P.UNAUTHENTICATED&&3!==l.state&&(l.authCredentialsProvider.invalidateToken(),l.appCheckCredentialsProvider.invalidateToken()),null!==l.stream&&(l.Ko(),l.stream.close(),l.stream=null),l.state=e,yield l.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([l,h])=>{this.Do===t&&this.Qo(l,h)},l=>{e(()=>{const h=new Z(P.UNKNOWN,"Fetching auth token failed: "+l.message);return this.jo(h)})})}Qo(e,t){const l=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{l(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(h=>{l(()=>this.jo(h))}),this.stream.onMessage(h=>{l(()=>this.onMessage(h))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Oe.Z)(function*(){e.state=0,e.start()}))}jo(e){return kt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wy extends Nu{constructor(e,t,l,h,_,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,l,h,C),this.M=_}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Mf(o,e){let t;if("targetChange"in e){const l="NO_CHANGE"===(Y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Y?1:"REMOVE"===Y?2:"CURRENT"===Y?3:"RESET"===Y?4:M(),h=e.targetChange.targetIds||[],_=function(Y,J){return Y.N?(S(void 0===J||"string"==typeof J),Qs.fromBase64String(J||"")):(S(void 0===J||J instanceof Uint8Array),Qs.fromUint8Array(J||new Uint8Array))}(o,e.targetChange.resumeToken),C=e.targetChange.cause,R=C&&function(Y){const J=void 0===Y.code?P.UNKNOWN:ms(Y.code);return new Z(J,Y.message||"")}(C);t=new Tu(l,h,_,R||null)}else if("documentChange"in e){const l=e.documentChange,h=Bs(o,l.document.name),_=Ms(l.document.updateTime),C=new gs({mapValue:{fields:l.document.fields}}),R=H.newFoundDocument(h,_,C);t=new Gl(l.targetIds||[],l.removedTargetIds||[],R.key,R)}else if("documentDelete"in e){const l=e.documentDelete,h=Bs(o,l.document),_=l.readTime?Ms(l.readTime):In.min(),C=H.newNoDocument(h,_);t=new Gl([],l.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const l=e.documentRemove,h=Bs(o,l.document);t=new Gl([],l.removedTargetIds||[],h,null)}else{if(!("filter"in e))return M();{const l=e.filter,_=new fl(l.count||0);t=new sh(l.targetId,_)}}var Y;return t}(this.M,e),l=function(h){if(!("targetChange"in h))return In.min();const _=h.targetChange;return _.targetIds&&_.targetIds.length?In.min():_.readTime?Ms(_.readTime):In.min()}(e);return this.listener.zo(t,l)}Ho(e){const t={};t.database=Xa(this.M),t.addTarget=function(h,_){let C;const R=_.target;return C=yu(R)?{documents:Fc(h,R)}:{query:ql(h,R)},C.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?C.resumeToken=Fp(h,_.resumeToken):_.snapshotVersion.compareTo(In.min())>0&&(C.readTime=ic(h,_.snapshotVersion.toTimestamp())),C}(this.M,e);const l=function xf(o,e){const t=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return M()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);l&&(t.labels=l),this.Lo(t)}Jo(e){const t={};t.database=Xa(this.M),t.removeTarget=e,this.Lo(t)}}class Sm extends Nu{constructor(e,t,l,h,_,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,l,h,C),this.M=_,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(S(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function kc(o,e){return o&&o.length>0?(S(void 0!==e),o.map(t=>function(l,h){let _=Ms(l.updateTime?l.updateTime:h);return _.isEqual(In.min())&&(_=Ms(h)),new Jn(_,l.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),l=Ms(e.commitTime);return this.listener.tu(l,t)}return S(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Xa(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(l=>Su(this.M,l))};this.Lo(t)}}class Kf extends class{}{constructor(e,t,l,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=l,this.M=h,this.su=!1}iu(){if(this.su)throw new Z(P.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,l){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,_])=>this.So.co(e,t,l,h,_)).catch(h=>{throw"FirebaseError"===h.name?(h.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Z(P.UNKNOWN,h.toString())})}_o(e,t,l){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,_])=>this.So._o(e,t,l,h,_)).catch(h=>{throw"FirebaseError"===h.name?(h.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Z(P.UNKNOWN,h.toString())})}terminate(){this.su=!0}}class $_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(yr(t),this.uu=!1):kt("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Ph{constructor(e,t,l,h,_){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=l,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=_,this.gu.Kr(R=>{l.enqueueAndForget((0,Oe.Z)(function*(){var Y;zc(C)&&(kt("RemoteStore","Restarting streams for network reachability change."),yield(Y=(0,Oe.Z)(function*(J){const ge=N(J);ge.wu.add(4),yield kd(ge),ge.yu.set("Unknown"),ge.wu.delete(4),yield nl(ge)}),function(J){return Y.apply(this,arguments)})(C))}))}),this.yu=new $_(l,h)}}function nl(o){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,Oe.Z)(function*(o){if(zc(o))for(const e of o.mu)yield e(!0)}),Oh.apply(this,arguments)}function kd(o){return ig.apply(this,arguments)}function ig(){return ig=(0,Oe.Z)(function*(o){for(const e of o.mu)yield e(!1)}),ig.apply(this,arguments)}function kh(o,e){const t=N(o);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Fd(t)?Am(t):Qc(t).Mo()&&Yf(t,e))}function Wc(o,e){const t=N(o),l=Qc(t);t._u.delete(e),l.Mo()&&G_(t,e),0===t._u.size&&(l.Mo()?l.$o():zc(t)&&t.yu.set("Unknown"))}function Yf(o,e){o.pu.Z(e.targetId),Qc(o).Ho(e)}function G_(o,e){o.pu.Z(e),Qc(o).Jo(e)}function Am(o){o.pu=new Iu({getRemoteKeysForTarget:e=>o.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>o._u.get(e)||null}),Qc(o).start(),o.yu.au()}function Fd(o){return zc(o)&&!Qc(o).ko()&&o._u.size>0}function zc(o){return 0===N(o).wu.size}function Mm(o){o.pu=void 0}function Qf(o){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,Oe.Z)(function*(o){o._u.forEach((e,t)=>{Yf(o,e)})}),Fh.apply(this,arguments)}function q_(o,e){return Ko.apply(this,arguments)}function Ko(){return Ko=(0,Oe.Z)(function*(o,e){Mm(o),Fd(o)?(o.yu.lu(e),Am(o)):o.yu.set("Unknown")}),Ko.apply(this,arguments)}function Lh(o,e,t){return eu.apply(this,arguments)}function eu(){return eu=(0,Oe.Z)(function*(o,e,t){if(o.yu.set("Online"),e instanceof Tu&&2===e.state&&e.cause)try{yield(l=(0,Oe.Z)(function*(h,_){const C=_.cause;for(const R of _.targetIds)h._u.has(R)&&(yield h.remoteSyncer.rejectListen(R,C),h._u.delete(R),h.pu.removeTarget(R))}),function(h,_){return l.apply(this,arguments)})(o,e)}catch(l){kt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),l),yield Uh(o,l)}else if(e instanceof Gl?o.pu.ut(e):e instanceof sh?o.pu._t(e):o.pu.ht(e),!t.isEqual(In.min()))try{const l=yield Xl(o.localStore);t.compareTo(l)>=0&&(yield function(h,_){const C=h.pu.yt(_);return C.targetChanges.forEach((R,Y)=>{if(R.resumeToken.approximateByteSize()>0){const J=h._u.get(Y);J&&h._u.set(Y,J.withResumeToken(R.resumeToken,_))}}),C.targetMismatches.forEach(R=>{const Y=h._u.get(R);if(!Y)return;h._u.set(R,Y.withResumeToken(Qs.EMPTY_BYTE_STRING,Y.snapshotVersion)),G_(h,R);const J=new zl(Y.target,R,1,Y.sequenceNumber);Yf(h,J)}),h.remoteSyncer.applyRemoteEvent(C)}(o,t))}catch(l){kt("RemoteStore","Failed to raise snapshot:",l),yield Uh(o,l)}var l}),eu.apply(this,arguments)}function Uh(o,e,t){return ml.apply(this,arguments)}function ml(){return ml=(0,Oe.Z)(function*(o,e,t){if(!Uc(e))throw e;o.wu.add(1),yield kd(o),o.yu.set("Offline"),t||(t=()=>Xl(o.localStore)),o.asyncQueue.enqueueRetryable((0,Oe.Z)(function*(){kt("RemoteStore","Retrying IndexedDB access"),yield t(),o.wu.delete(1),yield nl(o)}))}),ml.apply(this,arguments)}function Pu(o,e){return e().catch(t=>Uh(o,t,e))}function Vh(o){return sg.apply(this,arguments)}function sg(){return sg=(0,Oe.Z)(function*(o){const e=N(o),t=Ou(e);let l=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Zc(e);)try{const h=yield wm(e.localStore,l);if(null===h){0===e.du.length&&t.$o();break}l=h.batchId,zy(e,h)}catch(h){yield Uh(e,h)}xm(e)&&Rm(e)}),sg.apply(this,arguments)}function Zc(o){return zc(o)&&o.du.length<10}function zy(o,e){o.du.push(e);const t=Ou(o);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function xm(o){return zc(o)&&!Ou(o).ko()&&o.du.length>0}function Rm(o){Ou(o).start()}function og(o){return tu.apply(this,arguments)}function tu(){return tu=(0,Oe.Z)(function*(o){Ou(o).nu()}),tu.apply(this,arguments)}function ag(o){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,Oe.Z)(function*(o){const e=Ou(o);for(const t of o.du)e.Zo(t.mutations)}),Nm.apply(this,arguments)}function Zy(o,e,t){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,Oe.Z)(function*(o,e,t){const l=o.du.shift(),h=_h.from(l,e,t);yield Pu(o,()=>o.remoteSyncer.applySuccessfulWrite(h)),yield Vh(o)}),Jf.apply(this,arguments)}function Bh(o,e){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,Oe.Z)(function*(o,e){var t;e&&Ou(o).Xo&&(yield(t=(0,Oe.Z)(function*(l,h){if(_d(_=h.code)&&_!==P.ABORTED){const C=l.du.shift();Ou(l).Fo(),yield Pu(l,()=>l.remoteSyncer.rejectFailedWrite(C.batchId,h)),yield Vh(l)}var _}),function(l,h){return t.apply(this,arguments)})(o,e)),xm(o)&&Rm(o)}),Kc.apply(this,arguments)}function jh(o,e){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,Oe.Z)(function*(o,e){const t=N(o);t.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const l=zc(t);t.wu.add(3),yield kd(t),l&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield nl(t)}),Yc.apply(this,arguments)}function lg(o,e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,Oe.Z)(function*(o,e){const t=N(o);e?(t.wu.delete(2),yield nl(t)):e||(t.wu.add(2),yield kd(t),t.yu.set("Unknown"))}),Hh.apply(this,arguments)}function Qc(o){return o.Iu||(o.Iu=function(e,t,l){const h=N(e);return h.iu(),new Wy(t,h.So,h.authCredentials,h.appCheckCredentials,h.M,l)}(o.datastore,o.asyncQueue,{Xr:Qf.bind(null,o),eo:q_.bind(null,o),zo:Lh.bind(null,o)}),o.mu.push(function(){var e=(0,Oe.Z)(function*(t){t?(o.Iu.Fo(),Fd(o)?Am(o):o.yu.set("Unknown")):(yield o.Iu.stop(),Mm(o))});return function(t){return e.apply(this,arguments)}}())),o.Iu}function Ou(o){return o.Tu||(o.Tu=function(e,t,l){const h=N(e);return h.iu(),new Sm(t,h.So,h.authCredentials,h.appCheckCredentials,h.M,l)}(o.datastore,o.asyncQueue,{Xr:og.bind(null,o),eo:Bh.bind(null,o),eu:ag.bind(null,o),tu:Zy.bind(null,o)}),o.mu.push(function(){var e=(0,Oe.Z)(function*(t){t?(o.Tu.Fo(),yield Vh(o)):(yield o.Tu.stop(),o.du.length>0&&(kt("RemoteStore",`Stopping write stream with ${o.du.length} pending writes`),o.du=[]))});return function(t){return e.apply(this,arguments)}}())),o.Tu}class rl{constructor(e,t,l,h,_){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=l,this.op=h,this.removalCallback=_,this.deferred=new he,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,l,h,_){const C=Date.now()+l,R=new rl(e,t,C,h,_);return R.start(l),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Z(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ld(o,e){if(yr("AsyncQueue",`${e}: ${o}`),Uc(o))return new Z(P.UNAVAILABLE,`${e}: ${o}`);throw o}class Jc{constructor(e){this.comparator=e?(t,l)=>e(t,l)||jt.comparator(t.key,l.key):(t,l)=>jt.comparator(t.key,l.key),this.keyedMap=If(),this.sortedSet=new cn(this.comparator)}static emptySet(e){return new Jc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,l)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),l=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,_=l.getNext().key;if(!h.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const l=new Jc;return l.comparator=this.comparator,l.keyedMap=e,l.sortedSet=t,l}}class W_{constructor(){this.Eu=new cn(jt.comparator)}track(e){const t=e.doc.key,l=this.Eu.get(t);l?0!==e.type&&3===l.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==l.type?this.Eu=this.Eu.insert(t,{type:l.type,doc:e.doc}):2===e.type&&2===l.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===l.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===l.type?this.Eu=this.Eu.remove(t):1===e.type&&2===l.type?this.Eu=this.Eu.insert(t,{type:1,doc:l.doc}):0===e.type&&1===l.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):M():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,l)=>{e.push(l)}),e}}class $h{constructor(e,t,l,h,_,C,R,Y){this.query=e,this.docs=t,this.oldDocs=l,this.docChanges=h,this.mutatedKeys=_,this.fromCache=C,this.syncStateChanged=R,this.excludesMetadataChanges=Y}static fromInitialDocuments(e,t,l,h){const _=[];return t.forEach(C=>{_.push({type:0,doc:C})}),new $h(e,t,Jc.emptySet(t),_,l,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,l=e.docChanges;if(t.length!==l.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==l[h].type||!t[h].doc.isEqual(l[h].doc))return!1;return!0}}class Pm{constructor(){this.Ru=void 0,this.listeners=[]}}class Gh{constructor(){this.queries=new Qa(e=>Np(e),sa),this.onlineState="Unknown",this.bu=new Set}}function ug(o,e){return Om.apply(this,arguments)}function Om(){return Om=(0,Oe.Z)(function*(o,e){const t=N(o),l=e.query;let h=!1,_=t.queries.get(l);if(_||(h=!0,_=new Pm),h)try{_.Ru=yield t.onListen(l)}catch(C){const R=Ld(C,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(R)}t.queries.set(l,_),_.listeners.push(e),e.Pu(t.onlineState),_.Ru&&e.Vu(_.Ru)&&Fm(t)}),Om.apply(this,arguments)}function km(o,e){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,Oe.Z)(function*(o,e){const t=N(o),l=e.query;let h=!1;const _=t.queries.get(l);if(_){const C=_.listeners.indexOf(e);C>=0&&(_.listeners.splice(C,1),h=0===_.listeners.length)}if(h)return t.queries.delete(l),t.onUnlisten(l)}),Xc.apply(this,arguments)}function Ky(o,e){const t=N(o);let l=!1;for(const h of e){const C=t.queries.get(h.query);if(C){for(const R of C.listeners)R.Vu(h)&&(l=!0);C.Ru=h}}l&&Fm(t)}function Yy(o,e,t){const l=N(o),h=l.queries.get(e);if(h)for(const _ of h.listeners)_.onError(t);l.queries.delete(e)}function Fm(o){o.bu.forEach(e=>{e.next()})}class Lm{constructor(e,t,l){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=l||{}}Vu(e){if(!this.options.includeMetadataChanges){const l=[];for(const h of e.docChanges)3!==h.type&&l.push(h);e=new $h(e.query,e.docs,e.oldDocs,l,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=$h.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class ku{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class cg{constructor(e){this.M=e}wi(e){return Bs(this.M,e)}mi(e){return e.metadata.exists?so(this.M,e.document,!1):H.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Ms(e)}}class z_{constructor(e,t,l){this.Ou=e,this.localStore=t,this.M=l,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Um(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const l=qr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(l.get(l.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,l=new cg(this.M);for(const h of e)if(h.metadata.queries){const _=l.wi(h.metadata.name);for(const C of h.metadata.queries){const R=(t.get(C)||ti()).add(_);t.set(C,R)}}return t}complete(){var e=this;return(0,Oe.Z)(function*(){const t=yield function Ru(o,e,t,l){return Nd.apply(this,arguments)}(e.localStore,new cg(e.M),e.documents,e.Ou.id),l=e.$u(e.documents);for(const h of e.queries)yield la(e.localStore,h,l.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Um(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}class Vm{constructor(e){this.key=e}}class Bm{constructor(e){this.key=e}}class Z_{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=ti(),this.mutatedKeys=ti(),this.Gu=wu(e),this.Qu=new Jc(this.Gu)}get ju(){return this.Uu}Wu(e,t){const l=t?t.zu:new W_,h=t?t.Qu:this.Qu;let _=t?t.mutatedKeys:this.mutatedKeys,C=h,R=!1;const Y="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,J="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((ge,Re)=>{const at=h.get(ge),At=yf(this.query,Re)?Re:null,Nt=!!at&&this.mutatedKeys.has(at.key),pn=!!At&&(At.hasLocalMutations||this.mutatedKeys.has(At.key)&&At.hasCommittedMutations);let Bn=!1;at&&At?at.data.isEqual(At.data)?Nt!==pn&&(l.track({type:3,doc:At}),Bn=!0):this.Hu(at,At)||(l.track({type:2,doc:At}),Bn=!0,(Y&&this.Gu(At,Y)>0||J&&this.Gu(At,J)<0)&&(R=!0)):!at&&At?(l.track({type:0,doc:At}),Bn=!0):at&&!At&&(l.track({type:1,doc:at}),Bn=!0,(Y||J)&&(R=!0)),Bn&&(At?(C=C.add(At),_=pn?_.add(ge):_.delete(ge)):(C=C.delete(ge),_=_.delete(ge)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const ge="F"===this.query.limitType?C.last():C.first();C=C.delete(ge.key),_=_.delete(ge.key),l.track({type:1,doc:ge})}return{Qu:C,zu:l,ii:R,mutatedKeys:_}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,l){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const _=e.zu.Au();_.sort((J,ge)=>function(Re,at){const At=Nt=>{switch(Nt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M()}};return At(Re)-At(at)}(J.type,ge.type)||this.Gu(J.doc,ge.doc)),this.Ju(l);const C=t?this.Yu():[],R=0===this.Ku.size&&this.current?1:0,Y=R!==this.qu;return this.qu=R,0!==_.length||Y?{snapshot:new $h(this.query,e.Qu,h,_,e.mutatedKeys,0===R,Y,!1),Xu:C}:{Xu:C}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new W_,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ti(),this.Qu.forEach(l=>{this.Zu(l.key)&&(this.Ku=this.Ku.add(l.key))});const t=[];return e.forEach(l=>{this.Ku.has(l)||t.push(new Bm(l))}),this.Ku.forEach(l=>{e.has(l)||t.push(new Vm(l))}),t}ta(e){this.Uu=e._i,this.Ku=ti();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return $h.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Qy{constructor(e,t,l){this.query=e,this.targetId=t,this.view=l}}class nu{constructor(e){this.key=e,this.na=!1}}class Jy{constructor(e,t,l,h,_,C){this.localStore=e,this.remoteStore=t,this.eventManager=l,this.sharedClientState=h,this.currentUser=_,this.maxConcurrentLimboResolutions=C,this.sa={},this.ia=new Qa(R=>Np(R),sa),this.ra=new Map,this.oa=new Set,this.ua=new cn(jt.comparator),this.aa=new Map,this.ca=new Pd,this.ha={},this.la=new Map,this.fa=Ql.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function dg(o,e){return jm.apply(this,arguments)}function jm(){return jm=(0,Oe.Z)(function*(o,e){const t=hc(o);let l,h;const _=t.ia.get(e);if(_)l=_.targetId,t.sharedClientState.addLocalQueryTarget(l),h=_.view.ea();else{const C=yield xu(t.localStore,Ss(e));t.isPrimaryClient&&kh(t.remoteStore,C);const R=t.sharedClientState.addLocalQueryTarget(C.targetId);l=C.targetId,h=yield hg(t,e,l,"current"===R)}return h}),jm.apply(this,arguments)}function hg(o,e,t,l){return fg.apply(this,arguments)}function fg(){return fg=(0,Oe.Z)(function*(o,e,t,l){o._a=(ge,Re,at)=>{return(At=(0,Oe.Z)(function*(Nt,pn,Bn,Vi){let uo=pn.view.Wu(Bn);uo.ii&&(uo=yield Yp(Nt.localStore,pn.query,!1).then(({documents:ji})=>pn.view.Wu(ji,uo)));const Bi=Vi&&Vi.targetChanges.get(pn.targetId),co=pn.view.applyChanges(uo,Nt.isPrimaryClient,Bi);return _g(Nt,pn.targetId,co.Xu),co.snapshot}),function(Nt,pn,Bn,Vi){return At.apply(this,arguments)})(o,ge,Re,at);var At};const h=yield Yp(o.localStore,e,!0),_=new Z_(e,h._i),C=_.Wu(h.documents),R=Js.createSynthesizedTargetChangeForCurrentChange(t,l&&"Offline"!==o.onlineState),Y=_.applyChanges(C,o.isPrimaryClient,R);_g(o,t,Y.Xu);const J=new Qy(e,t,_);return o.ia.set(e,J),o.ra.has(t)?o.ra.get(t).push(e):o.ra.set(t,[e]),Y.snapshot}),fg.apply(this,arguments)}function Xy(o,e){return K_.apply(this,arguments)}function K_(){return K_=(0,Oe.Z)(function*(o,e){const t=N(o),l=t.ia.get(e),h=t.ra.get(l.targetId);if(h.length>1)return t.ra.set(l.targetId,h.filter(_=>!sa(_,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(l.targetId),t.sharedClientState.isActiveQueryTarget(l.targetId)||(yield ma(t.localStore,l.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(l.targetId),Wc(t.remoteStore,l.targetId),ed(t,l.targetId)}).catch(Hc))):(ed(t,l.targetId),yield ma(t.localStore,l.targetId,!0))}),K_.apply(this,arguments)}function Xf(){return Xf=(0,Oe.Z)(function*(o,e,t){const l=fc(o);try{const h=yield function(_,C){const R=N(_),Y=zi.now(),J=C.reduce((Re,at)=>Re.add(at.key),ti());let ge;return R.persistence.runTransaction("Locally write mutations","readwrite",Re=>R.fi.Ks(Re,J).next(at=>{ge=at;const At=[];for(const Nt of C){const pn=Cf(Nt,ge.get(Nt.key));null!=pn&&At.push(new $l(Nt.key,pn,L(pn.value.mapValue),Vs.exists(!0)))}return R.Bs.addMutationBatch(Re,Y,At,C)})).then(Re=>(Re.applyToLocalDocumentSet(ge),{batchId:Re.batchId,changes:ge}))}(l.localStore,e);l.sharedClientState.addPendingMutation(h.batchId),function(_,C,R){let Y=_.ha[_.currentUser.toKey()];Y||(Y=new cn(Nn)),Y=Y.insert(C,R),_.ha[_.currentUser.toKey()]=Y}(l,h.batchId,t),yield cc(l,h.changes),yield Vh(l.remoteStore)}catch(h){const _=Ld(h,"Failed to persist write");t.reject(_)}}),Xf.apply(this,arguments)}function Hm(o,e){return pg.apply(this,arguments)}function pg(){return pg=(0,Oe.Z)(function*(o,e){const t=N(o);try{const l=yield qf(t.localStore,e);e.targetChanges.forEach((h,_)=>{const C=t.aa.get(_);C&&(S(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?C.na=!0:h.modifiedDocuments.size>0?S(C.na):h.removedDocuments.size>0&&(S(C.na),C.na=!1))}),yield cc(t,l,e)}catch(l){yield Hc(l)}}),pg.apply(this,arguments)}function $m(o,e,t){const l=N(o);if(l.isPrimaryClient&&0===t||!l.isPrimaryClient&&1===t){const h=[];l.ia.forEach((_,C)=>{const R=C.view.Pu(e);R.snapshot&&h.push(R.snapshot)}),function(_,C){const R=N(_);R.onlineState=C;let Y=!1;R.queries.forEach((J,ge)=>{for(const Re of ge.listeners)Re.Pu(C)&&(Y=!0)}),Y&&Fm(R)}(l.eventManager,e),h.length&&l.sa.zo(h),l.onlineState=e,l.isPrimaryClient&&l.sharedClientState.setOnlineState(e)}}function n0(o,e,t){return _l.apply(this,arguments)}function _l(){return _l=(0,Oe.Z)(function*(o,e,t){const l=N(o);l.sharedClientState.updateQueryState(e,"rejected",t);const h=l.aa.get(e),_=h&&h.key;if(_){let C=new cn(jt.comparator);C=C.insert(_,H.newNoDocument(_,In.min()));const R=ti().add(_),Y=new Rl(In.min(),new Map,new yn(Nn),C,R);yield Hm(l,Y),l.ua=l.ua.remove(_),l.aa.delete(e),qm(l)}else yield ma(l.localStore,e,!1).then(()=>ed(l,e,t)).catch(Hc)}),_l.apply(this,arguments)}function Lv(o,e){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,Oe.Z)(function*(o,e){const t=N(o),l=e.batch.batchId;try{const h=yield Gy(t.localStore,e);mg(t,l,null),X_(t,l),t.sharedClientState.updateMutationState(l,"acknowledged"),yield cc(t,h)}catch(h){yield Hc(h)}}),Y_.apply(this,arguments)}function Q_(o,e,t){return gg.apply(this,arguments)}function gg(){return gg=(0,Oe.Z)(function*(o,e,t){const l=N(o);try{const h=yield function(_,C){const R=N(_);return R.persistence.runTransaction("Reject batch","readwrite-primary",Y=>{let J;return R.Bs.lookupMutationBatch(Y,C).next(ge=>(S(null!==ge),J=ge.keys(),R.Bs.removeMutationBatch(Y,ge))).next(()=>R.Bs.performConsistencyCheck(Y)).next(()=>R.fi.Ks(Y,J))})}(l.localStore,e);mg(l,e,t),X_(l,e),l.sharedClientState.updateMutationState(e,"rejected",t),yield cc(l,h)}catch(h){yield Hc(h)}}),gg.apply(this,arguments)}function Gm(){return Gm=(0,Oe.Z)(function*(o,e){const t=N(o);zc(t.remoteStore)||kt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const l=yield function(_){const C=N(_);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>C.Bs.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===l)return void e.resolve();const h=t.la.get(l)||[];h.push(e),t.la.set(l,h)}catch(l){const h=Ld(l,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Gm.apply(this,arguments)}function X_(o,e){(o.la.get(e)||[]).forEach(t=>{t.resolve()}),o.la.delete(e)}function mg(o,e,t){const l=N(o);let h=l.ha[l.currentUser.toKey()];if(h){const _=h.get(e);_&&(t?_.reject(t):_.resolve(),h=h.remove(e)),l.ha[l.currentUser.toKey()]=h}}function ed(o,e,t=null){o.sharedClientState.removeLocalQueryTarget(e);for(const l of o.ra.get(e))o.ia.delete(l),t&&o.sa.wa(l,t);o.ra.delete(e),o.isPrimaryClient&&o.ca.vi(e).forEach(l=>{o.ca.containsKey(l)||ev(o,l)})}function ev(o,e){o.oa.delete(e.path.canonicalString());const t=o.ua.get(e);null!==t&&(Wc(o.remoteStore,t),o.ua=o.ua.remove(e),o.aa.delete(t),qm(o))}function _g(o,e,t){for(const l of t)l instanceof Vm?(o.ca.addReference(l.key,e),tv(o,l)):l instanceof Bm?(kt("SyncEngine","Document no longer in limbo: "+l.key),o.ca.removeReference(l.key,e),o.ca.containsKey(l.key)||ev(o,l.key)):M()}function tv(o,e){const t=e.key,l=t.path.canonicalString();o.ua.get(t)||o.oa.has(l)||(kt("SyncEngine","New document in limbo: "+t),o.oa.add(l),qm(o))}function qm(o){for(;o.oa.size>0&&o.ua.size<o.maxConcurrentLimboResolutions;){const e=o.oa.values().next().value;o.oa.delete(e);const t=new jt(qr.fromString(e)),l=o.fa.next();o.aa.set(l,new nu(t)),o.ua=o.ua.insert(t,l),kh(o.remoteStore,new zl(Ss(Dc(t.path)),l,2,hs.A))}}function cc(o,e,t){return yg.apply(this,arguments)}function yg(){return yg=(0,Oe.Z)(function*(o,e,t){const l=N(o),h=[],_=[],C=[];var R;l.ia.isEmpty()||(l.ia.forEach((R,Y)=>{C.push(l._a(Y,e,t).then(J=>{if(J){l.isPrimaryClient&&l.sharedClientState.updateQueryState(Y.targetId,J.fromCache?"not-current":"current"),h.push(J);const ge=Ah.Ys(Y.targetId,J);_.push(ge)}}))}),yield Promise.all(C),l.sa.zo(h),yield(R=(0,Oe.Z)(function*(Y,J){const ge=N(Y);try{yield ge.persistence.runTransaction("notifyLocalViewChanges","readwrite",Re=>gt.forEach(J,at=>gt.forEach(at.Hs,At=>ge.persistence.referenceDelegate.addReference(Re,at.targetId,At)).next(()=>gt.forEach(at.Js,At=>ge.persistence.referenceDelegate.removeReference(Re,at.targetId,At)))))}catch(Re){if(!Uc(Re))throw Re;kt("LocalStore","Failed to update sequence numbers: "+Re)}for(const Re of J){const at=Re.targetId;if(!Re.fromCache){const At=ge.ui.get(at),pn=At.withLastLimboFreeSnapshotVersion(At.snapshotVersion);ge.ui=ge.ui.insert(at,pn)}}}),function(Y,J){return R.apply(this,arguments)})(l.localStore,_))}),yg.apply(this,arguments)}function nv(o,e){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,Oe.Z)(function*(o,e){const t=N(o);if(!t.currentUser.isEqual(e)){kt("SyncEngine","User change. New user:",e.toKey());const l=yield vm(t.localStore,e);t.currentUser=e,(h=t).la.forEach(C=>{C.forEach(R=>{R.reject(new Z(P.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.la.clear(),t.sharedClientState.handleUserChange(e,l.removedBatchIds,l.addedBatchIds),yield cc(t,l.di)}var h}),Wm.apply(this,arguments)}function vg(o,e){const t=N(o),l=t.aa.get(e);if(l&&l.na)return ti().add(l.key);{let h=ti();const _=t.ra.get(e);if(!_)return h;for(const C of _){const R=t.ia.get(C);h=h.unionWith(R.view.ju)}return h}}function qh(o,e){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,Oe.Z)(function*(o,e){const t=N(o),l=yield Yp(t.localStore,e.query,!0),h=e.view.ta(l);return t.isPrimaryClient&&_g(t,e.targetId,h.Xu),h}),Fu.apply(this,arguments)}function oo(o,e){return Ua.apply(this,arguments)}function Ua(){return Ua=(0,Oe.Z)(function*(o,e){const t=N(o);return uc(t.localStore,e).then(l=>cc(t,l))}),Ua.apply(this,arguments)}function ep(o,e,t,l){return tp.apply(this,arguments)}function tp(){return tp=(0,Oe.Z)(function*(o,e,t,l){const h=N(o),_=yield function(C,R){const Y=N(C),J=N(Y.Bs);return Y.persistence.runTransaction("Lookup mutation documents","readonly",ge=>J.fn(ge,R).next(Re=>Re?Y.fi.Ks(ge,Re):gt.resolve(null)))}(h.localStore,e);var R;null!==_?("pending"===t?yield Vh(h.remoteStore):"acknowledged"===t||"rejected"===t?(mg(h,e,l||null),X_(h,e),R=e,N(N(h.localStore).Bs)._n(R)):M(),yield cc(h,_)):kt("SyncEngine","Cannot apply mutation batch with id: "+e)}),tp.apply(this,arguments)}function Ud(){return Ud=(0,Oe.Z)(function*(o,e){const t=N(o);if(hc(t),fc(t),!0===e&&!0!==t.da){const l=t.sharedClientState.getAllActiveQueryTargets(),h=yield ua(t,l.toArray());t.da=!0,yield lg(t.remoteStore,!0);for(const _ of h)kh(t.remoteStore,_)}else if(!1===e&&!1!==t.da){const l=[];let h=Promise.resolve();t.ra.forEach((_,C)=>{t.sharedClientState.isLocalQueryTarget(C)?l.push(C):h=h.then(()=>(ed(t,C),ma(t.localStore,C,!0))),Wc(t.remoteStore,C)}),yield h,yield ua(t,l),function(_){const C=N(_);C.aa.forEach((R,Y)=>{Wc(C.remoteStore,Y)}),C.ca.Si(),C.aa=new Map,C.ua=new cn(jt.comparator)}(t),t.da=!1,yield lg(t.remoteStore,!1)}}),Ud.apply(this,arguments)}function ua(o,e,t){return _a.apply(this,arguments)}function _a(){return _a=(0,Oe.Z)(function*(o,e,t){const l=N(o),h=[],_=[];for(const C of e){let R;const Y=l.ra.get(C);if(Y&&0!==Y.length){R=yield xu(l.localStore,Ss(Y[0]));for(const J of Y){const ge=l.ia.get(J),Re=yield qh(l,ge);Re.snapshot&&_.push(Re.snapshot)}}else{const J=yield Rd(l.localStore,C);R=yield xu(l.localStore,J),yield hg(l,np(J),C,!1)}h.push(R)}return l.sa.zo(_),h}),_a.apply(this,arguments)}function np(o){return Rp(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function Pl(o){const e=N(o);return N(N(e.localStore).persistence).Fs()}function zm(o,e,t,l){return td.apply(this,arguments)}function td(){return td=(0,Oe.Z)(function*(o,e,t,l){const h=N(o);if(h.da)return void kt("SyncEngine","Ignoring unexpected query state notification.");const _=h.ra.get(e);if(_&&_.length>0)switch(t){case"current":case"not-current":{const C=yield uc(h.localStore,Oa(_[0])),R=Rl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield cc(h,C,R);break}case"rejected":yield ma(h.localStore,e,!0),ed(h,e,l);break;default:M()}}),td.apply(this,arguments)}function Vd(o,e,t){return dc.apply(this,arguments)}function dc(){return dc=(0,Oe.Z)(function*(o,e,t){const l=hc(o);if(l.da){for(const h of e){if(l.ra.has(h)){kt("SyncEngine","Adding an already active target "+h);continue}const _=yield Rd(l.localStore,h),C=yield xu(l.localStore,_);yield hg(l,np(_),C.targetId,!1),kh(l.remoteStore,C)}for(const h of t)l.ra.has(h)&&(yield ma(l.localStore,h,!1).then(()=>{Wc(l.remoteStore,h),ed(l,h)}).catch(Hc))}}),dc.apply(this,arguments)}function hc(o){const e=N(o);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n0.bind(null,e),e.sa.zo=Ky.bind(null,e.eventManager),e.sa.wa=Yy.bind(null,e.eventManager),e}function fc(o){const e=N(o);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q_.bind(null,e),e}class Bd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Oe.Z)(function*(){t.M=Nh(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return xh(this.persistence,new F_,e.initialUser,this.M)}ya(e){return new Ov(zf.Yi,this.M)}ga(e){return new Tm}terminate(){var e=this;return(0,Oe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class nd extends Bd{constructor(e,t,l){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=l,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,l=this;return(0,Oe.Z)(function*(){yield t().call(l,e),yield l.Ta.initialize(l,e),yield fc(l.Ta.syncEngine),yield Vh(l.Ta.remoteStore),yield l.persistence.Ts(()=>(l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(l.localStore),Promise.resolve()))})()}Ia(e){return xh(this.persistence,new F_,e.initialUser,this.M)}pa(e){return new Hf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),l=void 0!==this.cacheSizeBytes?ga.withCacheSize(this.cacheSizeBytes):ga.DEFAULT;return new $c(this.synchronizeTabs,t,e.clientId,l,e.asyncQueue,rg(),Zf(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Tm}}class Wh extends nd{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,l=this;return(0,Oe.Z)(function*(){yield t().call(l,e);const h=l.Ta.syncEngine;l.sharedClientState instanceof j_&&(l.sharedClientState.syncEngine={$r:ep.bind(null,h),Br:zm.bind(null,h),Lr:Vd.bind(null,h),Fs:Pl.bind(null,h),Fr:oo.bind(null,h)},yield l.sharedClientState.start()),yield l.persistence.Ts(function(){var _=(0,Oe.Z)(function*(C){yield function Lu(o,e){return Ud.apply(this,arguments)}(l.Ta.syncEngine,C),l.gcScheduler&&(C&&!l.gcScheduler.started?l.gcScheduler.start(l.localStore):C||l.gcScheduler.stop())});return function(C){return _.apply(this,arguments)}}())})()}ga(e){const t=rg();if(!j_.vt(t))throw new Z(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const l=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new j_(t,e.asyncQueue,l,e.clientId,e.initialUser)}}class Eg{initialize(e,t){var l=this;return(0,Oe.Z)(function*(){l.localStore||(l.localStore=e.localStore,l.sharedClientState=e.sharedClientState,l.datastore=l.createDatastore(t),l.remoteStore=l.createRemoteStore(t),l.eventManager=l.createEventManager(t),l.syncEngine=l.createSyncEngine(t,!e.synchronizeTabs),l.sharedClientState.onlineStateHandler=h=>$m(l.syncEngine,h,1),l.remoteStore.remoteSyncer.handleCredentialChange=nv.bind(null,l.syncEngine),yield lg(l.remoteStore,l.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Gh}createDatastore(e){const t=Nh(e.databaseInfo.databaseId),l=new qy(e.databaseInfo);return new Kf(e.authCredentials,e.appCheckCredentials,l,t)}createRemoteStore(e){return t=this.localStore,l=this.datastore,h=e.asyncQueue,_=R=>$m(this.syncEngine,R,0),C=Im.vt()?new Im:new kv,new Ph(t,l,h,_,C);var t,l,h,_,C}createSyncEngine(e,t){return function(l,h,_,C,R,Y,J){const ge=new Jy(l,h,_,C,R,Y);return J&&(ge.da=!0),ge}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Oe.Z)(function*(t){const l=N(t);kt("RemoteStore","RemoteStore shutting down."),l.wu.add(5),yield kd(l),l.gu.shutdown(),l.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function wg(o,e=10240){let t=0;return{read:()=>(0,Oe.Z)(function*(){if(t<o.byteLength){const l={value:o.slice(t,t+e),done:!1};return t+=e,l}return{done:!0}})(),cancel:()=>(0,Oe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Zm{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new he,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(l=>{l&&l.Mu()?this.metadata.resolve(l.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==l?void 0:l.payload)}`))},l=>this.metadata.reject(l))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Oe.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Oe.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.Va();if(null===t)return null;const l=e.ba.decode(t),h=Number(l);isNaN(h)&&e.va(`length string (${l}) is not valid number`);const _=yield e.Sa(h);return new ku(JSON.parse(_),t.length+h)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Oe.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const l=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),l})()}Sa(e){var t=this;return(0,Oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const l=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),l})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const l=new Uint8Array(e.buffer.length+t.value.length);l.set(e.buffer),l.set(t.value,e.buffer.length),e.buffer=l}return t.done})()}}class ey{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Z(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const l=yield(h=(0,Oe.Z)(function*(_,C){const R=N(_),Y=Xa(R.M)+"/documents",J={documents:C.map(At=>Du(R.M,At))},ge=yield R._o("BatchGetDocuments",Y,J),Re=new Map;ge.forEach(At=>{const Nt=function Af(o,e){return"found"in e?function(t,l){S(!!l.found);const h=Bs(t,l.found.name),_=Ms(l.found.updateTime),C=new gs({mapValue:{fields:l.found.fields}});return H.newFoundDocument(h,_,C)}(o,e):"missing"in e?function(t,l){S(!!l.missing),S(!!l.readTime);const h=Bs(t,l.missing),_=Ms(l.readTime);return H.newNoDocument(h,_)}(o,e):M()}(R.M,At);Re.set(Nt.key.toString(),Nt)});const at=[];return C.forEach(At=>{const Nt=Re.get(At.toString());S(!!Nt),at.push(Nt)}),at}),function(_,C){return h.apply(this,arguments)})(t.datastore,e);var h;return l.forEach(h=>t.recordVersion(h)),l})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var l;e.mutations.forEach(l=>{t.delete(l.key.toString())}),t.forEach((l,h)=>{const _=jt.fromPath(h);e.mutations.push(new rc(_,e.precondition(_)))}),yield(l=(0,Oe.Z)(function*(h,_){const C=N(h),R=Xa(C.M)+"/documents",Y={writes:_.map(J=>Su(C.M,J))};yield C.co("Commit",R,Y)}),function(h,_){return l.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw M();t=In.min()}const l=this.readVersions.get(e.key.toString());if(l){if(!t.isEqual(l))throw new Z(P.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Vs.updateTime(t):Vs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(In.min()))throw new Z(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vs.updateTime(t)}return Vs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ty{constructor(e,t,l,h,_){this.asyncQueue=e,this.datastore=t,this.options=l,this.updateFunction=h,this.deferred=_,this.xa=l.maxAttempts,this.No=new qc(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Oe.Z)(function*(){const t=new ey(e.datastore),l=e.ka(t);l&&l.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(_=>{e.Ma(_)}))}).catch(h=>{e.Ma(h)})}))}ka(e){try{const t=this.updateFunction(e);return!dl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!_d(t)}return!1}}class ny{constructor(e,t,l,h){var _=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=l,this.databaseInfo=h,this.user=Ri.UNAUTHENTICATED,this.clientId=Ds.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(l,function(){var C=(0,Oe.Z)(function*(R){kt("FirestoreClient","Received user=",R.uid),yield _.authCredentialListener(R),_.user=R});return function(R){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(l,C=>(kt("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,Oe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new he;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(l){const h=Ld(l,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function bg(o,e){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,Oe.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield o.getConfiguration();yield e.initialize(t);let l=t.initialUser;o.setCredentialChangeListener(function(){var h=(0,Oe.Z)(function*(_){l.isEqual(_)||(yield vm(e.localStore,_),l=_)});return function(_){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>o.terminate()),o.offlineComponents=e}),Cg.apply(this,arguments)}function ry(o,e){return rp.apply(this,arguments)}function rp(){return rp=(0,Oe.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress();const t=yield Km(o);kt("FirestoreClient","Initializing OnlineComponentProvider");const l=yield o.getConfiguration();yield e.initialize(t,l),o.setCredentialChangeListener(h=>jh(e.remoteStore,h)),o.setAppCheckTokenChangeListener((h,_)=>jh(e.remoteStore,_)),o.onlineComponents=e}),rp.apply(this,arguments)}function Km(o){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,Oe.Z)(function*(o){return o.offlineComponents||(kt("FirestoreClient","Using default OfflineComponentProvider"),yield bg(o,new Bd)),o.offlineComponents}),Tg.apply(this,arguments)}function ip(o){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Oe.Z)(function*(o){return o.onlineComponents||(kt("FirestoreClient","Using default OnlineComponentProvider"),yield ry(o,new Eg)),o.onlineComponents}),Ym.apply(this,arguments)}function iy(o){return Km(o).then(e=>e.persistence)}function sp(o){return Km(o).then(e=>e.localStore)}function sy(o){return ip(o).then(e=>e.remoteStore)}function Ol(o){return ip(o).then(e=>e.syncEngine)}function op(o){return oy.apply(this,arguments)}function oy(){return oy=(0,Oe.Z)(function*(o){const e=yield ip(o),t=e.eventManager;return t.onListen=dg.bind(null,e.syncEngine),t.onUnlisten=Xy.bind(null,e.syncEngine),t}),oy.apply(this,arguments)}function Qm(o,e,t={}){const l=new he;return o.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(h,_,C,R,Y){const J=new zh({next:Re=>{_.enqueueAndForget(()=>km(h,ge));const at=Re.docs.has(C);!at&&Re.fromCache?Y.reject(new Z(P.UNAVAILABLE,"Failed to get document because the client is offline.")):at&&Re.fromCache&&R&&"server"===R.source?Y.reject(new Z(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Y.resolve(Re)},error:Re=>Y.reject(Re)}),ge=new Lm(Dc(C.path),J,{includeMetadataChanges:!0,ku:!0});return ug(h,ge)}(yield op(o),o.asyncQueue,e,t,l)})),l.promise}function Vv(o,e,t={}){const l=new he;return o.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(h,_,C,R,Y){const J=new zh({next:Re=>{_.enqueueAndForget(()=>km(h,ge)),Re.fromCache&&"server"===R.source?Y.reject(new Z(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Y.resolve(Re)},error:Re=>Y.reject(Re)}),ge=new Lm(C,J,{includeMetadataChanges:!0,ku:!0});return ug(h,ge)}(yield op(o),o.asyncQueue,e,t,l)})),l.promise}const jv=new Map;function Dg(o,e,t){if(!t)throw new Z(P.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${e}.`)}function ru(o,e,t,l){if(!0===e&&!0===l)throw new Z(P.INVALID_ARGUMENT,`${o} and ${t} cannot be used together.`)}function Jm(o){if(!jt.isDocumentKey(o))throw new Z(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function ap(o){if(jt.isDocumentKey(o))throw new Z(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${o} has ${o.length}.`)}function Sr(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";{const e=(t=o).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof o?"a function":M()}function Ar(o,e){if("_delegate"in o&&(o=o._delegate),!(o instanceof e)){if(e.name===o.constructor.name)throw new Z(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sr(o);throw new Z(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return o}function Zh(o,e){if(e<=0)throw new Z(P.INVALID_ARGUMENT,`Function ${o}() requires a positive number, but it was: ${e}.`)}class ly{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Z(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Z(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ru("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,t,l){this._authCredentials=t,this._appCheckCredentials=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ly({}),this._settingsFrozen=!1,e instanceof ps?this._databaseId=e:(this._app=e,this._databaseId=function(h){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Z(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(h.options.projectId)}(e))}get app(){if(!this._app)throw new Z(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Z(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ly(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new _t;switch(t.type){case"gapi":const l=t.client;return S(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new Cr(l,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Z(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jv.get(e);t&&(kt("ComponentProvider","Removing Datastore"),jv.delete(e),t.terminate())}(this),Promise.resolve()}}class _s{constructor(e,t,l){this.converter=t,this._key=l,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _s(this.firestore,e,this._key)}}class ya{constructor(e,t,l){this.converter=t,this._query=l,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class Vu extends ya{constructor(e,t,l){super(e,t,Dc(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _s(this.firestore,null,new jt(e))}withConverter(e){return new Vu(this.firestore,e,this._path)}}function uy(o,e,...t){if(o=(0,Qe.m9)(o),Dg("collection","path",e),o instanceof Kh){const l=qr.fromString(e,...t);return ap(l),new Vu(o,null,l)}{if(!(o instanceof _s||o instanceof Vu))throw new Z(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=o._path.child(qr.fromString(e,...t));return ap(l),new Vu(o.firestore,null,l)}}function Sg(o,e,...t){if(o=(0,Qe.m9)(o),1===arguments.length&&(e=Ds.R()),Dg("doc","path",e),o instanceof Kh){const l=qr.fromString(e,...t);return Jm(l),new _s(o,null,new jt(l))}{if(!(o instanceof _s||o instanceof Vu))throw new Z(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=o._path.child(qr.fromString(e,...t));return Jm(l),new _s(o.firestore,o instanceof Vu?o.converter:null,new jt(l))}}function Xm(o,e){return o=(0,Qe.m9)(o),e=(0,Qe.m9)(e),(o instanceof _s||o instanceof Vu)&&(e instanceof _s||e instanceof Vu)&&o.firestore===e.firestore&&o.path===e.path&&o.converter===e.converter}function dy(o,e){return o=(0,Qe.m9)(o),e=(0,Qe.m9)(e),o instanceof ya&&e instanceof ya&&o.firestore===e.firestore&&sa(o._query,e._query)&&o.converter===e.converter}class e_{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new qc(this,"async_queue_retry"),this.Qa=()=>{const t=Zf();t&&kt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Zf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Zf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new he;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Oe.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Uc(t))throw t;kt("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(l=>{throw this.Ua=l,this.qa=!1,yr("INTERNAL UNHANDLED ERROR: ",function(_){let C=_.message||"";return _.stack&&(C=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),C}(l)),l}).then(l=>(this.qa=!1,l))));return this.Fa=t,t}enqueueAfterDelay(e,t,l){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const h=rl.createAndSchedule(this,e,t,l,_=>this.Ha(_));return this.La.push(h),h}ja(){this.Ua&&M()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Oe.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,l)=>t.targetTimeMs-l.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function hy(o){return function(e,t){if("object"!=typeof e||null===e)return!1;const l=e;for(const h of["next","error","complete"])if(h in l&&"function"==typeof l[h])return!0;return!1}(o)}class t_{constructor(){this._progressObserver={},this._taskCompletionResolver=new he,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,l){this._progressObserver={next:e,error:t,complete:l}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class js extends Kh{constructor(e,t,l){super(e,t,l),this.type="firestore",this._queue=new e_,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Mg(this),this._firestoreClient.terminate()}}function eo(o){return o._firestoreClient||Mg(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function Mg(o){var e;const t=o._freezeSettings(),l=(_=(null===(e=o._app)||void 0===e?void 0:e.options.appId)||"",new Mo(o._databaseId,_,o._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var _,R;o._firestoreClient=new ny(o._authCredentials,o._appCheckCredentials,o._queue,l)}function lp(o,e,t){const l=new he;return o.asyncQueue.enqueue((0,Oe.Z)(function*(){try{yield bg(o,t),yield ry(o,e),l.resolve()}catch(h){if(!("FirebaseError"===(_=h).name?_.code===P.FAILED_PRECONDITION||_.code===P.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&_ instanceof DOMException)||22===_.code||20===_.code||11===_.code))throw h;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+h),l.reject(h)}var _})).then(()=>l.promise)}function Rg(o){if(o._initialized||o._terminated)throw new Z(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Z(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iu(Qs.fromBase64String(e))}catch(t){throw new Z(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new iu(Qs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rd{constructor(e){this._methodName=e}}class Ng{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Z(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nn(this._lat,e._lat)||Nn(this._long,e._long)}}const Pg=/^__.*__$/;class pc{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return null!==this.fieldMask?new $l(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rc(e,this.data,t,this.fieldTransforms)}}class up{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return new $l(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cp(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M()}}class Yh{constructor(e,t,l,h,_,C){this.settings=e,this.databaseId=t,this.M=l,this.ignoreUndefinedProperties=h,void 0===_&&this.tc(),this.fieldTransforms=_||[],this.fieldMask=C||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Yh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.nc({path:l,ic:!1});return h.rc(e),h}oc(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.nc({path:l,ic:!1});return h.tc(),h}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return pp(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(cp(this.ec)&&Pg.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class i_{constructor(e,t,l){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=l||Nh(e)}lc(e,t,l,h=!1){return new Yh({ec:e,methodName:t,hc:l,path:fs.emptyPath(),ic:!1,cc:h},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Oo(o){const e=o._freezeSettings(),t=Nh(o._databaseId);return new i_(o._databaseId,!!e.ignoreUndefinedProperties,t)}function Qh(o,e,t,l,h,_={}){const C=o.lc(_.merge||_.mergeFields?2:0,e,t,h);a_("Data must be an object, but it was:",C,l);const R=s_(l,C);let Y,J;if(_.merge)Y=new Ll(C.fieldMask),J=C.fieldTransforms;else if(_.mergeFields){const ge=[];for(const Re of _.mergeFields){const at=Lg(e,Re,t);if(!C.contains(at))throw new Z(P.INVALID_ARGUMENT,`Field '${at}' is specified in your field mask but missing from your input data.`);_y(ge,at)||ge.push(at)}Y=new Ll(ge),J=C.fieldTransforms.filter(Re=>Y.covers(Re.field))}else Y=null,J=C.fieldTransforms;return new pc(new gs(R),Y,J)}class gc extends rd{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gc}}function Og(o,e,t){return new Yh({ec:3,hc:e.settings.hc,methodName:o._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class dp extends rd{_toFieldTransform(e){return new Ro(e.path,new Ac)}isEqual(e){return e instanceof dp}}class kg extends rd{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Og(this,e,!0),l=this.fc.map(_=>Jh(_,t)),h=new nc(l);return new Ro(e.path,h)}isEqual(e){return this===e}}class cv extends rd{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Og(this,e,!0),l=this.fc.map(_=>Jh(_,t)),h=new gd(l);return new Ro(e.path,h)}isEqual(e){return this===e}}class my extends rd{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Ya(e.M,Op(e.M,this.dc));return new Ro(e.path,t)}isEqual(e){return this===e}}function ju(o,e,t,l){const h=o.lc(1,e,t);a_("Data must be an object, but it was:",h,l);const _=[],C=gs.empty();cl(l,(Y,J)=>{const ge=fp(e,Y,t);J=(0,Qe.m9)(J);const Re=h.oc(ge);if(J instanceof gc)_.push(ge);else{const at=Jh(J,Re);null!=at&&(_.push(ge),C.set(ge,at))}});const R=new Ll(_);return new up(C,R,h.fieldTransforms)}function hp(o,e,t,l,h,_){const C=o.lc(1,e,t),R=[Lg(e,l,t)],Y=[h];if(_.length%2!=0)throw new Z(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let at=0;at<_.length;at+=2)R.push(Lg(e,_[at])),Y.push(_[at+1]);const J=[],ge=gs.empty();for(let at=R.length-1;at>=0;--at)if(!_y(J,R[at])){const At=R[at];let Nt=Y[at];Nt=(0,Qe.m9)(Nt);const pn=C.oc(At);if(Nt instanceof gc)J.push(At);else{const Bn=Jh(Nt,pn);null!=Bn&&(J.push(At),ge.set(At,Bn))}}const Re=new Ll(J);return new up(ge,Re,C.fieldTransforms)}function Fg(o,e,t,l=!1){return Jh(t,o.lc(l?4:3,e))}function Jh(o,e){if(o_(o=(0,Qe.m9)(o)))return a_("Unsupported field value:",e,o),s_(o,e);if(o instanceof rd)return function(t,l){if(!cp(l.ec))throw l.ac(`${t._methodName}() can only be used with update() and set()`);if(!l.path)throw l.ac(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(o,e),null;if(void 0===o&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),o instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,l){const h=[];let _=0;for(const C of t){let R=Jh(C,l.uc(_));null==R&&(R={nullValue:"NULL_VALUE"}),h.push(R),_++}return{arrayValue:{values:h}}}(o,e)}return function(t,l){if(null===(t=(0,Qe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Op(l.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=zi.fromDate(t);return{timestampValue:ic(l.M,h)}}if(t instanceof zi){const h=new zi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ic(l.M,h)}}if(t instanceof Ng)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof iu)return{bytesValue:Fp(l.M,t._byteString)};if(t instanceof _s){const h=l.databaseId,_=t.firestore._databaseId;if(!_.isEqual(h))throw l.ac(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:wd(t.firestore._databaseId||l.databaseId,t._key.path)}}throw l.ac(`Unsupported field value: ${Sr(t)}`)}(o,e)}function s_(o,e){const t={};return Ji(o)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cl(o,(l,h)=>{const _=Jh(h,e.sc(l));null!=_&&(t[l]=_)}),{mapValue:{fields:t}}}function o_(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof zi||o instanceof Ng||o instanceof iu||o instanceof _s||o instanceof rd)}function a_(o,e,t){if(!o_(t)||"object"!=typeof(l=t)||null===l||Object.getPrototypeOf(l)!==Object.prototype&&null!==Object.getPrototypeOf(l)){const l=Sr(t);throw e.ac("an object"===l?o+" a custom object":o+" "+l)}var l}function Lg(o,e,t){if((e=(0,Qe.m9)(e))instanceof Bu)return e._internalPath;if("string"==typeof e)return fp(o,e);throw pp("Field path arguments must be of type string or ",o,!1,void 0,t)}const ao=new RegExp("[~\\*/\\[\\]]");function fp(o,e,t){if(e.search(ao)>=0)throw pp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,t);try{return new Bu(...e.split("."))._internalPath}catch(l){throw pp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,t)}}function pp(o,e,t,l,h){const _=l&&!l.isEmpty(),C=void 0!==h;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let Y="";return(_||C)&&(Y+=" (found",_&&(Y+=` in field ${l}`),C&&(Y+=` in document ${h}`),Y+=")"),new Z(P.INVALID_ARGUMENT,R+o+Y)}function _y(o,e){return o.some(t=>t.isEqual(e))}class id{constructor(e,t,l,h,_){this._firestore=e,this._userDataWriter=t,this._key=l,this._document=h,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new _s(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ug(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ug extends id{data(){return super.data()}}function sd(o,e){return"string"==typeof e?fp(o,e):e instanceof Bu?e._internalPath:e._delegate._internalPath}class su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Va extends id{constructor(e,t,l,h,_,C){super(e,t,l,h,C),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const l=this._document.data.field(sd("DocumentSnapshot.get",e));if(null!==l)return this._userDataWriter.convertValue(l,t.serverTimestamps)}}}class jd extends Va{data(e={}){return super.data(e)}}class il{constructor(e,t,l,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new su(h.hasPendingWrites,h.fromCache),this.query=l}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(l=>{e.call(t,new jd(this._firestore,this._userDataWriter,l.key,l,new su(this._snapshot.mutatedKeys.has(l.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let _=0;return l._snapshot.docChanges.map(C=>({type:"added",doc:new jd(l._firestore,l._userDataWriter,C.doc.key,C.doc,new su(l._snapshot.mutatedKeys.has(C.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:_++}))}{let _=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(C=>h||3!==C.type).map(C=>{const R=new jd(l._firestore,l._userDataWriter,C.doc.key,C.doc,new su(l._snapshot.mutatedKeys.has(C.doc.key),l._snapshot.fromCache),l.query.converter);let Y=-1,J=-1;return 0!==C.type&&(Y=_.indexOf(C.doc.key),_=_.delete(C.doc.key)),1!==C.type&&(_=_.add(C.doc),J=_.indexOf(C.doc.key)),{type:Vg(C.type),doc:R,oldIndex:Y,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vg(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return M()}}function gp(o,e){return o instanceof Va&&e instanceof Va?o._firestore===e._firestore&&o._key.isEqual(e._key)&&(null===o._document?null===e._document:o._document.isEqual(e._document))&&o._converter===e._converter:o instanceof il&&e instanceof il&&o._firestore===e._firestore&&dy(o.query,e.query)&&o.metadata.isEqual(e.metadata)&&o._snapshot.isEqual(e._snapshot)}function l_(o){if("L"===o.limitType&&0===o.explicitOrderBy.length)throw new Z(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mc{}function Hu(o,...e){for(const t of e)o=t._apply(o);return o}class $u extends mc{constructor(e,t,l){super(),this._c=e,this.wc=t,this.mc=l,this.type="where"}_apply(e){const t=Oo(e.firestore),l=function(h,_,C,R,Y,J,ge){let Re;if(Y.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new Z(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){vy(ge,J);const At=[];for(const Nt of ge)At.push(Xh(R,h,Nt));Re={arrayValue:{values:At}}}else Re=Xh(R,h,ge)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||vy(ge,J),Re=Fg(C,"where",ge,"in"===J||"not-in"===J);const at=xo.create(Y,J,Re);return function(At,Nt){if(Nt.S()){const Bn=ec(At);if(null!==Bn&&!Bn.isEqual(Nt.field))throw new Z(P.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Bn.toString()}' and '${Nt.field.toString()}'`);const Vi=cr(At);null!==Vi&&ja(0,Nt.field,Vi)}const pn=function(Bn,Vi){for(const uo of Bn.filters)if(Vi.indexOf(uo.op)>=0)return uo.op;return null}(At,function(Bn){switch(Bn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Nt.op));if(null!==pn)throw new Z(P.INVALID_ARGUMENT,pn===Nt.op?`Invalid query. You cannot use more than one '${Nt.op.toString()}' filter.`:`Invalid query. You cannot use '${Nt.op.toString()}' filters with '${pn.toString()}' filters.`)}(h,at),at}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ya(e.firestore,e.converter,function(h,_){const C=h.filters.concat([_]);return new Bl(h.path,h.collectionGroup,h.explicitOrderBy.slice(),C,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,l))}}class yy extends mc{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(l,h,_){if(null!==l.startAt)throw new Z(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==l.endAt)throw new Z(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Ic(h,_);return function(R,Y){if(null===cr(R)){const J=ec(R);null!==J&&ja(0,J,Y.field)}}(l,C),C}(e._query,this._c,this.gc);return new ya(e.firestore,e.converter,function(l,h){const _=l.explicitOrderBy.concat([h]);return new Bl(l.path,l.collectionGroup,_,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(e._query,t))}}class ca extends mc{constructor(e,t,l){super(),this.type=e,this.yc=t,this.Ic=l}_apply(e){return new ya(e.firestore,e.converter,Sc(e._query,this.yc,this.Ic))}}class mp extends mc{constructor(e,t,l){super(),this.type=e,this.Tc=t,this.Ec=l}_apply(e){const t=jg(e,this.type,this.Tc,this.Ec);return new ya(e.firestore,e.converter,(h=t,new Bl((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,h,l.endAt)));var l,h}}class _p extends mc{constructor(e,t,l){super(),this.type=e,this.Tc=t,this.Ec=l}_apply(e){const t=jg(e,this.type,this.Tc,this.Ec);return new ya(e.firestore,e.converter,(h=t,new Bl((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,h)));var l,h}}function jg(o,e,t,l){if(t[0]=(0,Qe.m9)(t[0]),t[0]instanceof id)return function(h,_,C,R,Y){if(!R)throw new Z(P.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const J=[];for(const ge of Eu(h))if(ge.field.isKeyField())J.push(ss(_,R.key));else{const Re=R.data.field(ge.field);if(gu(Re))throw new Z(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ge.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Re){const at=ge.field.canonicalString();throw new Z(P.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${at}' (used as the orderBy) does not exist.`)}J.push(Re)}return new Za(J,Y)}(o._query,o.firestore._databaseId,e,t[0]._document,l);{const h=Oo(o.firestore);return function(_,C,R,Y,J,ge){const Re=_.explicitOrderBy;if(J.length>Re.length)throw new Z(P.INVALID_ARGUMENT,`Too many arguments provided to ${Y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const at=[];for(let At=0;At<J.length;At++){const Nt=J[At];if(Re[At].field.isKeyField()){if("string"!=typeof Nt)throw new Z(P.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Y}(), but got a ${typeof Nt}`);if(!tc(_)&&-1!==Nt.indexOf("/"))throw new Z(P.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Y}() must be a plain document ID, but '${Nt}' contains a slash.`);const pn=_.path.child(qr.fromString(Nt));if(!jt.isDocumentKey(pn))throw new Z(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Y}() must result in a valid document path, but '${pn}' is not because it contains an odd number of segments.`);const Bn=new jt(pn);at.push(ss(C,Bn))}else{const pn=Fg(R,Y,Nt);at.push(pn)}}return new Za(at,ge)}(o._query,o.firestore._databaseId,h,e,t,l)}}function Xh(o,e,t){if("string"==typeof(t=(0,Qe.m9)(t))){if(""===t)throw new Z(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tc(e)&&-1!==t.indexOf("/"))throw new Z(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const l=e.path.child(qr.fromString(t));if(!jt.isDocumentKey(l))throw new Z(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${l}' is not because it has an odd number of segments (${l.length}).`);return ss(o,new jt(l))}if(t instanceof _s)return ss(o,t._key);throw new Z(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sr(t)}.`)}function vy(o,e){if(!Array.isArray(o)||0===o.length)throw new Z(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(o.length>10)throw new Z(P.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ja(o,e,t){if(!t.isEqual(e))throw new Z(P.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Ey={maxAttempts:5};class Hd{convertValue(e,t="none"){switch(Dl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw M()}}convertObject(e,t){const l={};return cl(e.fields,(h,_)=>{l[h]=this.convertValue(_,t)}),l}convertGeoPoint(e){return new Ng(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(l=>this.convertValue(l,t))}convertServerTimestamp(e,t){switch(t){case"previous":const l=wc(e);return null==l?null:this.convertValue(l,t);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const t=Sa(e);return new zi(t.seconds,t.nanos)}convertDocumentKey(e,t){const l=qr.fromString(e);S(K(l));const h=new ps(l.get(1),l.get(3)),_=new jt(l.popFirst(5));return h.isEqual(t)||yr(`Document ${_} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),_}}function od(o,e,t){let l;return l=o?t&&(t.merge||t.mergeFields)?o.toFirestore(e,t):o.toFirestore(e):e,l}class Hg extends Hd{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _s(this.firestore,null,t)}}class wy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Oo(e)}set(e,t,l){this._verifyNotCommitted();const h=_c(e,this._firestore),_=od(h.converter,t,l),C=Qh(this._dataReader,"WriteBatch.set",h._key,_,null!==h.converter,l);return this._mutations.push(C.toMutation(h._key,Vs.none())),this}update(e,t,l,...h){this._verifyNotCommitted();const _=_c(e,this._firestore);let C;return C="string"==typeof(t=(0,Qe.m9)(t))||t instanceof Bu?hp(this._dataReader,"WriteBatch.update",_._key,t,l,h):ju(this._dataReader,"WriteBatch.update",_._key,t),this._mutations.push(C.toMutation(_._key,Vs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_c(e,this._firestore);return this._mutations=this._mutations.concat(new Nc(t._key,Vs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _c(o,e){if((o=(0,Qe.m9)(o)).firestore!==e)throw new Z(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}class ad extends Hd{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _s(this.firestore,null,t)}}function ef(o,e,t){o=Ar(o,_s);const l=Ar(o.firestore,js),h=od(o.converter,e,t);return tf(l,[Qh(Oo(l),"setDoc",o._key,h,null!==o.converter,t).toMutation(o._key,Vs.none())])}function $g(o,e,t,...l){o=Ar(o,_s);const h=Ar(o.firestore,js),_=Oo(h);let C;return C="string"==typeof(e=(0,Qe.m9)(e))||e instanceof Bu?hp(_,"updateDoc",o._key,e,t,l):ju(_,"updateDoc",o._key,e),tf(h,[C.toMutation(o._key,Vs.exists(!0))])}function Gg(o,...e){var t,l,h;o=(0,Qe.m9)(o);let _={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||hy(e[C])||(_=e[C],C++);const R={includeMetadataChanges:_.includeMetadataChanges};if(hy(e[C])){const Re=e[C];e[C]=null===(t=Re.next)||void 0===t?void 0:t.bind(Re),e[C+1]=null===(l=Re.error)||void 0===l?void 0:l.bind(Re),e[C+2]=null===(h=Re.complete)||void 0===h?void 0:h.bind(Re)}let Y,J,ge;if(o instanceof _s)J=Ar(o.firestore,js),ge=Dc(o._key.path),Y={next:Re=>{e[C]&&e[C](p_(J,o,Re))},error:e[C+1],complete:e[C+2]};else{const Re=Ar(o,ya);J=Ar(Re.firestore,js),ge=Re._query;const at=new ad(J);Y={next:At=>{e[C]&&e[C](new il(J,at,Re,At))},error:e[C+1],complete:e[C+2]},l_(o._query)}return function(Re,at,At,Nt){const pn=new zh(Nt),Bn=new Lm(at,pn,At);return Re.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return ug(yield op(Re),Bn)})),()=>{pn.Aa(),Re.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return km(yield op(Re),Bn)}))}}(eo(J),ge,R,Y)}function tf(o,e){return function(t,l){const h=new he;return t.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function Fv(o,e,t){return Xf.apply(this,arguments)}(yield Ol(t),l,h)})),h.promise}(eo(o),e)}function p_(o,e,t){const l=t.docs.get(e._key),h=new ad(o);return new Va(o,h,e._key,l,new su(t.hasPendingWrites,t.fromCache),e.converter)}class fv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Oo(e)}get(e){const t=_c(e,this._firestore),l=new Hg(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return M();const _=h[0];if(_.isFoundDocument())return new id(this._firestore,l,_.key,_,t.converter);if(_.isNoDocument())return new id(this._firestore,l,t._key,null,t.converter);throw M()})}set(e,t,l){const h=_c(e,this._firestore),_=od(h.converter,t,l),C=Qh(this._dataReader,"Transaction.set",h._key,_,null!==h.converter,l);return this._transaction.set(h._key,C),this}update(e,t,l,...h){const _=_c(e,this._firestore);let C;return C="string"==typeof(t=(0,Qe.m9)(t))||t instanceof Bu?hp(this._dataReader,"Transaction.update",_._key,t,l,h):ju(this._dataReader,"Transaction.update",_._key,t),this._transaction.update(_._key,C),this}delete(e){const t=_c(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_c(e,this._firestore),l=new ad(this._firestore);return super.get(e).then(h=>new Va(this._firestore,l,t._key,h._document,new su(!1,!1),t.converter))}}function __(o,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Z("invalid-argument",`Invalid options passed to function ${o}(): You cannot specify both "merge" and "mergeFields".`);return e}function Sy(){if("undefined"==typeof Uint8Array)throw new Z("unimplemented","Uint8Arrays are not available in this environment.")}function vp(){if(!function pf(){return"undefined"!=typeof atob}())throw new Z("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(o,e=!0){Ys=Lt.SDK_VERSION,(0,Lt._registerComponent)(new ct.wA("firestore",(t,{options:l})=>{const h=t.getProvider("app").getImmediate(),_=new js(h,new zn(t.getProvider("auth-internal")),new Ls(t.getProvider("app-check-internal")));return l=Object.assign({useFetchStreams:e},l),_._setSettings(l),_},"PUBLIC")),(0,Lt.registerVersion)(Ho,"3.4.9",o),(0,Lt.registerVersion)(Ho,"3.4.9","esm2017")}();class nf{constructor(e){this._delegate=e}static fromBase64String(e){return vp(),new nf(iu.fromBase64String(e))}static fromUint8Array(e){return Sy(),new nf(iu.fromUint8Array(e))}toBase64(){return vp(),this._delegate.toBase64()}toUint8Array(){return Sy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function qd(o){return function Wg(o,e){if("object"!=typeof o||null===o)return!1;const t=o;for(const l of e)if(l in t&&"function"==typeof t[l])return!0;return!1}(o,["next","error","complete"])}class Ep{enableIndexedDbPersistence(e,t){return function av(o,e){Rg(o=Ar(o,js));const t=eo(o),l=o._freezeSettings(),h=new Eg;return lp(t,h,new nd(h,l.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function xg(o){Rg(o=Ar(o,js));const e=eo(o),t=o._freezeSettings(),l=new Eg;return lp(e,l,new Wh(l,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function n_(o){if(o._initialized&&!o._terminated)throw new Z(P.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new he;return o._queue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{yield(t=(0,Oe.Z)(function*(l){if(!el.vt())return Promise.resolve();const h=l+"main";yield el.delete(h)}),function(l){return t.apply(this,arguments)})(k_(o._databaseId,o._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class y_{constructor(e,t,l){this._delegate=t,this._persistenceProvider=l,this.INTERNAL={delete:()=>this.terminate()},e instanceof ps||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ds("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,l={}){!function iv(o,e,t,l={}){var h;const _=(o=Ar(o,Kh))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&ds("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${t}`,ssl:!1})),l.mockUserToken){let C,R;if("string"==typeof l.mockUserToken)C=l.mockUserToken,R=Ri.MOCK_USER;else{C=(0,Qe.Sg)(l.mockUserToken,null===(h=o._app)||void 0===h?void 0:h.options.projectId);const Y=l.mockUserToken.sub||l.mockUserToken.user_id;if(!Y)throw new Z(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Ri(Y)}o._authCredentials=new Qt(new Ie(C,R))}}(this._delegate,e,t,l)}enableNetwork(){return function lv(o){return function r0(o){return o.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield iy(o),t=yield sy(o);return e.setNetworkEnabled(!0),function(l){const h=N(l);return h.wu.delete(0),nl(h)}(t)}))}(eo(o=Ar(o,js)))}(this._delegate)}disableNetwork(){return function r_(o){return function ay(o){return o.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield iy(o),t=yield sy(o);return e.setNetworkEnabled(!1),(l=(0,Oe.Z)(function*(h){const _=N(h);_.wu.add(0),yield kd(_),_.yu.set("Offline")}),function(h){return l.apply(this,arguments)})(t);var l}))}(eo(o=Ar(o,js)))}(this._delegate)}enablePersistence(e){let t=!1,l=!1;return e&&(t=!!e.synchronizeTabs,l=!!e.experimentalForceOwningTab,ru("synchronizeTabs",t,"experimentalForceOwningTab",l)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,l)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hv(o){return function(e){const t=new he;return e.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function J_(o,e){return Gm.apply(this,arguments)}(yield Ol(e),t)})),t.promise}(eo(o=Ar(o,js)))}(this._delegate)}onSnapshotsInSync(e){return function Ty(o,e){return function s0(o,e){const t=new zh(e);return o.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return l=yield op(o),h=t,N(l).bu.add(h),void h.next();var l,h})),()=>{t.Aa(),o.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return l=yield op(o),h=t,void N(l).bu.delete(h);var l,h}))}}(eo(o=Ar(o,js)),hy(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bp(this,uy(this._delegate,e))}catch(t){throw Ha(t,"collection()","Firestore.collection()")}}doc(e){try{return new Yo(this,Sg(this._delegate,e))}catch(t){throw Ha(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sl(this,function cy(o,e){if(o=Ar(o,Kh),Dg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Z(P.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ya(o,null,(t=e,new Bl(qr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ha(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pv(o,e,t){o=Ar(o,js);const l=Object.assign(Object.assign({},Ey),t);return function(h){if(h.maxAttempts<1)throw new Z(P.INVALID_ARGUMENT,"Max attempts must be at least 1")}(l),function o0(o,e,t){const l=new he;return o.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){const h=yield(_=o,ip(_).then(C=>C.datastore));var _;new ty(o.asyncQueue,h,t,e,l).run()})),l.promise}(eo(o),h=>e(new fv(o,h)),l)}(this._delegate,t=>e(new My(this,t)))}batch(){return eo(this._delegate),new wp(new wy(this._delegate,e=>tf(this._delegate,e)))}loadBundle(e){return function py(o,e){const t=eo(o=Ar(o,js)),l=new t_;return function Bv(o,e,t,l){const h=function(_,C){let R;return R="string"==typeof _?(new TextEncoder).encode(_):_,Y=function(Y,J){if(Y instanceof Uint8Array)return wg(Y,J);if(Y instanceof ArrayBuffer)return wg(new Uint8Array(Y),J);if(Y instanceof ReadableStream)return Y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new Zm(Y,C);var Y}(t,Nh(e));o.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){!function Uu(o,e,t){const l=N(o);var h;(h=(0,Oe.Z)(function*(_,C,R){try{const Y=yield C.getMetadata();if(yield function(at,At){const Nt=N(at),pn=Ms(At.createTime);return Nt.persistence.runTransaction("hasNewerBundle","readonly",Bn=>Nt._s.getBundleMetadata(Bn,At.id)).then(Bn=>!!Bn&&Bn.createTime.compareTo(pn)>=0)}(_.localStore,Y))return yield C.close(),R._completeWith({taskState:"Success",documentsLoaded:(at=Y).totalDocuments,bytesLoaded:at.totalBytes,totalDocuments:at.totalDocuments,totalBytes:at.totalBytes}),Promise.resolve(new Set);R._updateProgress(Um(Y));const J=new z_(Y,_.localStore,C.M);let ge=yield C.ma();for(;ge;){const at=yield J.Fu(ge);at&&R._updateProgress(at),ge=yield C.ma()}const Re=yield J.complete();return yield cc(_,Re.Lu,void 0),yield function(at,At){const Nt=N(at);return Nt.persistence.runTransaction("Save bundle","readwrite",pn=>Nt._s.saveBundleMetadata(pn,At))}(_.localStore,Y),R._completeWith(Re.progress),Promise.resolve(Re.Bu)}catch(Y){return ds("SyncEngine",`Loading bundle failed with ${Y}`),R._failWith(Y),Promise.resolve(new Set)}var at}),function(_,C,R){return h.apply(this,arguments)})(l,e,t).then(h=>{l.sharedClientState.notifyBundleLoaded(h)})}(yield Ol(o),h,l)}))}(t,o._databaseId,e,l),l}(this._delegate,e)}namedQuery(e){return function gy(o,e){return function rv(o,e){return o.asyncQueue.enqueue((0,Oe.Z)(function*(){return function(t,l){const h=N(t);return h.persistence.runTransaction("Get named query","readonly",_=>h._s.getNamedQuery(_,l))}(yield sp(o),e)}))}(eo(o=Ar(o,js)),e).then(t=>t?new ya(o,null,t.query):null)}(this._delegate,e).then(t=>t?new sl(this,t):null)}}class rf extends Hd{constructor(e){super(),this.firestore=e}convertBytes(e){return new nf(new iu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Yo.forKey(t,this.firestore,null)}}class My{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new rf(e)}get(e){const t=An(e);return this._delegate.get(t).then(l=>new sf(this._firestore,new Va(this._firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,t.converter)))}set(e,t,l){const h=An(e);return l?(__("Transaction.set",l),this._delegate.set(h,t,l)):this._delegate.set(h,t),this}update(e,t,l,...h){const _=An(e);return 2===arguments.length?this._delegate.update(_,t):this._delegate.update(_,t,l,...h),this}delete(e){const t=An(e);return this._delegate.delete(t),this}}class wp{constructor(e){this._delegate=e}set(e,t,l){const h=An(e);return l?(__("WriteBatch.set",l),this._delegate.set(h,t,l)):this._delegate.set(h,t),this}update(e,t,l,...h){const _=An(e);return 2===arguments.length?this._delegate.update(_,t):this._delegate.update(_,t,l,...h),this}delete(e){const t=An(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wd{constructor(e,t,l){this._firestore=e,this._userDataWriter=t,this._delegate=l}fromFirestore(e,t){const l=new jd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ud(this._firestore,l),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const l=Wd.INSTANCES;let h=l.get(e);h||(h=new WeakMap,l.set(e,h));let _=h.get(t);return _||(_=new Wd(e,new rf(e),t),h.set(t,_)),_}}Wd.INSTANCES=new WeakMap;class Yo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rf(e)}static forPath(e,t,l){if(e.length%2!=0)throw new Z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Yo(t,new _s(t._delegate,l,new jt(e)))}static forKey(e,t,l){return new Yo(t,new _s(t._delegate,l,e))}get id(){return this._delegate.id}get parent(){return new bp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bp(this.firestore,uy(this._delegate,e))}catch(t){throw Ha(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Qe.m9)(e))instanceof _s&&Xm(this._delegate,e)}set(e,t){t=__("DocumentReference.set",t);try{return t?ef(this._delegate,e,t):ef(this._delegate,e)}catch(l){throw Ha(l,"setDoc()","DocumentReference.set()")}}update(e,t,...l){try{return 1===arguments.length?$g(this._delegate,e):$g(this._delegate,e,t,...l)}catch(h){throw Ha(h,"updateDoc()","DocumentReference.update()")}}delete(){return function f_(o){return tf(Ar(o.firestore,js),[new Nc(o._key,Vs.none())])}(this._delegate)}onSnapshot(...e){const t=xy(e),l=ld(e,h=>new sf(this.firestore,new Va(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return Gg(this._delegate,t,l)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function $d(o){o=Ar(o,_s);const e=Ar(o.firestore,js),t=eo(e),l=new ad(e);return function Ig(o,e){const t=new he;return o.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(l=(0,Oe.Z)(function*(h,_,C){try{const R=yield function(Y,J){const ge=N(Y);return ge.persistence.runTransaction("read document","readonly",Re=>ge.fi.Ls(Re,J))}(h,_);R.isFoundDocument()?C.resolve(R):R.isNoDocument()?C.resolve(null):C.reject(new Z(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const Y=Ld(R,`Failed to get document '${_} from cache`);C.reject(Y)}}),function(h,_,C){return l.apply(this,arguments)})(yield sp(o),e,t);var l})),t.promise}(t,o._key).then(h=>new Va(e,l,o._key,h,new su(null!==h&&h.hasLocalMutations,!0),o.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function d_(o){o=Ar(o,_s);const e=Ar(o.firestore,js);return Qm(eo(e),o._key,{source:"server"}).then(t=>p_(e,o,t))}(this._delegate):function hv(o){o=Ar(o,_s);const e=Ar(o.firestore,js);return Qm(eo(e),o._key).then(t=>p_(e,o,t))}(this._delegate),t.then(l=>new sf(this.firestore,new Va(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)))}withConverter(e){return new Yo(this.firestore,this._delegate.withConverter(e?Wd.getInstance(this.firestore,e):null))}}function Ha(o,e,t){return o.message=o.message.replace(e,t),o}function xy(o){for(const e of o)if("object"==typeof e&&!qd(e))return e;return{}}function ld(o,e){var t,l;let h;return h=qd(o[0])?o[0]:qd(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]},{next:_=>{h.next&&h.next(e(_))},error:null===(t=h.error)||void 0===t?void 0:t.bind(h),complete:null===(l=h.complete)||void 0===l?void 0:l.bind(h)}}class sf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Yo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gp(this._delegate,e._delegate)}}class ud extends sf{data(e){const t=this._delegate.data(e);return function D(o,e){o||M()}(void 0!==t),t}}class sl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rf(e)}where(e,t,l){try{return new sl(this.firestore,Hu(this._delegate,function ou(o,e,t){const l=e,h=sd("where",o);return new $u(h,l,t)}(e,t,l)))}catch(h){throw Ha(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new sl(this.firestore,Hu(this._delegate,function Gu(o,e="asc"){const t=e,l=sd("orderBy",o);return new yy(l,t)}(e,t)))}catch(l){throw Ha(l,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sl(this.firestore,Hu(this._delegate,function Ba(o){return Zh("limit",o),new ca("limit",o,"F")}(e)))}catch(t){throw Ha(t,"limit()","Query.limit()")}}limitToLast(e){try{return new sl(this.firestore,Hu(this._delegate,function au(o){return Zh("limitToLast",o),new ca("limitToLast",o,"L")}(e)))}catch(t){throw Ha(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sl(this.firestore,Hu(this._delegate,function u_(...o){return new mp("startAt",o,!0)}(...e)))}catch(t){throw Ha(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sl(this.firestore,Hu(this._delegate,function Bg(...o){return new mp("startAfter",o,!1)}(...e)))}catch(t){throw Ha(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sl(this.firestore,Hu(this._delegate,function dv(...o){return new _p("endBefore",o,!1)}(...e)))}catch(t){throw Ha(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sl(this.firestore,Hu(this._delegate,function c_(...o){return new _p("endAt",o,!0)}(...e)))}catch(t){throw Ha(t,"endAt()","Query.endAt()")}}isEqual(e){return dy(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function by(o){o=Ar(o,ya);const e=Ar(o.firestore,js),t=eo(e),l=new ad(e);return function Uv(o,e){const t=new he;return o.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(l=(0,Oe.Z)(function*(h,_,C){try{const R=yield Yp(h,_,!0),Y=new Z_(_,R._i),J=Y.Wu(R.documents),ge=Y.applyChanges(J,!1);C.resolve(ge.snapshot)}catch(R){const Y=Ld(R,`Failed to execute query '${_} against cache`);C.reject(Y)}}),function(h,_,C){return l.apply(this,arguments)})(yield sp(o),e,t);var l})),t.promise}(t,o._query).then(h=>new il(e,l,o,h))}(this._delegate):"server"===(null==e?void 0:e.source)?function yp(o){o=Ar(o,ya);const e=Ar(o.firestore,js),t=eo(e),l=new ad(e);return Vv(t,o._query,{source:"server"}).then(h=>new il(e,l,o,h))}(this._delegate):function h_(o){o=Ar(o,ya);const e=Ar(o.firestore,js),t=eo(e),l=new ad(e);return l_(o._query),Vv(t,o._query).then(h=>new il(e,l,o,h))}(this._delegate),t.then(l=>new zg(this.firestore,new il(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)))}onSnapshot(...e){const t=xy(e),l=ld(e,h=>new zg(this.firestore,new il(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return Gg(this._delegate,t,l)}withConverter(e){return new sl(this.firestore,this._delegate.withConverter(e?Wd.getInstance(this.firestore,e):null))}}class Ry{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ud(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new sl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ud(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ry(this._firestore,t))}forEach(e,t){this._delegate.forEach(l=>{e.call(t,new ud(this._firestore,l))})}isEqual(e){return gp(this._delegate,e._delegate)}}class bp extends sl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Yo(this.firestore,e):null}doc(e){try{return new Yo(this.firestore,void 0===e?Sg(this._delegate):Sg(this._delegate,e))}catch(t){throw Ha(t,"doc()","CollectionReference.doc()")}}add(e){return function Cy(o,e){const t=Ar(o.firestore,js),l=Sg(o),h=od(o.converter,e);return tf(t,[Qh(Oo(o.firestore),"addDoc",l._key,h,null!==o.converter,{}).toMutation(l._key,Vs.exists(!1))]).then(()=>l)}(this._delegate,e).then(t=>new Yo(this.firestore,t))}isEqual(e){return Xm(this._delegate,e._delegate)}withConverter(e){return new bp(this.firestore,this._delegate.withConverter(e?Wd.getInstance(this.firestore,e):null))}}function An(o){return Ar(o,_s)}class Zg{constructor(...e){this._delegate=new Bu(...e)}static documentId(){return new Zg(fs.keyField().canonicalString())}isEqual(e){return(e=(0,Qe.m9)(e))instanceof Bu&&this._delegate._internalPath.isEqual(e._internalPath)}}class zd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function qg(){return new dp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new zd(e)}static delete(){const e=function gv(){return new gc("deleteField")}();return e._methodName="FieldValue.delete",new zd(e)}static arrayUnion(...e){const t=function mv(...o){return new kg("arrayUnion",o)}(...e);return t._methodName="FieldValue.arrayUnion",new zd(t)}static arrayRemove(...e){const t=function Gd(...o){return new cv("arrayRemove",o)}(...e);return t._methodName="FieldValue.arrayRemove",new zd(t)}static increment(e){const t=function g_(o){return new my("increment",o)}(e);return t._methodName="FieldValue.increment",new zd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vv={Firestore:y_,GeoPoint:Ng,Timestamp:zi,Blob:nf,Transaction:My,WriteBatch:wp,DocumentReference:Yo,DocumentSnapshot:sf,Query:sl,QueryDocumentSnapshot:ud,QuerySnapshot:zg,CollectionReference:bp,FieldPath:Zg,FieldValue:zd,setLogLevel:function Ay(o){!function kl(o){Ni.setLogLevel(o)}(o)},CACHE_SIZE_UNLIMITED:-1};!function Ev(o){(function Cp(o,e){o.INTERNAL.registerComponent(new ct.wA("firestore-compat",t=>{const l=t.getProvider("app-compat").getImmediate(),h=t.getProvider("firestore").getImmediate();return e(l,h)},"PUBLIC").setServiceProps(Object.assign({},vv)))})(o,(e,t)=>new y_(e,t,new Ep)),o.registerVersion("@firebase/firestore-compat","0.1.18")}(ot.Z);var yl=$(1205),Kg=$(440);function v_(o,e){return function $v(o,e=m.z){return new ie.y(t=>{let l;return null!=e?e.schedule(()=>{l=o.onSnapshot({includeMetadataChanges:!0},t)}):l=o.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=l&&l()}})}(o,e)}function E_(o,e){return v_(o,e).pipe((0,ue.U)(t=>({payload:t,type:"query"})))}function va(o,e){return E_(o,e).pipe((0,pe.O)(void 0),Ge(),(0,ue.U)(([t,l])=>{const h=l.payload.docChanges(),_=h.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach((C,R)=>{const Y=h.find(ge=>ge.doc.ref.isEqual(C.ref)),J=null==t?void 0:t.payload.docs.find(ge=>ge.ref.isEqual(C.ref));Y&&JSON.stringify(Y.doc.metadata)===JSON.stringify(C.metadata)||!Y&&J&&JSON.stringify(J.metadata)===JSON.stringify(C.metadata)||_.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:C}})}),_}))}function Tp(o,e,t){return va(o,t).pipe((0,Pe.R)((l,h)=>function af(o,e,t){return e.forEach(l=>{t.indexOf(l.type)>-1&&(o=function wv(o,e){switch(e.type){case"added":if(!o[e.newIndex]||!o[e.newIndex].doc.ref.isEqual(e.doc.ref))return lf(o,e.newIndex,0,e);break;case"modified":if(null==o[e.oldIndex]||o[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=o.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lf(o,e.newIndex,1,e)}break;case"removed":if(o[e.oldIndex]&&o[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lf(o,e.oldIndex,1)}return o}(o,l))}),o}(l,h.map(_=>_.payload),e),[]),(0,Tt.x)(),(0,ue.U)(l=>l.map(h=>({type:h.type,payload:h}))))}function lf(o,e,t,...l){const h=o.slice();return h.splice(e,t,...l),h}function Py(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}$(127);class Yg{constructor(e,t,l){this.ref=e,this.query=t,this.afs=l}stateChanges(e){let t=va(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ue.U)(l=>l.filter(h=>e.indexOf(h.type)>-1)))),t.pipe((0,pe.O)(void 0),Ge(),(0,Ke.h)(([l,h])=>h.length>0||!l),(0,ue.U)(([l,h])=>h),De.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Pe.R)((t,l)=>[...t,...l],[]))}snapshotChanges(e){const t=Py(e);return Tp(this.query,t,this.afs.schedulers.outsideAngular).pipe(De.iC)}valueChanges(e={}){return E_(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(t=>t.payload.docs.map(l=>e.idField?Object.assign(Object.assign({},l.data()),{[e.idField]:l.id}):l.data())),De.iC)}get(e){return(0,Fe.D)(this.query.get(e)).pipe(De.iC)}add(e){return this.ref.add(e)}doc(e){return new uf(this.ref.doc(e),this.afs)}}class uf{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const l=this.ref.collection(e),{ref:h,query:_}=Jg(l,t);return new Yg(h,_,this.afs)}snapshotChanges(){return function Ny(o,e){return v_(o,e).pipe((0,pe.O)(void 0),Ge(),(0,ue.U)(([t,l])=>l.exists?(null==t?void 0:t.exists)?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(De.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ue.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Fe.D)(this.ref.get(e)).pipe(De.iC)}}class bv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?va(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(t=>t.filter(l=>e.indexOf(l.type)>-1)),(0,Ke.h)(t=>t.length>0),De.iC):va(this.query,this.afs.schedulers.outsideAngular).pipe(De.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Pe.R)((t,l)=>[...t,...l],[]))}snapshotChanges(e){const t=Py(e);return Tp(this.query,t,this.afs.schedulers.outsideAngular).pipe(De.iC)}valueChanges(e={}){return E_(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(l=>l.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),De.iC)}get(e){return(0,Fe.D)(this.query.get(e)).pipe(De.iC)}}const Qg=new w.OlP("angularfire2.enableFirestorePersistence"),Cv=new w.OlP("angularfire2.firestore.persistenceSettings"),Ip=new w.OlP("angularfire2.firestore.settings"),w_=new w.OlP("angularfire2.firestore.use-emulator");function Jg(o,e=(t=>t)){return{query:e(o),ref:o}}let vl=(()=>{class o{constructor(t,l,h,_,C,R,Y,J,ge,Re,at,At,Nt,pn,Bn,Vi,uo){this.schedulers=Y;const Bi=(0,rt.on)(t,R,l),co=ge;Re&&(0,yl.nw)(Bi,R,at,Nt,pn,Bn,At,Vi),[this.firestore,this.persistenceEnabled$]=(0,rt.cc)(`${Bi.name}.firestore`,"AngularFirestore",Bi.name,()=>{const ji=R.runOutsideAngular(()=>Bi.firestore());if(_&&ji.settings(_),co&&ji.useEmulator(...co),h&&!(0,ht.PM)(C)){const Hs=()=>{try{return(0,Fe.D)(ji.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(Ea){return"undefined"!=typeof console&&console.warn(Ea),(0,z.of)(!1)}};return[ji,R.runOutsideAngular(Hs)]}return[ji,(0,z.of)(!1)]},[_,co,h])}collection(t,l){let h;h="string"==typeof t?this.firestore.collection(t):t;const{ref:_,query:C}=Jg(h,l),R=this.schedulers.ngZone.run(()=>_);return new Yg(R,C,this)}collectionGroup(t,l){const h=l||(C=>C),_=this.firestore.collectionGroup(t);return new bv(h(_),this)}doc(t){let l;l="string"==typeof t?this.firestore.doc(t):t;const h=this.schedulers.ngZone.run(()=>l);return new uf(h,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(t){return new(t||o)(w.LFG(rt.Dh),w.LFG(rt.xv,8),w.LFG(Qg,8),w.LFG(Ip,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(De.HU),w.LFG(Cv,8),w.LFG(w_,8),w.LFG(yl.zQ,8),w.LFG(yl.Qv,8),w.LFG(yl.L6,8),w.LFG(yl._Q,8),w.LFG(yl.rT,8),w.LFG(yl.lh,8),w.LFG(yl.f7,8),w.LFG(Kg.nm,8))},o.\u0275prov=w.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})()},2011:(Ut,We,$)=>{$.d(We,{Dh:()=>ke,GT:()=>De,cc:()=>Ke,hO:()=>Tt,on:()=>pe,pX:()=>z,xv:()=>Ge});var w=$(5e3),m=$(127),ie=$(5813);Ut=$.hmd(Ut);const Fe=["ngOnDestroy"],z=(ot,Oe,Lt,ct={})=>new Proxy(ot,{get:(it,Qe)=>Lt.runOutsideAngular(()=>{var ze;if(ot[Qe])return(null===(ze=null==ct?void 0:ct.spy)||void 0===ze?void 0:ze.get)&&ct.spy.get(Qe,ot[Qe]),ot[Qe];if(Fe.indexOf(Qe)>-1)return()=>{};const It=Oe.toPromise().then(le=>{const ut=le&&le[Qe];return"function"==typeof ut?ut.bind(le):ut&&ut.then?ut.then(me=>Lt.run(()=>me)):Lt.run(()=>ut)});return new Proxy(()=>{},{get:(le,ut)=>It[ut],apply:(le,ut,me)=>It.then(je=>{var He;const tt=je&&je(...me);return(null===(He=null==ct?void 0:ct.spy)||void 0===He?void 0:He.apply)&&ct.spy.apply(Qe,me,tt),tt})})})}),De=(ot,Oe)=>{Oe.forEach(Lt=>{Object.getOwnPropertyNames(Lt.prototype||Lt).forEach(ct=>{Object.defineProperty(ot.prototype,ct,Object.getOwnPropertyDescriptor(Lt.prototype||Lt,ct))})})};class Ve{constructor(Oe){return Oe}}const ke=new w.OlP("angularfire2.app.options"),Ge=new w.OlP("angularfire2.app.name");function pe(ot,Oe,Lt){const it="object"==typeof Lt&&Lt||{};it.name=it.name||"string"==typeof Lt&&Lt||"[DEFAULT]";const ze=m.Z.apps.filter(It=>It&&It.name===it.name)[0]||Oe.runOutsideAngular(()=>m.Z.initializeApp(ot,it));try{JSON.stringify(ot)!==JSON.stringify(ze.options)&&ue("error",`${ze.name} Firebase App already initialized with different options${Ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(It){}return new Ve(ze)}const ue=(ot,...Oe)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[ot](...Oe)},Pe={provide:Ve,useFactory:pe,deps:[ke,w.R0b,[new w.FiY,Ge]]};let Tt=(()=>{class ot{constructor(Lt){m.Z.registerVersion("angularfire",ie.q4.full,"core"),m.Z.registerVersion("angularfire",ie.q4.full,"app-compat"),m.Z.registerVersion("angular",w.q4F.full,Lt.toString())}static initializeApp(Lt,ct){return{ngModule:ot,providers:[{provide:ke,useValue:Lt},{provide:Ge,useValue:ct}]}}}return ot.\u0275fac=function(Lt){return new(Lt||ot)(w.LFG(w.Lbi))},ot.\u0275mod=w.oAB({type:ot}),ot.\u0275inj=w.cJS({providers:[Pe]}),ot})();function Ke(ot,Oe,Lt,ct,it){const[,Qe,ze]=globalThis.\u0275AngularfireInstanceCache.find(It=>It[0]===ot)||[];if(Qe)return function rt(ot,Oe){try{return ot.toString()===Oe.toString()}catch(Lt){return ot===Oe}}(it,ze)||(Xe("error",`${Oe} was already initialized on the ${Lt} Firebase App with different settings.${ht?" You may need to reload as Firebase is not HMR aware.":""}`),Xe("warn",{is:it,was:ze})),Qe;{const It=ct();return globalThis.\u0275AngularfireInstanceCache.push([ot,It,it]),It}}const ht=!!Ut.hot,Xe=(ot,...Oe)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[ot](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ut,We,$)=>{$.d(We,{q4:()=>dl,iC:()=>gf,fc:()=>Sl,HU:()=>eh,vb:()=>Xd,JM:()=>Na});var w=$(5e3),m=$(5867),ie=$(5861),Fe=$(9681),z=$(2090),De=$(4859),Ve=$(1877),ke=$(8766);const Ge="@firebase/installations",Pe="w:0.5.9",Tt="FIS_v2",Oe=new z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Lt(L){return L instanceof z.ZR&&L.code.includes("request-failed")}function ct({projectId:L}){return`https://firebaseinstallations.googleapis.com/v1/projects/${L}/installations`}function it(L){return{token:L.token,requestStatus:2,expiresIn:je(L.expiresIn),creationTime:Date.now()}}function Qe(L,H){return ze.apply(this,arguments)}function ze(){return(ze=(0,ie.Z)(function*(L,H){const _e=(yield H.json()).error;return Oe.create("request-failed",{requestName:L,serverCode:_e.code,serverMessage:_e.message,serverStatus:_e.status})})).apply(this,arguments)}function It({apiKey:L}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L})}function le(L,{refreshToken:H}){const se=It(L);return se.append("Authorization",function He(L){return`${Tt} ${L}`}(H)),se}function ut(L){return me.apply(this,arguments)}function me(){return(me=(0,ie.Z)(function*(L){const H=yield L();return H.status>=500&&H.status<600?L():H})).apply(this,arguments)}function je(L){return Number(L.replace("s","000"))}function tt(L,H){return Me.apply(this,arguments)}function Me(){return(Me=(0,ie.Z)(function*({appConfig:L,heartbeatServiceProvider:H},{fid:se}){const _e=ct(L),qe=It(L),nt=H.getImmediate({optional:!0});if(nt){const En=yield nt.getHeartbeatsHeader();En&&qe.append("x-firebase-client",En)}const fn={method:"POST",headers:qe,body:JSON.stringify({fid:se,authVersion:Tt,appId:L.appId,sdkVersion:Pe})},gn=yield ut(()=>fetch(_e,fn));if(gn.ok){const En=yield gn.json();return{fid:En.fid||se,registrationStatus:2,refreshToken:En.refreshToken,authToken:it(En.authToken)}}throw yield Qe("Create Installation",gn)})).apply(this,arguments)}function mt(L){return new Promise(H=>{setTimeout(H,L)})}const ft=/^[cdef][\w-]{21}$/;function lt(){try{const L=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(L),L[0]=112+L[0]%16;const se=function dn(L){return function Le(L){return btoa(String.fromCharCode(...L)).replace(/\+/g,"-").replace(/\//g,"_")}(L).substr(0,22)}(L);return ft.test(se)?se:""}catch(L){return""}}function Kt(L){return`${L.appName}!${L.appId}`}const qt=new Map;function Ht(L,H){const se=Kt(L);vn(se,H),function Ln(L,H){const se=function kr(){return!pr&&"BroadcastChannel"in self&&(pr=new BroadcastChannel("[Firebase] FID Change"),pr.onmessage=L=>{vn(L.data.key,L.data.fid)}),pr}();se&&se.postMessage({key:L,fid:H}),function wr(){0===qt.size&&pr&&(pr.close(),pr=null)}()}(se,H)}function vn(L,H){const se=qt.get(L);if(se)for(const _e of se)_e(H)}let pr=null;const Mr="firebase-installations-store";let Yn=null;function on(){return Yn||(Yn=(0,ke.X3)("firebase-installations-database",1,{upgrade:(L,H)=>{0===H&&L.createObjectStore(Mr)}})),Yn}function Vn(L,H){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,ie.Z)(function*(L,H){const se=Kt(L),qe=(yield on()).transaction(Mr,"readwrite"),nt=qe.objectStore(Mr),Rt=yield nt.get(se);return yield nt.put(H,se),yield qe.done,(!Rt||Rt.fid!==H.fid)&&Ht(L,H.fid),H})).apply(this,arguments)}function hn(L){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,ie.Z)(function*(L){const H=Kt(L),_e=(yield on()).transaction(Mr,"readwrite");yield _e.objectStore(Mr).delete(H),yield _e.done})).apply(this,arguments)}function Xr(L,H){return fi.apply(this,arguments)}function fi(){return(fi=(0,ie.Z)(function*(L,H){const se=Kt(L),qe=(yield on()).transaction(Mr,"readwrite"),nt=qe.objectStore(Mr),Rt=yield nt.get(se),fn=H(Rt);return void 0===fn?yield nt.delete(se):yield nt.put(fn,se),yield qe.done,fn&&(!Rt||Rt.fid!==fn.fid)&&Ht(L,fn.fid),fn})).apply(this,arguments)}function Fr(L){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,ie.Z)(function*(L){let H;const se=yield Xr(L.appConfig,_e=>{const qe=Lr(_e),nt=Bt(L,qe);return H=nt.registrationPromise,nt.installationEntry});return""===se.fid?{installationEntry:yield H}:{installationEntry:se,registrationPromise:H}})).apply(this,arguments)}function Lr(L){return xs(L||{fid:lt(),registrationStatus:0})}function Bt(L,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(Oe.create("app-offline"))};const se={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},_e=function Xt(L,H){return tn.apply(this,arguments)}(L,se);return{installationEntry:se,registrationPromise:_e}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:li(L)}:{installationEntry:H}}function tn(){return(tn=(0,ie.Z)(function*(L,H){try{const se=yield tt(L,H);return Vn(L.appConfig,se)}catch(se){throw Lt(se)&&409===se.customData.serverCode?yield hn(L.appConfig):yield Vn(L.appConfig,{fid:H.fid,registrationStatus:0}),se}})).apply(this,arguments)}function li(L){return pi.apply(this,arguments)}function pi(){return(pi=(0,ie.Z)(function*(L){let H=yield $n(L.appConfig);for(;1===H.registrationStatus;)yield mt(100),H=yield $n(L.appConfig);if(0===H.registrationStatus){const{installationEntry:se,registrationPromise:_e}=yield Fr(L);return _e||se}return H})).apply(this,arguments)}function $n(L){return Xr(L,H=>{if(!H)throw Oe.create("installation-not-found");return xs(H)})}function xs(L){return function dr(L){return 1===L.registrationStatus&&L.registrationTime+1e4<Date.now()}(L)?{fid:L.fid,registrationStatus:0}:L}function Tr(L,H){return ye.apply(this,arguments)}function ye(){return(ye=(0,ie.Z)(function*({appConfig:L,heartbeatServiceProvider:H},se){const _e=Se(L,se),qe=le(L,se),nt=H.getImmediate({optional:!0});if(nt){const En=yield nt.getHeartbeatsHeader();En&&qe.append("x-firebase-client",En)}const fn={method:"POST",headers:qe,body:JSON.stringify({installation:{sdkVersion:Pe,appId:L.appId}})},gn=yield ut(()=>fetch(_e,fn));if(gn.ok)return it(yield gn.json());throw yield Qe("Generate Auth Token",gn)})).apply(this,arguments)}function Se(L,{fid:H}){return`${ct(L)}/${H}/authTokens:generate`}function xe(L){return Et.apply(this,arguments)}function Et(){return(Et=(0,ie.Z)(function*(L,H=!1){let se;const _e=yield Xr(L.appConfig,nt=>{if(!an(nt))throw Oe.create("not-registered");const Rt=nt.authToken;if(!H&&Dr(Rt))return nt;if(1===Rt.requestStatus)return se=we(L,H),nt;{if(!navigator.onLine)throw Oe.create("app-offline");const fn=xr(nt);return se=Vt(L,fn),fn}});return se?yield se:_e.authToken})).apply(this,arguments)}function we(L,H){return $e.apply(this,arguments)}function $e(){return($e=(0,ie.Z)(function*(L,H){let se=yield wt(L.appConfig);for(;1===se.authToken.requestStatus;)yield mt(100),se=yield wt(L.appConfig);const _e=se.authToken;return 0===_e.requestStatus?xe(L,H):_e})).apply(this,arguments)}function wt(L){return Xr(L,H=>{if(!an(H))throw Oe.create("not-registered");return function ri(L){return 1===L.requestStatus&&L.requestTime+1e4<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function Vt(L,H){return zt.apply(this,arguments)}function zt(){return(zt=(0,ie.Z)(function*(L,H){try{const se=yield Tr(L,H),_e=Object.assign(Object.assign({},H),{authToken:se});return yield Vn(L.appConfig,_e),se}catch(se){if(!Lt(se)||401!==se.customData.serverCode&&404!==se.customData.serverCode){const _e=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield Vn(L.appConfig,_e)}else yield hn(L.appConfig);throw se}})).apply(this,arguments)}function an(L){return void 0!==L&&2===L.registrationStatus}function Dr(L){return 2===L.requestStatus&&!function _n(L){const H=Date.now();return H<L.creationTime||L.creationTime+L.expiresIn<H+36e5}(L)}function xr(L){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},L),{authToken:H})}function ui(){return(ui=(0,ie.Z)(function*(L){const H=L,{installationEntry:se,registrationPromise:_e}=yield Fr(H);return _e?_e.catch(console.error):xe(H).catch(console.error),se.fid})).apply(this,arguments)}function Tn(){return(Tn=(0,ie.Z)(function*(L,H=!1){const se=L;return yield Vr(se),(yield xe(se,H)).token})).apply(this,arguments)}function Vr(L){return hr.apply(this,arguments)}function hr(){return(hr=(0,ie.Z)(function*(L){const{registrationPromise:H}=yield Fr(L);H&&(yield H)})).apply(this,arguments)}function Kr(L){return Oe.create("missing-app-config-values",{valueName:L})}const qn="installations",Yt=L=>{const H=L.getProvider("app").getImmediate(),se=function tr(L){if(!L||!L.options)throw Kr("App Configuration");if(!L.name)throw Kr("App Name");const H=["projectId","apiKey","appId"];for(const se of H)if(!L.options[se])throw Kr(se);return{appName:L.name,projectId:L.options.projectId,apiKey:L.options.apiKey,appId:L.options.appId}}(H);return{app:H,appConfig:se,heartbeatServiceProvider:(0,Fe._getProvider)(H,"heartbeat"),_delete:()=>Promise.resolve()}},On=L=>{const H=L.getProvider("app").getImmediate(),se=(0,Fe._getProvider)(H,qn).getImmediate();return{getId:()=>function Ur(L){return ui.apply(this,arguments)}(se),getToken:qe=>function Ii(L){return Tn.apply(this,arguments)}(se,qe)}};(function Br(){(0,Fe._registerComponent)(new De.wA(qn,Yt,"PUBLIC")),(0,Fe._registerComponent)(new De.wA("installations-internal",On,"PRIVATE"))})(),(0,Fe.registerVersion)(Ge,"0.5.9"),(0,Fe.registerVersion)(Ge,"0.5.9","esm2017");const es="@firebase/remote-config",Rr=new z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gs{constructor(H,se,_e,qe){this.client=H,this.storage=se,this.storageCache=_e,this.logger=qe}isCachedDataFresh(H,se){if(!se)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const _e=Date.now()-se,qe=_e<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${_e}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${qe}.`),qe}fetch(H){var se=this;return(0,ie.Z)(function*(){const[_e,qe]=yield Promise.all([se.storage.getLastSuccessfulFetchTimestampMillis(),se.storage.getLastSuccessfulFetchResponse()]);if(qe&&se.isCachedDataFresh(H.cacheMaxAgeMillis,_e))return qe;H.eTag=qe&&qe.eTag;const nt=yield se.client.fetch(H),Rt=[se.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===nt.status&&Rt.push(se.storage.setLastSuccessfulFetchResponse(nt)),yield Promise.all(Rt),nt})()}}function Qo(L=navigator){return L.languages&&L.languages[0]||L.language}class zr{constructor(H,se,_e,qe,nt,Rt){this.firebaseInstallations=H,this.sdkVersion=se,this.namespace=_e,this.projectId=qe,this.apiKey=nt,this.appId=Rt}fetch(H){var se=this;return(0,ie.Z)(function*(){const[_e,qe]=yield Promise.all([se.firebaseInstallations.getId(),se.firebaseInstallations.getToken()]),Rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${se.projectId}/namespaces/${se.namespace}:fetch?key=${se.apiKey}`,fn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},gn={sdk_version:se.sdkVersion,app_instance_id:_e,app_instance_id_token:qe,app_id:se.appId,language_code:Qo()},En={method:"POST",headers:fn,body:JSON.stringify(gn)},Pr=fetch(Rt,En),cn=new Promise((Us,Ir)=>{H.signal.addEventListener(()=>{const Go=new Error("The operation was aborted.");Go.name="AbortError",Ir(Go)})});let os;try{yield Promise.race([Pr,cn]),os=yield Pr}catch(Us){let Ir="fetch-client-network";throw"AbortError"===Us.name&&(Ir="fetch-timeout"),Rr.create(Ir,{originalErrorMessage:Us.message})}let Or=os.status;const yn=os.headers.get("ETag")||void 0;let vr,xn;if(200===os.status){let Us;try{Us=yield os.json()}catch(Ir){throw Rr.create("fetch-client-parse",{originalErrorMessage:Ir.message})}vr=Us.entries,xn=Us.state}if("INSTANCE_STATE_UNSPECIFIED"===xn?Or=500:"NO_CHANGE"===xn?Or=304:("NO_TEMPLATE"===xn||"EMPTY_CONFIG"===xn)&&(vr={}),304!==Or&&200!==Or)throw Rr.create("fetch-status",{httpStatus:Or});return{status:Or,eTag:yn,config:vr}})()}}class Be{constructor(H,se){this.client=H,this.storage=se}fetch(H){var se=this;return(0,ie.Z)(function*(){const _e=(yield se.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return se.attemptFetch(H,_e)})()}attemptFetch(H,{throttleEndTimeMillis:se,backoffCount:_e}){var qe=this;return(0,ie.Z)(function*(){yield function cs(L,H){return new Promise((se,_e)=>{const qe=Math.max(H-Date.now(),0),nt=setTimeout(se,qe);L.addEventListener(()=>{clearTimeout(nt),_e(Rr.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,se);try{const nt=yield qe.client.fetch(H);return yield qe.storage.deleteThrottleMetadata(),nt}catch(nt){if(!function ts(L){if(!(L instanceof z.ZR&&L.customData))return!1;const H=Number(L.customData.httpStatus);return 429===H||500===H||503===H||504===H}(nt))throw nt;const Rt={throttleEndTimeMillis:Date.now()+(0,z.$s)(_e),backoffCount:_e+1};return yield qe.storage.setThrottleMetadata(Rt),qe.attemptFetch(H,Rt)}})()}}class bt{constructor(H,se,_e,qe,nt){this.app=H,this._client=se,this._storageCache=_e,this._storage=qe,this._logger=nt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Pt(L,H){const se=L.target.error||void 0;return Rr.create(H,{originalErrorMessage:se&&se.message})}const Zt="app_namespace_store";class ns{constructor(H,se,_e,qe=function rr(){return new Promise((L,H)=>{try{const se=indexedDB.open("firebase_remote_config",1);se.onerror=_e=>{H(Pt(_e,"storage-open"))},se.onsuccess=_e=>{L(_e.target.result)},se.onupgradeneeded=_e=>{0===_e.oldVersion&&_e.target.result.createObjectStore(Zt,{keyPath:"compositeKey"})}}catch(se){H(Rr.create("storage-open",{originalErrorMessage:se}))}})}()){this.appId=H,this.appName=se,this.namespace=_e,this.openDbPromise=qe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var se=this;return(0,ie.Z)(function*(){const _e=yield se.openDbPromise;return new Promise((qe,nt)=>{const fn=_e.transaction([Zt],"readonly").objectStore(Zt),gn=se.createCompositeKey(H);try{const En=fn.get(gn);En.onerror=Pr=>{nt(Pt(Pr,"storage-get"))},En.onsuccess=Pr=>{const cn=Pr.target.result;qe(cn?cn.value:void 0)}}catch(En){nt(Rr.create("storage-get",{originalErrorMessage:En&&En.message}))}})})()}set(H,se){var _e=this;return(0,ie.Z)(function*(){const qe=yield _e.openDbPromise;return new Promise((nt,Rt)=>{const gn=qe.transaction([Zt],"readwrite").objectStore(Zt),En=_e.createCompositeKey(H);try{const Pr=gn.put({compositeKey:En,value:se});Pr.onerror=cn=>{Rt(Pt(cn,"storage-set"))},Pr.onsuccess=()=>{nt()}}catch(Pr){Rt(Rr.create("storage-set",{originalErrorMessage:Pr&&Pr.message}))}})})()}delete(H){var se=this;return(0,ie.Z)(function*(){const _e=yield se.openDbPromise;return new Promise((qe,nt)=>{const fn=_e.transaction([Zt],"readwrite").objectStore(Zt),gn=se.createCompositeKey(H);try{const En=fn.delete(gn);En.onerror=Pr=>{nt(Pt(Pr,"storage-delete"))},En.onsuccess=()=>{qe()}}catch(En){nt(Rr.create("storage-delete",{originalErrorMessage:En&&En.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class wo{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,ie.Z)(function*(){const se=H.storage.getLastFetchStatus(),_e=H.storage.getLastSuccessfulFetchTimestampMillis(),qe=H.storage.getActiveConfig(),nt=yield se;nt&&(H.lastFetchStatus=nt);const Rt=yield _e;Rt&&(H.lastSuccessfulFetchTimestampMillis=Rt);const fn=yield qe;fn&&(H.activeConfig=fn)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function qs(){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,ie.Z)(function*(){if(!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch(L){return!1}})).apply(this,arguments)}!function Oi(){(0,Fe._registerComponent)(new De.wA("remote-config",function L(H,{instanceIdentifier:se}){const _e=H.getProvider("app").getImmediate(),qe=H.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rr.create("registration-window");if(!(0,z.hl)())throw Rr.create("indexed-db-unavailable");const{projectId:nt,apiKey:Rt,appId:fn}=_e.options;if(!nt)throw Rr.create("registration-project-id");if(!Rt)throw Rr.create("registration-api-key");if(!fn)throw Rr.create("registration-app-id");const gn=new ns(fn,_e.name,se=se||"firebase"),En=new wo(gn),Pr=new Ve.Yd(es);Pr.logLevel=Ve.in.ERROR;const cn=new zr(qe,Fe.SDK_VERSION,se,nt,Rt,fn),os=new Be(cn,gn),Or=new Gs(os,gn,En,Pr),yn=new bt(_e,Or,En,gn,Pr);return function nr(L){const H=(0,z.m9)(L);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(yn),yn},"PUBLIC").setMultipleInstances(!0)),(0,Fe.registerVersion)(es,"0.3.8"),(0,Fe.registerVersion)(es,"0.3.8","esm2017")}();const fa="/firebase-messaging-sw.js",si="/firebase-cloud-messaging-push-scope",bs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ps="google.c.a.c_id",Fo="google.c.a.c_l",Os="google.c.a.ts",ba="google.c.a.e";var bo=(()=>{return(L=bo||(bo={})).PUSH_RECEIVED="push-received",L.NOTIFICATION_CLICKED="notification-clicked",bo;var L})();function Gi(L){const H=new Uint8Array(L);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Co(L){const se=(L+"=".repeat((4-L.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),_e=atob(se),qe=new Uint8Array(_e.length);for(let nt=0;nt<_e.length;++nt)qe[nt]=_e.charCodeAt(nt);return qe}const vi="fcm_token_details_db",Ai="fcm_token_object_Store";function Lo(L){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,ie.Z)(function*(L){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(nt=>nt.name).includes(vi))return null;let H=null;return(yield(0,ke.X3)(vi,5,{upgrade:(_e=(0,ie.Z)(function*(qe,nt,Rt,fn){var gn;if(nt<2||!qe.objectStoreNames.contains(Ai))return;const En=fn.objectStore(Ai),Pr=yield En.index("fcmSenderId").get(L);if(yield En.clear(),Pr)if(2===nt){const cn=Pr;if(!cn.auth||!cn.p256dh||!cn.endpoint)return;H={token:cn.fcmToken,createTime:null!==(gn=cn.createTime)&&void 0!==gn?gn:Date.now(),subscriptionOptions:{auth:cn.auth,p256dh:cn.p256dh,endpoint:cn.endpoint,swScope:cn.swScope,vapidKey:"string"==typeof cn.vapidKey?cn.vapidKey:Gi(cn.vapidKey)}}}else if(3===nt){const cn=Pr;H={token:cn.fcmToken,createTime:cn.createTime,subscriptionOptions:{auth:Gi(cn.auth),p256dh:Gi(cn.p256dh),endpoint:cn.endpoint,swScope:cn.swScope,vapidKey:Gi(cn.vapidKey)}}}else if(4===nt){const cn=Pr;H={token:cn.fcmToken,createTime:cn.createTime,subscriptionOptions:{auth:Gi(cn.auth),p256dh:Gi(cn.p256dh),endpoint:cn.endpoint,swScope:cn.swScope,vapidKey:Gi(cn.vapidKey)}}}}),function(nt,Rt,fn,gn){return _e.apply(this,arguments)})})).close(),yield(0,ke.Lj)(vi),yield(0,ke.Lj)("fcm_vapid_details_db"),yield(0,ke.Lj)("undefined"),To(H)?H:null;var _e}),Ts.apply(this,arguments)}function To(L){if(!L||!L.subscriptionOptions)return!1;const{subscriptionOptions:H}=L;return"number"==typeof L.createTime&&L.createTime>0&&"string"==typeof L.token&&L.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}const zs="firebase-messaging-store";let fo=null;function ir(){return fo||(fo=(0,ke.X3)("firebase-messaging-database",1,{upgrade:(L,H)=>{0===H&&L.createObjectStore(zs)}})),fo}function B(L){return X.apply(this,arguments)}function X(){return(X=(0,ie.Z)(function*(L){const H=vt(L),_e=yield(yield ir()).transaction(zs).objectStore(zs).get(H);if(_e)return _e;{const qe=yield Lo(L.appConfig.senderId);if(qe)return yield V(L,qe),qe}})).apply(this,arguments)}function V(L,H){return ae.apply(this,arguments)}function ae(){return(ae=(0,ie.Z)(function*(L,H){const se=vt(L),qe=(yield ir()).transaction(zs,"readwrite");return yield qe.objectStore(zs).put(H,se),yield qe.done,H})).apply(this,arguments)}function ve(L){return st.apply(this,arguments)}function st(){return(st=(0,ie.Z)(function*(L){const H=vt(L),_e=(yield ir()).transaction(zs,"readwrite");yield _e.objectStore(zs).delete(H),yield _e.done})).apply(this,arguments)}function vt({appConfig:L}){return L.appId}const ln=new z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Kn(L,H){return kn.apply(this,arguments)}function kn(){return(kn=(0,ie.Z)(function*(L,H){const se=yield qi(L),_e=Wi(H),qe={method:"POST",headers:se,body:JSON.stringify(_e)};let nt;try{nt=yield(yield fetch(Ei(L.appConfig),qe)).json()}catch(Rt){throw ln.create("token-subscribe-failed",{errorInfo:Rt})}if(nt.error)throw ln.create("token-subscribe-failed",{errorInfo:nt.error.message});if(!nt.token)throw ln.create("token-subscribe-no-token");return nt.token})).apply(this,arguments)}function Wn(L,H){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,ie.Z)(function*(L,H){const se=yield qi(L),_e=Wi(H.subscriptionOptions),qe={method:"PATCH",headers:se,body:JSON.stringify(_e)};let nt;try{nt=yield(yield fetch(`${Ei(L.appConfig)}/${H.token}`,qe)).json()}catch(Rt){throw ln.create("token-update-failed",{errorInfo:Rt})}if(nt.error)throw ln.create("token-update-failed",{errorInfo:nt.error.message});if(!nt.token)throw ln.create("token-update-no-token");return nt.token})).apply(this,arguments)}function br(L,H){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,ie.Z)(function*(L,H){const _e={method:"DELETE",headers:yield qi(L)};try{const nt=yield(yield fetch(`${Ei(L.appConfig)}/${H}`,_e)).json();if(nt.error)throw ln.create("token-unsubscribe-failed",{errorInfo:nt.error.message})}catch(qe){throw ln.create("token-unsubscribe-failed",{errorInfo:qe})}})).apply(this,arguments)}function Ei({projectId:L}){return`https://fcmregistrations.googleapis.com/v1/projects/${L}/registrations`}function qi(L){return un.apply(this,arguments)}function un(){return(un=(0,ie.Z)(function*({appConfig:L,installations:H}){const se=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L.apiKey,"x-goog-firebase-installations-auth":`FIS ${se}`})})).apply(this,arguments)}function Wi({p256dh:L,auth:H,endpoint:se,vapidKey:_e}){const qe={web:{endpoint:se,auth:H,p256dh:L}};return _e!==bs&&(qe.web.applicationPubKey=_e),qe}const Xo=6048e5;function po(L){return ro.apply(this,arguments)}function ro(){return(ro=(0,ie.Z)(function*(L){const H=yield W(L.swRegistration,L.vapidKey),se={vapidKey:L.vapidKey,swScope:L.swRegistration.scope,endpoint:H.endpoint,auth:Gi(H.getKey("auth")),p256dh:Gi(H.getKey("p256dh"))},_e=yield B(L.firebaseDependencies);if(_e){if(ne(_e.subscriptionOptions,se))return Date.now()>=_e.createTime+Xo?k(L,{token:_e.token,createTime:Date.now(),subscriptionOptions:se}):_e.token;try{yield br(L.firebaseDependencies,_e.token)}catch(qe){console.warn(qe)}return Ee(L.firebaseDependencies,se)}return Ee(L.firebaseDependencies,se)})).apply(this,arguments)}function G(L){return U.apply(this,arguments)}function U(){return(U=(0,ie.Z)(function*(L){const H=yield B(L.firebaseDependencies);H&&(yield br(L.firebaseDependencies,H.token),yield ve(L.firebaseDependencies));const se=yield L.swRegistration.pushManager.getSubscription();return!se||se.unsubscribe()})).apply(this,arguments)}function k(L,H){return re.apply(this,arguments)}function re(){return(re=(0,ie.Z)(function*(L,H){try{const se=yield Wn(L.firebaseDependencies,H),_e=Object.assign(Object.assign({},H),{token:se,createTime:Date.now()});return yield V(L.firebaseDependencies,_e),se}catch(se){throw yield G(L),se}})).apply(this,arguments)}function Ee(L,H){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,ie.Z)(function*(L,H){const _e={token:yield Kn(L,H),createTime:Date.now(),subscriptionOptions:H};return yield V(L,_e),_e.token})).apply(this,arguments)}function W(L,H){return j.apply(this,arguments)}function j(){return(j=(0,ie.Z)(function*(L,H){return(yield L.pushManager.getSubscription())||L.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Co(H)})})).apply(this,arguments)}function ne(L,H){return H.vapidKey===L.vapidKey&&H.endpoint===L.endpoint&&H.auth===L.auth&&H.p256dh===L.p256dh}function de(L){const H={from:L.from,collapseKey:L.collapse_key,messageId:L.fcmMessageId};return function Ce(L,H){if(!H.notification)return;L.notification={};const se=H.notification.title;se&&(L.notification.title=se);const _e=H.notification.body;_e&&(L.notification.body=_e);const qe=H.notification.image;qe&&(L.notification.image=qe)}(H,L),function et(L,H){!H.data||(L.data=H.data)}(H,L),function St(L,H){if(!H.fcmOptions)return;L.fcmOptions={};const se=H.fcmOptions.link;se&&(L.fcmOptions.link=se);const _e=H.fcmOptions.analytics_label;_e&&(L.fcmOptions.analyticsLabel=_e)}(H,L),H}function nn(L){return"object"==typeof L&&!!L&&Ps in L}function Wt(L,H){const se=[];for(let _e=0;_e<L.length;_e++)se.push(L.charAt(_e)),_e<H.length&&se.push(H.charAt(_e));return se.join("")}function Un(L){return ln.create("missing-app-config-values",{valueName:L})}Wt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class lr{constructor(H,se,_e){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const qe=function Fn(L){if(!L||!L.options)throw Un("App Configuration Object");if(!L.name)throw Un("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:se}=L;for(const _e of H)if(!se[_e])throw Un(_e);return{appName:L.name,projectId:se.projectId,apiKey:se.apiKey,appId:se.appId,senderId:se.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:qe,installations:se,analyticsProvider:_e}}_delete(){return Promise.resolve()}}function _r(L){return oi.apply(this,arguments)}function oi(){return(oi=(0,ie.Z)(function*(L){try{L.swRegistration=yield navigator.serviceWorker.register(fa,{scope:si}),L.swRegistration.update().catch(()=>{})}catch(H){throw ln.create("failed-service-worker-registration",{browserErrorMessage:H.message})}})).apply(this,arguments)}function Nr(L,H){return wi.apply(this,arguments)}function wi(){return(wi=(0,ie.Z)(function*(L,H){if(!H&&!L.swRegistration&&(yield _r(L)),H||!L.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");L.swRegistration=H}})).apply(this,arguments)}function Gn(L,H){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,ie.Z)(function*(L,H){H?L.vapidKey=H:L.vapidKey||(L.vapidKey=bs)})).apply(this,arguments)}function Qi(){return(Qi=(0,ie.Z)(function*(L,H){if(!navigator)throw ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ln.create("permission-blocked");return yield Gn(L,null==H?void 0:H.vapidKey),yield Nr(L,null==H?void 0:H.serviceWorkerRegistration),po(L)})).apply(this,arguments)}function ki(L,H,se){return io.apply(this,arguments)}function io(){return(io=(0,ie.Z)(function*(L,H,se){const _e=ea(H);(yield L.firebaseDependencies.analyticsProvider.get()).logEvent(_e,{message_id:se[Ps],message_name:se[Fo],message_time:se[Os],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ea(L){switch(L){case bo.NOTIFICATION_CLICKED:return"notification_open";case bo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function pa(){return(pa=(0,ie.Z)(function*(L,H){const se=H.data;if(!se.isFirebaseMessaging)return;L.onMessageHandler&&se.messageType===bo.PUSH_RECEIVED&&("function"==typeof L.onMessageHandler?L.onMessageHandler(de(se)):L.onMessageHandler.next(de(se)));const _e=se.data;nn(_e)&&"1"===_e[ba]&&(yield ki(L,se.messageType,_e))})).apply(this,arguments)}const Uo="@firebase/messaging",Ta=L=>{const H=new lr(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),L.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",se=>function $a(L,H){return pa.apply(this,arguments)}(H,se)),H},al=L=>{const H=L.getProvider("messaging").getImmediate();return{getToken:_e=>function Zs(L,H){return Qi.apply(this,arguments)}(H,_e)}};function El(){return ta.apply(this,arguments)}function ta(){return(ta=(0,ie.Z)(function*(){try{yield(0,z.eu)()}catch(L){return!1}return"undefined"!=typeof window&&(0,z.hl)()&&(0,z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Zu(){(0,Fe._registerComponent)(new De.wA("messaging",Ta,"PUBLIC")),(0,Fe._registerComponent)(new De.wA("messaging-internal",al,"PRIVATE")),(0,Fe.registerVersion)(Uo,"0.9.13"),(0,Fe.registerVersion)(Uo,"0.9.13","esm2017")}();const ul="analytics",dd="firebase_id",na="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wa="https://www.googletagmanager.com/gtag/js",sr=new Ve.Yd("@firebase/analytics");function hu(L){return Promise.all(L.map(H=>H.catch(se=>se)))}function wl(L,H){const se=document.createElement("script");se.src=`${Wa}?l=${L}&id=${H}`,se.async=!0,document.head.appendChild(se)}function Vo(L,H,se,_e,qe,nt){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,ie.Z)(function*(L,H,se,_e,qe,nt){const Rt=_e[qe];try{if(Rt)yield H[Rt];else{const gn=(yield hu(se)).find(En=>En.measurementId===qe);gn&&(yield H[gn.appId])}}catch(fn){sr.error(fn)}L("config",qe,nt)})).apply(this,arguments)}function Ku(L,H,se,_e,qe){return Io.apply(this,arguments)}function Io(){return(Io=(0,ie.Z)(function*(L,H,se,_e,qe){try{let nt=[];if(qe&&qe.send_to){let Rt=qe.send_to;Array.isArray(Rt)||(Rt=[Rt]);const fn=yield hu(se);for(const gn of Rt){const En=fn.find(cn=>cn.measurementId===gn),Pr=En&&H[En.appId];if(!Pr){nt=[];break}nt.push(Pr)}}0===nt.length&&(nt=Object.values(H)),yield Promise.all(nt),L("event",_e,qe||{})}catch(nt){sr.error(nt)}})).apply(this,arguments)}function Yu(){const L=window.document.getElementsByTagName("script");for(const H of Object.values(L))if(H.src&&H.src.includes(Wa))return H;return null}const xi=new z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),bl=new class go{constructor(H={},se=1e3){this.throttleMetadata=H,this.intervalMillis=se}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,se){this.throttleMetadata[H]=se}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function Cl(L){return new Headers({Accept:"application/json","x-goog-api-key":L})}function So(L){return Da.apply(this,arguments)}function Da(){return(Da=(0,ie.Z)(function*(L){var H;const{appId:se,apiKey:_e}=L,qe={method:"GET",headers:Cl(_e)},nt=na.replace("{app-id}",se),Rt=yield fetch(nt,qe);if(200!==Rt.status&&304!==Rt.status){let fn="";try{const gn=yield Rt.json();(null===(H=gn.error)||void 0===H?void 0:H.message)&&(fn=gn.error.message)}catch(gn){}throw xi.create("config-fetch-failed",{httpStatus:Rt.status,responseMessage:fn})}return Rt.json()})).apply(this,arguments)}function Fi(L){return bi.apply(this,arguments)}function bi(){return(bi=(0,ie.Z)(function*(L,H=bl,se){const{appId:_e,apiKey:qe,measurementId:nt}=L.options;if(!_e)throw xi.create("no-app-id");if(!qe){if(nt)return{measurementId:nt,appId:_e};throw xi.create("no-api-key")}const Rt=H.getThrottleMetadata(_e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},fn=new Tl;return setTimeout((0,ie.Z)(function*(){fn.abort()}),void 0!==se?se:6e4),Ho({appId:_e,apiKey:qe,measurementId:nt},Rt,fn,H)})).apply(this,arguments)}function Ho(L,H,se){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,ie.Z)(function*(L,{throttleEndTimeMillis:H,backoffCount:se},_e,qe=bl){const{appId:nt,measurementId:Rt}=L;try{yield Ys(_e,H)}catch(fn){if(Rt)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${fn.message}]`),{appId:nt,measurementId:Rt};throw fn}try{const fn=yield So(L);return qe.deleteThrottleMetadata(nt),fn}catch(fn){if(!Ni(fn)){if(qe.deleteThrottleMetadata(nt),Rt)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${fn.message}]`),{appId:nt,measurementId:Rt};throw fn}const gn=503===Number(fn.customData.httpStatus)?(0,z.$s)(se,qe.intervalMillis,30):(0,z.$s)(se,qe.intervalMillis),En={throttleEndTimeMillis:Date.now()+gn,backoffCount:se+1};return qe.setThrottleMetadata(nt,En),sr.debug(`Calling attemptFetch again in ${gn} millis`),Ho(L,En,_e,qe)}})).apply(this,arguments)}function Ys(L,H){return new Promise((se,_e)=>{const qe=Math.max(H-Date.now(),0),nt=setTimeout(se,qe);L.addEventListener(()=>{clearTimeout(nt),_e(xi.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}function Ni(L){if(!(L instanceof z.ZR&&L.customData))return!1;const H=Number(L.customData.httpStatus);return 429===H||500===H||503===H||504===H}class Tl{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}function kl(){return kt.apply(this,arguments)}function kt(){return(kt=(0,ie.Z)(function*(){if(!(0,z.hl)())return sr.warn(xi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,z.eu)()}catch(L){return sr.warn(xi.create("indexeddb-unavailable",{errorInfo:L}).message),!1}return!0})).apply(this,arguments)}function ds(){return(ds=(0,ie.Z)(function*(L,H,se,_e,qe,nt,Rt){var fn;const gn=Fi(L);gn.then(Or=>{se[Or.measurementId]=Or.appId,L.options.measurementId&&Or.measurementId!==L.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${L.options.measurementId}) does not match the measurement ID fetched from the server (${Or.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Or=>sr.error(Or)),H.push(gn);const En=kl().then(Or=>{if(Or)return _e.getId()}),[Pr,cn]=yield Promise.all([gn,En]);Yu()||wl(nt,Pr.measurementId),qe("js",new Date);const os=null!==(fn=null==Rt?void 0:Rt.config)&&void 0!==fn?fn:{};return os.origin="firebase",os.update=!0,null!=cn&&(os[dd]=cn),qe("config",Pr.measurementId,os),Pr.measurementId})).apply(this,arguments)}class mo{constructor(H){this.app=H}_delete(){return delete M[this.app.options.appId],Promise.resolve()}}let M={},S=[];const D={};let Z,he,N="dataLayer",Ie=!1;function zn(L,H,se){!function Qt(){const L=[];if((0,z.ru)()&&L.push("This is a browser extension environment."),(0,z.zI)()||L.push("Cookies are not available."),L.length>0){const H=L.map((_e,qe)=>`(${qe+1}) ${_e}`).join(" "),se=xi.create("invalid-analytics-context",{errorInfo:H});sr.warn(se.message)}}();const _e=L.options.appId;if(!_e)throw xi.create("no-app-id");if(!L.options.apiKey){if(!L.options.measurementId)throw xi.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${L.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=M[_e])throw xi.create("already-exists",{id:_e});if(!Ie){!function ce(L){let H=[];Array.isArray(window[L])?H=window[L]:window[L]=H}(N);const{wrappedGtag:nt,gtagCore:Rt}=function Do(L,H,se,_e,qe){let nt=function(...Rt){window[_e].push(arguments)};return window[qe]&&"function"==typeof window[qe]&&(nt=window[qe]),window[qe]=function Ia(L,H,se,_e){function nt(){return(nt=(0,ie.Z)(function*(Rt,fn,gn){try{"event"===Rt?yield Ku(L,H,se,fn,gn):"config"===Rt?yield Vo(L,H,se,_e,fn,gn):L("set",fn)}catch(En){sr.error(En)}})).apply(this,arguments)}return function qe(Rt,fn,gn){return nt.apply(this,arguments)}}(nt,L,H,se),{gtagCore:nt,wrappedGtag:window[qe]}}(M,S,D,N,"gtag");he=nt,Z=Rt,Ie=!0}return M[_e]=function yr(L,H,se,_e,qe,nt,Rt){return ds.apply(this,arguments)}(L,S,D,H,Z,N,se),new mo(L)}function Cr(){return(Cr=(0,ie.Z)(function*(L,H,se,_e,qe){if(qe&&qe.global)L("event",se,_e);else{const nt=yield H;L("event",se,Object.assign(Object.assign({},_e),{send_to:nt}))}})).apply(this,arguments)}function In(){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,ie.Z)(function*(){if((0,z.ru)()||!(0,z.zI)()||!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch(L){return!1}})).apply(this,arguments)}const fs="@firebase/analytics";!function pf(){(0,Fe._registerComponent)(new De.wA(ul,(H,{options:se})=>zn(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),se),"PUBLIC")),(0,Fe._registerComponent)(new De.wA("analytics-internal",function L(H){try{const se=H.getProvider(ul).getImmediate();return{logEvent:(_e,qe,nt)=>function ff(L,H,se,_e){L=(0,z.m9)(L),function rn(L,H,se,_e,qe){return Cr.apply(this,arguments)}(he,M[L.app.options.appId],H,se,_e).catch(qe=>sr.error(qe))}(se,_e,qe,nt)}}catch(se){throw xi.create("interop-component-reg-failed",{reason:se})}},"PRIVATE")),(0,Fe.registerVersion)(fs,"0.7.9"),(0,Fe.registerVersion)(fs,"0.7.9","esm2017")}();var Qs=$(4408),Sa=$(7565);const Aa=new class Qn extends Sa.v{}(class Ul extends Qs.o{constructor(H,se){super(H,se),this.scheduler=H,this.work=se}schedule(H,se=0){return se>0?super.schedule(H,se):(this.delay=se,this.state=H,this.scheduler.flush(this),this)}execute(H,se){return se>0||this.closed?super.execute(H,se):this._execute(H,se)}requestAsyncId(H,se,_e=0){return null!=_e&&_e>0||null==_e&&this.delay>0?super.requestAsyncId(H,se,_e):H.flush(this)}});var wc=$(4986),Ju=$(8505),Mo=$(5363),ps=$(9468);const dl=new w.GfV("7.3.0"),Ma="__angularfire_symbol__analyticsIsSupportedValue",xa="__angularfire_symbol__analyticsIsSupported",jt="__angularfire_symbol__remoteConfigIsSupportedValue",_o="__angularfire_symbol__remoteConfigIsSupported",Il="__angularfire_symbol__messagingIsSupportedValue",Dl="__angularfire_symbol__messagingIsSupported";function Na(L,H,se){if(H){if(1===H.length)return H[0];const nt=H.filter(Rt=>Rt.app===se);if(1===nt.length)return nt[0]}return se.container.getProvider(L).getImmediate({optional:!0})}globalThis[xa]||(globalThis[xa]=In().then(L=>globalThis[Ma]=L).catch(()=>globalThis[Ma]=!1)),globalThis[Dl]||(globalThis[Dl]=El().then(L=>globalThis[Il]=L).catch(()=>globalThis[Il]=!1)),globalThis[_o]||(globalThis[_o]=qs().then(L=>globalThis[jt]=L).catch(()=>globalThis[jt]=!1));const Xd=(L,H)=>{const se=H?[H]:(0,m.C6)(),_e=[];return se.forEach(qe=>{qe.container.getProvider(L).instances.forEach(Rt=>{_e.includes(Rt)||_e.push(Rt)})}),_e};function ss(){}class _u{constructor(H,se=Aa){this.zone=H,this.delegate=se}now(){return this.delegate.now()}schedule(H,se,_e){const qe=this.zone;return this.delegate.schedule(function(Rt){qe.runGuarded(()=>{H.apply(this,[Rt])})},se,_e)}}class Vl{constructor(H){this.zone=H,this.task=null}call(H,se){const _e=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ss,{},ss,ss)),se.pipe((0,Ju.b)({next:_e,complete:_e,error:_e})).subscribe(H).add(_e)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let eh=(()=>{class L{constructor(se){this.ngZone=se,this.outsideAngular=se.runOutsideAngular(()=>new _u(Zone.current)),this.insideAngular=se.run(()=>new _u(Zone.current,wc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return L.\u0275fac=function(se){return new(se||L)(w.LFG(w.R0b))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();function ra(){const L=globalThis.\u0275AngularFireScheduler;if(!L)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return L}function Sl(L){return L.pipe((0,Mo.Q)(ra().outsideAngular))}function gf(L){return ra(),function Al(L){return function(se){return(se=se.lift(new Vl(L.ngZone))).pipe((0,ps.R)(L.outsideAngular),(0,Mo.Q)(L.insideAngular))}}(ra())(L)}},2090:(Ut,We,$)=>{$.d(We,{$s:()=>$n,BH:()=>Tt,DV:()=>wn,Dv:()=>Zi,G6:()=>It,GJ:()=>Ht,L:()=>ke,LL:()=>Me,Mn:()=>Qe,Pz:()=>Ot,Sg:()=>Ke,UG:()=>Xe,UI:()=>Ln,US:()=>De,Wj:()=>Fr,Yr:()=>ze,ZB:()=>ue,ZR:()=>tt,b$:()=>Lt,cI:()=>ft,d:()=>ct,dS:()=>Lr,eu:()=>ut,g5:()=>ie,gK:()=>Xr,gQ:()=>Mr,h$:()=>Ve,hl:()=>le,hu:()=>m,jU:()=>ot,lb:()=>Hi,m9:()=>Tr,ne:()=>Yn,p$:()=>pe,pd:()=>ar,r3:()=>mn,ru:()=>Oe,tV:()=>Ge,uI:()=>ht,ug:()=>Bt,vZ:()=>pr,w1:()=>it,w9:()=>qt,xO:()=>wr,xb:()=>vn,z$:()=>rt,zI:()=>me,zd:()=>ni});const m=function(ye,Se){if(!ye)throw ie(Se)},ie=function(ye){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ye)},Fe=function(ye){const Se=[];let xe=0;for(let Et=0;Et<ye.length;Et++){let we=ye.charCodeAt(Et);we<128?Se[xe++]=we:we<2048?(Se[xe++]=we>>6|192,Se[xe++]=63&we|128):55296==(64512&we)&&Et+1<ye.length&&56320==(64512&ye.charCodeAt(Et+1))?(we=65536+((1023&we)<<10)+(1023&ye.charCodeAt(++Et)),Se[xe++]=we>>18|240,Se[xe++]=we>>12&63|128,Se[xe++]=we>>6&63|128,Se[xe++]=63&we|128):(Se[xe++]=we>>12|224,Se[xe++]=we>>6&63|128,Se[xe++]=63&we|128)}return Se},De={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ye,Se){if(!Array.isArray(ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const xe=Se?this.byteToCharMapWebSafe_:this.byteToCharMap_,Et=[];for(let we=0;we<ye.length;we+=3){const $e=ye[we],wt=we+1<ye.length,Vt=wt?ye[we+1]:0,zt=we+2<ye.length,an=zt?ye[we+2]:0;let xr=(15&Vt)<<2|an>>6,ri=63&an;zt||(ri=64,wt||(xr=64)),Et.push(xe[$e>>2],xe[(3&$e)<<4|Vt>>4],xe[xr],xe[ri])}return Et.join("")},encodeString(ye,Se){return this.HAS_NATIVE_SUPPORT&&!Se?btoa(ye):this.encodeByteArray(Fe(ye),Se)},decodeString(ye,Se){return this.HAS_NATIVE_SUPPORT&&!Se?atob(ye):function(ye){const Se=[];let xe=0,Et=0;for(;xe<ye.length;){const we=ye[xe++];if(we<128)Se[Et++]=String.fromCharCode(we);else if(we>191&&we<224){const $e=ye[xe++];Se[Et++]=String.fromCharCode((31&we)<<6|63&$e)}else if(we>239&&we<365){const zt=((7&we)<<18|(63&ye[xe++])<<12|(63&ye[xe++])<<6|63&ye[xe++])-65536;Se[Et++]=String.fromCharCode(55296+(zt>>10)),Se[Et++]=String.fromCharCode(56320+(1023&zt))}else{const $e=ye[xe++],wt=ye[xe++];Se[Et++]=String.fromCharCode((15&we)<<12|(63&$e)<<6|63&wt)}}return Se.join("")}(this.decodeStringToByteArray(ye,Se))},decodeStringToByteArray(ye,Se){this.init_();const xe=Se?this.charToByteMapWebSafe_:this.charToByteMap_,Et=[];for(let we=0;we<ye.length;){const $e=xe[ye.charAt(we++)],Vt=we<ye.length?xe[ye.charAt(we)]:0;++we;const an=we<ye.length?xe[ye.charAt(we)]:64;++we;const _n=we<ye.length?xe[ye.charAt(we)]:64;if(++we,null==$e||null==Vt||null==an||null==_n)throw Error();Et.push($e<<2|Vt>>4),64!==an&&(Et.push(Vt<<4&240|an>>2),64!==_n&&Et.push(an<<6&192|_n))}return Et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ye=0;ye<this.ENCODED_VALS.length;ye++)this.byteToCharMap_[ye]=this.ENCODED_VALS.charAt(ye),this.charToByteMap_[this.byteToCharMap_[ye]]=ye,this.byteToCharMapWebSafe_[ye]=this.ENCODED_VALS_WEBSAFE.charAt(ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ye]]=ye,ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ye)]=ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ye)]=ye)}}},Ve=function(ye){const Se=Fe(ye);return De.encodeByteArray(Se,!0)},ke=function(ye){return Ve(ye).replace(/\./g,"")},Ge=function(ye){try{return De.decodeString(ye,!0)}catch(Se){console.error("base64Decode failed: ",Se)}return null};function pe(ye){return ue(void 0,ye)}function ue(ye,Se){if(!(Se instanceof Object))return Se;switch(Se.constructor){case Date:return new Date(Se.getTime());case Object:void 0===ye&&(ye={});break;case Array:ye=[];break;default:return Se}for(const xe in Se)!Se.hasOwnProperty(xe)||!Pe(xe)||(ye[xe]=ue(ye[xe],Se[xe]));return ye}function Pe(ye){return"__proto__"!==ye}class Tt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Se,xe)=>{this.resolve=Se,this.reject=xe})}wrapCallback(Se){return(xe,Et)=>{xe?this.reject(xe):this.resolve(Et),"function"==typeof Se&&(this.promise.catch(()=>{}),1===Se.length?Se(xe):Se(xe,Et))}}}function Ke(ye,Se){if(ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Et=Se||"demo-project",we=ye.iat||0,$e=ye.sub||ye.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${Et}`,aud:Et,iat:we,exp:we+3600,auth_time:we,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},ye);return[ke(JSON.stringify({alg:"none",type:"JWT"})),ke(JSON.stringify(wt)),""].join(".")}function rt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ht(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function Xe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ye){return!1}}function ot(){return"object"==typeof self&&self.self===self}function Oe(){const ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ye&&void 0!==ye.id}function Lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ct(){return rt().indexOf("Electron/")>=0}function it(){const ye=rt();return ye.indexOf("MSIE ")>=0||ye.indexOf("Trident/")>=0}function Qe(){return rt().indexOf("MSAppHost/")>=0}function ze(){return!1}function It(){return!Xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){return"object"==typeof indexedDB}function ut(){return new Promise((ye,Se)=>{try{let xe=!0;const Et="validate-browser-context-for-indexeddb-analytics-module",we=self.indexedDB.open(Et);we.onsuccess=()=>{we.result.close(),xe||self.indexedDB.deleteDatabase(Et),ye(!0)},we.onupgradeneeded=()=>{xe=!1},we.onerror=()=>{var $e;Se((null===($e=we.error)||void 0===$e?void 0:$e.message)||"")}}catch(xe){Se(xe)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class tt extends Error{constructor(Se,xe,Et){super(xe),this.code=Se,this.customData=Et,this.name="FirebaseError",Object.setPrototypeOf(this,tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Me.prototype.create)}}class Me{constructor(Se,xe,Et){this.service=Se,this.serviceName=xe,this.errors=Et}create(Se,...xe){const Et=xe[0]||{},we=`${this.service}/${Se}`,$e=this.errors[Se],wt=$e?function mt(ye,Se){return ye.replace(Le,(xe,Et)=>{const we=Se[Et];return null!=we?String(we):`<${Et}?>`})}($e,Et):"Error";return new tt(we,`${this.serviceName}: ${wt} (${we}).`,Et)}}const Le=/\{\$([^}]+)}/g;function ft(ye){return JSON.parse(ye)}function Ot(ye){return JSON.stringify(ye)}const lt=function(ye){let Se={},xe={},Et={},we="";try{const $e=ye.split(".");Se=ft(Ge($e[0])||""),xe=ft(Ge($e[1])||""),we=$e[2],Et=xe.d||{},delete xe.d}catch($e){}return{header:Se,claims:xe,data:Et,signature:we}},qt=function(ye){const xe=lt(ye).claims;return!!xe&&"object"==typeof xe&&xe.hasOwnProperty("iat")},Ht=function(ye){const Se=lt(ye).claims;return"object"==typeof Se&&!0===Se.admin};function mn(ye,Se){return Object.prototype.hasOwnProperty.call(ye,Se)}function wn(ye,Se){if(Object.prototype.hasOwnProperty.call(ye,Se))return ye[Se]}function vn(ye){for(const Se in ye)if(Object.prototype.hasOwnProperty.call(ye,Se))return!1;return!0}function Ln(ye,Se,xe){const Et={};for(const we in ye)Object.prototype.hasOwnProperty.call(ye,we)&&(Et[we]=Se.call(xe,ye[we],we,ye));return Et}function pr(ye,Se){if(ye===Se)return!0;const xe=Object.keys(ye),Et=Object.keys(Se);for(const we of xe){if(!Et.includes(we))return!1;const $e=ye[we],wt=Se[we];if(kr($e)&&kr(wt)){if(!pr($e,wt))return!1}else if($e!==wt)return!1}for(const we of Et)if(!xe.includes(we))return!1;return!0}function kr(ye){return null!==ye&&"object"==typeof ye}function wr(ye){const Se=[];for(const[xe,Et]of Object.entries(ye))Array.isArray(Et)?Et.forEach(we=>{Se.push(encodeURIComponent(xe)+"="+encodeURIComponent(we))}):Se.push(encodeURIComponent(xe)+"="+encodeURIComponent(Et));return Se.length?"&"+Se.join("&"):""}function ni(ye){const Se={};return ye.replace(/^\?/,"").split("&").forEach(Et=>{if(Et){const[we,$e]=Et.split("=");Se[decodeURIComponent(we)]=decodeURIComponent($e)}}),Se}function ar(ye){const Se=ye.indexOf("?");if(!Se)return"";const xe=ye.indexOf("#",Se);return ye.substring(Se,xe>0?xe:void 0)}class Mr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Se=1;Se<this.blockSize;++Se)this.pad_[Se]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Se,xe){xe||(xe=0);const Et=this.W_;if("string"==typeof Se)for(let _n=0;_n<16;_n++)Et[_n]=Se.charCodeAt(xe)<<24|Se.charCodeAt(xe+1)<<16|Se.charCodeAt(xe+2)<<8|Se.charCodeAt(xe+3),xe+=4;else for(let _n=0;_n<16;_n++)Et[_n]=Se[xe]<<24|Se[xe+1]<<16|Se[xe+2]<<8|Se[xe+3],xe+=4;for(let _n=16;_n<80;_n++){const xr=Et[_n-3]^Et[_n-8]^Et[_n-14]^Et[_n-16];Et[_n]=4294967295&(xr<<1|xr>>>31)}let an,Dr,we=this.chain_[0],$e=this.chain_[1],wt=this.chain_[2],Vt=this.chain_[3],zt=this.chain_[4];for(let _n=0;_n<80;_n++){_n<40?_n<20?(an=Vt^$e&(wt^Vt),Dr=1518500249):(an=$e^wt^Vt,Dr=1859775393):_n<60?(an=$e&wt|Vt&($e|wt),Dr=2400959708):(an=$e^wt^Vt,Dr=3395469782);const xr=(we<<5|we>>>27)+an+zt+Dr+Et[_n]&4294967295;zt=Vt,Vt=wt,wt=4294967295&($e<<30|$e>>>2),$e=we,we=xr}this.chain_[0]=this.chain_[0]+we&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+wt&4294967295,this.chain_[3]=this.chain_[3]+Vt&4294967295,this.chain_[4]=this.chain_[4]+zt&4294967295}update(Se,xe){if(null==Se)return;void 0===xe&&(xe=Se.length);const Et=xe-this.blockSize;let we=0;const $e=this.buf_;let wt=this.inbuf_;for(;we<xe;){if(0===wt)for(;we<=Et;)this.compress_(Se,we),we+=this.blockSize;if("string"==typeof Se){for(;we<xe;)if($e[wt]=Se.charCodeAt(we),++wt,++we,wt===this.blockSize){this.compress_($e),wt=0;break}}else for(;we<xe;)if($e[wt]=Se[we],++wt,++we,wt===this.blockSize){this.compress_($e),wt=0;break}}this.inbuf_=wt,this.total_+=xe}digest(){const Se=[];let xe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let we=this.blockSize-1;we>=56;we--)this.buf_[we]=255&xe,xe/=256;this.compress_(this.buf_);let Et=0;for(let we=0;we<5;we++)for(let $e=24;$e>=0;$e-=8)Se[Et]=this.chain_[we]>>$e&255,++Et;return Se}}function Yn(ye,Se){const xe=new on(ye,Se);return xe.subscribe.bind(xe)}class on{constructor(Se,xe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=xe,this.task.then(()=>{Se(this)}).catch(Et=>{this.error(Et)})}next(Se){this.forEachObserver(xe=>{xe.next(Se)})}error(Se){this.forEachObserver(xe=>{xe.error(Se)}),this.close(Se)}complete(){this.forEachObserver(Se=>{Se.complete()}),this.close()}subscribe(Se,xe,Et){let we;if(void 0===Se&&void 0===xe&&void 0===Et)throw new Error("Missing Observer.");we=function Rn(ye,Se){if("object"!=typeof ye||null===ye)return!1;for(const xe of Se)if(xe in ye&&"function"==typeof ye[xe])return!0;return!1}(Se,["next","error","complete"])?Se:{next:Se,error:xe,complete:Et},void 0===we.next&&(we.next=hn),void 0===we.error&&(we.error=hn),void 0===we.complete&&(we.complete=hn);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?we.error(this.finalError):we.complete()}catch(wt){}}),this.observers.push(we),$e}unsubscribeOne(Se){void 0===this.observers||void 0===this.observers[Se]||(delete this.observers[Se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Se){if(!this.finalized)for(let xe=0;xe<this.observers.length;xe++)this.sendOne(xe,Se)}sendOne(Se,xe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Se])try{xe(this.observers[Se])}catch(Et){"undefined"!=typeof console&&console.error&&console.error(Et)}})}close(Se){this.finalized||(this.finalized=!0,void 0!==Se&&(this.finalError=Se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hn(){}const Zi=function(ye,Se,xe,Et){let we;if(Et<Se?we="at least "+Se:Et>xe&&(we=0===xe?"none":"no more than "+xe),we)throw new Error(ye+" failed: Was called with "+Et+(1===Et?" argument.":" arguments.")+" Expects "+we+".")};function Xr(ye,Se){return`${ye} failed: ${Se} argument `}function Fr(ye,Se,xe,Et){if((!Et||xe)&&"function"!=typeof xe)throw new Error(Xr(ye,Se)+"must be a valid function.")}function Hi(ye,Se,xe,Et){if((!Et||xe)&&("object"!=typeof xe||null===xe))throw new Error(Xr(ye,Se)+"must be a valid context object.")}const Lr=function(ye){const Se=[];let xe=0;for(let Et=0;Et<ye.length;Et++){let we=ye.charCodeAt(Et);if(we>=55296&&we<=56319){const $e=we-55296;Et++,m(Et<ye.length,"Surrogate pair missing trail surrogate."),we=65536+($e<<10)+(ye.charCodeAt(Et)-56320)}we<128?Se[xe++]=we:we<2048?(Se[xe++]=we>>6|192,Se[xe++]=63&we|128):we<65536?(Se[xe++]=we>>12|224,Se[xe++]=we>>6&63|128,Se[xe++]=63&we|128):(Se[xe++]=we>>18|240,Se[xe++]=we>>12&63|128,Se[xe++]=we>>6&63|128,Se[xe++]=63&we|128)}return Se},Bt=function(ye){let Se=0;for(let xe=0;xe<ye.length;xe++){const Et=ye.charCodeAt(xe);Et<128?Se++:Et<2048?Se+=2:Et>=55296&&Et<=56319?(Se+=4,xe++):Se+=3}return Se};function $n(ye,Se=1e3,xe=2){const Et=Se*Math.pow(xe,ye),we=Math.round(.5*Et*(Math.random()-.5)*2);return Math.min(144e5,Et+we)}function Tr(ye){return ye&&ye._delegate?ye._delegate:ye}},4846:(Ut,We,$)=>{$.d(We,{b:()=>w});class w{}},2192:(Ut,We,$)=>{$.d(We,{U:()=>tt});var w=$(5861),m=$(2382);class ie{constructor(mt){this.file=mt}}var Fe=$(4846),z=$(5e3),De=$(7556),Ve=$(9775),ke=$(832),Ge=$(9808),pe=$(9104);function ue(Me,mt){1&Me&&(z.TgZ(0,"span",6),z._uU(1," Debes ingresar el nombre."),z.qZA())}let Pe=(()=>{class Me{constructor(Le,ft){this.fv=Le,this.usuarioSvc=ft,this.formulario=Le.group({especialidad:["",m.kI.required]})}ngOnInit(){}guardar(){this.especialidad=this.formulario.controls.especialidad.value,this.usuarioSvc.addEspecilidad(this.especialidad)}}return Me.\u0275fac=function(Le){return new(Le||Me)(z.Y36(m.qu),z.Y36(Ve.i))},Me.\u0275cmp=z.Xpm({type:Me,selectors:[["app-alta-especialidad"]],decls:7,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"row"],[1,"mb-6"],["type","text","id","especialidad","formControlName","especialidad","placeholder","Ingrese Especialidad",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(Le,ft){if(1&Le&&(z.TgZ(0,"form",0),z.NdJ("ngSubmit",function(){return ft.guardar()}),z.TgZ(1,"div",1)(2,"div",2)(3,"h4",3),z._uU(4,"Alta Especialidad"),z.qZA(),z._UZ(5,"input",4),z.YNc(6,ue,2,0,"span",5),z.qZA()()()),2&Le){let Ot;z.Q6J("formGroup",ft.formulario),z.xp6(6),z.Q6J("ngIf",(null==(Ot=ft.formulario.get("especialidad"))?null:Ot.hasError("required"))&&(null==(Ot=ft.formulario.get("especialidad"))?null:Ot.touched))}},directives:[m._Y,m.JL,m.sg,m.Fj,m.JJ,m.u,Ge.O5],styles:[""]}),Me})();function Tt(Me,mt){1&Me&&(z.TgZ(0,"option",33),z._uU(1,"Administrador"),z.qZA())}function Ke(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes seleccionar un tipo de usuario."),z.qZA())}function rt(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes ingresar el nombre."),z.qZA())}function ht(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes ingresar el apellido."),z.qZA())}function Xe(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes ingresar la edad."),z.qZA())}function ot(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes ingresar el DNI."),z.qZA())}function Oe(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes indicar el email."),z.qZA())}function Lt(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes indicar el password."),z.qZA())}function ct(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes indicar la Obra Social."),z.qZA())}function it(Me,mt){if(1&Me&&(z.TgZ(0,"div",4)(1,"label",35),z._uU(2,"Obra Social"),z.qZA(),z._UZ(3,"input",36),z.YNc(4,ct,2,0,"span",12),z.qZA()),2&Me){const Le=z.oxw();let ft;z.xp6(4),z.Q6J("ngIf",(null==(ft=Le.formulario.get("obraSocial"))?null:ft.hasError("required"))&&(null==(ft=Le.formulario.get("obraSocial"))?null:ft.touched))}}function Qe(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes completar el campo."),z.qZA())}function ze(Me,mt){if(1&Me&&(z.TgZ(0,"div",4)(1,"label",37),z._uU(2,"Especialidades"),z.qZA(),z._UZ(3,"input",38),z.YNc(4,Qe,2,0,"span",12),z.qZA()),2&Me){const Le=z.oxw();let ft;z.xp6(4),z.Q6J("ngIf",(null==(ft=Le.formulario.get("especialidades"))?null:ft.hasError("required"))&&(null==(ft=Le.formulario.get("especialidades"))?null:ft.touched))}}function It(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes subir una imagen."),z.qZA())}function le(Me,mt){1&Me&&(z.TgZ(0,"span",34),z._uU(1," Debes subir una imagen."),z.qZA())}function ut(Me,mt){if(1&Me){const Le=z.EpF();z.TgZ(0,"div",4)(1,"label",39),z._uU(2,"Imagen Perfil"),z.qZA(),z.TgZ(3,"input",40),z.NdJ("change",function(Ot){return z.CHM(Le),z.oxw().selectFile(Ot)}),z.qZA(),z.YNc(4,le,2,0,"span",12),z.qZA()}if(2&Me){const Le=z.oxw();let ft;z.xp6(4),z.Q6J("ngIf",(null==(ft=Le.formulario.get("img2Perfil"))?null:ft.hasError("required"))&&(null==(ft=Le.formulario.get("img2Perfil"))?null:ft.touched))}}const me=function(Me){return{width:Me}};function je(Me,mt){if(1&Me&&(z.TgZ(0,"div",41)(1,"div",42),z._uU(2),z.qZA()()),2&Me){const Le=z.oxw();z.xp6(1),z.Q6J("ngStyle",z.VKq(3,me,Le.percentage+"%")),z.uIk("aria-valuenow",Le.percentage),z.xp6(1),z.hij("",Le.percentage,"% ")}}function He(Me,mt){if(1&Me){const Le=z.EpF();z.TgZ(0,"div",43)(1,"app-lista-especialidad",44),z.NdJ("especialidadSeleccionada",function(Ot){return z.CHM(Le),z.oxw().asignarEspecialidadSeleccionada(Ot)}),z.qZA(),z._UZ(2,"app-alta-especialidad"),z.qZA()}if(2&Me){const Le=z.oxw();z.xp6(1),z.Q6J("especialidades",Le.especialidades)}}let tt=(()=>{class Me{constructor(Le,ft,Ot,lt){this.fv=Le,this.authSvc=ft,this.usuarioSvc=Ot,this.router=lt,this.usuarioLog$=this.authSvc.afAuth.user,this.especialista=!1,this.paciente=!1,this.administrador=!1,this.especialidades=[],this.especialidadSeleccionada=[],this.especialidadesSeleccionadas=[],this.formulario=Le.group({nombre:["",m.kI.required],apellido:["",m.kI.required],edad:["",[m.kI.required,m.kI.min(18),m.kI.max(99)]],dni:["",m.kI.required],email:["",[m.kI.required,m.kI.email,m.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",m.kI.required],tipoUsuario:["",m.kI.required],obraSocial:[""],especialidades:[""],img1Perfil:["",m.kI.required],img2Perfil:[""]}),console.log(this.usuarioLog$)}ngOnInit(){this.cargarEspecialidades()}getTipoUsuario(){switch(console.log(this.tipoUsuario),this.tipoUsuario){case"Administrador":this.administrador=!0,this.especialista=!1,this.paciente=!1;break;case"Especialista":this.administrador=!1,this.especialista=!0,this.paciente=!1;break;case"Paciente":this.administrador=!1,this.especialista=!1,this.paciente=!0}}selectFile(Le){this.selectedFiles=Le.target.files,console.log(this.selectedFiles)}registrar(){var Le=this;return(0,w.Z)(function*(){console.log(Le.formulario),Le.usuario=new Fe.b,Le.usuario.nombre=Le.formulario.controls.nombre.value,Le.usuario.apellido=Le.formulario.controls.apellido.value,Le.usuario.edad=Le.formulario.controls.edad.value,Le.usuario.DNI=Le.formulario.controls.dni.value,Le.usuario.email=Le.formulario.controls.email.value,Le.usuario.password=Le.formulario.controls.password.value,Le.usuario.tipoUsuario=Le.formulario.controls.tipoUsuario.value,Le.usuario.obraSocial=Le.formulario.controls.obraSocial.value,(Le.usuario.especialista||Le.usuario.administrador)&&(Le.usuario.obraSocial=""),Le.usuario.especialidades=Le.especialidadesSeleccionadas,Le.usuario.administrador=Le.administrador,Le.usuario.especialista=Le.especialista,Le.usuario.paciente=Le.paciente,(Le.usuario.paciente||Le.usuario.administrador)&&(Le.usuario.especialidades=[]),Le.usuario.habilitado=!Le.usuario.especialista,Le.authSvc.registro(Le.usuario).then(function(){var lt=(0,w.Z)(function*(dn){Le.msjError=""});return function(dn){return lt.apply(this,arguments)}}()).catch(lt=>{"The email address is already in use by another account."==lt.message&&(Le.msjError="El email ingresado ya esta en uso."),"The email address is badly formatted."==lt.message&&(Le.msjError="El formato del email no es correcto.")}),console.log(Le.usuario);const ft=Le.selectedFiles.item(0),Ot=Le.selectedFiles.item(1);null!=ft&&(Le.img1Perfil=new ie(ft)),null!=Ot&&(Le.img2Perfil=new ie(Ot)),console.log(Le.usuario),Le.usuarioSvc.uploadUsuarioImg(Le.img1Perfil,Le.usuario).subscribe(lt=>{Le.percentage=Math.round(lt)},lt=>{console.log(lt)}),Le.router.navigate(["ingreso/envio-email"])})()}cargarEspecialidades(){this.usuarioSvc.getEspecialidades().subscribe(Le=>{this.especialidades=Le,console.log(this.especialidades)})}asignarEspecialidadSeleccionada(Le){console.log(Le.nombre),this.especialidadSeleccionada=Le,this.especialidadesSeleccionadas.push(this.especialidadSeleccionada.nombre),console.log(this.especialidadesSeleccionadas),this.formulario.controls.especialidades.setValue(this.especialidadesSeleccionadas)}}return Me.\u0275fac=function(Le){return new(Le||Me)(z.Y36(m.qu),z.Y36(De.e),z.Y36(Ve.i),z.Y36(ke.F0))},Me.\u0275cmp=z.Xpm({type:Me,selectors:[["app-alta-usuario"]],decls:62,vars:17,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"row"],[1,"col-md-8","order-md-1"],[1,"mb-3"],[1,"col-md-12","mb-3"],["for","tipoUsuario"],["formControlName","tipoUsuario",1,"custom-select","custom-select-lg","form-control","mb-3",3,"ngModel","change","ngModelChange"],["value","0"],["value","Administrador",4,"ngIf"],["value","Especialista"],["value","Paciente"],["class","text-danger",4,"ngIf"],[1,"col-md-6","mb-3"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","apellido"],["type","text","id","apellido","formControlName","apellido",1,"form-control"],["for","edad"],["type","text","id","edad","formControlName","edad",1,"form-control"],["for","dni"],["type","text","id","dni","formControlName","dni",1,"form-control"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["class","mb-3",4,"ngIf"],["for","img1Perfil"],["type","file","id","img1Perfil","formControlName","img1Perfil",1,"form-control",3,"change"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],["class","progress mt-2",4,"ngIf"],["class","col-4",4,"ngIf"],["value","Administrador"],[1,"text-danger"],["for","obraSocial"],["type","text","id","obraSocial","formControlName","obraSocial",1,"form-control"],["for","especialidad"],["type","text","id","especialidades","formControlName","especialidades",1,"form-control"],["for","img2Perfil"],["type","file","id","img2Perfil","formControlName","img2Perfil",1,"form-control",3,"change"],[1,"progress","mt-2"],["role","progressbar","type","success","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"],[1,"col-4"],[3,"especialidades","especialidadSeleccionada"]],template:function(Le,ft){if(1&Le&&(z.TgZ(0,"form",0),z.NdJ("ngSubmit",function(){return ft.registrar()}),z.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),z._uU(5,"Alta Usuario"),z.qZA(),z.TgZ(6,"div",2)(7,"div",5)(8,"label",6),z._uU(9,"Tipo Usuario"),z.qZA(),z.TgZ(10,"select",7),z.NdJ("change",function(){return ft.getTipoUsuario()})("ngModelChange",function(lt){return ft.tipoUsuario=lt}),z.TgZ(11,"option",8),z._uU(12,"Selecciona una opci\xf3n"),z.qZA(),z.YNc(13,Tt,2,0,"option",9),z.TgZ(14,"option",10),z._uU(15,"Especialista"),z.qZA(),z.TgZ(16,"option",11),z._uU(17,"Paciente"),z.qZA()(),z.YNc(18,Ke,2,0,"span",12),z.qZA(),z.TgZ(19,"div",13)(20,"label",14),z._uU(21,"Nombre"),z.qZA(),z._UZ(22,"input",15),z.YNc(23,rt,2,0,"span",12),z.qZA(),z.TgZ(24,"div",13)(25,"label",16),z._uU(26,"Apellido"),z.qZA(),z._UZ(27,"input",17),z.YNc(28,ht,2,0,"span",12),z.qZA(),z.TgZ(29,"div",13)(30,"label",18),z._uU(31,"Edad"),z.qZA(),z._UZ(32,"input",19),z.YNc(33,Xe,2,0,"span",12),z.qZA(),z.TgZ(34,"div",13)(35,"label",20),z._uU(36,"DNI"),z.qZA(),z._UZ(37,"input",21),z.YNc(38,ot,2,0,"span",12),z.qZA()(),z.TgZ(39,"div",4)(40,"label",22),z._uU(41,"Email"),z.qZA(),z._UZ(42,"input",23),z.YNc(43,Oe,2,0,"span",12),z.qZA(),z.TgZ(44,"div",4)(45,"label",24),z._uU(46,"Password"),z.qZA(),z._UZ(47,"input",25),z.YNc(48,Lt,2,0,"span",12),z.qZA(),z.YNc(49,it,5,1,"div",26),z.YNc(50,ze,5,1,"div",26),z.TgZ(51,"div",4)(52,"label",27),z._uU(53,"Imagen Perfil"),z.qZA(),z.TgZ(54,"input",28),z.NdJ("change",function(lt){return ft.selectFile(lt)}),z.qZA(),z.YNc(55,It,2,0,"span",12),z.qZA(),z.YNc(56,ut,5,1,"div",26),z._UZ(57,"hr",29),z.TgZ(58,"button",30),z._uU(59,"Registrarse"),z.qZA(),z.YNc(60,je,3,5,"div",31),z.qZA(),z.YNc(61,He,3,1,"div",32),z.qZA()()()),2&Le){let Ot,lt,dn,Kt,qt,Ht,mn,wn;z.Q6J("formGroup",ft.formulario),z.xp6(10),z.Q6J("ngModel",ft.tipoUsuario),z.xp6(3),z.Q6J("ngIf",ft.usuarioLog$),z.xp6(5),z.Q6J("ngIf",(null==(Ot=ft.formulario.get("tipoUsuario"))?null:Ot.hasError("required"))&&(null==(Ot=ft.formulario.get("tipoUsuario"))?null:Ot.touched)),z.xp6(5),z.Q6J("ngIf",(null==(lt=ft.formulario.get("nombre"))?null:lt.hasError("required"))&&(null==(lt=ft.formulario.get("nombre"))?null:lt.touched)),z.xp6(5),z.Q6J("ngIf",(null==(dn=ft.formulario.get("apellido"))?null:dn.hasError("required"))&&(null==(dn=ft.formulario.get("apellido"))?null:dn.touched)),z.xp6(5),z.Q6J("ngIf",(null==(Kt=ft.formulario.get("edad"))?null:Kt.hasError("required"))&&(null==(Kt=ft.formulario.get("edad"))?null:Kt.touched)),z.xp6(5),z.Q6J("ngIf",(null==(qt=ft.formulario.get("dni"))?null:qt.hasError("required"))&&(null==(qt=ft.formulario.get("dni"))?null:qt.touched)),z.xp6(5),z.Q6J("ngIf",(null==(Ht=ft.formulario.get("email"))?null:Ht.hasError("required"))&&(null==(Ht=ft.formulario.get("email"))?null:Ht.touched)),z.xp6(5),z.Q6J("ngIf",(null==(mn=ft.formulario.get("password"))?null:mn.hasError("required"))&&(null==(mn=ft.formulario.get("password"))?null:mn.touched)),z.xp6(1),z.Q6J("ngIf",ft.paciente),z.xp6(1),z.Q6J("ngIf",ft.especialista),z.xp6(5),z.Q6J("ngIf",(null==(wn=ft.formulario.get("img1Perfil"))?null:wn.hasError("required"))&&(null==(wn=ft.formulario.get("img1Perfil"))?null:wn.touched)),z.xp6(1),z.Q6J("ngIf",ft.paciente),z.xp6(2),z.Q6J("disabled",ft.formulario.invalid),z.xp6(2),z.Q6J("ngIf",ft.img1Perfil&&ft.img2Perfil),z.xp6(1),z.Q6J("ngIf",ft.especialista)}},directives:[m._Y,m.JL,m.sg,m.EJ,m.JJ,m.u,m.YN,m.Kr,Ge.O5,m.Fj,Ge.PC,pe.T,Pe],styles:[""]}),Me})()},9104:(Ut,We,$)=>{$.d(We,{T:()=>z});var w=$(5e3),m=$(9775),ie=$(9808);function Fe(De,Ve){if(1&De){const ke=w.EpF();w.TgZ(0,"ul",3)(1,"li",4),w.NdJ("click",function(){const ue=w.CHM(ke).$implicit;return w.oxw().asignarEspecialidad(ue)}),w.TgZ(2,"button",5),w._uU(3),w.qZA()()()}if(2&De){const ke=Ve.$implicit;w.xp6(3),w.hij("",ke.nombre," ")}}let z=(()=>{class De{constructor(ke){this.usuarioSvc=ke,this.especialidadSeleccionada=new w.vpe,this.especialidades=[]}ngOnInit(){}asignarEspecialidad(ke){console.log(ke),this.especialidadSeleccionada.emit(ke)}}return De.\u0275fac=function(ke){return new(ke||De)(w.Y36(m.i))},De.\u0275cmp=w.Xpm({type:De,selectors:[["app-lista-especialidad"]],inputs:{especialidades:"especialidades"},outputs:{especialidadSeleccionada:"especialidadSeleccionada"},decls:4,vars:1,consts:[[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],["class","list-group mb-3",4,"ngFor","ngForOf"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed",3,"click"],["type","button",1,"btn"]],template:function(ke,Ge){1&ke&&(w.TgZ(0,"h4",0)(1,"span",1),w._uU(2,"Especialidad"),w.qZA()(),w.YNc(3,Fe,4,1,"ul",2)),2&ke&&(w.xp6(3),w.Q6J("ngForOf",Ge.especialidades))},directives:[ie.sg],styles:[""]}),De})()},825:(Ut,We,$)=>{$.r(We),$.d(We,{IngresoModule:()=>Tt});var w=$(9808),m=$(832),ie=$(5861),Fe=$(4846),z=$(5e3),De=$(7556),Ve=$(2382);let ke=(()=>{class Ke{constructor(ht,Xe){this.router=ht,this.authSvc=Xe,this.email="",this.password="",this.usuario=new Fe.b}ngOnInit(){}onLogin(){var ht=this;return(0,ie.Z)(function*(){ht.usuario.email=ht.email,ht.usuario.password=ht.password,yield ht.authSvc.login(ht.usuario),""!=ht.authSvc.msjError?ht.msjError=ht.authSvc.msjError:ht.router.navigate(["home"])})()}logEliseo(){var ht=this;return(0,ie.Z)(function*(){ht.email="leliseo89@hotmail.com",ht.password="123456"})()}ingresar(){this.usuario.email=this.email,this.usuario.password=this.password,this.authSvc.login(this.usuario).then(ht=>{console.log("Login exitoso",ht),""!=this.authSvc.msjError?this.msjError=this.authSvc.msjError:this.router.navigate(["bienvenida"])}).catch(ht=>{"The password is invalid or the user does not have a password."==ht.message&&(this.msjError="La contrase\xf1a ingresada es invalida.")})}}return Ke.\u0275fac=function(ht){return new(ht||Ke)(z.Y36(m.F0),z.Y36(De.e))},Ke.\u0275cmp=z.Xpm({type:Ke,selectors:[["app-login"]],decls:23,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"form-signin"],[1,""],["id","img","src","../../../assets/cruzVerde.jpg","alt","",1,"mb-4"],[1,"h3","mb-3","font-weight-normal","text-center"],["for","email",1,"sr-only","mb-2"],["type","email","id","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","password",1,"sr-only","mb-2"],["type","password","id","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group"],["type","button",1,"btn","btn-lg","btn-success","btn-block",3,"click"]],template:function(ht,Xe){1&ht&&(z.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4),z._UZ(5,"img",5),z.qZA(),z.TgZ(6,"div",2)(7,"h1",6),z._uU(8,"Inicio Sesion"),z.qZA()(),z.TgZ(9,"div",2)(10,"label",7),z._uU(11,"Correo Electronico"),z.qZA(),z.TgZ(12,"input",8),z.NdJ("ngModelChange",function(Oe){return Xe.email=Oe}),z.qZA()(),z.TgZ(13,"div",2)(14,"label",9),z._uU(15,"Password"),z.qZA(),z.TgZ(16,"input",10),z.NdJ("ngModelChange",function(Oe){return Xe.password=Oe}),z.qZA()(),z.TgZ(17,"div",11)(18,"button",12),z.NdJ("click",function(){return Xe.ingresar()}),z._uU(19,"Entrar"),z.qZA()(),z.TgZ(20,"div",11)(21,"button",12),z.NdJ("click",function(){return Xe.logEliseo()}),z._uU(22,"Autocompletar"),z.qZA()()()()()()),2&ht&&(z.xp6(12),z.Q6J("ngModel",Xe.email),z.xp6(4),z.Q6J("ngModel",Xe.password))},directives:[Ve._Y,Ve.JL,Ve.F,Ve.Fj,Ve.JJ,Ve.On],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}#img[_ngcontent-%COMP%]{height:200px;width:200px;display:block;margin:auto}"]}),Ke})();var Ge=$(2192);const ue=[{path:"login",component:ke},{path:"registro",component:(()=>{class Ke{constructor(){}ngOnInit(){}}return Ke.\u0275fac=function(ht){return new(ht||Ke)},Ke.\u0275cmp=z.Xpm({type:Ke,selectors:[["app-registro"]],decls:1,vars:0,template:function(ht,Xe){1&ht&&z._UZ(0,"app-alta-usuario")},directives:[Ge.U],styles:[".container[_ngcontent-%COMP%]{max-width:960px}.lh-condensed[_ngcontent-%COMP%]{line-height:1.25}.bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}"]}),Ke})()}];let Pe=(()=>{class Ke{}return Ke.\u0275fac=function(ht){return new(ht||Ke)},Ke.\u0275mod=z.oAB({type:Ke}),Ke.\u0275inj=z.cJS({imports:[[m.Bz.forChild(ue)],m.Bz]}),Ke})(),Tt=(()=>{class Ke{}return Ke.\u0275fac=function(ht){return new(ht||Ke)},Ke.\u0275mod=z.oAB({type:Ke}),Ke.\u0275inj=z.cJS({imports:[[w.ez,Pe,Ve.u5,Ve.UX]]}),Ke})()},7556:(Ut,We,$)=>{$.d(We,{e:()=>Ve});var w=$(5861),m=$(4846),ie=$(5e3),Fe=$(1205),z=$(832),De=$(9775);let Ve=(()=>{class ke{constructor(pe,ue,Pe){this.afAuth=pe,this.router=ue,this.usuarioSvc=Pe,this.usuario$=this.afAuth.user,this.isLoggedIn=!1,this.isLoggedInAdmin=!1,this.usuarios=[],this.msjError="",console.log(this.usuarioLogueado),this.usuarioSvc.getUsuarios().subscribe(Tt=>{this.usuarios=Tt,pe.authState.subscribe(Ke=>{this.usuarios.forEach(rt=>{null!=Ke&&(Ke.email==rt.email?(console.log(rt.administrador),console.log(this.usuario),this.usuario=rt,this.isLoggedInAdmin=!!rt.administrador,this.isLoggedIn=!0):this.isLoggedIn=!1)})})}),console.log(this.usuarios)}login(pe){var ue=this;return(0,w.Z)(function*(){return console.log(pe.email),yield ue.afAuth.signInWithEmailAndPassword(pe.email,pe.password).then(Pe=>{var Tt,Ke,rt;ue.msjError="",Pe.user&&(ue.usuario=new m.b,ue.usuario.id=null===(Tt=Pe.user)||void 0===Tt?void 0:Tt.uid,ue.usuario.email=null===(Ke=Pe.user)||void 0===Ke?void 0:Ke.email,console.log(ue.usuario),(null===(rt=Pe.user)||void 0===rt?void 0:rt.emailVerified)||ue.router.navigate(["ingreso/envio-email"]))}).catch(Pe=>{console.log(Pe.code),"auth/email-already-in-use"==Pe.code&&(ue.msjError="El email ingresado ya esta en uso."),"auth/invalid-email"==Pe.code&&(ue.msjError="El formato del email no es correcto.")})})()}registro(pe){var ue=this;return(0,w.Z)(function*(){return yield ue.afAuth.createUserWithEmailAndPassword(pe.email,pe.password).then(Pe=>{var Tt;ue.msjError="",null===(Tt=Pe.user)||void 0===Tt||Tt.sendEmailVerification()}).catch(Pe=>{console.log(Pe.message),"auth/email-already-in-use"==Pe.code&&(ue.msjError="El email ingresado ya esta en uso."),"auth/invalid-email"==Pe.code&&(ue.msjError="El formato del email no es correcto.")})})()}signOut(){var pe=this;return(0,w.Z)(function*(){try{yield pe.afAuth.signOut(),pe.router.navigate(["/"])}catch(ue){console.log(ue)}})()}enviarVerficacionEmail(){var pe=this;return(0,w.Z)(function*(){console.log(pe.afAuth.currentUser)})()}verificarAprobacionAdmin(pe){this.usuarios.forEach(ue=>ue.email===pe.email&&!!ue.habilitado)}obtenerUsuaurioActual(){this.afAuth.authState.subscribe(pe=>pe)}}return ke.\u0275fac=function(pe){return new(pe||ke)(ie.LFG(Fe.zQ),ie.LFG(z.F0),ie.LFG(De.i))},ke.\u0275prov=ie.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})()},9775:(Ut,We,$)=>{$.d(We,{i:()=>Dt});var w=$(4004),m=$(8746),ie=$(5e3),Fe=$(7407),z=$(8306),De=$(9646),Ve=$(8996),ke=$(4986),Ge=$(4482),pe=$(5403),Pe=$(3900),Tt=$(5813),Ke=$(2011),rt=$(3942),ht=$(5861),Xe=$(9681),ot=$(2090),Oe=$(4859);const Lt="firebasestorage.googleapis.com",ct="storageBucket";class ze extends ot.ZR{constructor(j,ne){super(It(j),`Firebase Storage: ${ne} (${It(j)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}_codeEquals(j){return It(j)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(j){this.customData.serverResponse=j,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function It(W){return"storage/"+W}function le(){return new ze("unknown","An unknown error occurred, please check the error payload for server response.")}function mt(){return new ze("canceled","User canceled the upload/download.")}function lt(){return new ze("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qt(W){return new ze("invalid-argument",W)}function Ht(){return new ze("app-deleted","The Firebase app was deleted.")}function mn(W){return new ze("invalid-root-operation","The operation '"+W+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wn(W,j){return new ze("invalid-format","String does not match format '"+W+"': "+j)}function vn(W){throw new ze("internal-error","Internal error: "+W)}class Ln{constructor(j,ne){this.bucket=j,this.path_=ne}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const j=encodeURIComponent;return"/b/"+j(this.bucket)+"/o/"+j(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(j,ne){let de;try{de=Ln.makeFromUrl(j,ne)}catch(Ce){return new Ln(j,"")}if(""===de.path)return de;throw function ft(W){return new ze("invalid-default-bucket","Invalid default bucket '"+W+"'.")}(j)}static makeFromUrl(j,ne){let de=null;const Ce="([A-Za-z0-9.\\-_]+)",nn=new RegExp("^gs://"+Ce+"(/(.*))?$","i");function Fn(ki){ki.path_=decodeURIComponent(ki.path)}const lr=ne.replace(/[.]/g,"\\."),Qi=[{regex:nn,indices:{bucket:1,path:3},postModify:function et(ki){"/"===ki.path.charAt(ki.path.length-1)&&(ki.path_=ki.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${lr}/v[A-Za-z0-9_]+/b/${Ce}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Fn},{regex:new RegExp(`^https?://${ne===Lt?"(?:storage.googleapis.com|storage.cloud.google.com)":ne}/${Ce}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Fn}];for(let ki=0;ki<Qi.length;ki++){const io=Qi[ki],ea=io.regex.exec(j);if(ea){let pa=ea[io.indices.path];pa||(pa=""),de=new Ln(ea[io.indices.bucket],pa),io.postModify(de);break}}if(null==de)throw function Le(W){return new ze("invalid-url","Invalid URL '"+W+"'.")}(j);return de}}class pr{constructor(j){this.promise_=Promise.reject(j)}getPromise(){return this.promise_}cancel(j=!1){}}function Yn(W){return"string"==typeof W||W instanceof String}function on(W){return Vn()&&W instanceof Blob}function Vn(){return"undefined"!=typeof Blob}function Rn(W,j,ne,de){if(de<j)throw qt(`Invalid value for '${W}'. Expected ${j} or greater.`);if(de>ne)throw qt(`Invalid value for '${W}'. Expected ${ne} or less.`)}function hn(W,j,ne){let de=j;return null==ne&&(de=`https://${j}`),`${ne}://${de}/v0${W}`}function Zi(W){const j=encodeURIComponent;let ne="?";for(const de in W)W.hasOwnProperty(de)&&(ne=ne+(j(de)+"=")+j(W[de])+"&");return ne=ne.slice(0,-1),ne}var Xr=(()=>{return(W=Xr||(Xr={}))[W.NO_ERROR=0]="NO_ERROR",W[W.NETWORK_ERROR=1]="NETWORK_ERROR",W[W.ABORT=2]="ABORT",Xr;var W})();class fi{constructor(j,ne,de,Ce,et,St,nn,Wt,Fn,Un,lr){this.url_=j,this.method_=ne,this.headers_=de,this.body_=Ce,this.successCodes_=et,this.additionalRetryCodes_=St,this.callback_=nn,this.errorCallback_=Wt,this.timeout_=Fn,this.progressCallback_=Un,this.connectionFactory_=lr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_r,oi)=>{this.resolve_=_r,this.reject_=oi,this.start_()})}start_(){const ne=(de,Ce)=>{const et=this.resolve_,St=this.reject_,nn=Ce.connection;if(Ce.wasSuccessCode)try{const Wt=this.callback_(nn,nn.getResponse());!function ni(W){return void 0!==W}(Wt)?et():et(Wt)}catch(Wt){St(Wt)}else if(null!==nn){const Wt=le();Wt.serverResponse=nn.getErrorText(),St(this.errorCallback_?this.errorCallback_(nn,Wt):Wt)}else St(Ce.canceled?this.appDelete_?Ht():mt():function Me(){return new ze("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?ne(0,new Fr(!1,null,!0)):this.backoffId_=function kr(W,j,ne){let de=1,Ce=null,et=null,St=!1,nn=0;function Wt(){return 2===nn}let Fn=!1;function Un(...Gn){Fn||(Fn=!0,j.apply(null,Gn))}function lr(Gn){Ce=setTimeout(()=>{Ce=null,W(oi,Wt())},Gn)}function _r(){et&&clearTimeout(et)}function oi(Gn,...Fs){if(Fn)return void _r();if(Gn)return _r(),void Un.call(null,Gn,...Fs);if(Wt()||St)return _r(),void Un.call(null,Gn,...Fs);let Qi;de<64&&(de*=2),1===nn?(nn=2,Qi=0):Qi=1e3*(de+Math.random()),lr(Qi)}let Nr=!1;function wi(Gn){Nr||(Nr=!0,_r(),!Fn&&(null!==Ce?(Gn||(nn=2),clearTimeout(Ce),lr(0)):Gn||(nn=1)))}return lr(0),et=setTimeout(()=>{St=!0,wi(!0)},ne),wi}((de,Ce)=>{if(Ce)return void de(!1,new Fr(!1,null,!0));const et=this.connectionFactory_();this.pendingConnection_=et;const St=nn=>{null!==this.progressCallback_&&this.progressCallback_(nn.loaded,nn.lengthComputable?nn.total:-1)};null!==this.progressCallback_&&et.addUploadProgressListener(St),et.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&et.removeUploadProgressListener(St),this.pendingConnection_=null;const nn=et.getErrorCode()===Xr.NO_ERROR,Wt=et.getStatus();if(!nn||this.isRetryStatusCode_(Wt)){const Un=et.getErrorCode()===Xr.ABORT;return void de(!1,new Fr(!1,null,Un))}const Fn=-1!==this.successCodes_.indexOf(Wt);de(!0,new Fr(Fn,et))})},ne,this.timeout_)}getPromise(){return this.promise_}cancel(j){this.canceled_=!0,this.appDelete_=j||!1,null!==this.backoffId_&&function wr(W){W(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(j){const ne=j>=500&&j<600,Ce=-1!==[408,429].indexOf(j),et=-1!==this.additionalRetryCodes_.indexOf(j);return ne||Ce||et}}class Fr{constructor(j,ne,de){this.wasSuccessCode=j,this.connection=ne,this.canceled=!!de}}function pi(...W){const j=function li(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==j){const ne=new j;for(let de=0;de<W.length;de++)ne.append(W[de]);return ne.getBlob()}if(Vn())return new Blob(W);throw new ze("unsupported-environment","This browser doesn't seem to support creating Blobs")}const dr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tr{constructor(j,ne){this.data=j,this.contentType=ne||null}}function ye(W,j){switch(W){case dr.RAW:return new Tr(Se(j));case dr.BASE64:case dr.BASE64URL:return new Tr(Et(W,j));case dr.DATA_URL:return new Tr(function $e(W){const j=new we(W);return j.base64?Et(dr.BASE64,j.rest):function xe(W){let j;try{j=decodeURIComponent(W)}catch(ne){throw wn(dr.DATA_URL,"Malformed data URL.")}return Se(j)}(j.rest)}(j),function wt(W){return new we(W).contentType}(j))}throw le()}function Se(W){const j=[];for(let ne=0;ne<W.length;ne++){let de=W.charCodeAt(ne);de<=127?j.push(de):de<=2047?j.push(192|de>>6,128|63&de):55296==(64512&de)?ne<W.length-1&&56320==(64512&W.charCodeAt(ne+1))?(de=65536|(1023&de)<<10|1023&W.charCodeAt(++ne),j.push(240|de>>18,128|de>>12&63,128|de>>6&63,128|63&de)):j.push(239,191,189):56320==(64512&de)?j.push(239,191,189):j.push(224|de>>12,128|de>>6&63,128|63&de)}return new Uint8Array(j)}function Et(W,j){switch(W){case dr.BASE64:{const Ce=-1!==j.indexOf("-"),et=-1!==j.indexOf("_");if(Ce||et)throw wn(W,"Invalid character '"+(Ce?"-":"_")+"' found: is it base64url encoded?");break}case dr.BASE64URL:{const Ce=-1!==j.indexOf("+"),et=-1!==j.indexOf("/");if(Ce||et)throw wn(W,"Invalid character '"+(Ce?"+":"/")+"' found: is it base64 encoded?");j=j.replace(/-/g,"+").replace(/_/g,"/");break}}let ne;try{ne=function xs(W){return atob(W)}(j)}catch(Ce){throw wn(W,"Invalid character found")}const de=new Uint8Array(ne.length);for(let Ce=0;Ce<ne.length;Ce++)de[Ce]=ne.charCodeAt(Ce);return de}class we{constructor(j){this.base64=!1,this.contentType=null;const ne=j.match(/^data:([^,]+)?,/);if(null===ne)throw wn(dr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const de=ne[1]||null;null!=de&&(this.base64=function Vt(W,j){return W.length>=j.length&&W.substring(W.length-j.length)===j}(de,";base64"),this.contentType=this.base64?de.substring(0,de.length-7):de),this.rest=j.substring(j.indexOf(",")+1)}}class zt{constructor(j,ne){let de=0,Ce="";on(j)?(this.data_=j,de=j.size,Ce=j.type):j instanceof ArrayBuffer?(ne?this.data_=new Uint8Array(j):(this.data_=new Uint8Array(j.byteLength),this.data_.set(new Uint8Array(j))),de=this.data_.length):j instanceof Uint8Array&&(ne?this.data_=j:(this.data_=new Uint8Array(j.length),this.data_.set(j)),de=j.length),this.size_=de,this.type_=Ce}size(){return this.size_}type(){return this.type_}slice(j,ne){if(on(this.data_)){const Ce=function $n(W,j,ne){return W.webkitSlice?W.webkitSlice(j,ne):W.mozSlice?W.mozSlice(j,ne):W.slice?W.slice(j,ne):null}(this.data_,j,ne);return null===Ce?null:new zt(Ce)}{const de=new Uint8Array(this.data_.buffer,j,ne-j);return new zt(de,!0)}}static getBlob(...j){if(Vn()){const ne=j.map(de=>de instanceof zt?de.data_:de);return new zt(pi.apply(null,ne))}{const ne=j.map(St=>Yn(St)?ye(dr.RAW,St).data:St.data_);let de=0;ne.forEach(St=>{de+=St.byteLength});const Ce=new Uint8Array(de);let et=0;return ne.forEach(St=>{for(let nn=0;nn<St.length;nn++)Ce[et++]=St[nn]}),new zt(Ce,!0)}}uploadData(){return this.data_}}function an(W){let j;try{j=JSON.parse(W)}catch(ne){return null}return function Mr(W){return"object"==typeof W&&!Array.isArray(W)}(j)?j:null}function xr(W){const j=W.lastIndexOf("/",W.length-2);return-1===j?W:W.slice(j+1)}function ri(W,j){return j}class Ur{constructor(j,ne,de,Ce){this.server=j,this.local=ne||j,this.writable=!!de,this.xform=Ce||ri}}let ui=null;function Tn(){if(ui)return ui;const W=[];W.push(new Ur("bucket")),W.push(new Ur("generation")),W.push(new Ur("metageneration")),W.push(new Ur("name","fullPath",!0));const ne=new Ur("name");ne.xform=function j(et,St){return function Ii(W){return!Yn(W)||W.length<2?W:xr(W)}(St)},W.push(ne);const Ce=new Ur("size");return Ce.xform=function de(et,St){return void 0!==St?Number(St):St},W.push(Ce),W.push(new Ur("timeCreated")),W.push(new Ur("updated")),W.push(new Ur("md5Hash",null,!0)),W.push(new Ur("cacheControl",null,!0)),W.push(new Ur("contentDisposition",null,!0)),W.push(new Ur("contentEncoding",null,!0)),W.push(new Ur("contentLanguage",null,!0)),W.push(new Ur("contentType",null,!0)),W.push(new Ur("metadata","customMetadata",!0)),ui=W,ui}function Di(W,j,ne){const de=an(j);return null===de?null:function hr(W,j,ne){const de={type:"file"},Ce=ne.length;for(let et=0;et<Ce;et++){const St=ne[et];de[St.local]=St.xform(de,j[St.server])}return function Vr(W,j){Object.defineProperty(W,"ref",{get:function ne(){const et=new Ln(W.bucket,W.fullPath);return j._makeStorageReference(et)}})}(de,W),de}(W,de,ne)}function gi(W,j){const ne={},de=j.length;for(let Ce=0;Ce<de;Ce++){const et=j[Ce];et.writable&&(ne[et.server]=W[et.local])}return JSON.stringify(ne)}const $s="prefixes";class tr{constructor(j,ne,de,Ce){this.url=j,this.method=ne,this.handler=de,this.timeout=Ce,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kr(W){if(!W)throw le()}function qn(W,j){return function ne(de,Ce){const et=Di(W,Ce,j);return Kr(null!==et),et}}function On(W){return function j(ne,de){let Ce;return Ce=401===ne.getStatus()?ne.getErrorText().includes("Firebase App Check token is invalid")?function He(){return new ze("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function je(){return new ze("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ne.getStatus()?function me(W){return new ze("quota-exceeded","Quota for bucket '"+W+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(W.bucket):403===ne.getStatus()?function tt(W){return new ze("unauthorized","User does not have permission to access '"+W+"'.")}(W.path):de,Ce.serverResponse=de.serverResponse,Ce}}function Br(W){const j=On(W);return function ne(de,Ce){let et=j(de,Ce);return 404===de.getStatus()&&(et=function ut(W){return new ze("object-not-found","Object '"+W+"' does not exist.")}(W.path)),et.serverResponse=Ce.serverResponse,et}}function es(W,j,ne){const Ce=hn(j.fullServerUrl(),W.host,W._protocol),St=W.maxOperationRetryTime,nn=new tr(Ce,"GET",qn(W,ne),St);return nn.errorHandler=Br(j),nn}function jr(W,j,ne,de,Ce){const et={};et.prefix=j.isRoot?"":j.path+"/",ne&&ne.length>0&&(et.delimiter=ne),de&&(et.pageToken=de),Ce&&(et.maxResults=Ce);const nn=hn(j.bucketOnlyServerUrl(),W.host,W._protocol),Fn=W.maxOperationRetryTime,Un=new tr(nn,"GET",function Mt(W,j){return function ne(de,Ce){const et=function mi(W,j,ne){const de=an(ne);return null===de?null:function Xi(W,j,ne){const de={prefixes:[],items:[],nextPageToken:ne.nextPageToken};if(ne[$s])for(const Ce of ne[$s]){const et=Ce.replace(/\/$/,""),St=W._makeStorageReference(new Ln(j,et));de.prefixes.push(St)}if(ne.items)for(const Ce of ne.items){const et=W._makeStorageReference(new Ln(j,Ce.name));de.items.push(et)}return de}(W,j,de)}(W,j,Ce);return Kr(null!==et),et}}(W,j.bucket),Fn);return Un.urlParams=et,Un.errorHandler=On(j),Un}function Yi(W,j,ne){const de=Object.assign({},ne);return de.fullPath=W.path,de.size=j.size(),de.contentType||(de.contentType=function Mn(W,j){return W&&W.contentType||j&&j.type()||"application/octet-stream"}(null,j)),de}class Ns{constructor(j,ne,de,Ce){this.current=j,this.total=ne,this.finalized=!!de,this.metadata=Ce||null}}function _i(W,j){let ne=null;try{ne=W.getResponseHeader("X-Goog-Upload-Status")}catch(Ce){Kr(!1)}return Kr(!!ne&&-1!==(j||["active"]).indexOf(ne)),ne}const nr={STATE_CHANGED:"state_changed"},Qr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Si(W){switch(W){case"running":case"pausing":case"canceling":return Qr.RUNNING;case"paused":return Qr.PAUSED;case"success":return Qr.SUCCESS;case"canceled":return Qr.CANCELED;default:return Qr.ERROR}}class ci{constructor(j,ne,de){if(function ar(W){return"function"==typeof W}(j)||null!=ne||null!=de)this.next=j,this.error=null!=ne?ne:void 0,this.complete=null!=de?de:void 0;else{const et=j;this.next=et.next,this.error=et.error,this.complete=et.complete}}}function di(W){return(...j)=>{Promise.resolve().then(()=>W(...j))}}class Pi extends class ha{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xr.NO_ERROR,this.sendPromise_=new Promise(j=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xr.ABORT,j()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xr.NETWORK_ERROR,j()}),this.xhr_.addEventListener("load",()=>{j()})})}send(j,ne,de,Ce){if(this.sent_)throw vn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ne,j,!0),void 0!==Ce)for(const et in Ce)Ce.hasOwnProperty(et)&&this.xhr_.setRequestHeader(et,Ce[et].toString());return void 0!==de?this.xhr_.send(de):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(j){return-1}}getResponse(){if(!this.sent_)throw vn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(j){return this.xhr_.getResponseHeader(j)}addUploadProgressListener(j){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",j)}removeUploadProgressListener(j){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",j)}}{initXhr(){this.xhr_.responseType="text"}}function Hr(){return new Pi}class cs{constructor(j,ne,de=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=j,this._blob=ne,this._metadata=de,this._mappings=Tn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Ce=>{this._request=void 0,this._chunkMultiplier=1,Ce._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=Ce,this._transition("error"))},this._metadataErrorHandler=Ce=>{this._request=void 0,Ce._codeEquals("canceled")?this.completeTransitions_():(this._error=Ce,this._transition("error"))},this._promise=new Promise((Ce,et)=>{this._resolve=Ce,this._reject=et,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const j=this._transferred;return ne=>this._updateProgress(j+ne)}_shouldDoResumable(j){return j.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(j){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([ne,de])=>{switch(this._state){case"running":j(ne,de);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((j,ne)=>{const de=function Wr(W,j,ne,de,Ce){const et=j.bucketOnlyServerUrl(),St=Yi(j,de,Ce),nn={name:St.fullPath},Wt=hn(et,W.host,W._protocol),Un={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${de.size()}`,"X-Goog-Upload-Header-Content-Type":St.contentType,"Content-Type":"application/json; charset=utf-8"},lr=gi(St,ne),Nr=new tr(Wt,"POST",function oi(wi){let Gn;_i(wi);try{Gn=wi.getResponseHeader("X-Goog-Upload-URL")}catch(Fs){Kr(!1)}return Kr(Yn(Gn)),Gn},W.maxUploadRetryTime);return Nr.urlParams=nn,Nr.headers=Un,Nr.body=lr,Nr.errorHandler=On(j),Nr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ce=this._ref.storage._makeRequest(de,Hr,j,ne);this._request=Ce,Ce.getPromise().then(et=>{this._request=void 0,this._uploadUrl=et,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const j=this._uploadUrl;this._resolveToken((ne,de)=>{const Ce=function ei(W,j,ne,de){const Wt=new tr(ne,"POST",function et(Fn){const Un=_i(Fn,["active","final"]);let lr=null;try{lr=Fn.getResponseHeader("X-Goog-Upload-Size-Received")}catch(oi){Kr(!1)}lr||Kr(!1);const _r=Number(lr);return Kr(!isNaN(_r)),new Ns(_r,de.size(),"final"===Un)},W.maxUploadRetryTime);return Wt.headers={"X-Goog-Upload-Command":"query"},Wt.errorHandler=On(j),Wt}(this._ref.storage,this._ref._location,j,this._blob),et=this._ref.storage._makeRequest(Ce,Hr,ne,de);this._request=et,et.getPromise().then(St=>{St=St,this._request=void 0,this._updateProgress(St.current),this._needToFetchStatus=!1,St.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const j=262144*this._chunkMultiplier,ne=new Ns(this._transferred,this._blob.size()),de=this._uploadUrl;this._resolveToken((Ce,et)=>{let St;try{St=function Yr(W,j,ne,de,Ce,et,St,nn){const Wt=new Ns(0,0);if(St?(Wt.current=St.current,Wt.total=St.total):(Wt.current=0,Wt.total=de.size()),de.size()!==Wt.total)throw function dn(){return new ze("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Fn=Wt.total-Wt.current;let Un=Fn;Ce>0&&(Un=Math.min(Un,Ce));const lr=Wt.current,Nr={"X-Goog-Upload-Command":Un===Fn?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Wt.current}`},wi=de.slice(lr,lr+Un);if(null===wi)throw lt();const Qi=new tr(ne,"POST",function Gn(ki,io){const ea=_i(ki,["active","final"]),$a=Wt.current+Un,pa=de.size();let Uo;return Uo="final"===ea?qn(j,et)(ki,io):null,new Ns($a,pa,"final"===ea,Uo)},j.maxUploadRetryTime);return Qi.headers=Nr,Qi.body=wi.uploadData(),Qi.progressCallback=nn||null,Qi.errorHandler=On(W),Qi}(this._ref._location,this._ref.storage,de,this._blob,j,this._mappings,ne,this._makeProgressCallback())}catch(Wt){return this._error=Wt,void this._transition("error")}const nn=this._ref.storage._makeRequest(St,Hr,Ce,et);this._request=nn,nn.getPromise().then(Wt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Wt.current),Wt.finalized?(this._metadata=Wt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((j,ne)=>{const de=es(this._ref.storage,this._ref._location,this._mappings),Ce=this._ref.storage._makeRequest(de,Hr,j,ne);this._request=Ce,Ce.getPromise().then(et=>{this._request=void 0,this._metadata=et,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((j,ne)=>{const de=function vs(W,j,ne,de,Ce){const et=j.bucketOnlyServerUrl(),St={"X-Goog-Upload-Protocol":"multipart"},Wt=function nn(){let Qi="";for(let ki=0;ki<2;ki++)Qi+=Math.random().toString().slice(2);return Qi}();St["Content-Type"]="multipart/related; boundary="+Wt;const Fn=Yi(j,de,Ce),Un=gi(Fn,ne),oi=zt.getBlob("--"+Wt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Un+"\r\n--"+Wt+"\r\nContent-Type: "+Fn.contentType+"\r\n\r\n",de,"\r\n--"+Wt+"--");if(null===oi)throw lt();const Nr={name:Fn.fullPath},wi=hn(et,W.host,W._protocol),Fs=W.maxUploadRetryTime,Zs=new tr(wi,"POST",qn(W,ne),Fs);return Zs.urlParams=Nr,Zs.headers=St,Zs.body=oi.uploadData(),Zs.errorHandler=On(j),Zs}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ce=this._ref.storage._makeRequest(de,Hr,j,ne);this._request=Ce,Ce.getPromise().then(et=>{this._request=void 0,this._metadata=et,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(j){const ne=this._transferred;this._transferred=j,this._transferred!==ne&&this._notifyObservers()}_transition(j){if(this._state!==j)switch(j){case"canceling":case"pausing":this._state=j,void 0!==this._request&&this._request.cancel();break;case"running":const ne="paused"===this._state;this._state=j,ne&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=j,this._notifyObservers();break;case"canceled":this._error=mt(),this._state=j,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const j=Si(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:j,metadata:this._metadata,task:this,ref:this._ref}}on(j,ne,de,Ce){const et=new ci(ne||void 0,de||void 0,Ce||void 0);return this._addObserver(et),()=>{this._removeObserver(et)}}then(j,ne){return this._promise.then(j,ne)}catch(j){return this.then(null,j)}_addObserver(j){this._observers.push(j),this._notifyObserver(j)}_removeObserver(j){const ne=this._observers.indexOf(j);-1!==ne&&this._observers.splice(ne,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(ne=>{this._notifyObserver(ne)})}_finishPromise(){if(void 0!==this._resolve){let j=!0;switch(Si(this._state)){case Qr.SUCCESS:di(this._resolve.bind(null,this.snapshot))();break;case Qr.CANCELED:case Qr.ERROR:di(this._reject.bind(null,this._error))();break;default:j=!1}j&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(j){switch(Si(this._state)){case Qr.RUNNING:case Qr.PAUSED:j.next&&di(j.next.bind(j,this.snapshot))();break;case Qr.SUCCESS:j.complete&&di(j.complete.bind(j))();break;default:j.error&&di(j.error.bind(j,this._error))()}}resume(){const j="paused"===this._state||"pausing"===this._state;return j&&this._transition("running"),j}pause(){const j="running"===this._state;return j&&this._transition("pausing"),j}cancel(){const j="running"===this._state||"pausing"===this._state;return j&&this._transition("canceling"),j}}class ts{constructor(j,ne){this._service=j,this._location=ne instanceof Ln?ne:Ln.makeFromUrl(ne,j.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(j,ne){return new ts(j,ne)}get root(){const j=new Ln(this._location.bucket,"");return this._newRef(this._service,j)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xr(this._location.path)}get storage(){return this._service}get parent(){const j=function Dr(W){if(0===W.length)return null;const j=W.lastIndexOf("/");return-1===j?"":W.slice(0,j)}(this._location.path);if(null===j)return null;const ne=new Ln(this._location.bucket,j);return new ts(this._service,ne)}_throwIfRoot(j){if(""===this._location.path)throw mn(j)}}function mr(W,j,ne){return $r.apply(this,arguments)}function $r(){return($r=(0,ht.Z)(function*(W,j,ne){const Ce=yield rr(W,{pageToken:ne});j.prefixes.push(...Ce.prefixes),j.items.push(...Ce.items),null!=Ce.nextPageToken&&(yield mr(W,j,Ce.nextPageToken))})).apply(this,arguments)}function rr(W,j){null!=j&&"number"==typeof j.maxResults&&Rn("options.maxResults",1,1e3,j.maxResults);const ne=j||{},de=jr(W.storage,W._location,"/",ne.pageToken,ne.maxResults);return W.storage.makeRequestWithTokens(de,Hr)}function Oi(W){W._throwIfRoot("getDownloadURL");const j=function gr(W,j,ne){const Ce=hn(j.fullServerUrl(),W.host,W._protocol),St=W.maxOperationRetryTime,nn=new tr(Ce,"GET",function Yt(W,j){return function ne(de,Ce){const et=Di(W,Ce,j);return Kr(null!==et),function er(W,j,ne,de){const Ce=an(j);if(null===Ce||!Yn(Ce.downloadTokens))return null;const et=Ce.downloadTokens;if(0===et.length)return null;const St=encodeURIComponent;return et.split(",").map(Fn=>{const lr=W.fullPath;return hn("/b/"+St(W.bucket)+"/o/"+St(lr),ne,de)+Zi({alt:"media",token:Fn})})[0]}(et,Ce,W.host,W._protocol)}}(W,ne),St);return nn.errorHandler=Br(j),nn}(W.storage,W._location,Tn());return W.storage.makeRequestWithTokens(j,Hr).then(ne=>{if(null===ne)throw function Kt(){return new ze("no-download-url","The given file does not have any download URLs.")}();return ne})}function ws(W,j){const ne=function _n(W,j){const ne=j.split("/").filter(de=>de.length>0).join("/");return 0===W.length?ne:W+"/"+ne}(W._location.path,j),de=new Ln(W._location.bucket,ne);return new ts(W.storage,de)}function fa(W,j){if(W instanceof Ps){const ne=W;if(null==ne._bucket)throw function Ot(){return new ze("no-default-bucket","No default bucket found. Did you set the '"+ct+"' property when initializing the app?")}();const de=new ts(ne,ne._bucket);return null!=j?fa(de,j):de}return void 0!==j?ws(W,j):W}function si(W,j){if(j&&function qs(W){return/^[A-Za-z]+:\/\//.test(W)}(j)){if(W instanceof Ps)return function Jo(W,j){return new ts(W,j)}(W,j);throw qt("To use ref(service, url), the first argument must be a Storage instance.")}return fa(W,j)}function bs(W,j){const ne=null==j?void 0:j[ct];return null==ne?null:Ln.makeFromBucketSpec(ne,W)}class Ps{constructor(j,ne,de,Ce,et){this.app=j,this._authProvider=ne,this._appCheckProvider=de,this._url=Ce,this._firebaseVersion=et,this._bucket=null,this._host=Lt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Ce?Ln.makeFromBucketSpec(Ce,this._host):bs(this._host,this.app.options)}get host(){return this._host}set host(j){this._host=j,this._bucket=null!=this._url?Ln.makeFromBucketSpec(this._url,j):bs(j,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(j){Rn("time",0,Number.POSITIVE_INFINITY,j),this._maxUploadRetryTime=j}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(j){Rn("time",0,Number.POSITIVE_INFINITY,j),this._maxOperationRetryTime=j}_getAuthToken(){var j=this;return(0,ht.Z)(function*(){if(j._overrideAuthToken)return j._overrideAuthToken;const ne=j._authProvider.getImmediate({optional:!0});if(ne){const de=yield ne.getToken();if(null!==de)return de.accessToken}return null})()}_getAppCheckToken(){var j=this;return(0,ht.Z)(function*(){const ne=j._appCheckProvider.getImmediate({optional:!0});return ne?(yield ne.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(j=>j.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(j){return new ts(this,j)}_makeRequest(j,ne,de,Ce){if(this._deleted)return new pr(Ht());{const et=function tn(W,j,ne,de,Ce,et){const St=Zi(W.urlParams),nn=W.url+St,Wt=Object.assign({},W.headers);return function Bt(W,j){j&&(W["X-Firebase-GMPID"]=j)}(Wt,j),function Hi(W,j){null!==j&&j.length>0&&(W.Authorization="Firebase "+j)}(Wt,ne),function Lr(W,j){W["X-Firebase-Storage-Version"]="webjs/"+(null!=j?j:"AppManager")}(Wt,et),function Xt(W,j){null!==j&&(W["X-Firebase-AppCheck"]=j)}(Wt,de),new fi(nn,W.method,Wt,W.body,W.successCodes,W.additionalRetryCodes,W.handler,W.errorHandler,W.timeout,W.progressCallback,Ce)}(j,this._appId,de,Ce,ne,this._firebaseVersion);return this._requests.add(et),et.getPromise().then(()=>this._requests.delete(et),()=>this._requests.delete(et)),et}}makeRequestWithTokens(j,ne){var de=this;return(0,ht.Z)(function*(){const[Ce,et]=yield Promise.all([de._getAuthToken(),de._getAppCheckToken()]);return de._makeRequest(j,ne,Ce,et).getPromise()})()}}const Fo="@firebase/storage";function rs(W,j){return si(W=(0,ot.m9)(W),j)}function X(W,{instanceIdentifier:j}){const ne=W.getProvider("app").getImmediate(),de=W.getProvider("auth-internal"),Ce=W.getProvider("app-check-internal");return new Ps(ne,de,Ce,j,Xe.SDK_VERSION)}!function V(){(0,Xe._registerComponent)(new Oe.wA("storage",X,"PUBLIC").setMultipleInstances(!0)),(0,Xe.registerVersion)(Fo,"0.9.6",""),(0,Xe.registerVersion)(Fo,"0.9.6","esm2017")}();class ae{constructor(j,ne,de){this._delegate=j,this.task=ne,this.ref=de}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ve{constructor(j,ne){this._delegate=j,this._ref=ne,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ae(this._delegate.snapshot,this,this._ref)}then(j,ne){return this._delegate.then(de=>{if(j)return j(new ae(de,this,this._ref))},ne)}on(j,ne,de,Ce){let et;return ne&&(et="function"==typeof ne?St=>ne(new ae(St,this,this._ref)):{next:ne.next?St=>ne.next(new ae(St,this,this._ref)):void 0,complete:ne.complete||void 0,error:ne.error||void 0}),this._delegate.on(j,et,de||void 0,Ce||void 0)}}class st{constructor(j,ne){this._delegate=j,this._service=ne}get prefixes(){return this._delegate.prefixes.map(j=>new vt(j,this._service))}get items(){return this._delegate.items.map(j=>new vt(j,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class vt{constructor(j,ne){this._delegate=j,this.storage=ne}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(j){const ne=function ks(W,j){return ws(W,j)}(this._delegate,j);return new vt(ne,this.storage)}get root(){return new vt(this._delegate.root,this.storage)}get parent(){const j=this._delegate.parent;return null==j?null:new vt(j,this.storage)}put(j,ne){return this._throwIfRoot("put"),new ve(function Co(W,j,ne){return function bt(W,j,ne){return W._throwIfRoot("uploadBytesResumable"),new cs(W,new zt(j),ne)}(W=(0,ot.m9)(W),j,ne)}(this._delegate,j,ne),this)}putString(j,ne=dr.RAW,de){this._throwIfRoot("putString");const Ce=ye(ne,j),et=Object.assign({},de);return null==et.contentType&&null!=Ce.contentType&&(et.contentType=Ce.contentType),new ve(new cs(this._delegate,new zt(Ce.data,!0),et),this)}listAll(){return function Lo(W){return function Zt(W){const j={prefixes:[],items:[]};return mr(W,j).then(()=>j)}(W=(0,ot.m9)(W))}(this._delegate).then(j=>new st(j,this.storage))}list(j){return function Ai(W,j){return rr(W=(0,ot.m9)(W),j)}(this._delegate,j||void 0).then(ne=>new st(ne,this.storage))}getMetadata(){return function vi(W){return function ns(W){W._throwIfRoot("getMetadata");const j=es(W.storage,W._location,Tn());return W.storage.makeRequestWithTokens(j,Hr)}(W=(0,ot.m9)(W))}(this._delegate)}updateMetadata(j){return function Ws(W,j){return function wo(W,j){W._throwIfRoot("updateMetadata");const ne=function $i(W,j,ne,de){const et=hn(j.fullServerUrl(),W.host,W._protocol),nn=gi(ne,de),Fn=W.maxOperationRetryTime,Un=new tr(et,"PATCH",qn(W,de),Fn);return Un.headers={"Content-Type":"application/json; charset=utf-8"},Un.body=nn,Un.errorHandler=Br(j),Un}(W.storage,W._location,j,Tn());return W.storage.makeRequestWithTokens(ne,Hr)}(W=(0,ot.m9)(W),j)}(this._delegate,j)}getDownloadURL(){return function Ts(W){return Oi(W=(0,ot.m9)(W))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function To(W){return function ko(W){W._throwIfRoot("deleteObject");const j=function Rr(W,j){const de=hn(j.fullServerUrl(),W.host,W._protocol),nn=new tr(de,"DELETE",function St(Wt,Fn){},W.maxOperationRetryTime);return nn.successCodes=[200,204],nn.errorHandler=Br(j),nn}(W.storage,W._location);return W.storage.makeRequestWithTokens(j,Hr)}(W=(0,ot.m9)(W))}(this._delegate)}_throwIfRoot(j){if(""===this._delegate._location.path)throw mn(j)}}class en{constructor(j,ne){this.app=j,this._delegate=ne}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(j){if(ln(j))throw qt("ref() expected a child path but got a URL, use refFromURL instead.");return new vt(rs(this._delegate,j),this)}refFromURL(j){if(!ln(j))throw qt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ln.makeFromUrl(j,this._delegate.host)}catch(ne){throw qt("refFromUrl() expected a valid full URL but got an invalid one.")}return new vt(rs(this._delegate,j),this)}setMaxUploadRetryTime(j){this._delegate.maxUploadRetryTime=j}setMaxOperationRetryTime(j){this._delegate.maxOperationRetryTime=j}useEmulator(j,ne,de={}){!function fo(W,j,ne,de={}){!function Cs(W,j,ne,de={}){W.host=`${j}:${ne}`,W._protocol="http";const{mockUserToken:Ce}=de;Ce&&(W._overrideAuthToken="string"==typeof Ce?Ce:(0,ot.Sg)(Ce,W.app.options.projectId))}(W,j,ne,de)}(this._delegate,j,ne,de)}}function ln(W){return/^[A-Za-z]+:\/\//.test(W)}function Jr(W,{instanceIdentifier:j}){const ne=W.getProvider("app-compat").getImmediate(),de=W.getProvider("storage").getImmediate({identifier:j});return new en(ne,de)}!function br(W){const j={TaskState:Qr,TaskEvent:nr,StringFormat:dr,Storage:en,Reference:vt};W.INTERNAL.registerComponent(new Oe.wA("storage-compat",Jr,"PUBLIC").setServiceProps(j).setMultipleInstances(!0)),W.registerVersion("@firebase/storage-compat","0.1.14")}(rt.Z);var Gr=$(440);function un(W){const j=function qi(W){return new z.y(j=>{const ne=St=>j.next(St);ne(W.snapshot);const et=W.on("state_changed",ne);return W.then(St=>{ne(St),j.complete()},St=>{ne(W.snapshot),(St=>{j.error(St)})(St)}),function(){et()}}).pipe(function ue(W,j=ke.z){return(0,Ge.e)((ne,de)=>{let Ce=null,et=null,St=null;const nn=()=>{if(Ce){Ce.unsubscribe(),Ce=null;const Fn=et;et=null,de.next(Fn)}};function Wt(){const Fn=St+W,Un=j.now();if(Un<Fn)return Ce=this.schedule(void 0,Fn-Un),void de.add(Ce);nn()}ne.subscribe((0,pe.x)(de,Fn=>{et=Fn,St=j.now(),Ce||(Ce=j.schedule(Wt,W),de.add(Ce))},()=>{nn(),de.complete()},void 0,()=>{et=Ce=null}))})}(0))}(W);return{task:W,then:W.then.bind(W),catch:W.catch.bind(W),pause:W.pause.bind(W),cancel:W.cancel.bind(W),resume:W.resume.bind(W),snapshotChanges:()=>j,percentageChanges:()=>j.pipe((0,w.U)(ne=>ne.bytesTransferred/ne.totalBytes*100))}}function Wi(W){return{getDownloadURL:()=>(0,De.of)(void 0).pipe(Tt.fc,(0,Pe.w)(()=>W.getDownloadURL()),Tt.iC),getMetadata:()=>(0,De.of)(void 0).pipe(Tt.fc,(0,Pe.w)(()=>W.getMetadata()),Tt.iC),delete:()=>(0,Ve.D)(W.delete()),child:j=>Wi(W.child(j)),updateMetadata:j=>(0,Ve.D)(W.updateMetadata(j)),put:(j,ne)=>un(W.put(j,ne)),putString:(j,ne,de)=>un(W.putString(j,ne,de)),list:j=>(0,Ve.D)(W.list(j)),listAll:()=>(0,Ve.D)(W.listAll())}}$(127);const Xo=new ie.OlP("angularfire2.storageBucket"),po=new ie.OlP("angularfire2.storage.maxUploadRetryTime"),ro=new ie.OlP("angularfire2.storage.maxOperationRetryTime"),G=new ie.OlP("angularfire2.storage.use-emulator");let U=(()=>{class W{constructor(ne,de,Ce,et,St,nn,Wt,Fn,Un,lr){const _r=(0,Ke.on)(ne,St,de);this.storage=(0,Ke.cc)(`${_r.name}.storage.${Ce}`,"AngularFireStorage",_r.name,()=>{const oi=St.runOutsideAngular(()=>_r.storage(Ce||void 0)),Nr=Un;return Nr&&oi.useEmulator(...Nr),Wt&&oi.setMaxUploadRetryTime(Wt),Fn&&oi.setMaxOperationRetryTime(Fn),oi},[Wt,Fn])}ref(ne){return Wi(this.storage.ref(ne))}refFromURL(ne){return Wi(this.storage.refFromURL(ne))}upload(ne,de,Ce){return Wi(this.storage.ref(ne)).put(de,Ce)}}return W.\u0275fac=function(ne){return new(ne||W)(ie.LFG(Ke.Dh),ie.LFG(Ke.xv,8),ie.LFG(Xo,8),ie.LFG(ie.Lbi),ie.LFG(ie.R0b),ie.LFG(Tt.HU),ie.LFG(po,8),ie.LFG(ro,8),ie.LFG(G,8),ie.LFG(Gr.nm,8))},W.\u0275prov=ie.Yz7({token:W,factory:W.\u0275fac,providedIn:"any"}),W})(),Dt=(()=>{class W{constructor(ne,de){this.db=ne,this.storage=de,this.dbPathUsuarios="usuariosClinica",this.dbPathEspecialidades="especialidades",this.getUsuario=Ce=>this.db.collection(this.dbPathUsuarios).doc(Ce).get(),this.cargarUsuarios(),this.cargarEspecialidades()}addUsuario(ne,de){console.log(this.usuariosCollection),this.usuariosCollection.add({nombre:ne.nombre,apellido:ne.apellido,edad:ne.edad,DNI:ne.DNI,email:ne.email,password:ne.password,tipoUsuario:ne.tipoUsuario,obraSocial:ne.obraSocial,especialidad:ne.especialidades,administrador:ne.administrador,especilista:ne.especialista,paciente:ne.paciente,img1Nombre:de.nombre,img1Url:de.url})}cargarUsuarios(){this.usuariosCollection=this.db.collection(this.dbPathUsuarios),this.usuarios=this.usuariosCollection.snapshotChanges().pipe((0,w.U)(ne=>ne.map(de=>{const Ce=de.payload.doc.data();return Ce.id=de.payload.doc.id,Ce})))}onUpload(ne,de){this.storage.ref(ne),this.storage.upload(ne,de)}uploadUsuarioImg(ne,de){const Ce=`${this.dbPathUsuarios}/${ne.file.name}`,et=this.storage.ref(Ce),St=this.storage.upload(Ce,ne.file);return St.snapshotChanges().pipe((0,m.x)(()=>{et.getDownloadURL().subscribe(nn=>{ne.url=nn,ne.nombre=ne.file.name,this.addUsuario(de,ne)})})).subscribe(),St.percentageChanges()}deleteFile(ne){this.deleteFileStorage(ne.nombre)}deleteFileStorage(ne){this.storage.ref(this.dbPathUsuarios).child(ne).delete()}updateUsuario(ne){this.db.collection(this.dbPathUsuarios).doc(ne.id).update({aprobado:ne.especialista})}updateUsuarioEspecialista(ne){this.db.collection(this.dbPathUsuarios).doc(ne.id).update({habilitado:ne.habilitado})}getUsuarios(){return this.usuarios}cargarEspecialidades(){this.especialidadesCollection=this.db.collection(this.dbPathEspecialidades),this.usuarios=this.usuariosCollection.snapshotChanges().pipe((0,w.U)(ne=>ne.map(de=>{const Ce=de.payload.doc.data();return Ce.id=de.payload.doc.id,Ce}))),this.especialidades=this.especialidadesCollection.snapshotChanges().pipe((0,w.U)(ne=>ne.map(de=>de.payload.doc.data()))),console.log(this.especialidadesCollection)}addEspecilidad(ne){this.especialidadesCollection.add({nombre:ne})}getEspecialidades(){return this.especialidades}}return W.\u0275fac=function(ne){return new(ne||W)(ie.LFG(Fe.ST),ie.LFG(U))},W.\u0275prov=ie.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})()},7158:(Ut,We,$)=>{var w=$(9808),m=$(5e3);class ie extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Fe extends ie{static makeCurrent(){(0,w.HT)(new Fe)}onAndCancel(i,n,c){return i.addEventListener(n,c,!1),()=>{i.removeEventListener(n,c,!1)}}dispatchEvent(i,n){i.dispatchEvent(n)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,n){return(n=n||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,n){return"window"===n?window:"document"===n?i:"body"===n?i.body:null}getBaseHref(i){const n=function De(){return z=z||document.querySelector("base"),z?z.getAttribute("href"):null}();return null==n?null:function ke(u){Ve=Ve||document.createElement("a"),Ve.setAttribute("href",u);const i=Ve.pathname;return"/"===i.charAt(0)?i:`/${i}`}(n)}resetBaseElement(){z=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return(0,w.Mx)(document.cookie,i)}}let Ve,z=null;const Ge=new m.OlP("TRANSITION_ID"),ue=[{provide:m.ip1,useFactory:function pe(u,i,n){return()=>{n.get(m.CZH).donePromise.then(()=>{const c=(0,w.q)(),f=i.querySelectorAll(`style[ng-transition="${u}"]`);for(let E=0;E<f.length;E++)c.remove(f[E])})}},deps:[Ge,w.K0,m.zs3],multi:!0}];class Pe{static init(){(0,m.VLi)(new Pe)}addToWindow(i){m.dqk.getAngularTestability=(c,f=!0)=>{const E=i.findTestabilityInTree(c,f);if(null==E)throw new Error("Could not find testability for element.");return E},m.dqk.getAllAngularTestabilities=()=>i.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>i.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(c=>{const f=m.dqk.getAllAngularTestabilities();let E=f.length,I=!1;const O=function(q){I=I||q,E--,0==E&&c(I)};f.forEach(function(q){q.whenStable(O)})})}findTestabilityInTree(i,n,c){if(null==n)return null;const f=i.getTestability(n);return null!=f?f:c?(0,w.q)().isShadowRoot(n)?this.findTestabilityInTree(i,n.host,!0):this.findTestabilityInTree(i,n.parentElement,!0):null}}let Tt=(()=>{class u{build(){return new XMLHttpRequest}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();const Ke=new m.OlP("EventManagerPlugins");let rt=(()=>{class u{constructor(n,c){this._zone=c,this._eventNameToPlugin=new Map,n.forEach(f=>f.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,c,f){return this._findPluginFor(c).addEventListener(n,c,f)}addGlobalEventListener(n,c,f){return this._findPluginFor(c).addGlobalEventListener(n,c,f)}getZone(){return this._zone}_findPluginFor(n){const c=this._eventNameToPlugin.get(n);if(c)return c;const f=this._plugins;for(let E=0;E<f.length;E++){const I=f[E];if(I.supports(n))return this._eventNameToPlugin.set(n,I),I}throw new Error(`No event manager plugin found for event ${n}`)}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(Ke),m.LFG(m.R0b))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();class ht{constructor(i){this._doc=i}addGlobalEventListener(i,n,c){const f=(0,w.q)().getGlobalEventTarget(this._doc,i);if(!f)throw new Error(`Unsupported event target ${f} for event ${n}`);return this.addEventListener(f,n,c)}}let Xe=(()=>{class u{constructor(){this._stylesSet=new Set}addStyles(n){const c=new Set;n.forEach(f=>{this._stylesSet.has(f)||(this._stylesSet.add(f),c.add(f))}),this.onStylesAdded(c)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})(),ot=(()=>{class u extends Xe{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,c,f){n.forEach(E=>{const I=this._doc.createElement("style");I.textContent=E,f.push(c.appendChild(I))})}addHost(n){const c=[];this._addStylesToHost(this._stylesSet,n,c),this._hostNodes.set(n,c)}removeHost(n){const c=this._hostNodes.get(n);c&&c.forEach(Oe),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((c,f)=>{this._addStylesToHost(n,f,c)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Oe))}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(w.K0))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();function Oe(u){(0,w.q)().remove(u)}const Lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ct=/%COMP%/g;function me(u,i,n){for(let c=0;c<i.length;c++){let f=i[c];Array.isArray(f)?me(u,f,n):(f=f.replace(ct,u),n.push(f))}return n}function je(u){return i=>{if("__ngUnwrap__"===i)return u;!1===u(i)&&(i.preventDefault(),i.returnValue=!1)}}let tt=(()=>{class u{constructor(n,c,f){this.eventManager=n,this.sharedStylesHost=c,this.appId=f,this.rendererByCompId=new Map,this.defaultRenderer=new Me(n)}createRenderer(n,c){if(!n||!c)return this.defaultRenderer;switch(c.encapsulation){case m.ifc.Emulated:{let f=this.rendererByCompId.get(c.id);return f||(f=new ft(this.eventManager,this.sharedStylesHost,c,this.appId),this.rendererByCompId.set(c.id,f)),f.applyToHost(n),f}case 1:case m.ifc.ShadowDom:return new Ot(this.eventManager,this.sharedStylesHost,n,c);default:if(!this.rendererByCompId.has(c.id)){const f=me(c.id,c.styles,[]);this.sharedStylesHost.addStyles(f),this.rendererByCompId.set(c.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(rt),m.LFG(ot),m.LFG(m.AFp))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();class Me{constructor(i){this.eventManager=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,n){return n?document.createElementNS(Lt[n]||n,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,n){i.appendChild(n)}insertBefore(i,n,c){i&&i.insertBefore(n,c)}removeChild(i,n){i&&i.removeChild(n)}selectRootElement(i,n){let c="string"==typeof i?document.querySelector(i):i;if(!c)throw new Error(`The selector "${i}" did not match any elements`);return n||(c.textContent=""),c}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,n,c,f){if(f){n=f+":"+n;const E=Lt[f];E?i.setAttributeNS(E,n,c):i.setAttribute(n,c)}else i.setAttribute(n,c)}removeAttribute(i,n,c){if(c){const f=Lt[c];f?i.removeAttributeNS(f,n):i.removeAttribute(`${c}:${n}`)}else i.removeAttribute(n)}addClass(i,n){i.classList.add(n)}removeClass(i,n){i.classList.remove(n)}setStyle(i,n,c,f){f&(m.JOm.DashCase|m.JOm.Important)?i.style.setProperty(n,c,f&m.JOm.Important?"important":""):i.style[n]=c}removeStyle(i,n,c){c&m.JOm.DashCase?i.style.removeProperty(n):i.style[n]=""}setProperty(i,n,c){i[n]=c}setValue(i,n){i.nodeValue=n}listen(i,n,c){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,n,je(c)):this.eventManager.addEventListener(i,n,je(c))}}class ft extends Me{constructor(i,n,c,f){super(i),this.component=c;const E=me(f+"-"+c.id,c.styles,[]);n.addStyles(E),this.contentAttr=function le(u){return"_ngcontent-%COMP%".replace(ct,u)}(f+"-"+c.id),this.hostAttr=function ut(u){return"_nghost-%COMP%".replace(ct,u)}(f+"-"+c.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,n){const c=super.createElement(i,n);return super.setAttribute(c,this.contentAttr,""),c}}class Ot extends Me{constructor(i,n,c,f){super(i),this.sharedStylesHost=n,this.hostEl=c,this.shadowRoot=c.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const E=me(f.id,f.styles,[]);for(let I=0;I<E.length;I++){const O=document.createElement("style");O.textContent=E[I],this.shadowRoot.appendChild(O)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,n){return super.appendChild(this.nodeOrShadowRoot(i),n)}insertBefore(i,n,c){return super.insertBefore(this.nodeOrShadowRoot(i),n,c)}removeChild(i,n){return super.removeChild(this.nodeOrShadowRoot(i),n)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let lt=(()=>{class u extends ht{constructor(n){super(n)}supports(n){return!0}addEventListener(n,c,f){return n.addEventListener(c,f,!1),()=>this.removeEventListener(n,c,f)}removeEventListener(n,c,f){return n.removeEventListener(c,f)}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(w.K0))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();const dn=["alt","control","meta","shift"],qt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ht={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mn={alt:u=>u.altKey,control:u=>u.ctrlKey,meta:u=>u.metaKey,shift:u=>u.shiftKey};let wn=(()=>{class u extends ht{constructor(n){super(n)}supports(n){return null!=u.parseEventName(n)}addEventListener(n,c,f){const E=u.parseEventName(c),I=u.eventCallback(E.fullKey,f,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(n,E.domEventName,I))}static parseEventName(n){const c=n.toLowerCase().split("."),f=c.shift();if(0===c.length||"keydown"!==f&&"keyup"!==f)return null;const E=u._normalizeKey(c.pop());let I="";if(dn.forEach(q=>{const te=c.indexOf(q);te>-1&&(c.splice(te,1),I+=q+".")}),I+=E,0!=c.length||0===E.length)return null;const O={};return O.domEventName=f,O.fullKey=I,O}static getEventFullKey(n){let c="",f=function vn(u){let i=u.key;if(null==i){if(i=u.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===u.location&&Ht.hasOwnProperty(i)&&(i=Ht[i]))}return qt[i]||i}(n);return f=f.toLowerCase()," "===f?f="space":"."===f&&(f="dot"),dn.forEach(E=>{E!=f&&mn[E](n)&&(c+=E+".")}),c+=f,c}static eventCallback(n,c,f){return E=>{u.getEventFullKey(E)===n&&f.runGuarded(()=>c(E))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(w.K0))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();const ni=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:w.bD},{provide:m.g9A,useValue:function Ln(){Fe.makeCurrent(),Pe.init()},multi:!0},{provide:w.K0,useFactory:function kr(){return(0,m.RDi)(document),document},deps:[]}]),ar=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function pr(){return new m.qLn},deps:[]},{provide:Ke,useClass:lt,multi:!0,deps:[w.K0,m.R0b,m.Lbi]},{provide:Ke,useClass:wn,multi:!0,deps:[w.K0]},{provide:tt,useClass:tt,deps:[rt,ot,m.AFp]},{provide:m.FYo,useExisting:tt},{provide:Xe,useExisting:ot},{provide:ot,useClass:ot,deps:[w.K0]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:rt,useClass:rt,deps:[Ke,m.R0b]},{provide:w.JF,useClass:Tt,deps:[]}];let Mr=(()=>{class u{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:u,providers:[{provide:m.AFp,useValue:n.appId},{provide:Ge,useExisting:m.AFp},ue]}}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(u,12))},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:ar,imports:[w.ez,m.hGG]}),u})();"undefined"!=typeof window&&window;var ui=$(832),Ii=$(7556);function Tn(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"div")(1,"div",4)(2,"button",5),m.NdJ("click",function(){return m.CHM(n),m.oxw().goIngreso()}),m._uU(3,"Entrar"),m.qZA()(),m.TgZ(4,"div",4)(5,"button",5),m.NdJ("click",function(){return m.CHM(n),m.oxw().goRegistro()}),m._uU(6,"Registrarse"),m.qZA()()()}}let Vr=(()=>{class u{constructor(n,c){this.router=n,this.authSvc=c,this.islogged=!1}ngOnInit(){console.log(this.authSvc.isLoggedIn),this.islogged=!!this.authSvc.isLoggedIn,console.log(this.islogged)}goIngreso(){this.router.navigate(["ingreso/login"])}goRegistro(){this.router.navigate(["ingreso/registro"])}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(ui.F0),m.Y36(Ii.e))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-bienvenida"]],decls:4,vars:1,consts:[[1,"container"],[1,"row","text-center"],["id","img","src","../../../assets/cruzVerde.jpg","alt","",1,"mb-4","pt-4"],[4,"ngIf"],[1,"col-12"],["type","button",1,"btn","btn-lg","btn-success","m-4",3,"click"]],template:function(n,c){1&n&&(m.TgZ(0,"div",0)(1,"div",1),m._UZ(2,"img",2),m.YNc(3,Tn,7,0,"div",3),m.qZA()()),2&n&&(m.xp6(3),m.Q6J("ngIf",!c.islogged))},directives:[w.O5],styles:["#img[_ngcontent-%COMP%]{height:200px;width:200px;display:block;margin:auto}"]}),u})();var hr=$(2382);class Di{}var er=$(4004),gi=$(7407);let $s=(()=>{class u{constructor(n){this.db=n,this.dbPathHorarios="horarios",this.cargarHorarios()}cargarHorarios(){this.horariosCollection=this.db.collection(this.dbPathHorarios),this.horarios=this.horariosCollection.snapshotChanges().pipe((0,er.U)(n=>n.map(c=>{const f=c.payload.doc.data();return f.idEspecialista=c.payload.doc.id,f})))}getHorarios(){return this.horarios}addHorario(n){console.log(n),this.horariosCollection.add({idEspecialista:n.idEspecialista,horarioLunes:n.horarioLunes,horarioMartes:n.horarioMartes,horarioMiercoles:n.horarioMiercoles,horarioJueves:n.horarioJueves,horarioViernes:n.horarioViernes,horarioSabado:n.horarioSabado})}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(gi.ST))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function Rs(u,i){if(1&u&&(m.TgZ(0,"option",27),m._uU(1),m.qZA()),2&u){const n=i.$implicit;m.Q6J("value",n),m.xp6(1),m.hij(" ",n,"")}}function Xi(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Debes seleccionar una Especialidad."),m.qZA())}function mi(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function tr(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function Kr(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function qn(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function Mt(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function Yt(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function On(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function Br(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function es(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function jr(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function Ki(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function gr(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function $i(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function Rr(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function Mn(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function Yi(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function vs(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function Ns(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function _i(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 19PM."),m.qZA())}function Wr(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function ei(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 14PM."),m.qZA())}function ii(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}function Yr(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," El rango horario es de 9AM a 14PM."),m.qZA())}function nr(u,i){1&u&&(m.TgZ(0,"span",28),m._uU(1," Los minutos permitidos son 00 o 30."),m.qZA())}let Qr=(()=>{class u{constructor(n,c){this.fv=n,this.horarioSvc=c,this.formulario=n.group({especialidad:["",hr.kI.required],lunesHoraDesde:["",[this.validarMinutos,this.validarHora]],lunesHoraHasta:["",[this.validarMinutos,this.validarHora]],martesHoraDesde:["",[this.validarMinutos,this.validarHora]],martesHoraHasta:["",[this.validarMinutos,this.validarHora]],miercolesHoraDesde:["",[this.validarMinutos,this.validarHora]],miercolesHoraHasta:["",[this.validarMinutos,this.validarHora]],juevesHoraDesde:["",[this.validarMinutos,this.validarHora]],juevesHoraHasta:["",[this.validarMinutos,this.validarHora]],viernesHoraDesde:["",[this.validarMinutos,this.validarHora]],viernesHoraHasta:["",[this.validarMinutos,this.validarHora]],sabadoHoraDesde:["",[this.validarMinutos,this.validarSabadoHora]],sabadoHoraHasta:["",[this.validarMinutos,this.validarSabadoHora]]})}ngOnInit(){}validarMinutos(n){const c=n.value;if(""!=c){var f=c.split(":")[1],E=f.includes("00"),I=f.includes("30");if(E||I)return null;if(!E&&!I)return{minValido:!0}}return null}validarHora(n){const c=n.value;if(""!=c){var f=c.split(":")[0];if(f<=8||f>19)return{horaValido:!0}}return null}validarSabadoHora(n){const c=n.value;if(""!=c){var f=c.split(":")[0];if(f<=8||f>14)return{horaValido:!0}}return null}registrar(){console.log(this.formulario),this.horario=new Di,this.horario.idEspecialista=this.usuarioHorarios.id,this.horario.horarioLunes=[{desde:this.formulario.controls.lunesHoraDesde.value,hasta:this.formulario.controls.lunesHoraHasta.value}],this.horario.horarioMartes=[{desde:this.formulario.controls.martesHoraDesde.value,hasta:this.formulario.controls.martesHoraHasta.value}],this.horario.horarioMiercoles=[{desde:this.formulario.controls.miercolesHoraDesde.value,hasta:this.formulario.controls.miercolesHoraHasta.value}],this.horario.horarioJueves=[{desde:this.formulario.controls.juevesHoraDesde.value,hasta:this.formulario.controls.juevesHoraHasta.value}],this.horario.horarioViernes=[{desde:this.formulario.controls.viernesHoraDesde.value,hasta:this.formulario.controls.viernesHoraHasta.value}],this.horario.horarioSabado=[{desde:this.formulario.controls.sabadoHoraDesde.value,hasta:this.formulario.controls.sabadoHoraHasta.value}],this.horarioSvc.addHorario(this.horario)}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(hr.qu),m.Y36($s))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-mis-horarios"]],inputs:{usuarioHorarios:"usuarioHorarios"},decls:75,vars:29,consts:[[3,"formGroup","ngSubmit"],[1,"container"],[1,"row"],[1,"mb-3","text-center"],[1,"col-md-8","order-md-1"],[1,"col-12","mb-3"],["for","especialidad"],["formControlName","especialidad",1,"custom-select","custom-select-lg","form-control","mb-3",3,"ngModel","ngModelChange"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"col-md-4"],["for","lunes"],["type","time","min","8:00:00","max","19:00:00","id","lunesHoraDesde","formControlName","lunesHoraDesde",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","lunesHoraHasta","formControlName","lunesHoraHasta",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","martesHoraDesde","formControlName","martesHoraDesde",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","martesHoraHasta","formControlName","martesHoraHasta",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","miercolesHoraDesde","formControlName","miercolesHoraDesde",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","miercolesHoraHasta","formControlName","miercolesHoraHasta",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","juevesHoraDesde","formControlName","juevesHoraDesde",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","juevesHoraHasta","formControlName","juevesHoraHasta",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","viernesHoraDesde","formControlName","viernesHoraDesde",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","viernesHoraHasta","formControlName","viernesHoraHasta",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","sabadoHoraDesde","formControlName","sabadoHoraDesde",1,"form-control"],["type","time","min","8:00:00","max","19:00:00","id","sabadoHoraHasta","formControlName","sabadoHoraHasta",1,"form-control"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[3,"value"],[1,"text-danger"]],template:function(n,c){if(1&n&&(m.TgZ(0,"form",0),m.NdJ("ngSubmit",function(){return c.registrar()}),m.TgZ(1,"div",1)(2,"div",2)(3,"h4",3),m._uU(4,"Alta Horarios"),m.qZA(),m.TgZ(5,"div",4)(6,"div",2)(7,"div",5)(8,"label",6),m._uU(9,"Especialidad"),m.qZA(),m.TgZ(10,"select",7),m.NdJ("ngModelChange",function(E){return c.especialidad=E}),m.TgZ(11,"option",8),m._uU(12,"Selecciona una opci\xf3n"),m.qZA(),m.YNc(13,Rs,2,2,"option",9),m.qZA(),m.YNc(14,Xi,2,0,"span",10),m.TgZ(15,"div",2)(16,"div",11)(17,"label",12),m._uU(18,"Lunes"),m.qZA(),m._UZ(19,"input",13),m.YNc(20,mi,2,0,"span",10),m.YNc(21,tr,2,0,"span",10),m._UZ(22,"input",14),m.YNc(23,Kr,2,0,"span",10),m.YNc(24,qn,2,0,"span",10),m.qZA(),m.TgZ(25,"div",11)(26,"label",12),m._uU(27,"Martes"),m.qZA(),m._UZ(28,"input",15),m.YNc(29,Mt,2,0,"span",10),m.YNc(30,Yt,2,0,"span",10),m._UZ(31,"input",16),m.YNc(32,On,2,0,"span",10),m.YNc(33,Br,2,0,"span",10),m.qZA(),m.TgZ(34,"div",11)(35,"label",12),m._uU(36,"Miercoles"),m.qZA(),m._UZ(37,"input",17),m.YNc(38,es,2,0,"span",10),m.YNc(39,jr,2,0,"span",10),m._UZ(40,"input",18),m.YNc(41,Ki,2,0,"span",10),m.YNc(42,gr,2,0,"span",10),m.qZA()(),m._UZ(43,"br"),m.TgZ(44,"div",2)(45,"div",11)(46,"label",12),m._uU(47,"Jueves"),m.qZA(),m._UZ(48,"input",19),m.YNc(49,$i,2,0,"span",10),m.YNc(50,Rr,2,0,"span",10),m._UZ(51,"input",20),m.YNc(52,Mn,2,0,"span",10),m.YNc(53,Yi,2,0,"span",10),m.qZA(),m.TgZ(54,"div",11)(55,"label",12),m._uU(56,"Viernes"),m.qZA(),m._UZ(57,"input",21),m.YNc(58,vs,2,0,"span",10),m.YNc(59,Ns,2,0,"span",10),m._UZ(60,"input",22),m.YNc(61,_i,2,0,"span",10),m.YNc(62,Wr,2,0,"span",10),m.qZA(),m.TgZ(63,"div",11)(64,"label",12),m._uU(65,"Sabado"),m.qZA(),m._UZ(66,"input",23),m.YNc(67,ei,2,0,"span",10),m.YNc(68,ii,2,0,"span",10),m._UZ(69,"input",24),m.YNc(70,Yr,2,0,"span",10),m.YNc(71,nr,2,0,"span",10),m.qZA()()()(),m._UZ(72,"hr",25),m.TgZ(73,"button",26),m._uU(74,"Registrar"),m.qZA()()()()()),2&n){let f,E,I,O,q,te,Te,Ae,Ze,dt,yt,Gt,Pn,or,Zr,ys,to,Zd,lu,da,uu,qu,Wu,em,cf;m.Q6J("formGroup",c.formulario),m.xp6(10),m.Q6J("ngModel",c.especialidad),m.xp6(3),m.Q6J("ngForOf",c.usuarioHorarios.especialidades),m.xp6(1),m.Q6J("ngIf",(null==(f=c.formulario.get("especialidad"))?null:f.hasError("required"))&&(null==(f=c.formulario.get("especialidad"))?null:f.touched)),m.xp6(6),m.Q6J("ngIf",null==(E=c.formulario.get("lunesHoraDesde"))?null:E.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(I=c.formulario.get("lunesHoraDesde"))?null:I.hasError("minValido")),m.xp6(2),m.Q6J("ngIf",null==(O=c.formulario.get("lunesHoraHasta"))?null:O.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(q=c.formulario.get(""))?null:q.hasError("minValido")),m.xp6(5),m.Q6J("ngIf",null==(te=c.formulario.get("martesHoraDesde"))?null:te.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(Te=c.formulario.get("martesHoraDesde"))?null:Te.hasError("minValido")),m.xp6(2),m.Q6J("ngIf",null==(Ae=c.formulario.get("martesHoraHasta"))?null:Ae.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(Ze=c.formulario.get("martesHoraHasta"))?null:Ze.hasError("minValido")),m.xp6(5),m.Q6J("ngIf",null==(dt=c.formulario.get("miercolesHoraDesde"))?null:dt.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(yt=c.formulario.get("miercolesHoraDesde"))?null:yt.hasError("minValido")),m.xp6(2),m.Q6J("ngIf",null==(Gt=c.formulario.get("miercolesHoraHasta"))?null:Gt.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(Pn=c.formulario.get("miercolesHoraHasta"))?null:Pn.hasError("minValido")),m.xp6(7),m.Q6J("ngIf",null==(or=c.formulario.get("juevesHoraDesde"))?null:or.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(Zr=c.formulario.get("juevesHoraDesde"))?null:Zr.hasError("minValido")),m.xp6(2),m.Q6J("ngIf",null==(ys=c.formulario.get("juevesHoraHasta"))?null:ys.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(to=c.formulario.get("juevesHoraHasta"))?null:to.hasError("minValido")),m.xp6(5),m.Q6J("ngIf",null==(Zd=c.formulario.get("viernesHoraDesde"))?null:Zd.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(lu=c.formulario.get("viernesHoraDesde"))?null:lu.hasError("minValido")),m.xp6(2),m.Q6J("ngIf",null==(da=c.formulario.get("viernesHoraHasta"))?null:da.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(uu=c.formulario.get("viernesHoraHasta"))?null:uu.hasError("minValido")),m.xp6(5),m.Q6J("ngIf",null==(qu=c.formulario.get("sabadoHoraDesde"))?null:qu.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(Wu=c.formulario.get("sabadoHoraDesde"))?null:Wu.hasError("minValido")),m.xp6(2),m.Q6J("ngIf",null==(em=c.formulario.get("sabadoHoraHasta"))?null:em.hasError("horaValido")),m.xp6(1),m.Q6J("ngIf",null==(cf=c.formulario.get("sabadoHoraHasta"))?null:cf.hasError("minValido")),m.xp6(2),m.Q6J("disabled",c.formulario.invalid)}},directives:[hr._Y,hr.JL,hr.sg,hr.EJ,hr.JJ,hr.u,hr.YN,hr.Kr,w.sg,w.O5,hr.Fj],styles:[""]}),u})();function Si(u,i){1&u&&(m.TgZ(0,"div"),m._uU(1,"Administrador"),m.qZA())}function ci(u,i){1&u&&(m.TgZ(0,"div"),m._uU(1,"Especialista"),m.qZA())}function di(u,i){1&u&&(m.TgZ(0,"div"),m._uU(1,"Paciente"),m.qZA())}function no(u,i){if(1&u&&m._UZ(0,"app-mis-horarios",11),2&u){const n=m.oxw(2);m.Q6J("usuarioHorarios",n.usuarioPerfil)}}function ha(u,i){if(1&u&&(m.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4",4)(4,"h2"),m._uU(5,"Usuario"),m.qZA(),m.TgZ(6,"span",5),m._uU(7,"3"),m.qZA()(),m.TgZ(8,"div",2)(9,"div",6)(10,"h6"),m._uU(11),m.qZA(),m.TgZ(12,"h6"),m._uU(13),m.qZA(),m.TgZ(14,"h6"),m._uU(15),m.qZA(),m.TgZ(16,"h6"),m._uU(17),m.YNc(18,Si,2,0,"div",7),m.YNc(19,ci,2,0,"div",7),m.YNc(20,di,2,0,"div",7),m.qZA()(),m.TgZ(21,"div",8)(22,"div",2)(23,"div",6),m._UZ(24,"img",9),m.qZA(),m.TgZ(25,"div",6),m._UZ(26,"img",9),m.qZA()()()()()(),m.YNc(27,no,1,1,"app-mis-horarios",10),m.qZA()),2&u){const n=m.oxw();m.xp6(11),m.hij("Nombre: ",n.usuarioPerfil.nombre,""),m.xp6(2),m.hij("Apellido: ",n.usuarioPerfil.apellido,""),m.xp6(2),m.hij("Email: ",n.usuarioPerfil.email,""),m.xp6(2),m.hij(" Tipo Usuario: ",n.usuarioPerfil.tipoUsuario," "),m.xp6(1),m.Q6J("ngIf",n.usuarioPerfil.administrador),m.xp6(1),m.Q6J("ngIf",n.usuarioPerfil.especialista),m.xp6(1),m.Q6J("ngIf",n.usuarioPerfil.paciente),m.xp6(4),m.Q6J("src",n.usuarioPerfil.img1Url,m.LSH),m.xp6(2),m.Q6J("src",n.usuarioPerfil.img2Url,m.LSH),m.xp6(1),m.Q6J("ngIf",n.usuarioPerfil.especialista)}}let Pi=(()=>{class u{constructor(n){this.authSvc=n;var c=this.authSvc.usuario;console.log(c),this.usuarioPerfil=c}ngOnInit(){}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(Ii.e))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-mi-perfil"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"badge","badge-secondary","badge-pill"],[1,"form-group","col-md-4"],[4,"ngIf"],[1,"form-group","col-8"],[3,"src"],[3,"usuarioHorarios",4,"ngIf"],[3,"usuarioHorarios"]],template:function(n,c){1&n&&m.YNc(0,ha,28,10,"div",0),2&n&&m.Q6J("ngIf",c.usuarioPerfil)},directives:[w.O5,Qr],styles:[""]}),u})(),Hr=(()=>{class u{constructor(n){this.db=n,this.dbPathTurnos="turnos",this.cargarTurnos()}cargarTurnos(){this.turnosCollection=this.db.collection(this.dbPathTurnos),this.turnos=this.turnosCollection.snapshotChanges().pipe((0,er.U)(n=>n.map(c=>{const f=c.payload.doc.data();return f.id=c.payload.doc.id,f})))}getTurnos(){return this.turnos}addTurno(n){console.log(n),this.turnosCollection.add({id:"",idEspecialista:n.idEspecialista,idPaciente:n.idPaciente,estado:n.estado,paciente:n.paciente,especialista:n.especialista,especialidad:n.especialidad,fecha:n.fecha,hora:n.hora,comentariosPaciente:n.comentariosPaciente,comentariosEspecialista:n.comentariosEspecialista})}updateTurno(n){this.db.collection(this.dbPathTurnos).doc(n.id).update(n)}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(gi.ST))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var Es=$(9775);function Gs(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"tr",3),m.NdJ("click",function(){const E=m.CHM(n).$implicit;return m.oxw().asignarTurno(E)}),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td"),m._uU(4),m.qZA(),m.TgZ(5,"td"),m._uU(6),m.qZA(),m.TgZ(7,"td"),m._uU(8),m.qZA(),m.TgZ(9,"td"),m._uU(10),m.qZA()()}if(2&u){const n=i.$implicit;m.xp6(2),m.AsE("",n.fecha," - ",n.hora,""),m.xp6(2),m.Oqu(n.paciente),m.xp6(2),m.AsE("",n.especialista.nombre," ",n.especialista.apellido,""),m.xp6(2),m.Oqu(n.especialidad),m.xp6(2),m.Oqu(n.estado)}}let Qo=(()=>{class u{constructor(n){this.turnoSvc=n,this.turnoSeleccionado=new m.vpe,this.turnos=[]}ngOnInit(){}asignarTurno(n){this.turnoSeleccionado.emit(n)}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(Hr))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-tabla-turnos"]],inputs:{turnos:"turnos"},outputs:{turnoSeleccionado:"turnoSeleccionado"},decls:16,vars:1,consts:[[1,"container"],[1,"table","table-striped","table-bordered"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(n,c){1&n&&(m.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),m._uU(5,"Fecha y Hora"),m.qZA(),m.TgZ(6,"th"),m._uU(7,"Paciente"),m.qZA(),m.TgZ(8,"th"),m._uU(9,"Especialista"),m.qZA(),m.TgZ(10,"th"),m._uU(11,"Especialidad"),m.qZA(),m.TgZ(12,"th"),m._uU(13,"Estado"),m.qZA()()(),m.TgZ(14,"tbody"),m.YNc(15,Gs,11,7,"tr",2),m.qZA()()()),2&n&&(m.xp6(15),m.Q6J("ngForOf",c.turnos))},directives:[w.sg],styles:[""]}),u})();function zr(u,i){1&u&&m._UZ(0,"div")}function cs(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"div")(1,"button",7),m.NdJ("click",function(){return m.CHM(n),m.oxw().cancelar()}),m._uU(2,"CANCELAR"),m.qZA(),m.TgZ(3,"button",8),m.NdJ("click",function(){return m.CHM(n),m.oxw().rechazar()}),m._uU(4,"RECHAZAR"),m.qZA()()}}function ts(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"div")(1,"button",9),m.NdJ("click",function(){return m.CHM(n),m.oxw().aceptar()}),m._uU(2,"ACEPTAR"),m.qZA()()}}function Be(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"div")(1,"button",10),m.NdJ("click",function(){return m.CHM(n),m.oxw().finalizar()}),m._uU(2,"FINALIZAR"),m.qZA()()}}let be=(()=>{class u{constructor(n){this.turnoSvc=n,this.aceptado="ACEPTADO",this.rechazado="RECHAZADO",this.cancelado="CANCELADO",this.finalizado="FINALIZADO",this.pendiente="PENDIENTE",this.realizado="REALIZADO"}ngOnInit(){}cancelar(){this.turnoDetalle.estado=this.cancelado,this.turnoSvc.updateTurno(this.turnoDetalle)}rechazar(){this.turnoDetalle.estado=this.rechazado,this.turnoSvc.updateTurno(this.turnoDetalle)}aceptar(){this.turnoDetalle.estado=this.aceptado,this.turnoSvc.updateTurno(this.turnoDetalle)}finalizar(){this.turnoDetalle.estado=this.finalizado,this.turnoSvc.updateTurno(this.turnoDetalle)}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(Hr))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-turno-detalle"]],inputs:{turnoDetalle:"turnoDetalle"},decls:28,vars:13,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"badge","badge-secondary","badge-pill"],[1,"form-group","col-md-4"],[4,"ngIf"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(n,c){1&n&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3)(4,"h2"),m._uU(5,"Detalle Turno"),m.qZA(),m.TgZ(6,"span",4),m._uU(7,"3"),m.qZA()(),m.TgZ(8,"div",1)(9,"div",5)(10,"h6"),m._uU(11),m.qZA(),m.TgZ(12,"h6"),m._uU(13),m.qZA(),m.TgZ(14,"h6"),m._uU(15),m.qZA(),m.TgZ(16,"h6"),m._uU(17),m.qZA(),m.TgZ(18,"h6"),m._uU(19),m.qZA(),m.TgZ(20,"h6"),m._uU(21),m.qZA(),m.TgZ(22,"h6"),m._uU(23),m.qZA(),m.YNc(24,zr,1,0,"div",6),m.YNc(25,cs,5,0,"div",6),m.YNc(26,ts,3,0,"div",6),m.YNc(27,Be,3,0,"div",6),m.qZA()()()()()),2&n&&(m.xp6(11),m.AsE("Fecha-Hora: ",c.turnoDetalle.fecha," - ",c.turnoDetalle.hora,""),m.xp6(2),m.hij("Paciente: ",c.turnoDetalle.paciente,""),m.xp6(2),m.AsE("Especialista: ",c.turnoDetalle.especialista.nombre," ",c.turnoDetalle.especialista.apellido,""),m.xp6(2),m.hij("Especialidad: ",c.turnoDetalle.especialidad,""),m.xp6(2),m.hij("Comentarios Paciente: ",c.turnoDetalle.comentariosPaciente,""),m.xp6(2),m.hij("Comentarios Especialista: ",c.turnoDetalle.comentariosEspecialista,""),m.xp6(2),m.hij("Estado: ",c.turnoDetalle.estado,""),m.xp6(1),m.Q6J("ngIf",c.turnoDetalle.estado==c.pendiente),m.xp6(1),m.Q6J("ngIf",c.turnoDetalle.estado!=c.aceptado||c.turnoDetalle.estado!=c.rechazado||c.turnoDetalle.estado!=c.realizado),m.xp6(1),m.Q6J("ngIf",c.turnoDetalle.estado!=c.rechazado),m.xp6(1),m.Q6J("ngIf",c.turnoDetalle.estado==c.aceptado))},directives:[w.O5],styles:[""]}),u})();function Je(u,i){if(1&u&&m._UZ(0,"app-turno-detalle",3),2&u){const n=m.oxw();m.Q6J("turnoDetalle",n.turnoSeleccionado)}}let bt=(()=>{class u{constructor(n,c,f){this.turnoSvc=n,this.usuarioSvc=c,this.authSvc=f,this.usuarios=[],this.cargarUsuarios(),console.log(this.usuario),this.usuario.id&&(this.turnosOcupados=this.turnoSvc.db.collection("turnos",E=>E.where("idPaciente","==",this.usuario.id)),console.log(this.turnosOcupados))}ngOnInit(){}cargarTurnos(){this.turnoSvc.getTurnos().subscribe(n=>{this.turnosOcupados=n,console.log(n)})}asignarTurno(n){console.log(n),this.turnoSeleccionado=n}cargarUsuarios(){this.usuarioSvc.getUsuarios().subscribe(n=>{this.usuarios=n,this.authSvc.afAuth.onAuthStateChanged(c=>{c&&(this.usuario.email=c.email,this.getUsuario())})})}getUsuario(){this.usuarios.forEach(n=>{this.usuario.email==n.email&&(this.usuario=n)})}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(Hr),m.Y36(Es.i),m.Y36(Ii.e))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-mis-turnos"]],decls:3,vars:3,consts:[["ng-blur","ngBlur()",1,"form-control",3,"ngModel","ngModelChange"],[3,"turnos","turnoSeleccionado"],[3,"turnoDetalle",4,"ngIf"],[3,"turnoDetalle"]],template:function(n,c){1&n&&(m.TgZ(0,"input",0),m.NdJ("ngModelChange",function(E){return c.filter=E}),m.qZA(),m.TgZ(1,"app-tabla-turnos",1),m.NdJ("turnoSeleccionado",function(E){return c.asignarTurno(E)}),m.qZA(),m.YNc(2,Je,1,1,"app-turno-detalle",2)),2&n&&(m.Q6J("ngModel",c.filter),m.xp6(1),m.Q6J("turnos",c.turnosOcupados),m.xp6(1),m.Q6J("ngIf",c.turnoSeleccionado))},directives:[hr.Fj,hr.JJ,hr.On,Qo,w.O5,be],styles:[""]}),u})();var Pt=$(4846),Zt=$(2192);function mr(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"tr",3),m.NdJ("click",function(){const E=m.CHM(n).$implicit;return m.oxw().mostrarUsuario(E)}),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td"),m._uU(4),m.qZA(),m.TgZ(5,"td"),m._uU(6),m.qZA(),m.TgZ(7,"td"),m._uU(8),m.qZA()()}if(2&u){const n=i.$implicit;m.xp6(2),m.AsE("",n.nombre," ",n.apellido,""),m.xp6(2),m.Oqu(n.edad),m.xp6(2),m.Oqu(n.email),m.xp6(2),m.Oqu(n.tipoUsuario)}}let $r=(()=>{class u{constructor(n){this.usuarioSvc=n,this.usuarioSeleccionado=new m.vpe,this.usuarios=[]}ngOnInit(){this.cargarUsuarios()}cargarUsuarios(){this.usuarioSvc.getUsuarios().subscribe(n=>{this.usuarios=n})}mostrarUsuario(n){this.usuarioSeleccionado.emit(n)}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(Es.i))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-lista-usuario"]],inputs:{usuarios:"usuarios"},outputs:{usuarioSeleccionado:"usuarioSeleccionado"},decls:14,vars:1,consts:[[1,"container"],[1,"table","table-striped","table-bordered"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(n,c){1&n&&(m.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),m._uU(5,"Nombre Apelido"),m.qZA(),m.TgZ(6,"th"),m._uU(7,"Edad"),m.qZA(),m.TgZ(8,"th"),m._uU(9,"Email"),m.qZA(),m.TgZ(10,"th"),m._uU(11,"Tipo Usuario"),m.qZA()()(),m.TgZ(12,"tbody"),m.YNc(13,mr,9,5,"tr",2),m.qZA()()()),2&n&&(m.xp6(13),m.Q6J("ngForOf",c.usuarios))},directives:[w.sg],styles:[""]}),u})();function rr(u,i){1&u&&(m.TgZ(0,"div")(1,"h6"),m._uU(2,"Estado: Habilitado"),m.qZA()())}function ns(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"h6"),m._uU(1,"Estado: Deshabilitado"),m.qZA(),m.TgZ(2,"button",11),m.NdJ("click",function(){return m.CHM(n),m.oxw(2).habilitarEspecialista()}),m._uU(3,"Habilitar"),m.qZA()}}function wo(u,i){if(1&u&&(m.TgZ(0,"div"),m.YNc(1,rr,3,0,"div",9),m.YNc(2,ns,4,0,"ng-template",null,10,m.W1O),m.qZA()),2&u){const n=m.MAs(3),c=m.oxw();m.xp6(1),m.Q6J("ngIf",c.usuarioDetalle.habilitado)("ngIfElse",n)}}let Oi=(()=>{class u{constructor(n){this.usuarioSvc=n,this.usuarioDetalle=new Pt.b}ngOnInit(){}habilitarEspecialista(){console.log(this.usuarioDetalle),this.usuarioDetalle.habilitado=!0,this.usuarioSvc.updateUsuarioEspecialista(this.usuarioDetalle)}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(Es.i))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-usuario-detalle"]],inputs:{usuarioDetalle:"usuarioDetalle"},decls:25,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"badge","badge-secondary","badge-pill"],[1,"form-group","col-md-4"],[4,"ngIf"],[1,"form-group","col-8"],[3,"src"],[4,"ngIf","ngIfElse"],["deshabilitado",""],["type","submit",1,"btn","btn-success",3,"click"]],template:function(n,c){1&n&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3)(4,"h2"),m._uU(5,"Actor"),m.qZA(),m.TgZ(6,"span",4),m._uU(7,"3"),m.qZA()(),m.TgZ(8,"div",1)(9,"div",5)(10,"h6"),m._uU(11),m.qZA(),m.TgZ(12,"h6"),m._uU(13),m.qZA(),m.TgZ(14,"h6"),m._uU(15),m.qZA(),m.TgZ(16,"h6"),m._uU(17),m.qZA(),m.YNc(18,wo,4,2,"div",6),m.qZA(),m.TgZ(19,"div",7)(20,"div",1)(21,"div",5),m._UZ(22,"img",8),m.qZA(),m.TgZ(23,"div",5),m._UZ(24,"img",8),m.qZA()()()()()()()),2&n&&(m.xp6(11),m.hij("Nombre: ",c.usuarioDetalle.nombre,""),m.xp6(2),m.hij("Apellido: ",c.usuarioDetalle.apellido,""),m.xp6(2),m.hij("Email: ",c.usuarioDetalle.email,""),m.xp6(2),m.hij("Tipo Usuario: ",c.usuarioDetalle.tipoUsuario,""),m.xp6(1),m.Q6J("ngIf",c.usuarioDetalle.especialista),m.xp6(4),m.Q6J("src",c.usuarioDetalle.img1Url,m.LSH),m.xp6(2),m.Q6J("src",c.usuarioDetalle.img2Url,m.LSH))},directives:[w.O5],styles:["img[_ngcontent-%COMP%]{height:150px;width:200px;display:block;margin:auto;border-radius:30px}"]}),u})();function ko(u,i){1&u&&(m.TgZ(0,"div",7),m._UZ(1,"app-alta-usuario"),m.qZA())}function ws(u,i){if(1&u&&m._UZ(0,"app-usuario-detalle",8),2&u){const n=m.oxw();m.Q6J("usuarioDetalle",n.usuarioElegido)}}let qs=(()=>{class u{constructor(){this.listaUsuarios=[],this.usuarioElegido=new Pt.b,this.registro=!1,this.mostrarDetalle=!1}ngOnInit(){}mostrarDatosUsuarioSeleccionado(n){console.log(n),this.usuarioElegido.id=n.id,this.usuarioElegido.nombre=n.nombre,this.usuarioElegido.apellido=n.apellido,this.usuarioElegido.email=n.email,this.usuarioElegido.tipoUsuario=n.tipoUsuario,this.usuarioElegido.administrador=n.administrador,this.usuarioElegido.especialista=n.especialista,this.usuarioElegido.paciente=n.paciente,this.usuarioElegido.habilitado=n.habilitado,this.usuarioElegido.img1Url=n.img1Url,this.usuarioElegido.img2Url=n.img2Url,this.mostrarDetalle=!0}mostrarRegistro(){this.registro=!0}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-seccion-usuarios"]],decls:9,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-3","text-center"],[1,"btn","btn-success",3,"click"],["class","col-12",4,"ngIf"],[3,"usuarios","usuarioSeleccionado"],[3,"usuarioDetalle",4,"ngIf"],[1,"col-12"],[3,"usuarioDetalle"]],template:function(n,c){1&n&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.NdJ("click",function(){return c.mostrarRegistro()}),m._uU(4,"Registrar"),m.qZA()(),m._UZ(5,"br"),m.YNc(6,ko,2,0,"div",4),m.TgZ(7,"app-lista-usuario",5),m.NdJ("usuarioSeleccionado",function(E){return c.mostrarDatosUsuarioSeleccionado(E)}),m.qZA(),m.YNc(8,ws,1,1,"app-usuario-detalle",6),m.qZA()()),2&n&&(m.xp6(6),m.Q6J("ngIf",c.registro),m.xp6(1),m.Q6J("usuarios",c.listaUsuarios),m.xp6(1),m.Q6J("ngIf",c.mostrarDetalle))},directives:[w.O5,Zt.U,$r,Oi],styles:[""]}),u})();function Jo(u,i){if(1&u&&m._UZ(0,"app-turno-detalle",2),2&u){const n=m.oxw();m.Q6J("turnoDetalle",n.turnoSeleccionado)}}let fa=(()=>{class u{constructor(n){this.turnoSvc=n,this.cargarTurnos()}ngOnInit(){}cargarTurnos(){this.turnoSvc.getTurnos().subscribe(n=>{this.turnosOcupados=n,console.log(n)})}asignarTurno(n){console.log(n),this.turnoSeleccionado=n}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(Hr))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-turnos"]],decls:2,vars:2,consts:[[3,"turnos","turnoSeleccionado"],[3,"turnoDetalle",4,"ngIf"],[3,"turnoDetalle"]],template:function(n,c){1&n&&(m.TgZ(0,"app-tabla-turnos",0),m.NdJ("turnoSeleccionado",function(E){return c.asignarTurno(E)}),m.qZA(),m.YNc(1,Jo,1,1,"app-turno-detalle",1)),2&n&&(m.Q6J("turnos",c.turnosOcupados),m.xp6(1),m.Q6J("ngIf",c.turnoSeleccionado))},directives:[Qo,w.O5,be],styles:[""]}),u})();var si=$(825);class bs{}var Cs=$(9104);function Ps(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"tr",4),m.NdJ("click",function(){const E=m.CHM(n).$implicit;return m.oxw().enviarEspecialista(E)}),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td"),m._uU(4),m.qZA()()}if(2&u){const n=i.$implicit;m.xp6(2),m.hij("",n.nombre," "),m.xp6(2),m.Oqu(n.apellido)}}let Fo=(()=>{class u{constructor(){this.especialistaSeleccionado=new m.vpe,this.usuarios=[]}ngOnInit(){}enviarEspecialista(n){console.log(n),this.especialistaSeleccionado.emit(n)}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-lista-especialistas"]],inputs:{usuarios:"usuarios"},outputs:{especialistaSeleccionado:"especialistaSeleccionado"},decls:11,vars:1,consts:[[1,"container"],[1,"col-md-6"],[1,"table","table-striped","table-bordered"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(n,c){1&n&&(m.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead")(4,"tr")(5,"th"),m._uU(6,"Nombre "),m.qZA(),m.TgZ(7,"th"),m._uU(8,"Apelido"),m.qZA()()(),m.TgZ(9,"tbody"),m.YNc(10,Ps,5,2,"tr",3),m.qZA()()()()),2&n&&(m.xp6(10),m.Q6J("ngForOf",c.usuarios))},directives:[w.sg],styles:[""]}),u})();function Os(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"tr",4),m.NdJ("click",function(){const E=m.CHM(n).$implicit;return m.oxw().enviarPaciente(E)}),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td"),m._uU(4),m.qZA()()}if(2&u){const n=i.$implicit;m.xp6(2),m.hij("",n.nombre," "),m.xp6(2),m.Oqu(n.apellido)}}let ba=(()=>{class u{constructor(){this.pacienteSeleccionado=new m.vpe,this.usuarios=[]}ngOnInit(){}enviarPaciente(n){}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-lista-pacientes"]],inputs:{usuarios:"usuarios"},outputs:{pacienteSeleccionado:"pacienteSeleccionado"},decls:11,vars:1,consts:[[1,"container"],[1,"col-md-6"],[1,"table","table-striped","table-bordered"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(n,c){1&n&&(m.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead")(4,"tr")(5,"th"),m._uU(6,"Nombre "),m.qZA(),m.TgZ(7,"th"),m._uU(8,"Apelido"),m.qZA()()(),m.TgZ(9,"tbody"),m.YNc(10,Os,5,2,"tr",3),m.qZA()()()()),2&n&&(m.xp6(10),m.Q6J("ngForOf",c.usuarios))},directives:[w.sg],styles:[""]}),u})();function yi(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"div",0)(1,"h3"),m._uU(2,"Pacientes"),m.qZA(),m.TgZ(3,"div",7)(4,"app-lista-pacientes",9),m.NdJ("pacienteSeleccionado",function(f){return m.CHM(n),m.oxw().enviarUsuarioSeleccionado(f)}),m.qZA()()()}if(2&u){const n=m.oxw();m.xp6(4),m.Q6J("usuarios",n.pacientes)}}function bo(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"div",10)(1,"button",11),m.NdJ("click",function(){const E=m.CHM(n).$implicit;return m.oxw().mostrarHorarios(E)}),m._uU(2),m.qZA()()}if(2&u){const n=i.$implicit;m.xp6(2),m.lnq("",n.row_date.day," ",n.row_date.month," ",n.row_date.year,"")}}function Gi(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"div",7)(1,"button",13),m.NdJ("click",function(){const E=m.CHM(n).$implicit;return m.oxw(2).fechaTurnoElegido(E)}),m._uU(2),m.qZA()()}if(2&u){const n=i.$implicit;m.xp6(2),m.Oqu(n)}}function Co(u,i){if(1&u&&(m.TgZ(0,"div")(1,"div",0),m.YNc(2,Gi,3,1,"div",12),m.qZA()()),2&u){const n=m.oxw();m.xp6(2),m.Q6J("ngForOf",n.fechaElegida.row_date.hours)}}const Ws=[{path:"bienvenida",component:Vr},{path:"seccionUsuarios",component:qs},{path:"",redirectTo:"bienvenida",pathMatch:"full"},{path:"miPerfil",component:Pi},{path:"turnos",component:fa},{path:"misTurnos",component:bt},{path:"solicitarTurno",component:(()=>{class u{constructor(n,c,f){this.firebaseSvc=n,this.authSvc=c,this.turnoSvc=f,this.especialidades=[],this.usuarios=[],this.especialistas=[],this.pacientes=[],this.mostrarHora=!1,this.usuario=new Pt.b,this.turnosDisponibles=[],this.listaUsuarios=[],this.idAdmin=!1,this.cargarTurnos(),this.cargarEspecialidades(),this.cargarUsuarios()}ngOnInit(){}cargarEspecialidades(){this.firebaseSvc.getEspecialidades().subscribe(n=>{this.especialidades=n})}cargarTurnos(){this.getDates(),this.turnoSvc.getTurnos().subscribe(n=>{this.turnosOcupados=n,console.log(this.turnosOcupados),this.cargarTurnosDisponibles()})}asignarEspecialidadSeleccionada(n){console.log(n),this.especialidadSeleccionada=n,this.getEspecialistas()}asignarEspecialista(n){console.log(n),this.especialistaSeleccionado=n}cargarUsuarios(){this.firebaseSvc.getUsuarios().subscribe(n=>{this.usuarios=n,this.authSvc.afAuth.onAuthStateChanged(c=>{this.getPacientes()})})}getEspecialistas(){this.usuarios.forEach(n=>{n.especialista&&(console.log(n),n.especialidades.forEach(c=>{c==this.especialidadSeleccionada&&this.especialistas.push(n)}))})}getPacientes(){this.usuarios.forEach(n=>{n.paciente&&this.pacientes.push(n)})}registrarTurno(){this.usuario&&this.especialistaSeleccionado&&this.horaElegida&&(this.turno=new bs,this.turno.idEspecialista=this.especialistaSeleccionado.id,this.usuario.administrador?(this.turno.idPaciente=this.pacienteSeleccionado.id,this.turno.paciente=this.pacienteSeleccionado.toString()):(this.turno.idPaciente=this.usuario.id,this.turno.paciente=this.usuario.toString()),this.turno.idPaciente=this.usuario.id,this.turno.especialista=this.especialistaSeleccionado,this.turno.especialidad=this.especialidadSeleccionada,this.turno.estado="PENDIENTE",this.turno.fecha=this.fechaElegida.row_date.day+"/"+this.fechaElegida.row_date.month+"/"+this.fechaElegida.row_date.year,this.turno.hora=this.horaElegida,this.turno.comentariosPaciente="",this.turno.comentariosEspecialista="",this.turnoSvc.addTurno(this.turno))}getDates(){var n=new Date;n.setDate(n.getDate()+1);var f=new Date;f.setDate(n.getDate()+15);for(var E=Math.abs(n.getTime()-f.getTime()),I=Math.ceil(E/864e5)+1,O=["Sun","MON","TUE","WED","THU","FRI","SAT"],q=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],te=["8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30"],Te=["8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30"],Ae=new Array,Ze=0;Ze<=I;Ze++){var dt,Gt,Pn,yt;dt=n.getDate()<10?"0"+n.getDate():n.getDate(),yt=n.getMonth()<9?"0"+(n.getMonth()+1):n.getMonth().toString(),6==n.getDay()?(Pn=Te,Gt={day:dt,month:yt,year:n.getFullYear(),hours:Pn}):(Pn=te,Gt={day:dt,month:yt,year:n.getFullYear(),hours:Pn},console.log(Gt));var or={weekDay:O[n.getDay()],date:dt,month:q[n.getMonth()]},Zr=!1;(0==n.getDay()||6==n.getDay())&&(Zr=!0),0!=n.getDay()&&Ae.push({row_date:Gt,fmt_date:or,is_weekend:Zr}),n.setDate(n.getDate()+1)}this.fechas=Ae}mostrarHorarios(n){this.fechaElegida=n}fechaTurnoElegido(n){this.horaElegida=n}cargarTurnosDisponibles(){this.turnosOcupados.forEach(c=>{for(let f=0;f<this.fechas.length;f++){const E=this.fechas[f];if(c.fecha==E.row_date.day+"/"+E.row_date.month+"/"+E.row_date.year)for(let I=0;I<E.row_date.hours.length;I++)E.row_date.hours[I]==c.hora&&(E.row_date.hours[I]=null);this.turnosDisponibles.push(E)}}),this.turnosDisponibles=this.turnosDisponibles.filter((c,f)=>this.turnosDisponibles.indexOf(c)===f)}enviarUsuarioSeleccionado(n){this.pacienteSeleccionado=n}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(Es.i),m.Y36(Ii.e),m.Y36(Hr))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-solicitar-turnos"]],decls:15,vars:5,consts:[[1,"row"],[1,"col-md-6"],[3,"especialidades","especialidadSeleccionada"],[3,"usuarios","especialistaSeleccionado"],["class","row",4,"ngIf"],["class","col-md-3",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-12"],[1,"btn",3,"click"],[3,"usuarios","pacienteSeleccionado"],[1,"col-md-3"],[1,"btn","btn-success","mb-2",3,"click"],["class","col-12",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"]],template:function(n,c){1&n&&(m.TgZ(0,"div",0)(1,"div",1)(2,"app-lista-especialidad",2),m.NdJ("especialidadSeleccionada",function(E){return c.asignarEspecialidadSeleccionada(E)}),m.qZA()(),m.TgZ(3,"div",1)(4,"h3"),m._uU(5,"Especialistas"),m.qZA(),m.TgZ(6,"app-lista-especialistas",3),m.NdJ("especialistaSeleccionado",function(E){return c.asignarEspecialista(E)}),m.qZA()()(),m.YNc(7,yi,5,1,"div",4),m.TgZ(8,"div",0),m.YNc(9,bo,3,3,"div",5),m.YNc(10,Co,3,1,"div",6),m.qZA(),m.TgZ(11,"div",0)(12,"div",7)(13,"button",8),m.NdJ("click",function(){return c.registrarTurno()}),m._uU(14,"Enviar Turno"),m.qZA()()()),2&n&&(m.xp6(2),m.Q6J("especialidades",c.especialidades),m.xp6(4),m.Q6J("usuarios",c.especialistas),m.xp6(1),m.Q6J("ngIf",c.usuario.administrador),m.xp6(2),m.Q6J("ngForOf",c.turnosDisponibles),m.xp6(1),m.Q6J("ngIf",c.fechaElegida))},directives:[Cs.T,Fo,w.O5,ba,w.sg],styles:[""]}),u})()},{path:"ingreso",loadChildren:()=>Promise.resolve().then($.bind($,825)).then(u=>si.IngresoModule)}];let Ai=(()=>{class u{}return u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({imports:[[ui.Bz.forRoot(Ws)],ui.Bz]}),u})();function Lo(u,i){if(1&u&&(m.TgZ(0,"a",10),m._uU(1),m.qZA()),2&u){const n=m.oxw().ngIf;m.xp6(1),m.Oqu(null==n?null:n.email)}}function Ts(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"a",6),m.NdJ("click",function(){return m.CHM(n),m.oxw(2).goSolicitarTurno()}),m._uU(1,"Solicitar Turno"),m.qZA()}}function To(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"a",6),m.NdJ("click",function(){return m.CHM(n),m.oxw(2).goMisTurnos()}),m._uU(1,"Mis Turnos"),m.qZA()}}function rs(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"a",11),m.NdJ("click",function(){return m.CHM(n),m.oxw(2).onLogout()}),m._uU(1,"Logout"),m.qZA()}}function ks(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"div")(1,"a",6),m.NdJ("click",function(){return m.CHM(n),m.oxw().goBienvenida()}),m._uU(2,"Bienvenida"),m.qZA(),m.TgZ(3,"a",6),m.NdJ("click",function(){return m.CHM(n),m.oxw().goSeccionUsuarios()}),m._uU(4,"Secci\xf3n Usuarios"),m.qZA(),m.YNc(5,Lo,2,1,"a",7),m.YNc(6,Ts,2,0,"a",8),m.YNc(7,To,2,0,"a",8),m.YNc(8,rs,2,0,"a",9),m.qZA()}if(2&u){const n=i.ngIf,c=m.oxw();m.xp6(5),m.Q6J("ngIf",n),m.xp6(1),m.Q6J("ngIf",c.adminLogueado||c.pacienteLogueado),m.xp6(1),m.Q6J("ngIf",c.especialistaLogueado||c.pacienteLogueado),m.xp6(1),m.Q6J("ngIf",n)}}function zs(u,i){if(1&u){const n=m.EpF();m.TgZ(0,"a",11),m.NdJ("click",function(){return m.CHM(n),m.oxw().goRegistro()}),m._uU(1,"Registro"),m.qZA(),m.TgZ(2,"a",11),m.NdJ("click",function(){return m.CHM(n),m.oxw().goLogin()}),m._uU(3,"Login"),m.qZA()}}let fo=(()=>{class u{constructor(n,c,f){this.router=n,this.authSvc=c,this.usuarioSvc=f,this.usuario$=this.authSvc.afAuth.user,this.logueado=!1,this.adminLogueado=!1,this.pacienteLogueado=!1,this.especialistaLogueado=!1}ngOnInit(){this.obtenerUsuarioLogueado()}obtenerUsuarioLogueado(){this.usuario$.subscribe(n=>{this.email=n.email,this.usuarioSvc.getUsuarios().subscribe(c=>{c.forEach(f=>{f.email==this.email&&(this.usuario=f,console.log(this.usuario),this.usuario.paciente&&(this.usuario.administrador=!1,this.especialistaLogueado=!1,this.pacienteLogueado=this.usuario.paciente),this.usuario.especialista&&(this.usuario.administrador=!1,this.especialistaLogueado=this.usuario.especialista,this.pacienteLogueado=!1),this.usuario.administrador&&(this.adminLogueado=this.usuario.administrador,this.especialistaLogueado=!1,this.pacienteLogueado=!1))})})})}goRegistro(){this.router.navigate(["ingreso/registro"])}goLogin(){this.router.navigate(["ingreso/login"])}goBienvenida(){this.router.navigate(["bienvenida"])}goSeccionUsuarios(){this.router.navigate(["seccionUsuarios"])}onLogout(){this.logueado=!1,this.adminLogueado=!1,this.especialistaLogueado=!1,this.pacienteLogueado=!1,this.authSvc.signOut(),this.router.navigate(["bienvenida"])}goMiPerfil(){this.router.navigate(["miPerfil"])}goMisTurnos(){this.router.navigate(["misTurnos"])}goTurnos(){this.router.navigate(["turnos"])}goSolicitarTurno(){this.router.navigate(["solicitarTurno"])}}return u.\u0275fac=function(n){return new(n||u)(m.Y36(ui.F0),m.Y36(Ii.e),m.Y36(Es.i))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-navbar"]],decls:9,vars:4,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-success","rounded"],["href","#",1,"navbar-brand","text-light"],["type","button","data-toggle","collapse","data-target","#navbarsExample09","aria-controls","navbarsExample09","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[4,"ngIf","ngIfElse"],["login",""],[1,"btn","text-light",3,"click"],["class","py-2 d-none d-md-inline-block btn",4,"ngIf"],["class","btn text-light",3,"click",4,"ngIf"],["class","py-2 d-none d-md-inline-block btn","type","button",3,"click",4,"ngIf"],[1,"py-2","d-none","d-md-inline-block","btn"],["type","button",1,"py-2","d-none","d-md-inline-block","btn",3,"click"]],template:function(n,c){if(1&n&&(m.TgZ(0,"nav",0)(1,"a",1),m._uU(2,"Clinica"),m.qZA(),m.TgZ(3,"button",2),m._UZ(4,"span",3),m.qZA(),m.YNc(5,ks,9,4,"div",4),m.ALo(6,"async"),m.YNc(7,zs,4,0,"ng-template",null,5,m.W1O),m.qZA()),2&n){const f=m.MAs(8);m.xp6(5),m.Q6J("ngIf",m.lcZ(6,2,c.usuario$))("ngIfElse",f)}},directives:[w.O5],pipes:[w.Ov],styles:[".bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}body[_ngcontent-%COMP%]{padding-bottom:20px}.navbar[_ngcontent-%COMP%]{margin-bottom:20px}"]}),u})(),ir=(()=>{class u{constructor(){this.title="clinica"}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-12"]],template:function(n,c){1&n&&(m._UZ(0,"app-navbar"),m.TgZ(1,"div",0)(2,"div",1)(3,"div",2),m._UZ(4,"router-outlet"),m.qZA()()())},directives:[fo,ui.lC],styles:[""]}),u})();var B=$(2011);const X_firebaseConfig={apiKey:"AIzaSyBrSkgq-AvnPr0b5Jk40VRw9wEgrRhGbyo",authDomain:"lab4-f7591.firebaseapp.com",databaseURL:"https://lab4-f7591-default-rtdb.firebaseio.com",projectId:"lab4-f7591",storageBucket:"lab4-f7591.appspot.com",messagingSenderId:"455274550514",appId:"1:455274550514:web:2e866f6af2604ef6ec2c6b"};var V=$(9646),ae=$(8306),ve=$(4351),st=$(9300);class vt{}class en{}class ln{constructor(i){this.normalizedNames=new Map,this.lazyUpdate=null,i?this.lazyInit="string"==typeof i?()=>{this.headers=new Map,i.split("\n").forEach(n=>{const c=n.indexOf(":");if(c>0){const f=n.slice(0,c),E=f.toLowerCase(),I=n.slice(c+1).trim();this.maybeSetNormalizedName(f,E),this.headers.has(E)?this.headers.get(E).push(I):this.headers.set(E,[I])}})}:()=>{this.headers=new Map,Object.keys(i).forEach(n=>{let c=i[n];const f=n.toLowerCase();"string"==typeof c&&(c=[c]),c.length>0&&(this.headers.set(f,c),this.maybeSetNormalizedName(n,f))})}:this.headers=new Map}has(i){return this.init(),this.headers.has(i.toLowerCase())}get(i){this.init();const n=this.headers.get(i.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(i){return this.init(),this.headers.get(i.toLowerCase())||null}append(i,n){return this.clone({name:i,value:n,op:"a"})}set(i,n){return this.clone({name:i,value:n,op:"s"})}delete(i,n){return this.clone({name:i,value:n,op:"d"})}maybeSetNormalizedName(i,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,i)}init(){this.lazyInit&&(this.lazyInit instanceof ln?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(i=>this.applyUpdate(i)),this.lazyUpdate=null))}copyFrom(i){i.init(),Array.from(i.headers.keys()).forEach(n=>{this.headers.set(n,i.headers.get(n)),this.normalizedNames.set(n,i.normalizedNames.get(n))})}clone(i){const n=new ln;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof ln?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([i]),n}applyUpdate(i){const n=i.name.toLowerCase();switch(i.op){case"a":case"s":let c=i.value;if("string"==typeof c&&(c=[c]),0===c.length)return;this.maybeSetNormalizedName(i.name,n);const f=("a"===i.op?this.headers.get(n):void 0)||[];f.push(...c),this.headers.set(n,f);break;case"d":const E=i.value;if(E){let I=this.headers.get(n);if(!I)return;I=I.filter(O=>-1===E.indexOf(O)),0===I.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,I)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(i){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>i(this.normalizedNames.get(n),this.headers.get(n)))}}class Kn{encodeKey(i){return br(i)}encodeValue(i){return br(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}}const Wn=/%(\d[a-f0-9])/gi,Jr={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function br(u){return encodeURIComponent(u).replace(Wn,(i,n)=>{var c;return null!==(c=Jr[n])&&void 0!==c?c:i})}function Gr(u){return`${u}`}class Ei{constructor(i={}){if(this.updates=null,this.cloneFrom=null,this.encoder=i.encoder||new Kn,i.fromString){if(i.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function kn(u,i){const n=new Map;return u.length>0&&u.replace(/^\?/,"").split("&").forEach(f=>{const E=f.indexOf("="),[I,O]=-1==E?[i.decodeKey(f),""]:[i.decodeKey(f.slice(0,E)),i.decodeValue(f.slice(E+1))],q=n.get(I)||[];q.push(O),n.set(I,q)}),n}(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach(n=>{const c=i.fromObject[n];this.map.set(n,Array.isArray(c)?c:[c])})):this.map=null}has(i){return this.init(),this.map.has(i)}get(i){this.init();const n=this.map.get(i);return n?n[0]:null}getAll(i){return this.init(),this.map.get(i)||null}keys(){return this.init(),Array.from(this.map.keys())}append(i,n){return this.clone({param:i,value:n,op:"a"})}appendAll(i){const n=[];return Object.keys(i).forEach(c=>{const f=i[c];Array.isArray(f)?f.forEach(E=>{n.push({param:c,value:E,op:"a"})}):n.push({param:c,value:f,op:"a"})}),this.clone(n)}set(i,n){return this.clone({param:i,value:n,op:"s"})}delete(i,n){return this.clone({param:i,value:n,op:"d"})}toString(){return this.init(),this.keys().map(i=>{const n=this.encoder.encodeKey(i);return this.map.get(i).map(c=>n+"="+this.encoder.encodeValue(c)).join("&")}).filter(i=>""!==i).join("&")}clone(i){const n=new Ei({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(i),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(i=>this.map.set(i,this.cloneFrom.map.get(i))),this.updates.forEach(i=>{switch(i.op){case"a":case"s":const n=("a"===i.op?this.map.get(i.param):void 0)||[];n.push(Gr(i.value)),this.map.set(i.param,n);break;case"d":if(void 0===i.value){this.map.delete(i.param);break}{let c=this.map.get(i.param)||[];const f=c.indexOf(Gr(i.value));-1!==f&&c.splice(f,1),c.length>0?this.map.set(i.param,c):this.map.delete(i.param)}}}),this.cloneFrom=this.updates=null)}}class un{constructor(){this.map=new Map}set(i,n){return this.map.set(i,n),this}get(i){return this.map.has(i)||this.map.set(i,i.defaultValue()),this.map.get(i)}delete(i){return this.map.delete(i),this}has(i){return this.map.has(i)}keys(){return this.map.keys()}}function Xo(u){return"undefined"!=typeof ArrayBuffer&&u instanceof ArrayBuffer}function po(u){return"undefined"!=typeof Blob&&u instanceof Blob}function ro(u){return"undefined"!=typeof FormData&&u instanceof FormData}class U{constructor(i,n,c,f){let E;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=i.toUpperCase(),function Wi(u){switch(u){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||f?(this.body=void 0!==c?c:null,E=f):E=c,E&&(this.reportProgress=!!E.reportProgress,this.withCredentials=!!E.withCredentials,E.responseType&&(this.responseType=E.responseType),E.headers&&(this.headers=E.headers),E.context&&(this.context=E.context),E.params&&(this.params=E.params)),this.headers||(this.headers=new ln),this.context||(this.context=new un),this.params){const I=this.params.toString();if(0===I.length)this.urlWithParams=n;else{const O=n.indexOf("?");this.urlWithParams=n+(-1===O?"?":O<n.length-1?"&":"")+I}}else this.params=new Ei,this.urlWithParams=n}serializeBody(){return null===this.body?null:Xo(this.body)||po(this.body)||ro(this.body)||function G(u){return"undefined"!=typeof URLSearchParams&&u instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ei?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ro(this.body)?null:po(this.body)?this.body.type||null:Xo(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ei?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(i={}){var n;const c=i.method||this.method,f=i.url||this.url,E=i.responseType||this.responseType,I=void 0!==i.body?i.body:this.body,O=void 0!==i.withCredentials?i.withCredentials:this.withCredentials,q=void 0!==i.reportProgress?i.reportProgress:this.reportProgress;let te=i.headers||this.headers,Te=i.params||this.params;const Ae=null!==(n=i.context)&&void 0!==n?n:this.context;return void 0!==i.setHeaders&&(te=Object.keys(i.setHeaders).reduce((Ze,dt)=>Ze.set(dt,i.setHeaders[dt]),te)),i.setParams&&(Te=Object.keys(i.setParams).reduce((Ze,dt)=>Ze.set(dt,i.setParams[dt]),Te)),new U(c,f,I,{params:Te,headers:te,context:Ae,reportProgress:q,responseType:E,withCredentials:O})}}var k=(()=>((k=k||{})[k.Sent=0]="Sent",k[k.UploadProgress=1]="UploadProgress",k[k.ResponseHeader=2]="ResponseHeader",k[k.DownloadProgress=3]="DownloadProgress",k[k.Response=4]="Response",k[k.User=5]="User",k))();class re{constructor(i,n=200,c="OK"){this.headers=i.headers||new ln,this.status=void 0!==i.status?i.status:n,this.statusText=i.statusText||c,this.url=i.url||null,this.ok=this.status>=200&&this.status<300}}class Ee extends re{constructor(i={}){super(i),this.type=k.ResponseHeader}clone(i={}){return new Ee({headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class Dt extends re{constructor(i={}){super(i),this.type=k.Response,this.body=void 0!==i.body?i.body:null}clone(i={}){return new Dt({body:void 0!==i.body?i.body:this.body,headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class W extends re{constructor(i){super(i,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${i.url||"(unknown url)"}`:`Http failure response for ${i.url||"(unknown url)"}: ${i.status} ${i.statusText}`,this.error=i.error||null}}function j(u,i){return{body:i,headers:u.headers,context:u.context,observe:u.observe,params:u.params,reportProgress:u.reportProgress,responseType:u.responseType,withCredentials:u.withCredentials}}let ne=(()=>{class u{constructor(n){this.handler=n}request(n,c,f={}){let E;if(n instanceof U)E=n;else{let q,te;q=f.headers instanceof ln?f.headers:new ln(f.headers),f.params&&(te=f.params instanceof Ei?f.params:new Ei({fromObject:f.params})),E=new U(n,c,void 0!==f.body?f.body:null,{headers:q,context:f.context,params:te,reportProgress:f.reportProgress,responseType:f.responseType||"json",withCredentials:f.withCredentials})}const I=(0,V.of)(E).pipe((0,ve.b)(q=>this.handler.handle(q)));if(n instanceof U||"events"===f.observe)return I;const O=I.pipe((0,st.h)(q=>q instanceof Dt));switch(f.observe||"body"){case"body":switch(E.responseType){case"arraybuffer":return O.pipe((0,er.U)(q=>{if(null!==q.body&&!(q.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return q.body}));case"blob":return O.pipe((0,er.U)(q=>{if(null!==q.body&&!(q.body instanceof Blob))throw new Error("Response is not a Blob.");return q.body}));case"text":return O.pipe((0,er.U)(q=>{if(null!==q.body&&"string"!=typeof q.body)throw new Error("Response is not a string.");return q.body}));default:return O.pipe((0,er.U)(q=>q.body))}case"response":return O;default:throw new Error(`Unreachable: unhandled observe type ${f.observe}}`)}}delete(n,c={}){return this.request("DELETE",n,c)}get(n,c={}){return this.request("GET",n,c)}head(n,c={}){return this.request("HEAD",n,c)}jsonp(n,c){return this.request("JSONP",n,{params:(new Ei).append(c,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,c={}){return this.request("OPTIONS",n,c)}patch(n,c,f={}){return this.request("PATCH",n,j(f,c))}post(n,c,f={}){return this.request("POST",n,j(f,c))}put(n,c,f={}){return this.request("PUT",n,j(f,c))}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(vt))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();class de{constructor(i,n){this.next=i,this.interceptor=n}handle(i){return this.interceptor.intercept(i,this.next)}}const Ce=new m.OlP("HTTP_INTERCEPTORS");let et=(()=>{class u{intercept(n,c){return c.handle(n)}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();const Nr=/^\)\]\}',?\n/;let Gn=(()=>{class u{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ae.y(c=>{const f=this.xhrFactory.build();if(f.open(n.method,n.urlWithParams),n.withCredentials&&(f.withCredentials=!0),n.headers.forEach((dt,yt)=>f.setRequestHeader(dt,yt.join(","))),n.headers.has("Accept")||f.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const dt=n.detectContentTypeHeader();null!==dt&&f.setRequestHeader("Content-Type",dt)}if(n.responseType){const dt=n.responseType.toLowerCase();f.responseType="json"!==dt?dt:"text"}const E=n.serializeBody();let I=null;const O=()=>{if(null!==I)return I;const dt=f.statusText||"OK",yt=new ln(f.getAllResponseHeaders()),Gt=function wi(u){return"responseURL"in u&&u.responseURL?u.responseURL:/^X-Request-URL:/m.test(u.getAllResponseHeaders())?u.getResponseHeader("X-Request-URL"):null}(f)||n.url;return I=new Ee({headers:yt,status:f.status,statusText:dt,url:Gt}),I},q=()=>{let{headers:dt,status:yt,statusText:Gt,url:Pn}=O(),or=null;204!==yt&&(or=void 0===f.response?f.responseText:f.response),0===yt&&(yt=or?200:0);let Zr=yt>=200&&yt<300;if("json"===n.responseType&&"string"==typeof or){const ys=or;or=or.replace(Nr,"");try{or=""!==or?JSON.parse(or):null}catch(to){or=ys,Zr&&(Zr=!1,or={error:to,text:or})}}Zr?(c.next(new Dt({body:or,headers:dt,status:yt,statusText:Gt,url:Pn||void 0})),c.complete()):c.error(new W({error:or,headers:dt,status:yt,statusText:Gt,url:Pn||void 0}))},te=dt=>{const{url:yt}=O(),Gt=new W({error:dt,status:f.status||0,statusText:f.statusText||"Unknown Error",url:yt||void 0});c.error(Gt)};let Te=!1;const Ae=dt=>{Te||(c.next(O()),Te=!0);let yt={type:k.DownloadProgress,loaded:dt.loaded};dt.lengthComputable&&(yt.total=dt.total),"text"===n.responseType&&!!f.responseText&&(yt.partialText=f.responseText),c.next(yt)},Ze=dt=>{let yt={type:k.UploadProgress,loaded:dt.loaded};dt.lengthComputable&&(yt.total=dt.total),c.next(yt)};return f.addEventListener("load",q),f.addEventListener("error",te),f.addEventListener("timeout",te),f.addEventListener("abort",te),n.reportProgress&&(f.addEventListener("progress",Ae),null!==E&&f.upload&&f.upload.addEventListener("progress",Ze)),f.send(E),c.next({type:k.Sent}),()=>{f.removeEventListener("error",te),f.removeEventListener("abort",te),f.removeEventListener("load",q),f.removeEventListener("timeout",te),n.reportProgress&&(f.removeEventListener("progress",Ae),null!==E&&f.upload&&f.upload.removeEventListener("progress",Ze)),f.readyState!==f.DONE&&f.abort()}})}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(w.JF))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();const Fs=new m.OlP("XSRF_COOKIE_NAME"),Zs=new m.OlP("XSRF_HEADER_NAME");class Qi{}let ki=(()=>{class u{constructor(n,c,f){this.doc=n,this.platform=c,this.cookieName=f,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,w.Mx)(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(w.K0),m.LFG(m.Lbi),m.LFG(Fs))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})(),io=(()=>{class u{constructor(n,c){this.tokenService=n,this.headerName=c}intercept(n,c){const f=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||f.startsWith("http://")||f.startsWith("https://"))return c.handle(n);const E=this.tokenService.getToken();return null!==E&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,E)})),c.handle(n)}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(Qi),m.LFG(Zs))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})(),ea=(()=>{class u{constructor(n,c){this.backend=n,this.injector=c,this.chain=null}handle(n){if(null===this.chain){const c=this.injector.get(Ce,[]);this.chain=c.reduceRight((f,E)=>new de(f,E),this.backend)}return this.chain.handle(n)}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(en),m.LFG(m.zs3))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})(),Uo=(()=>{class u{static disable(){return{ngModule:u,providers:[{provide:io,useClass:et}]}}static withOptions(n={}){return{ngModule:u,providers:[n.cookieName?{provide:Fs,useValue:n.cookieName}:[],n.headerName?{provide:Zs,useValue:n.headerName}:[]]}}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[io,{provide:Ce,useExisting:io,multi:!0},{provide:Qi,useClass:ki},{provide:Fs,useValue:"XSRF-TOKEN"},{provide:Zs,useValue:"X-XSRF-TOKEN"}]}),u})(),Ca=(()=>{class u{}return u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[ne,{provide:vt,useClass:ea},Gn,{provide:en,useExisting:Gn}],imports:[[Uo.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),u})();var Zu=$(4986),El=$(6451),ta=$(3099),vc=$(3900),Ga=$(5026),Is=$(1884),qa=$(4482),Mi=$(5403),ll=$(8421),Qd=$(4671),Jd=$(5032),ul=$(7669),Ks=$(5813),Wa=($(9606),$(3942)),sr=$(4859),hu=$(5861),wl=$(9681),ce=$(2090),Vo=$(1877);const Bo="@firebase/database";let Io="";function Ia(u){Io=u}class Do{constructor(i){this.domStorage_=i,this.prefix_="firebase:"}set(i,n){null==n?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),(0,ce.Pz)(n))}get(i){const n=this.domStorage_.getItem(this.prefixedName_(i));return null==n?null:(0,ce.cI)(n)}remove(i){this.domStorage_.removeItem(this.prefixedName_(i))}prefixedName_(i){return this.prefix_+i}toString(){return this.domStorage_.toString()}}class Yu{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(i,n){null==n?delete this.cache_[i]:this.cache_[i]=n}get(i){return(0,ce.r3)(this.cache_,i)?this.cache_[i]:null}remove(i){delete this.cache_[i]}}const Qu=function(u){try{if("undefined"!=typeof window&&void 0!==window[u]){const i=window[u];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new Do(i)}}catch(i){}return new Yu},xi=Qu("localStorage"),za=Qu("sessionStorage"),jo=new Vo.Yd("@firebase/database"),go=function(){let u=1;return function(){return u++}}(),bl=function(u){const i=(0,ce.dS)(u),n=new ce.gQ;n.update(i);const c=n.digest();return ce.US.encodeByteArray(c)},Cl=function(...u){let i="";for(let n=0;n<u.length;n++){const c=u[n];Array.isArray(c)||c&&"object"==typeof c&&"number"==typeof c.length?i+=Cl.apply(null,c):i+="object"==typeof c?(0,ce.Pz)(c):c,i+=" "}return i};let So=null,Da=!0;const Fi=function(u,i){(0,ce.hu)(!i||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(jo.logLevel=Vo.in.VERBOSE,So=jo.log.bind(jo),i&&za.set("logging_enabled",!0)):"function"==typeof u?So=u:(So=null,za.remove("logging_enabled"))},bi=function(...u){if(!0===Da&&(Da=!1,null===So&&!0===za.get("logging_enabled")&&Fi(!0)),So){const i=Cl.apply(null,u);So(i)}},Ho=function(u){return function(...i){bi(u,...i)}},Ri=function(...u){const i="FIREBASE INTERNAL ERROR: "+Cl(...u);jo.error(i)},Ys=function(...u){const i=`FIREBASE FATAL ERROR: ${Cl(...u)}`;throw jo.error(i),new Error(i)},Ni=function(...u){const i="FIREBASE WARNING: "+Cl(...u);jo.warn(i)},kl=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},yr="[MIN_NAME]",ds="[MAX_NAME]",mo=function(u,i){if(u===i)return 0;if(u===yr||i===ds)return-1;if(i===yr||u===ds)return 1;{const n=Cr(u),c=Cr(i);return null!==n?null!==c?n-c==0?u.length-i.length:n-c:-1:null!==c?1:u<i?-1:1}},M=function(u,i){return u===i?0:u<i?-1:1},S=function(u,i){if(i&&u in i)return i[u];throw new Error("Missing required key ("+u+") in object: "+(0,ce.Pz)(i))},D=function(u){if("object"!=typeof u||null===u)return(0,ce.Pz)(u);const i=[];for(const c in u)i.push(c);i.sort();let n="{";for(let c=0;c<i.length;c++)0!==c&&(n+=","),n+=(0,ce.Pz)(i[c]),n+=":",n+=D(u[i[c]]);return n+="}",n},N=function(u,i){const n=u.length;if(n<=i)return[u];const c=[];for(let f=0;f<n;f+=i)c.push(u.substring(f,f+i>n?n:f+i));return c};function P(u,i){for(const n in u)u.hasOwnProperty(n)&&i(n,u[n])}const Z=function(u){(0,ce.hu)(!kl(u),"Invalid JSON number");const c=1023;let f,E,I,O,q;0===u?(E=0,I=0,f=1/u==-1/0?1:0):(f=u<0,(u=Math.abs(u))>=Math.pow(2,1-c)?(O=Math.min(Math.floor(Math.log(u)/Math.LN2),c),E=O+c,I=Math.round(u*Math.pow(2,52-O)-Math.pow(2,52))):(E=0,I=Math.round(u/Math.pow(2,-1074))));const te=[];for(q=52;q;q-=1)te.push(I%2?1:0),I=Math.floor(I/2);for(q=11;q;q-=1)te.push(E%2?1:0),E=Math.floor(E/2);te.push(f?1:0),te.reverse();const Te=te.join("");let Ae="";for(q=0;q<64;q+=8){let Ze=parseInt(Te.substr(q,8),2).toString(16);1===Ze.length&&(Ze="0"+Ze),Ae+=Ze}return Ae.toLowerCase()},Qt=new RegExp("^-?(0*)\\d{1,10}$"),zn=-2147483648,rn=2147483647,Cr=function(u){if(Qt.test(u)){const i=Number(u);if(i>=zn&&i<=rn)return i}return null},fr=function(u){try{u()}catch(i){setTimeout(()=>{throw Ni("Exception was thrown by user callback.",i.stack||""),i},Math.floor(0))}},Ao=function(u,i){const n=setTimeout(u,i);return"object"==typeof n&&n.unref&&n.unref(),n};class hs{constructor(i,n){this.appName_=i,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(c=>this.appCheck=c)}getToken(i){return this.appCheck?this.appCheck.getToken(i):new Promise((n,c)=>{setTimeout(()=>{this.appCheck?this.getToken(i).then(n,c):n(null)},0)})}addTokenChangeListener(i){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(c=>c.addTokenListener(i))}notifyForInvalidToken(){Ni(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Fl{constructor(i,n,c){this.appName_=i,this.firebaseOptions_=n,this.authProvider_=c,this.auth_=null,this.auth_=c.getImmediate({optional:!0}),this.auth_||c.onInit(f=>this.auth_=f)}getToken(i){return this.auth_?this.auth_.getToken(i).catch(n=>n&&"auth/token-not-initialized"===n.code?(bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,c)=>{setTimeout(()=>{this.auth_?this.getToken(i).then(n,c):n(null)},0)})}addTokenChangeListener(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(n=>n.addAuthTokenListener(i))}removeTokenChangeListener(i){this.authProvider_.get().then(n=>n.removeAuthTokenListener(i))}notifyForInvalidToken(){let i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';i+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ni(i)}}let Ds=(()=>{class u{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Ec=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qr="websocket",ff="long_polling";class fs{constructor(i,n,c,f,E=!1,I="",O=!1){this.secure=n,this.namespace=c,this.webSocketOnly=f,this.nodeAdmin=E,this.persistenceKey=I,this.includeNamespaceInQueryParams=O,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xi.get("host:"+i)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&xi.set("host:"+this._host,this.internalHost))}toString(){let i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function pf(u,i,n){let c;if((0,ce.hu)("string"==typeof i,"typeof type must == string"),(0,ce.hu)("object"==typeof n,"typeof params must == object"),i===qr)c=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(i!==ff)throw new Error("Unknown connection type: "+i);c=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function Ll(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(n.ns=u.namespace);const f=[];return P(n,(E,I)=>{f.push(E+"="+I)}),c+f.join("&")}class Qs{constructor(){this.counters_={}}incrementCounter(i,n=1){(0,ce.r3)(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=n}get(){return(0,ce.p$)(this.counters_)}}const Ul={},Sa={};function Qn(u){const i=u.toString();return Ul[i]||(Ul[i]=new Qs),Ul[i]}class gu{constructor(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(i,n){this.closeAfterResponse=i,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(i,n){for(this.pendingResponses[i]=n;this.pendingResponses[this.currentResponseNum];){const c=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let f=0;f<c.length;++f)c[f]&&fr(()=>{this.onMessage_(c[f])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ss{constructor(i,n,c,f,E,I,O){this.connId=i,this.repoInfo=n,this.applicationId=c,this.appCheckToken=f,this.authToken=E,this.transportSessionId=I,this.lastSessionId=O,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ho(i),this.stats_=Qn(n),this.urlFn=q=>(this.appCheckToken&&(q.ac=this.appCheckToken),pf(n,ff,q))}open(i,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new gu(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,ce.Yr)()||"complete"===document.readyState)u();else{let i=!1;const n=function(){document.body?i||(i=!0,u()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _u((...E)=>{const[I,O,q,te,Te]=E;if(this.incrementIncomingBytes_(E),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===I)this.id=O,this.password=q;else{if("close"!==I)throw new Error("Unrecognized command received: "+I);O?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(O,()=>{this.onClosed_()})):this.onClosed_()}},(...E)=>{const[I,O]=E;this.incrementIncomingBytes_(E),this.myPacketOrderer.handleResponse(I,O)},()=>{this.onClosed_()},this.urlFn);const c={start:"t"};c.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(c.cb=this.scriptTagHolder.uniqueCallbackIdentifier),c.v="5",this.transportSessionId&&(c.s=this.transportSessionId),this.lastSessionId&&(c.ls=this.lastSessionId),this.applicationId&&(c.p=this.applicationId),this.appCheckToken&&(c.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Ec.test(location.hostname)&&(c.r="f");const f=this.urlFn(c);this.log_("Connecting via long-poll to "+f),this.scriptTagHolder.addTag(f,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ss.forceAllow_=!0}static forceDisallow(){ss.forceDisallow_=!0}static isAvailable(){return!((0,ce.Yr)()||!ss.forceAllow_&&(ss.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(i){const n=(0,ce.Pz)(i);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const c=(0,ce.h$)(n),f=N(c,1840);for(let E=0;E<f.length;E++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,f.length,f[E]),this.curSegmentNum++}addDisconnectPingFrame(i,n){if((0,ce.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const c={dframe:"t"};c.id=i,c.pw=n,this.myDisconnFrame.src=this.urlFn(c),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(i){const n=(0,ce.Pz)(i).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class _u{constructor(i,n,c,f){if(this.onDisconnect=c,this.urlFn=f,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ce.Yr)())this.commandCB=i,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=go(),window["pLPCommand"+this.uniqueCallbackIdentifier]=i,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=_u.createIFrame_();let E="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(E='<script>document.domain="'+document.domain+'";<\/script>');const I="<html><body>"+E+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(I),this.myIFrame.doc.close()}catch(O){bi("frame writing exception"),O.stack&&bi(O.stack),bi(O)}}}static createIFrame_(){const i=document.createElement("iframe");if(i.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(i);try{i.contentWindow.document||bi("No IE domain setting required")}catch(n){const c=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+c+"';document.close();})())"}return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const i=this.onDisconnect;i&&(this.onDisconnect=null,i())}startLongPoll(i,n){for(this.myID=i,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const i={};i.id=this.myID,i.pw=this.myPW,i.ser=this.currentSerial;let n=this.urlFn(i),c="",f=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+c.length<=1870;){const I=this.pendingSegs.shift();c=c+"&seg"+f+"="+I.seg+"&ts"+f+"="+I.ts+"&d"+f+"="+I.d,f++}return n+=c,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(i,n,c){this.pendingSegs.push({seg:i,ts:n,d:c}),this.alive&&this.newRequest_()}addLongPollTag_(i,n){this.outstandingRequests.add(n);const c=()=>{this.outstandingRequests.delete(n),this.newRequest_()},f=setTimeout(c,Math.floor(25e3));this.addTag(i,()=>{clearTimeout(f),c()})}addTag(i,n){(0,ce.Yr)()?this.doNodeLongPoll(i,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;const c=this.myIFrame.doc.createElement("script");c.type="text/javascript",c.async=!0,c.src=i,c.onload=c.onreadystatechange=function(){const f=c.readyState;(!f||"loaded"===f||"complete"===f)&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),n())},c.onerror=()=>{bi("Long-poll script failed to load: "+i),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(c)}catch(c){}},Math.floor(1))}}let ra=null;"undefined"!=typeof MozWebSocket?ra=MozWebSocket:"undefined"!=typeof WebSocket&&(ra=WebSocket);let Pa=(()=>{class u{constructor(n,c,f,E,I,O,q){this.connId=n,this.applicationId=f,this.appCheckToken=E,this.authToken=I,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ho(this.connId),this.stats_=Qn(c),this.connURL=u.connectionURL_(c,O,q,E,f),this.nodeAdmin=c.nodeAdmin}static connectionURL_(n,c,f,E,I){const O={v:"5"};return!(0,ce.Yr)()&&"undefined"!=typeof location&&location.hostname&&Ec.test(location.hostname)&&(O.r="f"),c&&(O.s=c),f&&(O.ls=f),E&&(O.ac=E),I&&(O.p=I),pf(n,qr,O)}open(n,c){this.onDisconnect=c,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xi.set("previous_websocket_failure",!0);try{let f;if((0,ce.Yr)()){const I={headers:{"User-Agent":`Firebase/5/${Io}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(I.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(I.headers["X-Firebase-AppCheck"]=this.appCheckToken);const O=process.env,q=0===this.connURL.indexOf("wss://")?O.HTTPS_PROXY||O.https_proxy:O.HTTP_PROXY||O.http_proxy;q&&(I.proxy={origin:q})}this.mySock=new ra(this.connURL,[],f)}catch(f){this.log_("Error instantiating WebSocket.");const E=f.message||f.data;return E&&this.log_(E),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=f=>{this.handleIncomingFrame(f)},this.mySock.onerror=f=>{this.log_("WebSocket error.  Closing connection.");const E=f.message||f.data;E&&this.log_(E),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let n=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const f=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);f&&f.length>1&&parseFloat(f[1])<4.4&&(n=!0)}return!n&&null!==ra&&!u.forceDisallow_}static previouslyFailed(){return xi.isInMemoryStorage||!0===xi.get("previous_websocket_failure")}markConnectionHealthy(){xi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const c=this.frames.join("");this.frames=null;const f=(0,ce.cI)(c);this.onMessage(f)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if((0,ce.hu)(null===this.frames,"We already have a frame buffer"),n.length<=6){const c=Number(n);if(!isNaN(c))return this.handleNewFrameCount_(c),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const c=n.data;if(this.bytesReceived+=c.length,this.stats_.incrementCounter("bytes_received",c.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(c);else{const f=this.extractFrameCount_(c);null!==f&&this.appendFrame_(f)}}send(n){this.resetKeepAlive();const c=(0,ce.Pz)(n);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const f=N(c,16384);f.length>1&&this.sendString_(String(f.length));for(let E=0;E<f.length;E++)this.sendString_(f[E])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(c){this.log_("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),ia=(()=>{class u{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ss,Pa]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const c=Pa&&Pa.isAvailable();let f=c&&!Pa.previouslyFailed();if(n.webSocketOnly&&(c||Ni("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),f=!0),f)this.transports_=[Pa];else{const E=this.transports_=[];for(const I of u.ALL_TRANSPORTS)I&&I.isAvailable()&&E.push(I);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class gn{constructor(i,n,c,f,E,I,O,q,te,Te){this.id=i,this.repoInfo_=n,this.applicationId_=c,this.appCheckToken_=f,this.authToken_=E,this.onMessage_=I,this.onReady_=O,this.onDisconnect_=q,this.onKill_=te,this.lastSessionId=Te,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ho("c:"+this.id+":"),this.transportManager_=new ia(n),this.log_("Connection created"),this.start_()}start_(){const i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),c=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,c)},Math.floor(0));const f=i.healthyTimeout||0;f>0&&(this.healthyTimeout_=Ao(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(f)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(i){return n=>{i===this.conn_?this.onConnectionLost_(n):i===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(i){return n=>{2!==this.state_&&(i===this.rx_?this.onPrimaryMessageReceived_(n):i===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(i){this.sendData_({t:"d",d:i})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(i){if("t"in i){const n=i.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(i){const n=S("t",i),c=S("d",i);if("c"===n)this.onSecondaryControl_(c);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(c)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(i){const n=S("t",i),c=S("d",i);"c"===n?this.onControl_(c):"d"===n&&this.onDataMessage_(c)}onDataMessage_(i){this.onPrimaryResponse_(),this.onMessage_(i)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(i){const n=S("t",i);if("d"in i){const c=i.d;if("h"===n)this.onHandshake_(c);else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let f=0;f<this.pendingDataMessages.length;++f)this.onDataMessage_(this.pendingDataMessages[f]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(c):"r"===n?this.onReset_(c):"e"===n?Ri("Server Error: "+c):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ri("Unknown control packet command: "+n)}}onHandshake_(i){const n=i.ts,c=i.v,f=i.h;this.sessionId=i.s,this.repoInfo_.host=f,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==c&&Ni("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)}startUpgrade_(i){this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),c=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,c),Ao(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(i,n){this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ao(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()}onConnectionLost_(i){this.conn_=null,i||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(i){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(i)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class En{put(i,n,c,f){}merge(i,n,c,f){}refreshAuthToken(i){}refreshAppCheckToken(i){}onDisconnectPut(i,n,c){}onDisconnectMerge(i,n,c){}onDisconnectCancel(i,n){}reportStats(i){}}class Pr{constructor(i){this.allowedEvents_=i,this.listeners_={},(0,ce.hu)(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}trigger(i,...n){if(Array.isArray(this.listeners_[i])){const c=[...this.listeners_[i]];for(let f=0;f<c.length;f++)c[f].callback.apply(c[f].context,n)}}on(i,n,c){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:n,context:c});const f=this.getInitialEvent(i);f&&n.apply(c,f)}off(i,n,c){this.validateEventType_(i);const f=this.listeners_[i]||[];for(let E=0;E<f.length;E++)if(f[E].callback===n&&(!c||c===f[E].context))return void f.splice(E,1)}validateEventType_(i){(0,ce.hu)(this.allowedEvents_.find(n=>n===i),"Unknown event: "+i)}}class cn extends Pr{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ce.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cn}getInitialEvent(i){return(0,ce.hu)("online"===i,"Unknown event type: "+i),[this.online_]}currentlyOnline(){return this.online_}}class yn{constructor(i,n){if(void 0===n){this.pieces_=i.split("/");let c=0;for(let f=0;f<this.pieces_.length;f++)this.pieces_[f].length>0&&(this.pieces_[c]=this.pieces_[f],c++);this.pieces_.length=c,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=n}toString(){let i="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(i+="/"+this.pieces_[n]);return i||"/"}}function vr(){return new yn("")}function xn(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function Us(u){return u.pieces_.length-u.pieceNum_}function Ir(u){let i=u.pieceNum_;return i<u.pieces_.length&&i++,new yn(u.pieces_,i)}function Go(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function hl(u,i=0){return u.pieces_.slice(u.pieceNum_+i)}function yu(u){if(u.pieceNum_>=u.pieces_.length)return null;const i=[];for(let n=u.pieceNum_;n<u.pieces_.length-1;n++)i.push(u.pieces_[n]);return new yn(i,0)}function hi(u,i){const n=[];for(let c=u.pieceNum_;c<u.pieces_.length;c++)n.push(u.pieces_[c]);if(i instanceof yn)for(let c=i.pieceNum_;c<i.pieces_.length;c++)n.push(i.pieces_[c]);else{const c=i.split("/");for(let f=0;f<c.length;f++)c[f].length>0&&n.push(c[f])}return new yn(n,0)}function ur(u){return u.pieceNum_>=u.pieces_.length}function yo(u,i){const n=xn(u),c=xn(i);if(null===n)return i;if(n===c)return yo(Ir(u),Ir(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+u+")")}function xo(u,i){const n=hl(u,0),c=hl(i,0);for(let f=0;f<n.length&&f<c.length;f++){const E=mo(n[f],c[f]);if(0!==E)return E}return n.length===c.length?0:n.length<c.length?-1:1}function vu(u,i){if(Us(u)!==Us(i))return!1;for(let n=u.pieceNum_,c=i.pieceNum_;n<=u.pieces_.length;n++,c++)if(u.pieces_[n]!==i.pieces_[c])return!1;return!0}function qo(u,i){let n=u.pieceNum_,c=i.pieceNum_;if(Us(u)>Us(i))return!1;for(;n<u.pieces_.length;){if(u.pieces_[n]!==i.pieces_[c])return!1;++n,++c}return!0}class mf{constructor(i,n){this.errorPrefix_=n,this.parts_=hl(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(let c=0;c<this.parts_.length;c++)this.byteLength_+=(0,ce.ug)(this.parts_[c]);_f(this)}}function _f(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Cc(u))}function Cc(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class Tc extends Pr{constructor(){let i,n;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",i="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",i="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",i="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",i="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const c=!document[i];c!==this.visible_&&(this.visible_=c,this.trigger("visible",c))},!1)}static getInstance(){return new Tc}getInitialEvent(i){return(0,ce.hu)("visible"===i,"Unknown event type: "+i),[this.visible_]}}const Za=1e3;let tc,Ka=(()=>{class u extends En{constructor(n,c,f,E,I,O,q,te){if(super(),this.repoInfo_=n,this.applicationId_=c,this.onDataUpdate_=f,this.onConnectStatus_=E,this.onServerInfoUpdate_=I,this.authTokenProvider_=O,this.appCheckTokenProvider_=q,this.authOverride_=te,this.id=u.nextPersistentConnectionId_++,this.log_=Ho("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Za,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,te&&!(0,ce.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tc.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&cn.getInstance().on("online",this.onOnline_,this)}sendRequest(n,c,f){const E=++this.requestNumber_,I={r:E,a:n,b:c};this.log_((0,ce.Pz)(I)),(0,ce.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(I),f&&(this.requestCBHash_[E]=f)}get(n){this.initConnection_();const c=new ce.BH,f={p:n._path.toString(),q:n._queryObject},E={action:"g",request:f,onComplete:O=>{const q=O.d;"ok"===O.s?(this.onDataUpdate_(f.p,q,!1,null),c.resolve(q)):c.reject(q)}};this.outstandingGets_.push(E),this.outstandingGetCount_++;const I=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const O=this.outstandingGets_[I];void 0===O||E!==O||(delete this.outstandingGets_[I],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+I+" timed out on connection"),c.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(I),c.promise}listen(n,c,f,E){this.initConnection_();const I=n._queryIdentifier,O=n._path.toString();this.log_("Listen called for "+O+" "+I),this.listens.has(O)||this.listens.set(O,new Map),(0,ce.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ce.hu)(!this.listens.get(O).has(I),"listen() called twice for same path/queryId.");const q={onComplete:E,hashFn:c,query:n,tag:f};this.listens.get(O).set(I,q),this.connected_&&this.sendListen_(q)}sendGet_(n){const c=this.outstandingGets_[n];this.sendRequest("g",c.request,f=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),c.onComplete&&c.onComplete(f)})}sendListen_(n){const c=n.query,f=c._path.toString(),E=c._queryIdentifier;this.log_("Listen on "+f+" for "+E);const I={p:f};n.tag&&(I.q=c._queryObject,I.t=n.tag),I.h=n.hashFn(),this.sendRequest("q",I,q=>{const te=q.d,Te=q.s;u.warnOnListenWarnings_(te,c),(this.listens.get(f)&&this.listens.get(f).get(E))===n&&(this.log_("listen response",q),"ok"!==Te&&this.removeListen_(f,E),n.onComplete&&n.onComplete(Te,te))})}static warnOnListenWarnings_(n,c){if(n&&"object"==typeof n&&(0,ce.r3)(n,"w")){const f=(0,ce.DV)(n,"w");if(Array.isArray(f)&&~f.indexOf("no_index")){const E='".indexOn": "'+c._queryParams.getIndex().toString()+'"',I=c._path.toString();Ni(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${E} at ${I} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||(0,ce.GJ)(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,c=(0,ce.w9)(n)?"auth":"gauth",f={cred:n};null===this.authOverride_?f.noauth=!0:"object"==typeof this.authOverride_&&(f.authvar=this.authOverride_),this.sendRequest(c,f,E=>{const I=E.s,O=E.d||"error";this.authToken_===n&&("ok"===I?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(I,O))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const c=n.s,f=n.d||"error";"ok"===c?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(c,f)})}unlisten(n,c){const f=n._path.toString(),E=n._queryIdentifier;this.log_("Unlisten called for "+f+" "+E),(0,ce.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(f,E)&&this.connected_&&this.sendUnlisten_(f,E,n._queryObject,c)}sendUnlisten_(n,c,f,E){this.log_("Unlisten on "+n+" for "+c);const I={p:n};E&&(I.q=f,I.t=E),this.sendRequest("n",I)}onDisconnectPut(n,c,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,c,f):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:c,onComplete:f})}onDisconnectMerge(n,c,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,c,f):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:c,onComplete:f})}onDisconnectCancel(n,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,c):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:c})}sendOnDisconnect_(n,c,f,E){const I={p:c,d:f};this.log_("onDisconnect "+n,I),this.sendRequest(n,I,O=>{E&&setTimeout(()=>{E(O.s,O.d)},Math.floor(0))})}put(n,c,f,E){this.putInternal("p",n,c,f,E)}merge(n,c,f,E){this.putInternal("m",n,c,f,E)}putInternal(n,c,f,E,I){this.initConnection_();const O={p:c,d:f};void 0!==I&&(O.h=I),this.outstandingPuts_.push({action:n,request:O,onComplete:E}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+c)}sendPut_(n){const c=this.outstandingPuts_[n].action,f=this.outstandingPuts_[n].request,E=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(c,f,I=>{this.log_(c+" response",I),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),E&&E(I.s,I.d)})}reportStats(n){if(this.connected_){const c={c:n};this.log_("reportStats",c),this.sendRequest("s",c,f=>{"ok"!==f.s&&this.log_("reportStats","Error sending stats: "+f.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+(0,ce.Pz)(n));const c=n.r,f=this.requestCBHash_[c];f&&(delete this.requestCBHash_[c],f(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,c){this.log_("handleServerMessage",n,c),"d"===n?this.onDataUpdate_(c.p,c.d,!1,c.t):"m"===n?this.onDataUpdate_(c.p,c.d,!0,c.t):"c"===n?this.onListenRevoked_(c.p,c.q):"ac"===n?this.onAuthRevoked_(c.s,c.d):"apc"===n?this.onAppCheckRevoked_(c.s,c.d):"sd"===n?this.onSecurityDebugPacket_(c):Ri("Unrecognized action received from server: "+(0,ce.Pz)(n)+"\nAre you using the latest client?")}onReady_(n,c){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=c,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){(0,ce.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Za),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let c=Math.max(0,this.reconnectDelay_-n);c=Math.random()*c,this.log_("Trying to reconnect in "+c+"ms"),this.scheduleConnect_(c),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return(0,hu.Z)(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const c=n.onDataMessage_.bind(n),f=n.onReady_.bind(n),E=n.onRealtimeDisconnect_.bind(n),I=n.id+":"+u.nextConnectionId_++,O=n.lastSessionId;let q=!1,te=null;const Te=function(){te?te.close():(q=!0,E())};n.realtime_={close:Te,sendRequest:function(dt){(0,ce.hu)(te,"sendRequest call when we're not connected not allowed."),te.sendRequest(dt)}};const Ze=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[dt,yt]=yield Promise.all([n.authTokenProvider_.getToken(Ze),n.appCheckTokenProvider_.getToken(Ze)]);q?bi("getToken() completed but was canceled"):(bi("getToken() completed. Creating connection."),n.authToken_=dt&&dt.accessToken,n.appCheckToken_=yt&&yt.token,te=new gn(I,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,c,f,E,Gt=>{Ni(Gt+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},O))}catch(dt){n.log_("Failed to get token: "+dt),q||(n.repoInfo_.nodeAdmin&&Ni(dt),Te())}}})()}interrupt(n){bi("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){bi("Resuming connection for reason: "+n),delete this.interruptReasons_[n],(0,ce.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const c=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:c})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const c=this.outstandingPuts_[n];c&&"h"in c.request&&c.queued&&(c.onComplete&&c.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,c){let f;f=c?c.map(I=>D(I)).join("$"):"default";const E=this.removeListen_(n,f);E&&E.onComplete&&E.onComplete("permission_denied")}removeListen_(n,c){const f=new yn(n).toString();let E;if(this.listens.has(f)){const I=this.listens.get(f);E=I.get(c),I.delete(c),0===I.size&&this.listens.delete(f)}else E=void 0;return E}onAuthRevoked_(n,c){bi("Auth token revoked: "+n+"/"+c),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,c){bi("App check token revoked: "+n+"/"+c),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const c of n.values())this.sendListen_(c);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let c="js";(0,ce.Yr)()&&(c=this.repoInfo_.nodeAdmin?"admin_node":"node"),n["sdk."+c+"."+Io.replace(/\./g,"-")]=1,(0,ce.uI)()?n["framework.cordova"]=1:(0,ce.b$)()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=cn.getInstance().currentlyOnline();return(0,ce.xb)(this.interruptReasons_)&&n}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class cr{constructor(i,n){this.name=i,this.node=n}static Wrap(i,n){return new cr(i,n)}}class ec{getCompare(){return this.compare.bind(this)}indexedValueChanged(i,n){const c=new cr(yr,i),f=new cr(yr,n);return 0!==this.compare(c,f)}minPost(){return cr.MIN}}class Eu extends ec{static get __EMPTY_NODE(){return tc}static set __EMPTY_NODE(i){tc=i}compare(i,n){return mo(i.name,n.name)}isDefinedOn(i){throw(0,ce.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(i,n){return!1}minPost(){return cr.MIN}maxPost(){return new cr(ds,tc)}makePost(i,n){return(0,ce.hu)("string"==typeof i,"KeyIndex indexValue must always be a string."),new cr(i,tc)}toString(){return".key"}}const Ss=new Eu;class Sc{constructor(i,n,c,f,E=null){this.isReverse_=f,this.resultGenerator_=E,this.nodeStack_=[];let I=1;for(;!i.isEmpty();)if(i=i,I=n?c(i.key,n):1,f&&(I*=-1),I<0)i=this.isReverse_?i.left:i.right;else{if(0===I){this.nodeStack_.push(i);break}this.nodeStack_.push(i),i=this.isReverse_?i.right:i.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,i=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}}}let wu,sa=(()=>{class u{constructor(n,c,f,E,I){this.key=n,this.value=c,this.color=null!=f?f:u.RED,this.left=null!=E?E:Wo.EMPTY_NODE,this.right=null!=I?I:Wo.EMPTY_NODE}copy(n,c,f,E,I){return new u(null!=n?n:this.key,null!=c?c:this.value,null!=f?f:this.color,null!=E?E:this.left,null!=I?I:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,c,f){let E=this;const I=f(n,E.key);return E=I<0?E.copy(null,null,null,E.left.insert(n,c,f),null):0===I?E.copy(null,c,null,null,null):E.copy(null,null,null,null,E.right.insert(n,c,f)),E.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wo.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,c){let f,E;if(f=this,c(n,f.key)<0)!f.left.isEmpty()&&!f.left.isRed_()&&!f.left.left.isRed_()&&(f=f.moveRedLeft_()),f=f.copy(null,null,null,f.left.remove(n,c),null);else{if(f.left.isRed_()&&(f=f.rotateRight_()),!f.right.isEmpty()&&!f.right.isRed_()&&!f.right.left.isRed_()&&(f=f.moveRedRight_()),0===c(n,f.key)){if(f.right.isEmpty())return Wo.EMPTY_NODE;E=f.right.min_(),f=f.copy(E.key,E.value,null,null,f.right.removeMin_())}f=f.copy(null,null,null,null,f.right.remove(n,c))}return f.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),c=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,c)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class Wo{constructor(i,n=Wo.EMPTY_NODE){this.comparator_=i,this.root_=n}insert(i,n){return new Wo(this.comparator_,this.root_.insert(i,n,this.comparator_).copy(null,null,sa.BLACK,null,null))}remove(i){return new Wo(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,sa.BLACK,null,null))}get(i){let n,c=this.root_;for(;!c.isEmpty();){if(n=this.comparator_(i,c.key),0===n)return c.value;n<0?c=c.left:n>0&&(c=c.right)}return null}getPredecessorKey(i){let n,c=this.root_,f=null;for(;!c.isEmpty();){if(n=this.comparator_(i,c.key),0===n){if(c.left.isEmpty())return f?f.key:null;for(c=c.left;!c.right.isEmpty();)c=c.right;return c.key}n<0?c=c.left:n>0&&(f=c,c=c.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(i){return this.root_.inorderTraversal(i)}reverseTraversal(i){return this.root_.reverseTraversal(i)}getIterator(i){return new Sc(this.root_,null,this.comparator_,!1,i)}getIteratorFrom(i,n){return new Sc(this.root_,i,this.comparator_,!1,n)}getReverseIteratorFrom(i,n){return new Sc(this.root_,i,this.comparator_,!0,n)}getReverseIterator(i){return new Sc(this.root_,null,this.comparator_,!0,i)}}function yf(u,i){return mo(u.name,i.name)}function Oa(u,i){return mo(u,i)}Wo.EMPTY_NODE=new class Np{copy(i,n,c,f,E){return this}insert(i,n,c){return new sa(i,n,null)}remove(i,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Pp=function(u){return"number"==typeof u?"number:"+Z(u):"string:"+u},Ef=function(u){if(u.isLeafNode()){const i=u.val();(0,ce.hu)("string"==typeof i||"number"==typeof i||"object"==typeof i&&(0,ce.r3)(i,".sv"),"Priority must be a string or number.")}else(0,ce.hu)(u===wu||u.isEmpty(),"priority of unexpected type.");(0,ce.hu)(u===wu||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Op,rm,nh,xl=(()=>{class u{constructor(n,c=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=c,this.lazyHash_=null,(0,ce.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ef(this.priorityNode_)}static set __childrenNodeConstructor(n){Op=n}static get __childrenNodeConstructor(){return Op}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new u(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ur(n)?this:".priority"===xn(n)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,c){return null}updateImmediateChild(n,c){return".priority"===n?this.updatePriority(c):c.isEmpty()&&".priority"!==n?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,c).updatePriority(this.priorityNode_)}updateChild(n,c){const f=xn(n);return null===f?c:c.isEmpty()&&".priority"!==f?this:((0,ce.hu)(".priority"!==f||1===Us(n),".priority must be the last token in a path"),this.updateImmediateChild(f,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ir(n),c)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,c){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Pp(this.priorityNode_.val())+":");const c=typeof this.value_;n+=c+":",n+="number"===c?Z(this.value_):this.value_,this.lazyHash_=bl(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===u.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof u.__childrenNodeConstructor?-1:((0,ce.hu)(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const c=typeof n.value_,f=typeof this.value_,E=u.VALUE_TYPE_ORDER.indexOf(c),I=u.VALUE_TYPE_ORDER.indexOf(f);return(0,ce.hu)(E>=0,"Unknown leaf type: "+c),(0,ce.hu)(I>=0,"Unknown leaf type: "+f),E===I?"object"===f?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:I-E}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const c=n;return this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_)}return!1}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const Li=new class nc extends ec{compare(i,n){const c=i.node.getPriority(),f=n.node.getPriority(),E=c.compareTo(f);return 0===E?mo(i.name,n.name):E}isDefinedOn(i){return!i.getPriority().isEmpty()}indexedValueChanged(i,n){return!i.getPriority().equals(n.getPriority())}minPost(){return cr.MIN}maxPost(){return new cr(ds,new xl("[PRIORITY-POST]",nh))}makePost(i,n){const c=rm(i);return new cr(n,new xl("[PRIORITY-POST]",c))}toString(){return".priority"}},gd=Math.log(2);class bu{constructor(i){this.count=parseInt(Math.log(i+1)/gd,10),this.current_=this.count-1;const f=(E=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=i+1&f}nextBitIsOne(){const i=!(this.bits_&1<<this.current_);return this.current_--,i}}const Ya=function(u,i,n,c){u.sort(i);const f=function(q,te){const Te=te-q;let Ae,Ze;if(0===Te)return null;if(1===Te)return Ae=u[q],Ze=n?n(Ae):Ae,new sa(Ze,Ae.node,sa.BLACK,null,null);{const dt=parseInt(Te/2,10)+q,yt=f(q,dt),Gt=f(dt+1,te);return Ae=u[dt],Ze=n?n(Ae):Ae,new sa(Ze,Ae.node,sa.BLACK,yt,Gt)}},O=function(q){let te=null,Te=null,Ae=u.length;const Ze=function(yt,Gt){const Pn=Ae-yt,or=Ae;Ae-=yt;const Zr=f(Pn+1,or),ys=u[Pn],to=n?n(ys):ys;dt(new sa(to,ys.node,Gt,null,Zr))},dt=function(yt){te?(te.left=yt,te=yt):(Te=yt,te=yt)};for(let yt=0;yt<q.count;++yt){const Gt=q.nextBitIsOne(),Pn=Math.pow(2,q.count-(yt+1));Gt?Ze(Pn,sa.BLACK):(Ze(Pn,sa.BLACK),Ze(Pn,sa.RED))}return Te}(new bu(u.length));return new Wo(c||i,O)};let md;const vo={};class Ro{constructor(i,n){this.indexes_=i,this.indexSet_=n}static get Default(){return(0,ce.hu)(vo&&Li,"ChildrenNode.ts has not been loaded"),md=md||new Ro({".priority":vo},{".priority":Li}),md}get(i){const n=(0,ce.DV)(this.indexes_,i);if(!n)throw new Error("No index defined for "+i);return n instanceof Wo?n:null}hasIndex(i){return(0,ce.r3)(this.indexSet_,i.toString())}addIndex(i,n){(0,ce.hu)(i!==Ss,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const c=[];let f=!1;const E=n.getIterator(cr.Wrap);let O,I=E.getNext();for(;I;)f=f||i.isDefinedOn(I.node),c.push(I),I=E.getNext();O=f?Ya(c,i.getCompare()):vo;const q=i.toString(),te=Object.assign({},this.indexSet_);te[q]=i;const Te=Object.assign({},this.indexes_);return Te[q]=O,new Ro(Te,te)}addToIndexes(i,n){const c=(0,ce.UI)(this.indexes_,(f,E)=>{const I=(0,ce.DV)(this.indexSet_,E);if((0,ce.hu)(I,"Missing index implementation for "+E),f===vo){if(I.isDefinedOn(i.node)){const O=[],q=n.getIterator(cr.Wrap);let te=q.getNext();for(;te;)te.name!==i.name&&O.push(te),te=q.getNext();return O.push(i),Ya(O,I.getCompare())}return vo}{const O=n.get(i.name);let q=f;return O&&(q=q.remove(new cr(i.name,O))),q.insert(i,i.node)}});return new Ro(c,this.indexSet_)}removeFromIndexes(i,n){const c=(0,ce.UI)(this.indexes_,f=>{if(f===vo)return f;{const E=n.get(i.name);return E?f.remove(new cr(i.name,E)):f}});return new Ro(c,this.indexSet_)}}let Cu,Jn=(()=>{class u{constructor(n,c,f){this.children_=n,this.priorityNode_=c,this.indexMap_=f,this.lazyHash_=null,this.priorityNode_&&Ef(this.priorityNode_),this.children_.isEmpty()&&(0,ce.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Cu||(Cu=new u(new Wo(Oa),null,Ro.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cu}updatePriority(n){return this.children_.isEmpty()?this:new u(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const c=this.children_.get(n);return null===c?Cu:c}}getChild(n){const c=xn(n);return null===c?this:this.getImmediateChild(c).getChild(Ir(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,c){if((0,ce.hu)(c,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(c);{const f=new cr(n,c);let E,I;c.isEmpty()?(E=this.children_.remove(n),I=this.indexMap_.removeFromIndexes(f,this.children_)):(E=this.children_.insert(n,c),I=this.indexMap_.addToIndexes(f,this.children_));const O=E.isEmpty()?Cu:this.priorityNode_;return new u(E,O,I)}}updateChild(n,c){const f=xn(n);if(null===f)return c;{(0,ce.hu)(".priority"!==xn(n)||1===Us(n),".priority must be the last token in a path");const E=this.getImmediateChild(f).updateChild(Ir(n),c);return this.updateImmediateChild(f,E)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const c={};let f=0,E=0,I=!0;if(this.forEachChild(Li,(O,q)=>{c[O]=q.val(n),f++,I&&u.INTEGER_REGEXP_.test(O)?E=Math.max(E,Number(O)):I=!1}),!n&&I&&E<2*f){const O=[];for(const q in c)O[q]=c[q];return O}return n&&!this.getPriority().isEmpty()&&(c[".priority"]=this.getPriority().val()),c}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+Pp(this.getPriority().val())+":"),this.forEachChild(Li,(c,f)=>{const E=f.hash();""!==E&&(n+=":"+c+":"+E)}),this.lazyHash_=""===n?"":bl(n)}return this.lazyHash_}getPredecessorChildName(n,c,f){const E=this.resolveIndex_(f);if(E){const I=E.getPredecessorKey(new cr(n,c));return I?I.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const c=this.resolveIndex_(n);if(c){const f=c.minKey();return f&&f.name}return this.children_.minKey()}getFirstChild(n){const c=this.getFirstChildName(n);return c?new cr(c,this.children_.get(c)):null}getLastChildName(n){const c=this.resolveIndex_(n);if(c){const f=c.maxKey();return f&&f.name}return this.children_.maxKey()}getLastChild(n){const c=this.getLastChildName(n);return c?new cr(c,this.children_.get(c)):null}forEachChild(n,c){const f=this.resolveIndex_(n);return f?f.inorderTraversal(E=>c(E.name,E.node)):this.children_.inorderTraversal(c)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,c){const f=this.resolveIndex_(c);if(f)return f.getIteratorFrom(n,E=>E);{const E=this.children_.getIteratorFrom(n.name,cr.Wrap);let I=E.peek();for(;null!=I&&c.compare(I,n)<0;)E.getNext(),I=E.peek();return E}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,c){const f=this.resolveIndex_(c);if(f)return f.getReverseIteratorFrom(n,E=>E);{const E=this.children_.getReverseIteratorFrom(n.name,cr.Wrap);let I=E.peek();for(;null!=I&&c.compare(I,n)>0;)E.getNext(),I=E.peek();return E}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===jl?-1:0}withIndex(n){if(n===Ss||this.indexMap_.hasIndex(n))return this;{const c=this.indexMap_.addIndex(n,this.children_);return new u(this.children_,this.priorityNode_,c)}}isIndexed(n){return n===Ss||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const c=n;if(this.getPriority().equals(c.getPriority())){if(this.children_.count()===c.children_.count()){const f=this.getIterator(Li),E=c.getIterator(Li);let I=f.getNext(),O=E.getNext();for(;I&&O;){if(I.name!==O.name||!I.node.equals(O.node))return!1;I=f.getNext(),O=E.getNext()}return null===I&&null===O}return!1}return!1}}resolveIndex_(n){return n===Ss?null:this.indexMap_.get(n.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const jl=new class Vs extends Jn{constructor(){super(new Wo(Oa),Jn.EMPTY_NODE,Ro.Default)}compareTo(i){return i===this?0:1}equals(i){return i===this}getPriority(){return this}getImmediateChild(i){return Jn.EMPTY_NODE}isEmpty(){return!1}};function As(u,i=null){if(null===u)return Jn.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(i=u[".priority"]),(0,ce.hu)(null===i||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i,"Invalid priority type found: "+typeof i),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new xl(u,As(i));if(u instanceof Array){let n=Jn.EMPTY_NODE;return P(u,(c,f)=>{if((0,ce.r3)(u,c)&&"."!==c.substring(0,1)){const E=As(f);(E.isLeafNode()||!E.isEmpty())&&(n=n.updateImmediateChild(c,E))}}),n.updatePriority(As(i))}{const n=[];let c=!1;if(P(u,(I,O)=>{if("."!==I.substring(0,1)){const q=As(O);q.isEmpty()||(c=c||!q.getPriority().isEmpty(),n.push(new cr(I,q)))}}),0===n.length)return Jn.EMPTY_NODE;const E=Ya(n,yf,I=>I.name,Oa);if(c){const I=Ya(n,Li.getCompare());return new Jn(E,As(i),new Ro({".priority":I},{".priority":Li}))}return new Jn(E,As(i),Ro.Default)}}Object.defineProperties(cr,{MIN:{value:new cr(yr,Jn.EMPTY_NODE)},MAX:{value:new cr(ds,jl)}}),Eu.__EMPTY_NODE=Jn.EMPTY_NODE,xl.__childrenNodeConstructor=Jn,function vf(u){wu=u}(jl),function Ac(u){nh=u}(jl),function wf(u){rm=u}(As);class Hl extends ec{constructor(i){super(),this.indexPath_=i,(0,ce.hu)(!ur(i)&&".priority"!==xn(i),"Can't create PathIndex with empty path or .priority key")}extractChild(i){return i.getChild(this.indexPath_)}isDefinedOn(i){return!i.getChild(this.indexPath_).isEmpty()}compare(i,n){const c=this.extractChild(i.node),f=this.extractChild(n.node),E=c.compareTo(f);return 0===E?mo(i.name,n.name):E}makePost(i,n){const c=As(i),f=Jn.EMPTY_NODE.updateChild(this.indexPath_,c);return new cr(n,f)}maxPost(){const i=Jn.EMPTY_NODE.updateChild(this.indexPath_,jl);return new cr(ds,i)}toString(){return hl(this.indexPath_,0).join("/")}}const Mc=new class Cf extends ec{compare(i,n){const c=i.node.compareTo(n.node);return 0===c?mo(i.name,n.name):c}isDefinedOn(i){return!0}indexedValueChanged(i,n){return!i.equals(n)}minPost(){return cr.MIN}maxPost(){return cr.MAX}makePost(i,n){const c=As(i);return new cr(n,c)}toString(){return".value"}},xc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ih=function(){let u=0;const i=[];return function(n){const c=n===u;let f;u=n;const E=new Array(8);for(f=7;f>=0;f--)E[f]=xc.charAt(n%64),n=Math.floor(n/64);(0,ce.hu)(0===n,"Cannot push at time == 0");let I=E.join("");if(c){for(f=11;f>=0&&63===i[f];f--)i[f]=0;i[f]++}else for(f=0;f<12;f++)i[f]=Math.floor(64*Math.random());for(f=0;f<12;f++)I+=xc.charAt(i[f]);return(0,ce.hu)(20===I.length,"nextPushId: Length should be 20."),I}}(),Tf=function(u){if(u===""+rn)return"-";const i=Cr(u);if(null!=i)return""+(i+1);const n=new Array(u.length);for(let I=0;I<n.length;I++)n[I]=u.charAt(I);if(n.length<786)return n.push("-"),n.join("");let c=n.length-1;for(;c>=0&&"z"===n[c];)c--;if(-1===c)return ds;const E=xc.charAt(xc.indexOf(n[c])+1);return n[c]=E,n.slice(0,c+1).join("")},Nc=function(u){if(u===""+zn)return yr;const i=Cr(u);if(null!=i)return""+(i-1);const n=new Array(u.length);for(let c=0;c<n.length;c++)n[c]=u.charAt(c);return"-"===n[n.length-1]?1===n.length?""+rn:(delete n[n.length-1],n.join("")):(n[n.length-1]=xc.charAt(xc.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function rc(u){return{type:"value",snapshotNode:u}}function fl(u,i){return{type:"child_added",snapshotNode:i,childName:u}}function as(u,i){return{type:"child_removed",snapshotNode:i,childName:u}}function Er(u,i,n){return{type:"child_changed",snapshotNode:i,childName:u,oldSnap:n}}class ms{constructor(i){this.index_=i}updateChild(i,n,c,f,E,I){(0,ce.hu)(i.isIndexed(this.index_),"A node must be indexed if only a child is updated");const O=i.getImmediateChild(n);return O.getChild(f).equals(c.getChild(f))&&O.isEmpty()===c.isEmpty()||(null!=I&&(c.isEmpty()?i.hasChild(n)?I.trackChildChange(as(n,O)):(0,ce.hu)(i.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):O.isEmpty()?I.trackChildChange(fl(n,c)):I.trackChildChange(Er(n,c,O))),i.isLeafNode()&&c.isEmpty())?i:i.updateImmediateChild(n,c).withIndex(this.index_)}updateFullNode(i,n,c){return null!=c&&(i.isLeafNode()||i.forEachChild(Li,(f,E)=>{n.hasChild(f)||c.trackChildChange(as(f,E))}),n.isLeafNode()||n.forEachChild(Li,(f,E)=>{if(i.hasChild(f)){const I=i.getImmediateChild(f);I.equals(E)||c.trackChildChange(Er(f,E,I))}else c.trackChildChange(fl(f,E))})),n.withIndex(this.index_)}updatePriority(i,n){return i.isEmpty()?Jn.EMPTY_NODE:i.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Qa{constructor(i){this.indexedFilter_=new ms(i.getIndex()),this.index_=i.getIndex(),this.startPost_=Qa.getStartPost_(i),this.endPost_=Qa.getEndPost_(i)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(i){return this.index_.compare(this.getStartPost(),i)<=0&&this.index_.compare(i,this.getEndPost())<=0}updateChild(i,n,c,f,E,I){return this.matches(new cr(n,c))||(c=Jn.EMPTY_NODE),this.indexedFilter_.updateChild(i,n,c,f,E,I)}updateFullNode(i,n,c){n.isLeafNode()&&(n=Jn.EMPTY_NODE);let f=n.withIndex(this.index_);f=f.updatePriority(Jn.EMPTY_NODE);const E=this;return n.forEachChild(Li,(I,O)=>{E.matches(new cr(I,O))||(f=f.updateImmediateChild(I,Jn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(i,f,c)}updatePriority(i,n){return i}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(i){if(i.hasStart()){const n=i.getIndexStartName();return i.getIndex().makePost(i.getIndexStartValue(),n)}return i.getIndex().minPost()}static getEndPost_(i){if(i.hasEnd()){const n=i.getIndexEndName();return i.getIndex().makePost(i.getIndexEndValue(),n)}return i.getIndex().maxPost()}}class im{constructor(i){this.rangedFilter_=new Qa(i),this.index_=i.getIndex(),this.limit_=i.getLimit(),this.reverse_=!i.isViewFromLeft()}updateChild(i,n,c,f,E,I){return this.rangedFilter_.matches(new cr(n,c))||(c=Jn.EMPTY_NODE),i.getImmediateChild(n).equals(c)?i:i.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(i,n,c,f,E,I):this.fullLimitUpdateChild_(i,n,c,E,I)}updateFullNode(i,n,c){let f;if(n.isLeafNode()||n.isEmpty())f=Jn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let E;f=Jn.EMPTY_NODE.withIndex(this.index_),E=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let I=0;for(;E.hasNext()&&I<this.limit_;){const O=E.getNext();let q;if(q=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),O)<=0:this.index_.compare(O,this.rangedFilter_.getEndPost())<=0,!q)break;f=f.updateImmediateChild(O.name,O.node),I++}}else{let E,I,O,q;if(f=n.withIndex(this.index_),f=f.updatePriority(Jn.EMPTY_NODE),this.reverse_){q=f.getReverseIterator(this.index_),E=this.rangedFilter_.getEndPost(),I=this.rangedFilter_.getStartPost();const Ae=this.index_.getCompare();O=(Ze,dt)=>Ae(dt,Ze)}else q=f.getIterator(this.index_),E=this.rangedFilter_.getStartPost(),I=this.rangedFilter_.getEndPost(),O=this.index_.getCompare();let te=0,Te=!1;for(;q.hasNext();){const Ae=q.getNext();!Te&&O(E,Ae)<=0&&(Te=!0),Te&&te<this.limit_&&O(Ae,I)<=0?te++:f=f.updateImmediateChild(Ae.name,Jn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(i,f,c)}updatePriority(i,n){return i}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(i,n,c,f,E){let I;if(this.reverse_){const Ae=this.index_.getCompare();I=(Ze,dt)=>Ae(dt,Ze)}else I=this.index_.getCompare();const O=i;(0,ce.hu)(O.numChildren()===this.limit_,"");const q=new cr(n,c),te=this.reverse_?O.getFirstChild(this.index_):O.getLastChild(this.index_),Te=this.rangedFilter_.matches(q);if(O.hasChild(n)){const Ae=O.getImmediateChild(n);let Ze=f.getChildAfterChild(this.index_,te,this.reverse_);for(;null!=Ze&&(Ze.name===n||O.hasChild(Ze.name));)Ze=f.getChildAfterChild(this.index_,Ze,this.reverse_);const dt=null==Ze?1:I(Ze,q);if(Te&&!c.isEmpty()&&dt>=0)return null!=E&&E.trackChildChange(Er(n,c,Ae)),O.updateImmediateChild(n,c);{null!=E&&E.trackChildChange(as(n,Ae));const Gt=O.updateImmediateChild(n,Jn.EMPTY_NODE);return null!=Ze&&this.rangedFilter_.matches(Ze)?(null!=E&&E.trackChildChange(fl(Ze.name,Ze.node)),Gt.updateImmediateChild(Ze.name,Ze.node)):Gt}}return c.isEmpty()?i:Te&&I(te,q)>=0?(null!=E&&(E.trackChildChange(as(te.name,te.node)),E.trackChildChange(fl(n,c))),O.updateImmediateChild(n,c).updateImmediateChild(te.name,Jn.EMPTY_NODE)):i}}class Eo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Li}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ce.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ce.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ce.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ce.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ds}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ce.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Li}copy(){const i=new Eo;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i}}function Df(u,i,n){const c=u.copy();return c.startSet_=!0,void 0===i&&(i=null),c.indexStartValue_=i,null!=n?(c.startNameSet_=!0,c.indexStartName_=n):(c.startNameSet_=!1,c.indexStartName_=""),c}function ti(u,i,n){const c=u.copy();return c.endSet_=!0,void 0===i&&(i=null),c.indexEndValue_=i,void 0!==n?(c.endNameSet_=!0,c.indexEndName_=n):(c.endNameSet_=!1,c.indexEndName_=""),c}function Pc(u,i){const n=u.copy();return n.index_=i,n}function Rl(u){const i={};if(u.isDefault())return i;let n;return u.index_===Li?n="$priority":u.index_===Mc?n="$value":u.index_===Ss?n="$key":((0,ce.hu)(u.index_ instanceof Hl,"Unrecognized index type!"),n=u.index_.toString()),i.orderBy=(0,ce.Pz)(n),u.startSet_&&(i.startAt=(0,ce.Pz)(u.indexStartValue_),u.startNameSet_&&(i.startAt+=","+(0,ce.Pz)(u.indexStartName_))),u.endSet_&&(i.endAt=(0,ce.Pz)(u.indexEndValue_),u.endNameSet_&&(i.endAt+=","+(0,ce.Pz)(u.indexEndName_))),u.limitSet_&&(u.isViewFromLeft()?i.limitToFirst=u.limit_:i.limitToLast=u.limit_),i}function Js(u){const i={};if(u.startSet_&&(i.sp=u.indexStartValue_,u.startNameSet_&&(i.sn=u.indexStartName_)),u.endSet_&&(i.ep=u.indexEndValue_,u.endNameSet_&&(i.en=u.indexEndName_)),u.limitSet_){i.l=u.limit_;let n=u.viewFrom_;""===n&&(n=u.isViewFromLeft()?"l":"r"),i.vf=n}return u.index_!==Li&&(i.i=u.index_.toString()),i}class Gl extends En{constructor(i,n,c,f){super(),this.repoInfo_=i,this.onDataUpdate_=n,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.log_=Ho("p:rest:"),this.listens_={}}reportStats(i){throw new Error("Method not implemented.")}static getListenId_(i,n){return void 0!==n?"tag$"+n:((0,ce.hu)(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}listen(i,n,c,f){const E=i._path.toString();this.log_("Listen called for "+E+" "+i._queryIdentifier);const I=Gl.getListenId_(i,c),O={};this.listens_[I]=O;const q=Rl(i._queryParams);this.restRequest_(E+".json",q,(te,Te)=>{let Ae=Te;if(404===te&&(Ae=null,te=null),null===te&&this.onDataUpdate_(E,Ae,!1,c),(0,ce.DV)(this.listens_,I)===O){let Ze;Ze=te?401===te?"permission_denied":"rest_error:"+te:"ok",f(Ze,null)}})}unlisten(i,n){const c=Gl.getListenId_(i,n);delete this.listens_[c]}get(i){const n=Rl(i._queryParams),c=i._path.toString(),f=new ce.BH;return this.restRequest_(c+".json",n,(E,I)=>{let O=I;404===E&&(O=null,E=null),null===E?(this.onDataUpdate_(c,O,!1,null),f.resolve(O)):f.reject(new Error(O))}),f.promise}refreshAuthToken(i){}restRequest_(i,n={},c){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([f,E])=>{f&&f.accessToken&&(n.auth=f.accessToken),E&&E.token&&(n.ac=E.token);const I=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+(0,ce.xO)(n);this.log_("Sending REST request for "+I);const O=new XMLHttpRequest;O.onreadystatechange=()=>{if(c&&4===O.readyState){this.log_("REST Response for "+I+" received. status:",O.status,"response:",O.responseText);let q=null;if(O.status>=200&&O.status<300){try{q=(0,ce.cI)(O.responseText)}catch(te){Ni("Failed to parse JSON response for "+I+": "+O.responseText)}c(null,q)}else 401!==O.status&&404!==O.status&&Ni("Got unsuccessful REST response for "+I+" Status: "+O.status),c(O.status);c=null}},O.open("GET",I,!0),O.send()})}}class sh{constructor(){this.rootNode_=Jn.EMPTY_NODE}getNode(i){return this.rootNode_.getChild(i)}updateSnapshot(i,n){this.rootNode_=this.rootNode_.updateChild(i,n)}}function Tu(){return{value:null,children:new Map}}function ls(u,i,n){if(ur(i))u.value=n,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(i,n);else{const c=xn(i);u.children.has(c)||u.children.set(c,Tu()),ls(u.children.get(c),i=Ir(i),n)}}function Iu(u,i){if(ur(i))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const n=u.value;return u.value=null,n.forEachChild(Li,(c,f)=>{ls(u,new yn(c),f)}),Iu(u,i)}}if(u.children.size>0){const n=xn(i);return i=Ir(i),u.children.has(n)&&Iu(u.children.get(n),i)&&u.children.delete(n),0===u.children.size}return!0}function Oc(u,i,n){null!==u.value?n(i,u.value):function oh(u,i){u.children.forEach((n,c)=>{i(c,n)})}(u,(c,f)=>{Oc(f,new yn(i.toString()+"/"+c),n)})}class om{constructor(i){this.collection_=i,this.last_=null}get(){const i=this.collection_.get(),n=Object.assign({},i);return this.last_&&P(this.last_,(c,f)=>{n[c]=n[c]-f}),this.last_=i,n}}class Fp{constructor(i,n){this.server_=n,this.statsToReport_={},this.statsListener_=new om(i);const c=1e4+2e4*Math.random();Ao(this.reportStats_.bind(this),Math.floor(c))}reportStats_(){const i=this.statsListener_.get(),n={};let c=!1;P(i,(f,E)=>{E>0&&(0,ce.r3)(this.statsToReport_,f)&&(n[f]=E,c=!0)}),c&&this.server_.reportStats(n),Ao(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var aa=(()=>{return(u=aa||(aa={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",aa;var u})();function sc(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class Du{constructor(i,n,c){this.path=i,this.affectedTree=n,this.revert=c,this.type=aa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(i){if(ur(this.path)){if(null!=this.affectedTree.value)return(0,ce.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new yn(i));return new Du(vr(),n,this.revert)}}return(0,ce.hu)(xn(this.path)===i,"operationForChild called for unrelated child."),new Du(Ir(this.path),this.affectedTree,this.revert)}}class Bs{constructor(i,n){this.source=i,this.path=n,this.type=aa.LISTEN_COMPLETE}operationForChild(i){return ur(this.path)?new Bs(this.source,vr()):new Bs(this.source,Ir(this.path))}}class Ja{constructor(i,n,c){this.source=i,this.path=n,this.snap=c,this.type=aa.OVERWRITE}operationForChild(i){return ur(this.path)?new Ja(this.source,vr(),this.snap.getImmediateChild(i)):new Ja(this.source,Ir(this.path),this.snap)}}class oc{constructor(i,n,c){this.source=i,this.path=n,this.children=c,this.type=aa.MERGE}operationForChild(i){if(ur(this.path)){const n=this.children.subtree(new yn(i));return n.isEmpty()?null:n.value?new Ja(this.source,vr(),n.value):new oc(this.source,vr(),n)}return(0,ce.hu)(xn(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new oc(this.source,Ir(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Xa{constructor(i,n,c){this.node_=i,this.fullyInitialized_=n,this.filtered_=c}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(i){if(ur(i))return this.isFullyInitialized()&&!this.filtered_;const n=xn(i);return this.isCompleteForChild(n)}isCompleteForChild(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)}getNode(){return this.node_}}class bd{constructor(i){this.query_=i,this.index_=this.query_._queryParams.getIndex()}}function so(u,i,n,c,f,E){const I=c.filter(O=>O.type===n);I.sort((O,q)=>function Mf(u,i,n){if(null==i.childName||null==n.childName)throw(0,ce.g5)("Should only compare child_ events.");const c=new cr(i.childName,i.snapshotNode),f=new cr(n.childName,n.snapshotNode);return u.index_.compare(c,f)}(u,O,q)),I.forEach(O=>{const q=function Af(u,i,n){return"value"===i.type||"child_removed"===i.type||(i.prevName=n.getPredecessorChildName(i.childName,i.snapshotNode,u.index_)),i}(u,O,E);f.forEach(te=>{te.respondsTo(O.type)&&i.push(te.createEvent(q,u.query_))})})}function Su(u,i){return{eventCache:u,serverCache:i}}function zo(u,i,n,c){return Su(new Xa(i,n,c),u.serverCache)}function kc(u,i,n,c){return Su(u.eventCache,new Xa(i,n,c))}function Fc(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function ql(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let ah;class Ui{constructor(i,n=(()=>(ah||(ah=new Wo(M)),ah))()){this.value=i,this.children=n}static fromObject(i){let n=new Ui(null);return P(i,(c,f)=>{n=n.set(new yn(c),f)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(i,n){if(null!=this.value&&n(this.value))return{path:vr(),value:this.value};if(ur(i))return null;{const c=xn(i),f=this.children.get(c);if(null!==f){const E=f.findRootMostMatchingPathAndValue(Ir(i),n);return null!=E?{path:hi(new yn(c),E.path),value:E.value}:null}return null}}findRootMostValueAndPath(i){return this.findRootMostMatchingPathAndValue(i,()=>!0)}subtree(i){if(ur(i))return this;{const n=xn(i),c=this.children.get(n);return null!==c?c.subtree(Ir(i)):new Ui(null)}}set(i,n){if(ur(i))return new Ui(n,this.children);{const c=xn(i),E=(this.children.get(c)||new Ui(null)).set(Ir(i),n),I=this.children.insert(c,E);return new Ui(this.value,I)}}remove(i){if(ur(i))return this.children.isEmpty()?new Ui(null):new Ui(null,this.children);{const n=xn(i),c=this.children.get(n);if(c){const f=c.remove(Ir(i));let E;return E=f.isEmpty()?this.children.remove(n):this.children.insert(n,f),null===this.value&&E.isEmpty()?new Ui(null):new Ui(this.value,E)}return this}}get(i){if(ur(i))return this.value;{const n=xn(i),c=this.children.get(n);return c?c.get(Ir(i)):null}}setTree(i,n){if(ur(i))return n;{const c=xn(i),E=(this.children.get(c)||new Ui(null)).setTree(Ir(i),n);let I;return I=E.isEmpty()?this.children.remove(c):this.children.insert(c,E),new Ui(this.value,I)}}fold(i){return this.fold_(vr(),i)}fold_(i,n){const c={};return this.children.inorderTraversal((f,E)=>{c[f]=E.fold_(hi(i,f),n)}),n(i,this.value,c)}findOnPath(i,n){return this.findOnPath_(i,vr(),n)}findOnPath_(i,n,c){const f=!!this.value&&c(n,this.value);if(f)return f;if(ur(i))return null;{const E=xn(i),I=this.children.get(E);return I?I.findOnPath_(Ir(i),hi(n,E),c):null}}foreachOnPath(i,n){return this.foreachOnPath_(i,vr(),n)}foreachOnPath_(i,n,c){if(ur(i))return this;{this.value&&c(n,this.value);const f=xn(i),E=this.children.get(f);return E?E.foreachOnPath_(Ir(i),hi(n,f),c):new Ui(null)}}foreach(i){this.foreach_(vr(),i)}foreach_(i,n){this.children.inorderTraversal((c,f)=>{f.foreach_(hi(i,c),n)}),this.value&&n(i,this.value)}foreachChild(i){this.children.inorderTraversal((n,c)=>{c.value&&i(n,c.value)})}}class pl{constructor(i){this.writeTree_=i}static empty(){return new pl(new Ui(null))}}function Cd(u,i,n){if(ur(i))return new pl(new Ui(n));{const c=u.writeTree_.findRootMostValueAndPath(i);if(null!=c){const f=c.path;let E=c.value;const I=yo(f,i);return E=E.updateChild(I,n),new pl(u.writeTree_.set(f,E))}{const f=new Ui(n),E=u.writeTree_.setTree(i,f);return new pl(E)}}}function ka(u,i,n){let c=u;return P(n,(f,E)=>{c=Cd(c,hi(i,f),E)}),c}function b(u,i){if(ur(i))return pl.empty();{const n=u.writeTree_.setTree(i,new Ui(null));return new pl(n)}}function g(u,i){return null!=y(u,i)}function y(u,i){const n=u.writeTree_.findRootMostValueAndPath(i);return null!=n?u.writeTree_.get(n.path).getChild(yo(n.path,i)):null}function A(u){const i=[],n=u.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Li,(c,f)=>{i.push(new cr(c,f))}):u.writeTree_.children.inorderTraversal((c,f)=>{null!=f.value&&i.push(new cr(c,f.value))}),i}function K(u,i){if(ur(i))return u;{const n=y(u,i);return new pl(null!=n?new Ui(n):u.writeTree_.subtree(i))}}function oe(u){return u.writeTree_.isEmpty()}function Ue(u,i){return pt(vr(),u.writeTree_,i)}function pt(u,i,n){if(null!=i.value)return n.updateChild(u,i.value);{let c=null;return i.children.inorderTraversal((f,E)=>{".priority"===f?((0,ce.hu)(null!==E.value,"Priority writes must always be leaf nodes"),c=E.value):n=pt(hi(u,f),E,n)}),!n.getChild(u).isEmpty()&&null!==c&&(n=n.updateChild(hi(u,".priority"),c)),n}}function Ft(u,i){return kf(i,u)}function Fa(u,i){if(u.snap)return qo(u.path,i);for(const n in u.children)if(u.children.hasOwnProperty(n)&&qo(hi(u.path,n),i))return!0;return!1}function Rf(u){return u.visible}function Nf(u,i,n){let c=pl.empty();for(let f=0;f<u.length;++f){const E=u[f];if(i(E)){const I=E.path;let O;if(E.snap)qo(n,I)?(O=yo(n,I),c=Cd(c,O,E.snap)):qo(I,n)&&(O=yo(I,n),c=Cd(c,vr(),E.snap.getChild(O)));else{if(!E.children)throw(0,ce.g5)("WriteRecord should have .snap or .children");if(qo(n,I))O=yo(n,I),c=ka(c,O,E.children);else if(qo(I,n))if(O=yo(I,n),ur(O))c=ka(c,vr(),E.children);else{const q=(0,ce.DV)(E.children,xn(O));if(q){const te=q.getChild(Ir(O));c=Cd(c,vr(),te)}}}}}return c}function Au(u,i,n,c,f){if(c||f){const E=K(u.visibleWrites,i);return!f&&oe(E)?n:f||null!=n||g(E,vr())?Ue(Nf(u.allWrites,function(te){return(te.visible||f)&&(!c||!~c.indexOf(te.writeId))&&(qo(te.path,i)||qo(i,te.path))},i),n||Jn.EMPTY_NODE):null}{const E=y(u.visibleWrites,i);if(null!=E)return E;{const I=K(u.visibleWrites,i);return oe(I)?n:null!=n||g(I,vr())?Ue(I,n||Jn.EMPTY_NODE):null}}}function dh(u,i,n,c){return Au(u.writeTree,u.treePath,i,n,c)}function Td(u,i){return function lh(u,i,n){let c=Jn.EMPTY_NODE;const f=y(u.visibleWrites,i);if(f)return f.isLeafNode()||f.forEachChild(Li,(E,I)=>{c=c.updateImmediateChild(E,I)}),c;if(n){const E=K(u.visibleWrites,i);return n.forEachChild(Li,(I,O)=>{const q=Ue(K(E,new yn(I)),O);c=c.updateImmediateChild(I,q)}),A(E).forEach(I=>{c=c.updateImmediateChild(I.name,I.node)}),c}return A(K(u.visibleWrites,i)).forEach(I=>{c=c.updateImmediateChild(I.name,I.node)}),c}(u.writeTree,u.treePath,i)}function Vp(u,i,n,c){return function uh(u,i,n,c,f){(0,ce.hu)(c||f,"Either existingEventSnap or existingServerSnap must exist");const E=hi(i,n);if(g(u.visibleWrites,E))return null;{const I=K(u.visibleWrites,E);return oe(I)?f.getChild(n):Ue(I,f.getChild(n))}}(u.writeTree,u.treePath,i,n,c)}function Of(u,i){return function ch(u,i){return y(u.visibleWrites,i)}(u.writeTree,hi(u.treePath,i))}function hh(u,i,n){return function Lp(u,i,n,c){const f=hi(i,n),E=y(u.visibleWrites,f);return null!=E?E:c.isCompleteForChild(n)?Ue(K(u.visibleWrites,f),c.getNode().getImmediateChild(n)):null}(u.writeTree,u.treePath,i,n)}function am(u,i){return kf(hi(u.treePath,i),u.writeTree)}function kf(u,i){return{treePath:u,writeTree:i}}class D_{constructor(){this.changeMap=new Map}trackChildChange(i){const n=i.type,c=i.childName;(0,ce.hu)("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),(0,ce.hu)(".priority"!==c,"Only non-priority child changes can be tracked.");const f=this.changeMap.get(c);if(f){const E=f.type;if("child_added"===n&&"child_removed"===E)this.changeMap.set(c,Er(c,i.snapshotNode,f.snapshotNode));else if("child_removed"===n&&"child_added"===E)this.changeMap.delete(c);else if("child_removed"===n&&"child_changed"===E)this.changeMap.set(c,as(c,f.oldSnap));else if("child_changed"===n&&"child_added"===E)this.changeMap.set(c,fl(c,i.snapshotNode));else{if("child_changed"!==n||"child_changed"!==E)throw(0,ce.g5)("Illegal combination of changes: "+i+" occurred after "+f);this.changeMap.set(c,Er(c,i.snapshotNode,f.oldSnap))}}else this.changeMap.set(c,i)}getChanges(){return Array.from(this.changeMap.values())}}const fh=new class gt{getCompleteChild(i){return null}getChildAfterChild(i,n,c){return null}};class el{constructor(i,n,c=null){this.writes_=i,this.viewCache_=n,this.optCompleteServerCache_=c}getCompleteChild(i){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(i))return n.getNode().getImmediateChild(i);{const c=null!=this.optCompleteServerCache_?new Xa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hh(this.writes_,i,c)}}getChildAfterChild(i,n,c){const f=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ql(this.viewCache_),E=function I_(u,i,n,c,f,E){return function Pf(u,i,n,c,f,E,I){let O;const q=K(u.visibleWrites,i),te=y(q,vr());if(null!=te)O=te;else{if(null==n)return[];O=Ue(q,n)}if(O=O.withIndex(I),O.isEmpty()||O.isLeafNode())return[];{const Te=[],Ae=I.getCompare(),Ze=E?O.getReverseIteratorFrom(c,I):O.getIteratorFrom(c,I);let dt=Ze.getNext();for(;dt&&Te.length<f;)0!==Ae(dt,c)&&Te.push(dt),dt=Ze.getNext();return Te}}(u.writeTree,u.treePath,i,n,c,f,E)}(this.writes_,f,n,1,c,i);return 0===E.length?null:E[0]}}function Wl(u,i,n,c,f,E){const I=i.eventCache;if(null!=Of(c,n))return i;{let O,q;if(ur(n))if((0,ce.hu)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){const te=ql(i),Ae=Td(c,te instanceof Jn?te:Jn.EMPTY_NODE);O=u.filter.updateFullNode(i.eventCache.getNode(),Ae,E)}else{const te=dh(c,ql(i));O=u.filter.updateFullNode(i.eventCache.getNode(),te,E)}else{const te=xn(n);if(".priority"===te){(0,ce.hu)(1===Us(n),"Can't have a priority with additional path components");const Te=I.getNode();q=i.serverCache.getNode();const Ae=Vp(c,n,Te,q);O=null!=Ae?u.filter.updatePriority(Te,Ae):I.getNode()}else{const Te=Ir(n);let Ae;if(I.isCompleteForChild(te)){q=i.serverCache.getNode();const Ze=Vp(c,n,I.getNode(),q);Ae=null!=Ze?I.getNode().getImmediateChild(te).updateChild(Te,Ze):I.getNode().getImmediateChild(te)}else Ae=hh(c,te,i.serverCache);O=null!=Ae?u.filter.updateChild(I.getNode(),te,Ae,Te,f,E):I.getNode()}}return zo(i,O,I.isFullyInitialized()||ur(n),u.filter.filtersNodes())}}function Ff(u,i,n,c,f,E,I,O){const q=i.serverCache;let te;const Te=I?u.filter:u.filter.getIndexedFilter();if(ur(n))te=Te.updateFullNode(q.getNode(),c,null);else if(Te.filtersNodes()&&!q.isFiltered()){const dt=q.getNode().updateChild(n,c);te=Te.updateFullNode(q.getNode(),dt,null)}else{const dt=xn(n);if(!q.isCompleteForPath(n)&&Us(n)>1)return i;const yt=Ir(n),Pn=q.getNode().getImmediateChild(dt).updateChild(yt,c);te=".priority"===dt?Te.updatePriority(q.getNode(),Pn):Te.updateChild(q.getNode(),dt,Pn,yt,fh,null)}const Ae=kc(i,te,q.isFullyInitialized()||ur(n),Te.filtersNodes());return Wl(u,Ae,n,f,new el(f,Ae,E),O)}function gh(u,i,n,c,f,E,I){const O=i.eventCache;let q,te;const Te=new el(f,i,E);if(ur(n))te=u.filter.updateFullNode(i.eventCache.getNode(),c,I),q=zo(i,te,!0,u.filter.filtersNodes());else{const Ae=xn(n);if(".priority"===Ae)te=u.filter.updatePriority(i.eventCache.getNode(),c),q=zo(i,te,O.isFullyInitialized(),O.isFiltered());else{const Ze=Ir(n),dt=O.getNode().getImmediateChild(Ae);let yt;if(ur(Ze))yt=c;else{const Gt=Te.getCompleteChild(Ae);yt=null!=Gt?".priority"===Go(Ze)&&Gt.getChild(yu(Ze)).isEmpty()?Gt:Gt.updateChild(Ze,c):Jn.EMPTY_NODE}q=dt.equals(yt)?i:zo(i,u.filter.updateChild(O.getNode(),Ae,yt,Ze,Te,I),O.isFullyInitialized(),u.filter.filtersNodes())}}return q}function Bp(u,i){return u.eventCache.isCompleteForChild(i)}function mh(u,i,n){return n.foreach((c,f)=>{i=i.updateChild(c,f)}),i}function _h(u,i,n,c,f,E,I,O){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let te,q=i;te=ur(n)?c:new Ui(null).setTree(n,c);const Te=i.serverCache.getNode();return te.children.inorderTraversal((Ae,Ze)=>{if(Te.hasChild(Ae)){const yt=mh(0,i.serverCache.getNode().getImmediateChild(Ae),Ze);q=Ff(u,q,new yn(Ae),yt,f,E,I,O)}}),te.children.inorderTraversal((Ae,Ze)=>{const dt=!i.serverCache.isCompleteForChild(Ae)&&void 0===Ze.value;if(!Te.hasChild(Ae)&&!dt){const Gt=mh(0,i.serverCache.getNode().getImmediateChild(Ae),Ze);q=Ff(u,q,new yn(Ae),Gt,f,E,I,O)}}),q}class um{constructor(i,n){this.query_=i,this.eventRegistrations_=[];const c=this.query_._queryParams,f=new ms(c.getIndex()),E=function kp(u){return u.loadsAllData()?new ms(u.getIndex()):u.hasLimit()?new im(u):new Qa(u)}(c);this.processor_=function Id(u){return{filter:u}}(E);const I=n.serverCache,O=n.eventCache,q=f.updateFullNode(Jn.EMPTY_NODE,I.getNode(),null),te=E.updateFullNode(Jn.EMPTY_NODE,O.getNode(),null),Te=new Xa(q,I.isFullyInitialized(),f.filtersNodes()),Ae=new Xa(te,O.isFullyInitialized(),E.filtersNodes());this.viewCache_=Su(Ae,Te),this.eventGenerator_=new bd(this.query_)}get query(){return this.query_}}function Zl(u,i){const n=ql(u.viewCache_);return n&&(u.query._queryParams.loadsAllData()||!ur(i)&&!n.getImmediateChild(xn(i)).isEmpty())?n.getChild(i):null}function Vc(u){return 0===u.eventRegistrations_.length}function Eh(u,i,n){const c=[];if(n){(0,ce.hu)(null==i,"A cancel should cancel all event registrations.");const f=u.query._path;u.eventRegistrations_.forEach(E=>{const I=E.createCancelEvent(n,f);I&&c.push(I)})}if(i){let f=[];for(let E=0;E<u.eventRegistrations_.length;++E){const I=u.eventRegistrations_[E];if(I.matches(i)){if(i.hasAnyCallback()){f=f.concat(u.eventRegistrations_.slice(E+1));break}}else f.push(I)}u.eventRegistrations_=f}else u.eventRegistrations_=[];return c}function dm(u,i,n,c){i.type===aa.MERGE&&null!==i.source.queryId&&((0,ce.hu)(ql(u.viewCache_),"We should always have a full cache before handling merges"),(0,ce.hu)(Fc(u.viewCache_),"Missing event cache, even though we have a server cache"));const f=u.viewCache_,E=function Uc(u,i,n,c,f){const E=new D_;let I,O;if(n.type===aa.OVERWRITE){const te=n;te.source.fromUser?I=gh(u,i,te.path,te.snap,c,f,E):((0,ce.hu)(te.source.fromServer,"Unknown source."),O=te.source.tagged||i.serverCache.isFiltered()&&!ur(te.path),I=Ff(u,i,te.path,te.snap,c,f,O,E))}else if(n.type===aa.MERGE){const te=n;te.source.fromUser?I=function No(u,i,n,c,f,E,I){let O=i;return c.foreach((q,te)=>{const Te=hi(n,q);Bp(i,xn(Te))&&(O=gh(u,O,Te,te,f,E,I))}),c.foreach((q,te)=>{const Te=hi(n,q);Bp(i,xn(Te))||(O=gh(u,O,Te,te,f,E,I))}),O}(u,i,te.path,te.children,c,f,E):((0,ce.hu)(te.source.fromServer,"Unknown source."),O=te.source.tagged||i.serverCache.isFiltered(),I=_h(u,i,te.path,te.children,c,f,O,E))}else if(n.type===aa.ACK_USER_WRITE){const te=n;I=te.revert?function lm(u,i,n,c,f,E){let I;if(null!=Of(c,n))return i;{const O=new el(c,i,f),q=i.eventCache.getNode();let te;if(ur(n)||".priority"===xn(n)){let Te;if(i.serverCache.isFullyInitialized())Te=dh(c,ql(i));else{const Ae=i.serverCache.getNode();(0,ce.hu)(Ae instanceof Jn,"serverChildren would be complete if leaf node"),Te=Td(c,Ae)}Te=Te,te=u.filter.updateFullNode(q,Te,E)}else{const Te=xn(n);let Ae=hh(c,Te,i.serverCache);null==Ae&&i.serverCache.isCompleteForChild(Te)&&(Ae=q.getImmediateChild(Te)),te=null!=Ae?u.filter.updateChild(q,Te,Ae,Ir(n),O,E):i.eventCache.getNode().hasChild(Te)?u.filter.updateChild(q,Te,Jn.EMPTY_NODE,Ir(n),O,E):q,te.isEmpty()&&i.serverCache.isFullyInitialized()&&(I=dh(c,ql(i)),I.isLeafNode()&&(te=u.filter.updateFullNode(te,I,E)))}return I=i.serverCache.isFullyInitialized()||null!=Of(c,vr()),zo(i,te,I,u.filter.filtersNodes())}}(u,i,te.path,c,f,E):function yh(u,i,n,c,f,E,I){if(null!=Of(f,n))return i;const O=i.serverCache.isFiltered(),q=i.serverCache;if(null!=c.value){if(ur(n)&&q.isFullyInitialized()||q.isCompleteForPath(n))return Ff(u,i,n,q.getNode().getChild(n),f,E,O,I);if(ur(n)){let te=new Ui(null);return q.getNode().forEachChild(Ss,(Te,Ae)=>{te=te.set(new yn(Te),Ae)}),_h(u,i,n,te,f,E,O,I)}return i}{let te=new Ui(null);return c.foreach((Te,Ae)=>{const Ze=hi(n,Te);q.isCompleteForPath(Ze)&&(te=te.set(Te,q.getNode().getChild(Ze)))}),_h(u,i,n,te,f,E,O,I)}}(u,i,te.path,te.affectedTree,c,f,E)}else{if(n.type!==aa.LISTEN_COMPLETE)throw(0,ce.g5)("Unknown operation type: "+n.type);I=function zl(u,i,n,c,f){const E=i.serverCache;return Wl(u,kc(i,E.getNode(),E.isFullyInitialized()||ur(n),E.isFiltered()),n,c,fh,f)}(u,i,n.path,c,E)}const q=E.getChanges();return function Vy(u,i,n){const c=i.eventCache;if(c.isFullyInitialized()){const f=c.getNode().isLeafNode()||c.getNode().isEmpty(),E=Fc(u);(n.length>0||!u.eventCache.isFullyInitialized()||f&&!c.getNode().equals(E)||!c.getNode().getPriority().equals(E.getPriority()))&&n.push(rc(Fc(i)))}}(i,I,q),{viewCache:I,changes:q}}(u.processor_,f,i,n,c);return function ph(u,i){(0,ce.hu)(i.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,ce.hu)(i.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,E.viewCache),(0,ce.hu)(E.viewCache.serverCache.isFullyInitialized()||!f.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=E.viewCache,wh(u,E.changes,E.viewCache.eventCache.getNode(),null)}function wh(u,i,n,c){return function Sf(u,i,n,c){const f=[],E=[];return i.forEach(I=>{"child_changed"===I.type&&u.index_.indexedValueChanged(I.oldSnap,I.snapshotNode)&&E.push(function _d(u,i){return{type:"child_moved",snapshotNode:i,childName:u}}(I.childName,I.snapshotNode))}),so(u,f,"child_removed",i,c,n),so(u,f,"child_added",i,c,n),so(u,f,"child_moved",E,c,n),so(u,f,"child_changed",i,c,n),so(u,f,"value",i,c,n),f}(u.eventGenerator_,i,n,c?[c]:u.eventRegistrations_)}let bh,Lf;class By{constructor(){this.views=new Map}}function Sd(u,i,n,c){const f=i.source.queryId;if(null!==f){const E=u.views.get(f);return(0,ce.hu)(null!=E,"SyncTree gave us an op for an invalid query."),dm(E,i,n,c)}{let E=[];for(const I of u.views.values())E=E.concat(dm(I,i,n,c));return E}}function Bc(u,i,n,c,f){const I=u.views.get(i._queryIdentifier);if(!I){let O=dh(n,f?c:null),q=!1;O?q=!0:c instanceof Jn?(O=Td(n,c),q=!1):(O=Jn.EMPTY_NODE,q=!1);const te=Su(new Xa(O,q,!1),new Xa(c,f,!1));return new um(i,te)}return I}function fm(u){const i=[];for(const n of u.views.values())n.query._queryParams.loadsAllData()||i.push(n);return i}function jc(u,i){let n=null;for(const c of u.views.values())n=n||Zl(c,i);return n}function M_(u,i){return i._queryParams.loadsAllData()?Yl(u):u.views.get(i._queryIdentifier)}function Ch(u,i){return null!=M_(u,i)}function tl(u){return null!=Yl(u)}function Yl(u){for(const i of u.views.values())if(i.query._queryParams.loadsAllData())return i;return null}let Xn=1;class Th{constructor(i){this.listenProvider_=i,this.syncPointTree_=new Ui(null),this.pendingWriteTree_=function Up(){return{visibleWrites:pl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $p(u,i,n,c,f){return function sn(u,i,n,c,f){(0,ce.hu)(c>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===f&&(f=!0),u.allWrites.push({path:i,snap:n,writeId:c,visible:f}),f&&(u.visibleWrites=Cd(u.visibleWrites,i,n)),u.lastWriteId=c}(u.pendingWriteTree_,i,n,c,f),f?Dh(u,new Ja({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,n)):[]}function La(u,i,n=!1){const c=function Sn(u,i){for(let n=0;n<u.allWrites.length;n++){const c=u.allWrites[n];if(c.writeId===i)return c}return null}(u.pendingWriteTree_,i);if(function Xs(u,i){const n=u.allWrites.findIndex(O=>O.writeId===i);(0,ce.hu)(n>=0,"removeWrite called with nonexistent writeId.");const c=u.allWrites[n];u.allWrites.splice(n,1);let f=c.visible,E=!1,I=u.allWrites.length-1;for(;f&&I>=0;){const O=u.allWrites[I];O.visible&&(I>=n&&Fa(O,c.path)?f=!1:qo(c.path,O.path)&&(E=!0)),I--}return!!f&&(E?(function Lc(u){u.visibleWrites=Nf(u.allWrites,Rf,vr()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(c.snap?u.visibleWrites=b(u.visibleWrites,c.path):P(c.children,q=>{u.visibleWrites=b(u.visibleWrites,hi(c.path,q))}),!0))}(u.pendingWriteTree_,i)){let E=new Ui(null);return null!=c.snap?E=E.set(vr(),!0):P(c.children,I=>{E=E.set(new yn(I),!0)}),Dh(u,new Du(c.path,E,n))}return[]}function Zo(u,i,n){return Dh(u,new Ja({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,n))}function Nl(u,i,n,c){const f=i._path,E=u.syncPointTree_.get(f);let I=[];if(E&&("default"===i._queryIdentifier||Ch(E,i))){const O=function A_(u,i,n,c){const f=i._queryIdentifier,E=[];let I=[];const O=tl(u);if("default"===f)for(const[q,te]of u.views.entries())I=I.concat(Eh(te,n,c)),Vc(te)&&(u.views.delete(q),te.query._queryParams.loadsAllData()||E.push(te.query));else{const q=u.views.get(f);q&&(I=I.concat(Eh(q,n,c)),Vc(q)&&(u.views.delete(f),q.query._queryParams.loadsAllData()||E.push(q.query)))}return O&&!tl(u)&&E.push(new(function S_(){return(0,ce.hu)(bh,"Reference.ts has not been loaded"),bh}())(i._repo,i._path)),{removed:E,events:I}}(E,i,n,c);(function Hp(u){return 0===u.views.size})(E)&&(u.syncPointTree_=u.syncPointTree_.remove(f));const q=O.removed;I=O.events;const te=-1!==q.findIndex(Ae=>Ae._queryParams.loadsAllData()),Te=u.syncPointTree_.findOnPath(f,(Ae,Ze)=>tl(Ze));if(te&&!Te){const Ae=u.syncPointTree_.subtree(f);if(!Ae.isEmpty()){const Ze=function $y(u){return u.fold((i,n,c)=>{if(n&&tl(n))return[Yl(n)];{let f=[];return n&&(f=fm(n)),P(c,(E,I)=>{f=f.concat(I)}),f}})}(Ae);for(let dt=0;dt<Ze.length;++dt){const yt=Ze[dt],Gt=yt.query,Pn=ac(u,yt);u.listenProvider_.startListening(Hf(Gt),Md(u,Gt),Pn.hashFn,Pn.onComplete)}}}!Te&&q.length>0&&!c&&(te?u.listenProvider_.stopListening(Hf(i),null):q.forEach(Ae=>{const Ze=u.queryToTagMap.get(gl(Ae));u.listenProvider_.stopListening(Hf(Ae),Ze)})),function R_(u,i){for(let n=0;n<i.length;++n){const c=i[n];if(!c._queryParams.loadsAllData()){const f=gl(c),E=u.queryToTagMap.get(f);u.queryToTagMap.delete(f),u.tagToQueryMap.delete(E)}}}(u,q)}return I}function Vf(u,i,n){const c=i._path;let f=null,E=!1;u.syncPointTree_.foreachOnPath(c,(Ae,Ze)=>{const dt=yo(Ae,c);f=f||jc(Ze,dt),E=E||tl(Ze)});let O,I=u.syncPointTree_.get(c);I?(E=E||tl(I),f=f||jc(I,vr())):(I=new By,u.syncPointTree_=u.syncPointTree_.set(c,I)),null!=f?O=!0:(O=!1,f=Jn.EMPTY_NODE,u.syncPointTree_.subtree(c).foreachChild((Ze,dt)=>{const yt=jc(dt,vr());yt&&(f=f.updateImmediateChild(Ze,yt))}));const q=Ch(I,i);if(!q&&!i._queryParams.loadsAllData()){const Ae=gl(i);(0,ce.hu)(!u.queryToTagMap.has(Ae),"View does not exist, but we have a tag");const Ze=function Pv(){return Xn++}();u.queryToTagMap.set(Ae,Ze),u.tagToQueryMap.set(Ze,Ae)}let Te=function Kl(u,i,n,c,f,E){const I=Bc(u,i,c,f,E);return u.views.has(i._queryIdentifier)||u.views.set(i._queryIdentifier,I),function Dd(u,i){u.eventRegistrations_.push(i)}(I,n),function jp(u,i){const n=u.viewCache_.eventCache,c=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Li,(E,I)=>{c.push(fl(E,I))}),n.isFullyInitialized()&&c.push(rc(n.getNode())),wh(u,c,n.getNode(),i)}(I,n)}(I,i,n,Ft(u.pendingWriteTree_,c),f,O);if(!q&&!E){const Ae=M_(I,i);Te=Te.concat(function Wp(u,i,n){const c=i._path,f=Md(u,i),E=ac(u,n),I=u.listenProvider_.startListening(Hf(i),f,E.hashFn,E.onComplete),O=u.syncPointTree_.subtree(c);if(f)(0,ce.hu)(!tl(O.value),"If we're adding a query, it shouldn't be shadowed");else{const q=O.fold((te,Te,Ae)=>{if(!ur(te)&&Te&&tl(Te))return[Yl(Te).query];{let Ze=[];return Te&&(Ze=Ze.concat(fm(Te).map(dt=>dt.query))),P(Ae,(dt,yt)=>{Ze=Ze.concat(yt)}),Ze}});for(let te=0;te<q.length;++te){const Te=q[te];u.listenProvider_.stopListening(Hf(Te),Md(u,Te))}}return I}(u,i,Ae))}return Te}function Mu(u,i,n){const f=u.pendingWriteTree_,E=u.syncPointTree_.findOnPath(i,(I,O)=>{const te=jc(O,yo(I,i));if(te)return te});return Au(f,i,E,n,!0)}function Dh(u,i){return Ql(i,u.syncPointTree_,null,Ft(u.pendingWriteTree_,vr()))}function Ql(u,i,n,c){if(ur(u.path))return Bf(u,i,n,c);{const f=i.get(vr());null==n&&null!=f&&(n=jc(f,vr()));let E=[];const I=xn(u.path),O=u.operationForChild(I),q=i.children.get(I);if(q&&O){const te=n?n.getImmediateChild(I):null,Te=am(c,I);E=E.concat(Ql(O,q,te,Te))}return f&&(E=E.concat(Sd(f,u,c,n))),E}}function Bf(u,i,n,c){const f=i.get(vr());null==n&&null!=f&&(n=jc(f,vr()));let E=[];return i.children.inorderTraversal((I,O)=>{const q=n?n.getImmediateChild(I):null,te=am(c,I),Te=u.operationForChild(I);Te&&(E=E.concat(Bf(Te,O,q,te)))}),f&&(E=E.concat(Sd(f,u,c,n))),E}function ac(u,i){const n=i.query,c=Md(u,n);return{hashFn:()=>(function cm(u){return u.viewCache_.serverCache.getNode()}(i)||Jn.EMPTY_NODE).hash(),onComplete:f=>{if("ok"===f)return c?function ga(u,i,n){const c=Hc(u,n);if(c){const f=jf(c),E=f.path,I=f.queryId,O=yo(E,i);return qp(u,E,new Bs(sc(I),O))}return[]}(u,n._path,c):function x_(u,i){return Dh(u,new Bs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i))}(u,n._path);{const E=function _t(u,i){let n="Unknown Error";"too_big"===u?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?n="Client doesn't have permission to access the desired data.":"unavailable"===u&&(n="The service is unavailable");const c=new Error(u+" at "+i._path.toString()+": "+n);return c.code=u.toUpperCase(),c}(f,n);return Nl(u,n,null,E)}}}}function Md(u,i){const n=gl(i);return u.queryToTagMap.get(n)}function gl(u){return u._path.toString()+"$"+u._queryIdentifier}function Hc(u,i){return u.tagToQueryMap.get(i)}function jf(u){const i=u.indexOf("$");return(0,ce.hu)(-1!==i&&i<u.length-1,"Bad queryKey."),{queryId:u.substr(i+1),path:new yn(u.substr(0,i))}}function qp(u,i,n){const c=u.syncPointTree_.get(i);return(0,ce.hu)(c,"Missing sync point for query tag that we're tracking"),Sd(c,n,Ft(u.pendingWriteTree_,i),null)}function Hf(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function Hy(){return(0,ce.hu)(Lf,"Reference.ts has not been loaded"),Lf}())(u._repo,u._path):u}class gm{constructor(i){this.node_=i}getImmediateChild(i){const n=this.node_.getImmediateChild(i);return new gm(n)}node(){return this.node_}}class zp{constructor(i,n){this.syncTree_=i,this.path_=n}getImmediateChild(i){const n=hi(this.path_,i);return new zp(this.syncTree_,n)}node(){return Mu(this.syncTree_,this.path_)}}const mm=function(u,i,n){return u&&"object"==typeof u?((0,ce.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?lc(u[".sv"],i,n):"object"==typeof u[".sv"]?Zp(u[".sv"],i):void(0,ce.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},lc=function(u,i,n){if("timestamp"===u)return n.timestamp;(0,ce.hu)(!1,"Unexpected server value: "+u)},Zp=function(u,i,n){u.hasOwnProperty("increment")||(0,ce.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const c=u.increment;"number"!=typeof c&&(0,ce.hu)(!1,"Unexpected increment value: "+c);const f=i.node();if((0,ce.hu)(null!=f,"Expected ChildrenNode.EMPTY_NODE for nulls"),!f.isLeafNode())return c;const I=f.getValue();return"number"!=typeof I?c:I+c},P_=function(u,i,n,c){return O_(i,new zp(n,u),c)},_m=function(u,i,n){return O_(u,new gm(i),n)};function O_(u,i,n){const c=u.getPriority().val(),f=mm(c,i.getImmediateChild(".priority"),n);let E;if(u.isLeafNode()){const I=u,O=mm(I.getValue(),i,n);return O!==I.getValue()||f!==I.getPriority().val()?new xl(O,As(f)):u}{const I=u;return E=I,f!==I.getPriority().val()&&(E=E.updatePriority(new xl(f))),I.forEachChild(Li,(O,q)=>{const te=O_(q,i.getImmediateChild(O),n);te!==q&&(E=E.updateImmediateChild(O,te))}),E}}class ym{constructor(i="",n=null,c={children:{},childCount:0}){this.name=i,this.parent=n,this.node=c}}function $f(u,i){let n=i instanceof yn?i:new yn(i),c=u,f=xn(n);for(;null!==f;){const E=(0,ce.DV)(c.node.children,f)||{children:{},childCount:0};c=new ym(f,c,E),n=Ir(n),f=xn(n)}return c}function $c(u){return u.node.value}function Sh(u,i){u.node.value=i,xh(u)}function Kp(u){return u.node.childCount>0}function Jl(u,i){P(u.node.children,(n,c)=>{i(new ym(n,u,c))})}function Ah(u,i,n,c){n&&!c&&i(u),Jl(u,f=>{Ah(f,i,!0,c)}),n&&c&&i(u)}function Mh(u){return new yn(null===u.parent?u.name:Mh(u.parent)+"/"+u.name)}function xh(u){null!==u.parent&&function vm(u,i,n){const c=function k_(u){return void 0===$c(u)&&!Kp(u)}(n),f=(0,ce.r3)(u.node.children,i);c&&f?(delete u.node.children[i],u.node.childCount--,xh(u)):!c&&!f&&(u.node.children[i]=n.node,u.node.childCount++,xh(u))}(u.parent,u.name,u)}const Gf=/[\[\].#$\/\u0000-\u001F\u007F]/,Gy=/[\[\].#$\u0000-\u001F\u007F]/,Xl=10485760,qf=function(u){return"string"==typeof u&&0!==u.length&&!Gf.test(u)},Em=function(u){return"string"==typeof u&&0!==u.length&&!Gy.test(u)},xu=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!kl(u)||u&&"object"==typeof u&&(0,ce.r3)(u,".sv")},ma=function(u,i,n,c){c&&void 0===i||xd((0,ce.gK)(u,"value"),i,n)},xd=function(u,i,n){const c=n instanceof yn?new mf(n,u):n;if(void 0===i)throw new Error(u+"contains undefined "+Cc(c));if("function"==typeof i)throw new Error(u+"contains a function "+Cc(c)+" with contents = "+i.toString());if(kl(i))throw new Error(u+"contains "+i.toString()+" "+Cc(c));if("string"==typeof i&&i.length>Xl/3&&(0,ce.ug)(i)>Xl)throw new Error(u+"contains a string greater than "+Xl+" utf8 bytes "+Cc(c)+" ('"+i.substring(0,50)+"...')");if(i&&"object"==typeof i){let f=!1,E=!1;if(P(i,(I,O)=>{if(".value"===I)f=!0;else if(".priority"!==I&&".sv"!==I&&(E=!0,!qf(I)))throw new Error(u+" contains an invalid key ("+I+") "+Cc(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function nm(u,i){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(i),u.byteLength_+=(0,ce.ug)(i),_f(u)})(c,I),xd(u,O,c),function xp(u){const i=u.parts_.pop();u.byteLength_-=(0,ce.ug)(i),u.parts_.length>0&&(u.byteLength_-=1)}(c)}),f&&E)throw new Error(u+' contains ".value" child '+Cc(c)+" in addition to actual children.")}},Rd=function(u,i,n,c){if(c&&void 0===i)return;const f=(0,ce.gK)(u,"values");if(!i||"object"!=typeof i||Array.isArray(i))throw new Error(f+" must be an object containing the children to replace.");const E=[];P(i,(I,O)=>{const q=new yn(I);if(xd(f,O,hi(n,q)),".priority"===Go(q)&&!xu(O))throw new Error(f+"contains an invalid value for '"+q.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");E.push(q)}),function(u,i){let n,c;for(n=0;n<i.length;n++){c=i[n];const E=hl(c);for(let I=0;I<E.length;I++)if((".priority"!==E[I]||I!==E.length-1)&&!qf(E[I]))throw new Error(u+"contains an invalid key ("+E[I]+") in path "+c.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}i.sort(xo);let f=null;for(n=0;n<i.length;n++){if(c=i[n],null!==f&&qo(f,c))throw new Error(u+"contains a path "+f.toString()+" that is ancestor of another path "+c.toString());f=c}}(f,E)},uc=function(u,i,n){if(!n||void 0!==i){if(kl(i))throw new Error((0,ce.gK)(u,"priority")+"is "+i.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xu(i))throw new Error((0,ce.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Gc=function(u,i,n,c){if(!(c&&void 0===n||qf(n)))throw new Error((0,ce.gK)(u,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ru=function(u,i,n,c){if(!(c&&void 0===n||Em(n)))throw new Error((0,ce.gK)(u,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},la=function(u,i){if(".info"===xn(i))throw new Error(u+" failed = Can't modify data under /.info/")},Qp=function(u,i){const n=i.path.toString();if("string"!=typeof i.repoInfo.host||0===i.repoInfo.host.length||!qf(i.repoInfo.namespace)&&"localhost"!==i.repoInfo.host.split(":")[0]||0!==n.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Em(u)}(n))throw new Error((0,ce.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class L_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wf(u,i){let n=null;for(let c=0;c<i.length;c++){const f=i[c],E=f.getPath();null!==n&&!vu(E,n.path)&&(u.eventLists_.push(n),n=null),null===n&&(n={events:[],path:E}),n.events.push(f)}n&&u.eventLists_.push(n)}function Pd(u,i,n){Wf(u,n),bm(u,c=>vu(c,i))}function Ci(u,i,n){Wf(u,n),bm(u,c=>qo(c,i)||qo(i,c))}function bm(u,i){u.recursionDepth_++;let n=!0;for(let c=0;c<u.eventLists_.length;c++){const f=u.eventLists_[c];f&&(i(f.path)?(Jp(u.eventLists_[c]),u.eventLists_[c]=null):n=!1)}n&&(u.eventLists_=[]),u.recursionDepth_--}function Jp(u){for(let i=0;i<u.events.length;i++){const n=u.events[i];if(null!==n){u.events[i]=null;const c=n.getEventRunner();So&&bi("event: "+n.toString()),fr(c)}}}const U_="repo_interrupt";class Ov{constructor(i,n,c,f){this.repoInfo_=i,this.forceRestClient_=n,this.authTokenProvider_=c,this.appCheckProvider_=f,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new L_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Tu(),this.transactionQueueTree_=new ym,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zf(u){const n=u.infoData_.getNode(new yn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function Rh(u){return function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u}({timestamp:zf(u)})}function Xp(u,i,n,c,f){u.dataUpdateCount++;const E=new yn(i);n=u.interceptServerDataCallback_?u.interceptServerDataCallback_(i,n):n;let I=[];if(f)if(c){const q=(0,ce.UI)(n,te=>As(te));I=function Gp(u,i,n,c){const f=Hc(u,c);if(f){const E=jf(f),I=E.path,O=E.queryId,q=yo(I,i),te=Ui.fromObject(n);return qp(u,I,new oc(sc(O),q,te))}return[]}(u.serverSyncTree_,E,q,f)}else{const q=As(n);I=function Ih(u,i,n,c){const f=Hc(u,c);if(null!=f){const E=jf(f),I=E.path,O=E.queryId,q=yo(I,i);return qp(u,I,new Ja(sc(O),q,n))}return[]}(u.serverSyncTree_,E,q,f)}else if(c){const q=(0,ce.UI)(n,te=>As(te));I=function Uf(u,i,n){const c=Ui.fromObject(n);return Dh(u,new oc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,c))}(u.serverSyncTree_,E,q)}else{const q=As(n);I=Zo(u.serverSyncTree_,E,q)}let O=E;I.length>0&&(O=Ph(u,E)),Ci(u.eventQueue_,O,I)}function eg(u,i){Po(u,"connected",i),!1===i&&function Tm(u){qc(u,"onDisconnectEvents");const i=Rh(u),n=Tu();Oc(u.onDisconnect_,vr(),(f,E)=>{const I=P_(f,E,u.serverSyncTree_,i);ls(n,f,I)});let c=[];Oc(n,vr(),(f,E)=>{c=c.concat(Zo(u.serverSyncTree_,f,E));const I=Wc(u,f);Ph(u,I)}),u.onDisconnect_=Tu(),Ci(u.eventQueue_,vr(),c)}(u)}function Po(u,i,n){const c=new yn("/.info/"+i),f=As(n);u.infoData_.updateSnapshot(c,f);const E=Zo(u.infoSyncTree_,c,f);Ci(u.eventQueue_,c,E)}function Od(u){return u.nextWriteId_++}function ng(u,i,n,c,f){qc(u,"set",{path:i.toString(),value:n,priority:c});const E=Rh(u),I=As(n,c),O=Mu(u.serverSyncTree_,i),q=_m(I,O,E),te=Od(u),Te=$p(u.serverSyncTree_,i,q,te,!0);Wf(u.eventQueue_,Te),u.server_.put(i.toString(),I.val(!0),(Ze,dt)=>{const yt="ok"===Ze;yt||Ni("set at "+i+" failed: "+Ze);const Gt=La(u.serverSyncTree_,te,!yt);Ci(u.eventQueue_,i,Gt),Nu(0,f,Ze,dt)});const Ae=Wc(u,i);Ph(u,Ae),Ci(u.eventQueue_,Ae,[])}function kv(u,i,n){u.server_.onDisconnectCancel(i.toString(),(c,f)=>{"ok"===c&&Iu(u.onDisconnect_,i),Nu(0,n,c,f)})}function Im(u,i,n,c){const f=As(n);u.server_.onDisconnectPut(i.toString(),f.val(!0),(E,I)=>{"ok"===E&&ls(u.onDisconnect_,i,f),Nu(0,c,E,I)})}function rg(u,i,n){let c;c=".info"===xn(i._path)?Nl(u.infoSyncTree_,i,n):Nl(u.serverSyncTree_,i,n),Pd(u.eventQueue_,i._path,c)}function Zf(u){u.persistentConnection_&&u.persistentConnection_.interrupt(U_)}function qc(u,...i){let n="";u.persistentConnection_&&(n=u.persistentConnection_.id+":"),bi(n,...i)}function Nu(u,i,n,c){i&&fr(()=>{if("ok"===n)i(null);else{const f=(n||"error").toUpperCase();let E=f;c&&(E+=": "+c);const I=new Error(E);I.code=f,i(I)}})}function Sm(u,i,n){return Mu(u.serverSyncTree_,i,n)||Jn.EMPTY_NODE}function Kf(u,i=u.transactionQueueTree_){if(i||kh(u,i),$c(i)){const n=kd(u,i);(0,ce.hu)(n.length>0,"Sending zero length transaction queue"),n.every(f=>0===f.status)&&function $_(u,i,n){const c=n.map(te=>te.currentWriteId),f=Sm(u,i,c);let E=f;const I=f.hash();for(let te=0;te<n.length;te++){const Te=n[te];(0,ce.hu)(0===Te.status,"tryToSendTransactionQueue_: items in queue should all be run."),Te.status=1,Te.retryCount++;const Ae=yo(i,Te.path);E=E.updateChild(Ae,Te.currentOutputSnapshotRaw)}const O=E.val(!0),q=i;u.server_.put(q.toString(),O,te=>{qc(u,"transaction put response",{path:q.toString(),status:te});let Te=[];if("ok"===te){const Ae=[];for(let Ze=0;Ze<n.length;Ze++)n[Ze].status=2,Te=Te.concat(La(u.serverSyncTree_,n[Ze].currentWriteId)),n[Ze].onComplete&&Ae.push(()=>n[Ze].onComplete(null,!0,n[Ze].currentOutputSnapshotResolved)),n[Ze].unwatcher();kh(u,$f(u.transactionQueueTree_,i)),Kf(u,u.transactionQueueTree_),Ci(u.eventQueue_,i,Te);for(let Ze=0;Ze<Ae.length;Ze++)fr(Ae[Ze])}else{if("datastale"===te)for(let Ae=0;Ae<n.length;Ae++)n[Ae].status=3===n[Ae].status?4:0;else{Ni("transaction at "+q.toString()+" failed: "+te);for(let Ae=0;Ae<n.length;Ae++)n[Ae].status=4,n[Ae].abortReason=te}Ph(u,i)}},I)}(u,Mh(i),n)}else Kp(i)&&Jl(i,n=>{Kf(u,n)})}function Ph(u,i){const n=Oh(u,i),c=Mh(n);return function nl(u,i,n){if(0===i.length)return;const c=[];let f=[];const I=i.filter(O=>0===O.status).map(O=>O.currentWriteId);for(let O=0;O<i.length;O++){const q=i[O],te=yo(n,q.path);let Ae,Te=!1;if((0,ce.hu)(null!==te,"rerunTransactionsUnderNode_: relativePath should not be null."),4===q.status)Te=!0,Ae=q.abortReason,f=f.concat(La(u.serverSyncTree_,q.currentWriteId,!0));else if(0===q.status)if(q.retryCount>=25)Te=!0,Ae="maxretry",f=f.concat(La(u.serverSyncTree_,q.currentWriteId,!0));else{const Ze=Sm(u,q.path,I);q.currentInputSnapshot=Ze;const dt=i[O].update(Ze.val());if(void 0!==dt){xd("transaction failed: Data returned ",dt,q.path);let yt=As(dt);"object"==typeof dt&&null!=dt&&(0,ce.r3)(dt,".priority")||(yt=yt.updatePriority(Ze.getPriority()));const Pn=q.currentWriteId,or=Rh(u),Zr=_m(yt,Ze,or);q.currentOutputSnapshotRaw=yt,q.currentOutputSnapshotResolved=Zr,q.currentWriteId=Od(u),I.splice(I.indexOf(Pn),1),f=f.concat($p(u.serverSyncTree_,q.path,Zr,q.currentWriteId,q.applyLocally)),f=f.concat(La(u.serverSyncTree_,Pn,!0))}else Te=!0,Ae="nodata",f=f.concat(La(u.serverSyncTree_,q.currentWriteId,!0))}Ci(u.eventQueue_,n,f),f=[],Te&&(i[O].status=2,setTimeout(i[O].unwatcher,Math.floor(0)),i[O].onComplete&&c.push("nodata"===Ae?()=>i[O].onComplete(null,!1,i[O].currentInputSnapshot):()=>i[O].onComplete(new Error(Ae),!1,null)))}kh(u,u.transactionQueueTree_);for(let O=0;O<c.length;O++)fr(c[O]);Kf(u,u.transactionQueueTree_)}(u,kd(u,n),c),c}function Oh(u,i){let n,c=u.transactionQueueTree_;for(n=xn(i);null!==n&&void 0===$c(c);)c=$f(c,n),n=xn(i=Ir(i));return c}function kd(u,i){const n=[];return ig(u,i,n),n.sort((c,f)=>c.order-f.order),n}function ig(u,i,n){const c=$c(i);if(c)for(let f=0;f<c.length;f++)n.push(c[f]);Jl(i,f=>{ig(u,f,n)})}function kh(u,i){const n=$c(i);if(n){let c=0;for(let f=0;f<n.length;f++)2!==n[f].status&&(n[c]=n[f],c++);n.length=c,Sh(i,n.length>0?n:void 0)}Jl(i,c=>{kh(u,c)})}function Wc(u,i){const n=Mh(Oh(u,i)),c=$f(u.transactionQueueTree_,i);return function F_(u,i,n){let c=n?u:u.parent;for(;null!==c;){if(i(c))return!0;c=c.parent}}(c,f=>{Yf(u,f)}),Yf(u,c),Ah(c,f=>{Yf(u,f)}),n}function Yf(u,i){const n=$c(i);if(n){const c=[];let f=[],E=-1;for(let I=0;I<n.length;I++)3===n[I].status||(1===n[I].status?((0,ce.hu)(E===I-1,"All SENT items should be at beginning of queue."),E=I,n[I].status=3,n[I].abortReason="set"):((0,ce.hu)(0===n[I].status,"Unexpected transaction status in abort"),n[I].unwatcher(),f=f.concat(La(u.serverSyncTree_,n[I].currentWriteId,!0)),n[I].onComplete&&c.push(n[I].onComplete.bind(null,new Error("set"),!1,null))));-1===E?Sh(i,void 0):n.length=E+1,Ci(u.eventQueue_,Mh(i),f);for(let I=0;I<c.length;I++)fr(c[I])}}const Fd=function(u,i){const n=zc(u),c=n.namespace;return"firebase.com"===n.domain&&Ys(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!c||"undefined"===c)&&"localhost"!==n.domain&&Ys("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ni("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fs(n.host,n.secure,c,"ws"===n.scheme||"wss"===n.scheme,i,"",c!==n.subdomain),path:new yn(n.pathString)}},zc=function(u){let i="",n="",c="",f="",E="",I=!0,O="https",q=443;if("string"==typeof u){let te=u.indexOf("//");te>=0&&(O=u.substring(0,te-1),u=u.substring(te+2));let Te=u.indexOf("/");-1===Te&&(Te=u.length);let Ae=u.indexOf("?");-1===Ae&&(Ae=u.length),i=u.substring(0,Math.min(Te,Ae)),Te<Ae&&(f=function G_(u){let i="";const n=u.split("/");for(let c=0;c<n.length;c++)if(n[c].length>0){let f=n[c];try{f=decodeURIComponent(f.replace(/\+/g," "))}catch(E){}i+="/"+f}return i}(u.substring(Te,Ae)));const Ze=function Am(u){const i={};"?"===u.charAt(0)&&(u=u.substring(1));for(const n of u.split("&")){if(0===n.length)continue;const c=n.split("=");2===c.length?i[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):Ni(`Invalid query segment '${n}' in query '${u}'`)}return i}(u.substring(Math.min(u.length,Ae)));te=i.indexOf(":"),te>=0?(I="https"===O||"wss"===O,q=parseInt(i.substring(te+1),10)):te=i.length;const dt=i.slice(0,te);if("localhost"===dt.toLowerCase())n="localhost";else if(dt.split(".").length<=2)n=dt;else{const yt=i.indexOf(".");c=i.substring(0,yt).toLowerCase(),n=i.substring(yt+1),E=c}"ns"in Ze&&(E=Ze.ns)}return{host:i,port:q,domain:n,subdomain:c,secure:I,scheme:O,pathString:f,namespace:E}};class Mm{constructor(i,n,c,f){this.eventType=i,this.eventRegistration=n,this.snapshot=c,this.prevName=f}getPath(){const i=this.snapshot.ref;return"value"===this.eventType?i._path:i.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ce.Pz)(this.snapshot.exportVal())}}class Qf{constructor(i,n,c){this.eventRegistration=i,this.error=n,this.path=c}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Fh{constructor(i,n){this.snapshotCallback=i,this.cancelCallback=n}onValue(i,n){this.snapshotCallback.call(null,i,n)}onCancel(i){return(0,ce.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,i)}get hasCancelCallback(){return!!this.cancelCallback}matches(i){return this.snapshotCallback===i.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===i.snapshotCallback.userCallback&&this.snapshotCallback.context===i.snapshotCallback.context}}class q_{constructor(i,n){this._repo=i,this._path=n}cancel(){const i=new ce.BH;return kv(this._repo,this._path,i.wrapCallback(()=>{})),i.promise}remove(){la("OnDisconnect.remove",this._path);const i=new ce.BH;return Im(this._repo,this._path,null,i.wrapCallback(()=>{})),i.promise}set(i){la("OnDisconnect.set",this._path),ma("OnDisconnect.set",i,this._path,!1);const n=new ce.BH;return Im(this._repo,this._path,i,n.wrapCallback(()=>{})),n.promise}setWithPriority(i,n){la("OnDisconnect.setWithPriority",this._path),ma("OnDisconnect.setWithPriority",i,this._path,!1),uc("OnDisconnect.setWithPriority",n,!1);const c=new ce.BH;return function Dm(u,i,n,c,f){const E=As(n,c);u.server_.onDisconnectPut(i.toString(),E.val(!0),(I,O)=>{"ok"===I&&ls(u.onDisconnect_,i,E),Nu(0,f,I,O)})}(this._repo,this._path,i,n,c.wrapCallback(()=>{})),c.promise}update(i){la("OnDisconnect.update",this._path),Rd("OnDisconnect.update",i,this._path,!1);const n=new ce.BH;return function H_(u,i,n,c){if((0,ce.xb)(n))return bi("onDisconnect().update() called with empty data.  Don't do anything."),void Nu(0,c,"ok",void 0);u.server_.onDisconnectMerge(i.toString(),n,(f,E)=>{"ok"===f&&P(n,(I,O)=>{const q=As(O);ls(u.onDisconnect_,hi(i,I),q)}),Nu(0,c,f,E)})}(this._repo,this._path,i,n.wrapCallback(()=>{})),n.promise}}class Ko{constructor(i,n,c,f){this._repo=i,this._path=n,this._queryParams=c,this._orderByCalled=f}get key(){return ur(this._path)?null:Go(this._path)}get ref(){return new ml(this._repo,this._path)}get _queryIdentifier(){const i=Js(this._queryParams),n=D(i);return"{}"===n?"default":n}get _queryObject(){return Js(this._queryParams)}isEqual(i){if(!((i=(0,ce.m9)(i))instanceof Ko))return!1;const n=this._repo===i._repo,c=vu(this._path,i._path);return n&&c&&this._queryIdentifier===i._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Mp(u){let i="";for(let n=u.pieceNum_;n<u.pieces_.length;n++)""!==u.pieces_[n]&&(i+="/"+encodeURIComponent(String(u.pieces_[n])));return i||"/"}(this._path)}}function Lh(u,i){if(!0===u._orderByCalled)throw new Error(i+": You can't combine multiple orderBy calls.")}function eu(u){let i=null,n=null;if(u.hasStart()&&(i=u.getIndexStartValue()),u.hasEnd()&&(n=u.getIndexEndValue()),u.getIndex()===Ss){const c="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",f="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==yr)throw new Error(c);if("string"!=typeof i)throw new Error(f)}if(u.hasEnd()){if(u.getIndexEndName()!==ds)throw new Error(c);if("string"!=typeof n)throw new Error(f)}}else if(u.getIndex()===Li){if(null!=i&&!xu(i)||null!=n&&!xu(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ce.hu)(u.getIndex()instanceof Hl||u.getIndex()===Mc,"unknown index type."),null!=i&&"object"==typeof i||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Uh(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ml extends Ko{constructor(i,n){super(i,n,new Eo,!1)}get parent(){const i=yu(this._path);return null===i?null:new ml(this._repo,i)}get root(){let i=this;for(;null!==i.parent;)i=i.parent;return i}}class Pu{constructor(i,n,c){this._node=i,this.ref=n,this._index=c}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(i){const n=new yn(i),c=Zc(this.ref,i);return new Pu(this._node.getChild(n),c,Li)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(i){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(c,f)=>i(new Pu(f,Zc(this.ref,c),Li)))}hasChild(i){const n=new yn(i);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vh(u,i){return(u=(0,ce.m9)(u))._checkNotDeleted("ref"),void 0!==i?Zc(u._root,i):u._root}function sg(u,i){(u=(0,ce.m9)(u))._checkNotDeleted("refFromURL");const n=Fd(i,u._repo.repoInfo_.nodeAdmin);Qp("refFromURL",n);const c=n.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&c.host!==u._repo.repoInfo_.host&&Ys("refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+u._repo.repoInfo_.host+")"),Vh(u,n.path.toString())}function Zc(u,i){return null===xn((u=(0,ce.m9)(u))._path)?(n=i,n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ru("child","path",n,!1)):Ru("child","path",i,!1),new ml(u._repo,hi(u._path,i));var n}function og(u,i){u=(0,ce.m9)(u),la("set",u._path),ma("set",i,u._path,!1);const n=new ce.BH;return ng(u._repo,u._path,i,null,n.wrapCallback(()=>{})),n.promise}function Nm(u,i){Rd("update",i,u._path,!1);const n=new ce.BH;return function j_(u,i,n,c){qc(u,"update",{path:i.toString(),value:n});let f=!0;const E=Rh(u),I={};if(P(n,(O,q)=>{f=!1,I[O]=P_(hi(i,O),As(q),u.serverSyncTree_,E)}),f)bi("update() called with empty data.  Don't do anything."),Nu(0,c,"ok",void 0);else{const O=Od(u),q=function pm(u,i,n,c){!function Dn(u,i,n,c){(0,ce.hu)(c>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:i,children:n,writeId:c,visible:!0}),u.visibleWrites=ka(u.visibleWrites,i,n),u.lastWriteId=c}(u.pendingWriteTree_,i,n,c);const f=Ui.fromObject(n);return Dh(u,new oc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,f))}(u.serverSyncTree_,i,I,O);Wf(u.eventQueue_,q),u.server_.merge(i.toString(),n,(te,Te)=>{const Ae="ok"===te;Ae||Ni("update at "+i+" failed: "+te);const Ze=La(u.serverSyncTree_,O,!Ae),dt=Ze.length>0?Ph(u,i):i;Ci(u.eventQueue_,dt,Ze),Nu(0,c,te,Te)}),P(n,te=>{const Te=Wc(u,hi(i,te));Ph(u,Te)}),Ci(u.eventQueue_,i,[])}}(u._repo,u._path,i,n.wrapCallback(()=>{})),n.promise}function Zy(u){return function Cm(u,i){const n=function Ad(u,i){const n=i._path;let c=null;u.syncPointTree_.foreachOnPath(n,(te,Te)=>{const Ae=yo(te,n);c=c||jc(Te,Ae)});let f=u.syncPointTree_.get(n);f?c=c||jc(f,vr()):(f=new By,u.syncPointTree_=u.syncPointTree_.set(n,f));const E=null!=c,I=E?new Xa(c,!0,!1):null;return function vh(u){return Fc(u.viewCache_)}(Bc(f,i,Ft(u.pendingWriteTree_,i._path),E?I.getNode():Jn.EMPTY_NODE,E))}(u.serverSyncTree_,i);return null!=n?Promise.resolve(n):u.server_.get(i).then(c=>{const f=As(c).withIndex(i._queryParams.getIndex()),E=Zo(u.serverSyncTree_,i._path,f);return Pd(u.eventQueue_,i._path,E),Promise.resolve(f)},c=>(qc(u,"get for query "+(0,ce.Pz)(i)+" failed: "+c),Promise.reject(new Error(c))))}((u=(0,ce.m9)(u))._repo,u).then(i=>new Pu(i,new ml(u._repo,u._path),u._queryParams.getIndex()))}class Jf{constructor(i){this.callbackContext=i}respondsTo(i){return"value"===i}createEvent(i,n){const c=n._queryParams.getIndex();return new Mm("value",this,new Pu(i.snapshotNode,new ml(n._repo,n._path),c))}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,null)}createCancelEvent(i,n){return this.callbackContext.hasCancelCallback?new Qf(this,i,n):null}matches(i){return i instanceof Jf&&(!i.callbackContext||!this.callbackContext||i.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Bh{constructor(i,n){this.eventType=i,this.callbackContext=n}respondsTo(i){let n="children_added"===i?"child_added":i;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(i,n){return this.callbackContext.hasCancelCallback?new Qf(this,i,n):null}createEvent(i,n){(0,ce.hu)(null!=i.childName,"Child events should have a childName.");const c=Zc(new ml(n._repo,n._path),i.childName),f=n._queryParams.getIndex();return new Mm(i.type,this,new Pu(i.snapshotNode,c,f),i.prevName)}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,i.prevName)}matches(i){return i instanceof Bh&&this.eventType===i.eventType&&(!this.callbackContext||!i.callbackContext||this.callbackContext.matches(i.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Kc(u,i,n,c,f){let E;if("object"==typeof c&&(E=void 0,f=c),"function"==typeof c&&(E=c),f&&f.onlyOnce){const q=n,te=(Te,Ae)=>{rg(u._repo,u,O),q(Te,Ae)};te.userCallback=n.userCallback,te.context=n.context,n=te}const I=new Fh(n,E||void 0),O="value"===i?new Jf(I):new Bh(i,I);return function qy(u,i,n){let c;c=".info"===xn(i._path)?Vf(u.infoSyncTree_,i,n):Vf(u.serverSyncTree_,i,n),Pd(u.eventQueue_,i._path,c)}(u._repo,u,O),()=>rg(u._repo,u,O)}function jh(u,i,n,c){return Kc(u,"value",i,n,c)}function Yc(u,i,n,c){return Kc(u,"child_added",i,n,c)}function lg(u,i,n,c){return Kc(u,"child_changed",i,n,c)}function Hh(u,i,n,c){return Kc(u,"child_moved",i,n,c)}function Qc(u,i,n,c){return Kc(u,"child_removed",i,n,c)}function Ou(u,i,n){let c=null;const f=n?new Fh(n):null;"value"===i?c=new Jf(f):i&&(c=new Bh(i,f)),rg(u._repo,u,c)}class rl{}class Ld extends rl{constructor(i,n){super(),this._value=i,this._key=n}_apply(i){ma("endAt",this._value,i._path,!0);const n=ti(i._queryParams,this._value,this._key);if(Uh(n),eu(n),i._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ko(i._repo,i._path,n,i._orderByCalled)}}class W_ extends rl{constructor(i,n){super(),this._value=i,this._key=n}_apply(i){ma("endBefore",this._value,i._path,!1);const n=function sm(u,i,n){let c,f;return u.index_===Ss?("string"==typeof i&&(i=Nc(i)),f=ti(u,i,n)):(c=null==n?yr:Nc(n),f=ti(u,i,c)),f.endBeforeSet_=!0,f}(i._queryParams,this._value,this._key);if(Uh(n),eu(n),i._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ko(i._repo,i._path,n,i._orderByCalled)}}class Pm extends rl{constructor(i,n){super(),this._value=i,this._key=n}_apply(i){ma("startAt",this._value,i._path,!0);const n=Df(i._queryParams,this._value,this._key);if(Uh(n),eu(n),i._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ko(i._repo,i._path,n,i._orderByCalled)}}class ug extends rl{constructor(i,n){super(),this._value=i,this._key=n}_apply(i){ma("startAfter",this._value,i._path,!1);const n=function vd(u,i,n){let c;if(u.index_===Ss)"string"==typeof i&&(i=Tf(i)),c=Df(u,i,n);else{let f;f=null==n?ds:Tf(n),c=Df(u,i,f)}return c.startAfterSet_=!0,c}(i._queryParams,this._value,this._key);if(Uh(n),eu(n),i._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ko(i._repo,i._path,n,i._orderByCalled)}}class km extends rl{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ko(i._repo,i._path,function If(u,i){const n=u.copy();return n.limitSet_=!0,n.limit_=i,n.viewFrom_="l",n}(i._queryParams,this._limit),i._orderByCalled)}}class Ky extends rl{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ko(i._repo,i._path,function yd(u,i){const n=u.copy();return n.limitSet_=!0,n.limit_=i,n.viewFrom_="r",n}(i._queryParams,this._limit),i._orderByCalled)}}class Fm extends rl{constructor(i){super(),this._path=i}_apply(i){Lh(i,"orderByChild");const n=new yn(this._path);if(ur(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const c=new Hl(n),f=Pc(i._queryParams,c);return eu(f),new Ko(i._repo,i._path,f,!0)}}class ku extends rl{_apply(i){Lh(i,"orderByKey");const n=Pc(i._queryParams,Ss);return eu(n),new Ko(i._repo,i._path,n,!0)}}class z_ extends rl{_apply(i){Lh(i,"orderByPriority");const n=Pc(i._queryParams,Li);return eu(n),new Ko(i._repo,i._path,n,!0)}}class Vm extends rl{_apply(i){Lh(i,"orderByValue");const n=Pc(i._queryParams,Mc);return eu(n),new Ko(i._repo,i._path,n,!0)}}class Z_ extends rl{constructor(i,n){super(),this._value=i,this._key=n}_apply(i){if(ma("equalTo",this._value,i._path,!1),i._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(i._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ld(this._value,this._key)._apply(new Pm(this._value,this._key)._apply(i))}}function nu(u,...i){let n=(0,ce.m9)(u);for(const c of i)n=c._apply(n);return n}(function hm(u){(0,ce.hu)(!bh,"__referenceConstructor has already been defined"),bh=u})(ml),function jy(u){(0,ce.hu)(!Lf,"__referenceConstructor has already been defined"),Lf=u}(ml);const dg={};function fg(u,i,n,c,f){let E=c||u.options.databaseURL;void 0===E&&(u.options.projectId||Ys("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bi("Using default host for project ",u.options.projectId),E=`${u.options.projectId}-default-rtdb.firebaseio.com`);let q,te,I=Fd(E,f),O=I.repoInfo;"undefined"!=typeof process&&process.env&&(te=process.env.FIREBASE_DATABASE_EMULATOR_HOST),te?(q=!0,E=`http://${te}?ns=${O.namespace}`,I=Fd(E,f),O=I.repoInfo):q=!I.repoInfo.secure;const Te=f&&q?new Ds(Ds.OWNER):new Fl(u.name,u.options,i);Qp("Invalid Firebase Database URL",I),ur(I.path)||Ys("Database URL must point to the root of a Firebase Database (not including a child path).");const Ae=function K_(u,i,n,c){let f=dg[i.name];f||(f={},dg[i.name]=f);let E=f[u.toURLString()];return E&&Ys("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),E=new Ov(u,false,n,c),f[u.toURLString()]=E,E}(O,u,Te,new hs(u.name,n));return new Xf(Ae,u)}class Xf{constructor(i,n){this._repoInternal=i,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function B_(u,i,n){if(u.stats_=Qn(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new Gl(u.repoInfo_,(c,f,E,I)=>{Xp(u,c,f,E,I)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>eg(u,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ce.Pz)(n)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}u.persistentConnection_=new Ka(u.repoInfo_,i,(c,f,E,I)=>{Xp(u,c,f,E,I)},c=>{eg(u,c)},c=>{!function tg(u,i){P(i,(n,c)=>{Po(u,n,c)})}(u,c)},u.authTokenProvider_,u.appCheckProvider_,n),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(c=>{u.server_.refreshAuthToken(c)}),u.appCheckProvider_.addTokenChangeListener(c=>{u.server_.refreshAppCheckToken(c.token)}),u.statsReporter_=function Aa(u,i){const n=u.toString();return Sa[n]||(Sa[n]=i()),Sa[n]}(u.repoInfo_,()=>new Fp(u.stats_,u.server_)),u.infoData_=new sh,u.infoSyncTree_=new Th({startListening:(c,f,E,I)=>{let O=[];const q=u.infoData_.getNode(c._path);return q.isEmpty()||(O=Zo(u.infoSyncTree_,c._path,q),setTimeout(()=>{I("ok")},0)),O},stopListening:()=>{}}),Po(u,"connected",!1),u.serverSyncTree_=new Th({startListening:(c,f,E,I)=>(u.server_.listen(c,E,f,(O,q)=>{const te=I(O,q);Ci(u.eventQueue_,c._path,te)}),[]),stopListening:(c,f)=>{u.server_.unlisten(c,f)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ml(this._repo,vr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Xy(u,i){const n=dg[i];(!n||n[u.key]!==u)&&Ys(`Database ${i}(${u.repoInfo_}) has already been deleted.`),Zf(u),delete n[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(i){null===this._rootInternal&&Ys("Cannot call "+i+" on a deleted database.")}}function Hm(){ia.IS_TRANSPORT_INITIALIZED&&Ni("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function pg(){Hm(),ss.forceDisallow()}function $m(){Hm(),Pa.forceDisallow(),ss.forceAllow()}function Q_(u,i){Fi(u,i)}const J_={".sv":"timestamp"};class mg{constructor(i,n){this.committed=i,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ka.prototype.simpleListen=function(u,i){this.sendRequest("q",{p:u},i)},Ka.prototype.echo=function(u,i){this.sendRequest("echo",{d:u},i)},function gg(u){Ia(wl.SDK_VERSION),(0,wl._registerComponent)(new sr.wA("database",(i,{instanceIdentifier:n})=>fg(i.getProvider("app").getImmediate(),i.getProvider("auth-internal"),i.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),(0,wl.registerVersion)(Bo,"0.13.0",u),(0,wl.registerVersion)(Bo,"0.13.0","esm2017")}();const cc=new Vo.Yd("@firebase/database-compat"),yg=function(u){cc.warn("FIREBASE WARNING: "+u)};class vg{constructor(i){this._delegate=i}cancel(i){(0,ce.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ce.Wj)("OnDisconnect.cancel","onComplete",i,!0);const n=this._delegate.cancel();return i&&n.then(()=>i(null),c=>i(c)),n}remove(i){(0,ce.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ce.Wj)("OnDisconnect.remove","onComplete",i,!0);const n=this._delegate.remove();return i&&n.then(()=>i(null),c=>i(c)),n}set(i,n){(0,ce.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ce.Wj)("OnDisconnect.set","onComplete",n,!0);const c=this._delegate.set(i);return n&&c.then(()=>n(null),f=>n(f)),c}setWithPriority(i,n,c){(0,ce.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ce.Wj)("OnDisconnect.setWithPriority","onComplete",c,!0);const f=this._delegate.setWithPriority(i,n);return c&&f.then(()=>c(null),E=>c(E)),f}update(i,n){if((0,ce.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(i)){const f={};for(let E=0;E<i.length;++E)f[""+E]=i[E];i=f,yg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ce.Wj)("OnDisconnect.update","onComplete",n,!0);const c=this._delegate.update(i);return n&&c.then(()=>n(null),f=>n(f)),c}}class qh{constructor(i,n){this.committed=i,this.snapshot=n}toJSON(){return(0,ce.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Fu{constructor(i,n){this._database=i,this._delegate=n}val(){return(0,ce.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ce.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ce.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ce.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(i){return(0,ce.Dv)("DataSnapshot.child",0,1,arguments.length),i=String(i),Ru("DataSnapshot.child","path",i,!1),new Fu(this._database,this._delegate.child(i))}hasChild(i){return(0,ce.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ru("DataSnapshot.hasChild","path",i,!1),this._delegate.hasChild(i)}getPriority(){return(0,ce.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(i){return(0,ce.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ce.Wj)("DataSnapshot.forEach","action",i,!1),this._delegate.forEach(n=>i(new Fu(this._database,n)))}hasChildren(){return(0,ce.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ce.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ce.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ua(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class oo{constructor(i,n){this.database=i,this._delegate=n}on(i,n,c,f){var E;(0,ce.Dv)("Query.on",2,4,arguments.length),(0,ce.Wj)("Query.on","callback",n,!1);const I=oo.getCancelAndContextArgs_("Query.on",c,f),O=(te,Te)=>{n.call(I.context,new Fu(this.database,te),Te)};O.userCallback=n,O.context=I.context;const q=null===(E=I.cancel)||void 0===E?void 0:E.bind(I.context);switch(i){case"value":return jh(this._delegate,O,q),n;case"child_added":return Yc(this._delegate,O,q),n;case"child_removed":return Qc(this._delegate,O,q),n;case"child_changed":return lg(this._delegate,O,q),n;case"child_moved":return Hh(this._delegate,O,q),n;default:throw new Error((0,ce.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(i,n,c){if((0,ce.Dv)("Query.off",0,3,arguments.length),function(u,i,n){if(void 0!==i)switch(i){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ce.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,i),(0,ce.Wj)("Query.off","callback",n,!0),(0,ce.lb)("Query.off","context",c,!0),n){const f=()=>{};f.userCallback=n,f.context=c,Ou(this._delegate,i,f)}else Ou(this._delegate,i)}get(){return Zy(this._delegate).then(i=>new Fu(this.database,i))}once(i,n,c,f){(0,ce.Dv)("Query.once",1,4,arguments.length),(0,ce.Wj)("Query.once","callback",n,!0);const E=oo.getCancelAndContextArgs_("Query.once",c,f),I=new ce.BH,O=(te,Te)=>{const Ae=new Fu(this.database,te);n&&n.call(E.context,Ae,Te),I.resolve(Ae)};O.userCallback=n,O.context=E.context;const q=te=>{E.cancel&&E.cancel.call(E.context,te),I.reject(te)};switch(i){case"value":jh(this._delegate,O,q,{onlyOnce:!0});break;case"child_added":Yc(this._delegate,O,q,{onlyOnce:!0});break;case"child_removed":Qc(this._delegate,O,q,{onlyOnce:!0});break;case"child_changed":lg(this._delegate,O,q,{onlyOnce:!0});break;case"child_moved":Hh(this._delegate,O,q,{onlyOnce:!0});break;default:throw new Error((0,ce.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return I.promise}limitToFirst(i){return(0,ce.Dv)("Query.limitToFirst",1,1,arguments.length),new oo(this.database,nu(this._delegate,function Xc(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new km(u)}(i)))}limitToLast(i){return(0,ce.Dv)("Query.limitToLast",1,1,arguments.length),new oo(this.database,nu(this._delegate,function Yy(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ky(u)}(i)))}orderByChild(i){return(0,ce.Dv)("Query.orderByChild",1,1,arguments.length),new oo(this.database,nu(this._delegate,function Lm(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ru("orderByChild","path",u,!1),new Fm(u)}(i)))}orderByKey(){return(0,ce.Dv)("Query.orderByKey",0,0,arguments.length),new oo(this.database,nu(this._delegate,function cg(){return new ku}()))}orderByPriority(){return(0,ce.Dv)("Query.orderByPriority",0,0,arguments.length),new oo(this.database,nu(this._delegate,function Um(){return new z_}()))}orderByValue(){return(0,ce.Dv)("Query.orderByValue",0,0,arguments.length),new oo(this.database,nu(this._delegate,function Bm(){return new Vm}()))}startAt(i=null,n){return(0,ce.Dv)("Query.startAt",0,2,arguments.length),new oo(this.database,nu(this._delegate,function Gh(u=null,i){return Gc("startAt","key",i,!0),new Pm(u,i)}(i,n)))}startAfter(i=null,n){return(0,ce.Dv)("Query.startAfter",0,2,arguments.length),new oo(this.database,nu(this._delegate,function Om(u,i){return Gc("startAfter","key",i,!0),new ug(u,i)}(i,n)))}endAt(i=null,n){return(0,ce.Dv)("Query.endAt",0,2,arguments.length),new oo(this.database,nu(this._delegate,function Jc(u,i){return Gc("endAt","key",i,!0),new Ld(u,i)}(i,n)))}endBefore(i=null,n){return(0,ce.Dv)("Query.endBefore",0,2,arguments.length),new oo(this.database,nu(this._delegate,function $h(u,i){return Gc("endBefore","key",i,!0),new W_(u,i)}(i,n)))}equalTo(i,n){return(0,ce.Dv)("Query.equalTo",1,2,arguments.length),new oo(this.database,nu(this._delegate,function Qy(u,i){return Gc("equalTo","key",i,!0),new Z_(u,i)}(i,n)))}toString(){return(0,ce.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ce.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(i){if((0,ce.Dv)("Query.isEqual",1,1,arguments.length),!(i instanceof oo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(i._delegate)}static getCancelAndContextArgs_(i,n,c){const f={cancel:void 0,context:void 0};if(n&&c)f.cancel=n,(0,ce.Wj)(i,"cancel",f.cancel,!0),f.context=c,(0,ce.lb)(i,"context",f.context,!0);else if(n)if("object"==typeof n&&null!==n)f.context=n;else{if("function"!=typeof n)throw new Error((0,ce.gK)(i,"cancelOrContext")+" must either be a cancel callback or a context object.");f.cancel=n}return f}get ref(){return new Ua(this.database,new ml(this._delegate._repo,this._delegate._path))}}class Ua extends oo{constructor(i,n){super(i,new Ko(n._repo,n._path,new Eo,!1)),this.database=i,this._delegate=n}getKey(){return(0,ce.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(i){return(0,ce.Dv)("Reference.child",1,1,arguments.length),"number"==typeof i&&(i=String(i)),new Ua(this.database,Zc(this._delegate,i))}getParent(){(0,ce.Dv)("Reference.parent",0,0,arguments.length);const i=this._delegate.parent;return i?new Ua(this.database,i):null}getRoot(){return(0,ce.Dv)("Reference.root",0,0,arguments.length),new Ua(this.database,this._delegate.root)}set(i,n){(0,ce.Dv)("Reference.set",1,2,arguments.length),(0,ce.Wj)("Reference.set","onComplete",n,!0);const c=og(this._delegate,i);return n&&c.then(()=>n(null),f=>n(f)),c}update(i,n){if((0,ce.Dv)("Reference.update",1,2,arguments.length),Array.isArray(i)){const f={};for(let E=0;E<i.length;++E)f[""+E]=i[E];i=f,yg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}la("Reference.update",this._delegate._path),(0,ce.Wj)("Reference.update","onComplete",n,!0);const c=Nm(this._delegate,i);return n&&c.then(()=>n(null),f=>n(f)),c}setWithPriority(i,n,c){(0,ce.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ce.Wj)("Reference.setWithPriority","onComplete",c,!0);const f=function ag(u,i,n){if(la("setWithPriority",u._path),ma("setWithPriority",i,u._path,!1),uc("setWithPriority",n,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const c=new ce.BH;return ng(u._repo,u._path,i,n,c.wrapCallback(()=>{})),c.promise}(this._delegate,i,n);return c&&f.then(()=>c(null),E=>c(E)),f}remove(i){(0,ce.Dv)("Reference.remove",0,1,arguments.length),(0,ce.Wj)("Reference.remove","onComplete",i,!0);const n=function Rm(u){return la("remove",u._path),og(u,null)}(this._delegate);return i&&n.then(()=>i(null),c=>i(c)),n}transaction(i,n,c){(0,ce.Dv)("Reference.transaction",1,3,arguments.length),(0,ce.Wj)("Reference.transaction","transactionUpdate",i,!1),(0,ce.Wj)("Reference.transaction","onComplete",n,!0),function(u,i,n,c){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,ce.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,c);const f=function ed(u,i,n){var c;if(u=(0,ce.m9)(u),la("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const f=null===(c=null==n?void 0:n.applyLocally)||void 0===c||c,E=new ce.BH,O=jh(u,()=>{});return function Wy(u,i,n,c,f,E){qc(u,"transaction on "+i);const I={path:i,update:n,onComplete:c,status:null,order:go(),applyLocally:E,retryCount:0,unwatcher:f,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},O=Sm(u,i,void 0);I.currentInputSnapshot=O;const q=I.update(O.val());if(void 0===q)I.unwatcher(),I.currentOutputSnapshotRaw=null,I.currentOutputSnapshotResolved=null,I.onComplete&&I.onComplete(null,!1,I.currentInputSnapshot);else{xd("transaction failed: Data returned ",q,I.path),I.status=0;const te=$f(u.transactionQueueTree_,i),Te=$c(te)||[];let Ae;Te.push(I),Sh(te,Te),"object"==typeof q&&null!==q&&(0,ce.r3)(q,".priority")?(Ae=(0,ce.DV)(q,".priority"),(0,ce.hu)(xu(Ae),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ae=(Mu(u.serverSyncTree_,i)||Jn.EMPTY_NODE).getPriority().val();const Ze=Rh(u),dt=As(q,Ae),yt=_m(dt,O,Ze);I.currentOutputSnapshotRaw=dt,I.currentOutputSnapshotResolved=yt,I.currentWriteId=Od(u);const Gt=$p(u.serverSyncTree_,i,yt,I.currentWriteId,I.applyLocally);Ci(u.eventQueue_,i,Gt),Kf(u,u.transactionQueueTree_)}}(u._repo,u._path,i,(q,te,Te)=>{let Ae=null;q?E.reject(q):(Ae=new Pu(Te,new ml(u._repo,u._path),Li),E.resolve(new mg(te,Ae)))},O,f),E.promise}(this._delegate,i,{applyLocally:c}).then(E=>new qh(E.committed,new Fu(this.database,E.snapshot)));return n&&f.then(E=>n(null,E.committed,E.snapshot),E=>n(E,!1,null)),f}setPriority(i,n){(0,ce.Dv)("Reference.setPriority",1,2,arguments.length),(0,ce.Wj)("Reference.setPriority","onComplete",n,!0);const c=function tu(u,i){u=(0,ce.m9)(u),la("setPriority",u._path),uc("setPriority",i,!1);const n=new ce.BH;return ng(u._repo,hi(u._path,".priority"),i,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,i);return n&&c.then(()=>n(null),f=>n(f)),c}push(i,n){(0,ce.Dv)("Reference.push",0,2,arguments.length),(0,ce.Wj)("Reference.push","onComplete",n,!0);const c=function xm(u,i){u=(0,ce.m9)(u),la("push",u._path),ma("push",i,u._path,!0);const n=zf(u._repo),c=ih(n),f=Zc(u,c),E=Zc(u,c);let I;return I=null!=i?og(E,i).then(()=>E):Promise.resolve(E),f.then=I.then.bind(I),f.catch=I.then.bind(I,void 0),f}(this._delegate,i),f=c.then(I=>new Ua(this.database,I));n&&f.then(()=>n(null),I=>n(I));const E=new Ua(this.database,c);return E.then=f.then.bind(f),E.catch=f.catch.bind(f,void 0),E}onDisconnect(){return la("Reference.onDisconnect",this._delegate._path),new vg(new q_(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ep{constructor(i,n){this._delegate=i,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:pg,forceLongPolling:$m}}useEmulator(i,n,c={}){!function _l(u,i,n,c={}){(u=(0,ce.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Ys("Cannot call useEmulator() after instance has already been initialized.");const f=u._repoInternal;let E;if(f.repoInfo_.nodeAdmin)c.mockUserToken&&Ys('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),E=new Ds(Ds.OWNER);else if(c.mockUserToken){const I="string"==typeof c.mockUserToken?c.mockUserToken:(0,ce.Sg)(c.mockUserToken,u.app.options.projectId);E=new Ds(I)}!function hg(u,i,n,c){u.repoInfo_=new fs(`${i}:${n}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams),c&&(u.authTokenProvider_=c)}(f,i,n,E)}(this._delegate,i,n,c)}ref(i){if((0,ce.Dv)("database.ref",0,1,arguments.length),i instanceof Ua){const n=sg(this._delegate,i.toString());return new Ua(this,n)}{const n=Vh(this._delegate,i);return new Ua(this,n)}}refFromURL(i){(0,ce.Dv)("database.refFromURL",1,1,arguments.length);const c=sg(this._delegate,i);return new Ua(this,c)}goOffline(){return(0,ce.Dv)("database.goOffline",0,0,arguments.length),function Lv(u){(u=(0,ce.m9)(u))._checkNotDeleted("goOffline"),Zf(u._repo)}(this._delegate)}goOnline(){return(0,ce.Dv)("database.goOnline",0,0,arguments.length),function Y_(u){(u=(0,ce.m9)(u))._checkNotDeleted("goOnline"),function Nh(u){u.persistentConnection_&&u.persistentConnection_.resume(U_)}(u._repo)}(this._delegate)}}ep.ServerValue={TIMESTAMP:function Gm(){return J_}(),increment:u=>function X_(u){return{".sv":{increment:u}}}(u)};var Lu=Object.freeze({__proto__:null,initStandalone:function tp({app:u,url:i,version:n,customAuthImpl:c,namespace:f,nodeAdmin:E=!1}){Ia(n);const I=new sr.zt("auth-internal",new sr.H0("database-standalone"));return I.setComponent(new sr.wA("auth-internal",()=>c,"PRIVATE")),{instance:new ep(fg(u,I,void 0,i,E),u),namespace:f}}});const Ud=ep.ServerValue;!function ua(u){u.INTERNAL.registerComponent(new sr.wA("database-compat",(i,{instanceIdentifier:n})=>{const c=i.getProvider("app-compat").getImmediate(),f=i.getProvider("database").getImmediate({identifier:n});return new ep(f,c)},"PUBLIC").setServiceProps({Reference:Ua,Query:oo,Database:ep,DataSnapshot:Fu,enableLogging:Q_,INTERNAL:Lu,ServerValue:Ud}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.2.0")}(Wa.Z);var _a=$(1205),np=$(440),Pl=$(127);function Vd(u){return null==u}function dc(u){return"function"==typeof u.set}function hc(u,i){return dc(i)?i:u.ref(i)}function fc(u,i){if(function zm(u){return"string"==typeof u}(u))return i.stringCase();if(dc(u))return i.firebaseCase();if(function td(u){return"function"==typeof u.exportVal}(u))return i.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function Uu(u,i,n="on",c=Zu.z){return new ae.y(f=>{let E=null;return E=u[n](i,(I,O)=>{c.schedule(()=>{f.next({snapshot:I,prevKey:O})}),"once"===n&&c.schedule(()=>f.complete())},I=>{c.schedule(()=>f.error(I))}),"on"===n?{unsubscribe(){null!=E&&u.off(i,E)}}:{unsubscribe(){}}}).pipe((0,er.U)(f=>{const{snapshot:E,prevKey:I}=f;let O=null;return E.exists()&&(O=E.key),{type:i,payload:E,prevKey:I,key:O}}),(0,ta.B)())}function nd(u,i){const n=u.length;for(let c=0;c<n;c++)if(u[c].payload.key===i)return c;return-1}function Eg(u,i){const{payload:n,prevKey:c,key:f}=i,E=nd(u,f),I=function Wh(u,i){if(Vd(i))return 0;{const n=nd(u,i);return-1===n?u.length:n+1}}(u,c);switch(i.type){case"value":if(i.payload&&i.payload.exists()){let O=null;i.payload.forEach(q=>{const te={payload:q,type:"value",prevKey:O,key:q.key};return O=q.key,u=[...u,te],!1})}return u;case"child_added":if(E>-1){const O=u[E-1];(O&&O.key||null)!==c&&(u=u.filter(q=>q.payload.key!==n.key)).splice(I,0,i)}else{if(null==c)return[i,...u];(u=u.slice()).splice(I,0,i)}return u;case"child_removed":return u.filter(O=>O.payload.key!==n.key);case"child_changed":return u.map(O=>O.payload.key===f?i:O);case"child_moved":if(E>-1){const O=u.splice(E,1)[0];return(u=u.slice()).splice(I,0,O),u}return u;default:return u}}function wg(u){return(Vd(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function zh(u,i,n){return function Bd(u,i,n){return Uu(u,"value","once",n).pipe((0,vc.w)(c=>{const f=[(0,V.of)(c)];return i.forEach(E=>f.push(Uu(u,E,"on",n))),(0,El.T)(...f).pipe((0,Ga.R)(Eg,[]))}),(0,Is.x)())}(u,i=wg(i),n)}function Zm(u,i,n){const c=(i=wg(i)).map(f=>Uu(u,f,"on",n));return(0,El.T)(...c)}function bg(u,i){return function(c,f){return fc(c,{stringCase:()=>u.child(c)[i](f),firebaseCase:()=>c[i](f),snapshotCase:()=>c.ref[i](f)})}}function Cg(u){return function(n){return n?fc(n,{stringCase:()=>u.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):u.remove()}}function rp(u,i){return function(){return Uu(u,"value","on",i)}}const Tg=new m.OlP("angularfire2.realtimeDatabaseURL"),ip=new m.OlP("angularfire2.database.use-emulator");let Ym=(()=>{class u{constructor(n,c,f,E,I,O,q,te,Te,Ae,Ze,dt,yt,Gt,Pn){this.schedulers=O;const or=q,Zr=(0,B.on)(n,I,c);te&&(0,_a.nw)(Zr,I,Te,Ze,dt,yt,Ae,Gt),this.database=(0,B.cc)(`${Zr.name}.database.${f}`,"AngularFireDatabase",Zr.name,()=>{const ys=I.runOutsideAngular(()=>Zr.database(f||void 0));return or&&ys.useEmulator(...or),ys},[or])}list(n,c){const f=this.schedulers.ngZone.runOutsideAngular(()=>hc(this.database,n));let E=f;return c&&(E=c(f)),function ry(u,i){const n=i.schedulers.outsideAngular,c=i.schedulers.ngZone.run(()=>u.ref);return{query:u,update:bg(c,"update"),set:bg(c,"set"),push:f=>c.push(f),remove:Cg(c),snapshotChanges:f=>zh(u,f,n).pipe(Ks.iC),stateChanges:f=>Zm(u,f,n).pipe(Ks.iC),auditTrail:f=>function ey(u,i,n){return function ny(u,i,n){return function ty(u,i){return Uu(u,"value","on",i).pipe((0,er.U)(n=>{let c;return n.payload.forEach(f=>(c=f.key,!1)),{data:n,lastKeyToLoad:c}}))}(u,n).pipe(function dd(...u){const i=(0,ul.jO)(u);return(0,qa.e)((n,c)=>{const f=u.length,E=new Array(f);let I=u.map(()=>!1),O=!1;for(let q=0;q<f;q++)(0,ll.Xf)(u[q]).subscribe((0,Mi.x)(c,te=>{E[q]=te,!O&&!I[q]&&(I[q]=!0,(O=I.every(Qd.y))&&(I=null))},Jd.Z));n.subscribe((0,Mi.x)(c,q=>{if(O){const te=[q,...E];c.next(i?i(...te):te)}}))})}(i),(0,er.U)(([f,E])=>{const I=f.lastKeyToLoad,O=E.map(q=>q.key);return{actions:E,lastKeyToLoad:I,loadedKeys:O}}),function hd(u){return(0,qa.e)((i,n)=>{let c=!1,f=0;i.subscribe((0,Mi.x)(n,E=>(c||(c=!u(E,f++)))&&n.next(E)))})}(f=>-1===f.loadedKeys.indexOf(f.lastKeyToLoad)),(0,er.U)(f=>f.actions))}(u,Zm(u,i).pipe((0,Ga.R)((f,E)=>[...f,E],[])),n)}(u,f,n).pipe(Ks.iC),valueChanges:(f,E)=>zh(u,f,n).pipe((0,er.U)(O=>O.map(q=>E&&E.idField?Object.assign(Object.assign({},q.payload.val()),{[E.idField]:q.key}):q.payload.val())),Ks.iC)}}(E,this)}object(n){return function Km(u,i){return{query:u,snapshotChanges:()=>rp(u,i.schedulers.outsideAngular)().pipe(Ks.iC),update:n=>u.ref.update(n),set:n=>u.ref.set(n),remove:()=>u.ref.remove(),valueChanges:()=>rp(u,i.schedulers.outsideAngular)().pipe(Ks.iC,(0,er.U)(c=>c.payload.exists()?c.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>hc(this.database,n)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(B.Dh),m.LFG(B.xv,8),m.LFG(Tg,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ks.HU),m.LFG(ip,8),m.LFG(_a.zQ,8),m.LFG(_a.Qv,8),m.LFG(_a.L6,8),m.LFG(_a._Q,8),m.LFG(_a.rT,8),m.LFG(_a.lh,8),m.LFG(_a.f7,8),m.LFG(np.nm,8))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),iy=(()=>{class u{constructor(){Pl.Z.registerVersion("angularfire",Ks.q4.full,"rtdb-compat")}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[Ym]}),u})();class sp{}const Ol="*";function ay(u,i=null){return{type:2,steps:u,options:i}}function Ig(u){return{type:6,styles:u,offset:null}}function Dg(u){Promise.resolve(null).then(u)}class ru{constructor(i=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=i+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}onStart(i){this._onStartFns.push(i)}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Dg(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(i=>i()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(i){this._position=this.totalTime?i*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(i){const n="start"==i?this._onStartFns:this._onDoneFns;n.forEach(c=>c()),n.length=0}}class Jm{constructor(i){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=i;let n=0,c=0,f=0;const E=this.players.length;0==E?Dg(()=>this._onFinish()):this.players.forEach(I=>{I.onDone(()=>{++n==E&&this._onFinish()}),I.onDestroy(()=>{++c==E&&this._onDestroy()}),I.onStart(()=>{++f==E&&this._onStart()})}),this.totalTime=this.players.reduce((I,O)=>Math.max(I,O.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this.players.forEach(i=>i.init())}onStart(i){this._onStartFns.push(i)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(i=>i()),this._onStartFns=[])}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(i=>i.play())}pause(){this.players.forEach(i=>i.pause())}restart(){this.players.forEach(i=>i.restart())}finish(){this._onFinish(),this.players.forEach(i=>i.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(i=>i.destroy()),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this.players.forEach(i=>i.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(i){const n=i*this.totalTime;this.players.forEach(c=>{const f=c.totalTime?Math.min(1,n/c.totalTime):1;c.setPosition(f)})}getPosition(){const i=this.players.reduce((n,c)=>null===n||c.totalTime>n.totalTime?c:n,null);return null!=i?i.getPosition():0}beforeDestroy(){this.players.forEach(i=>{i.beforeDestroy&&i.beforeDestroy()})}triggerCallback(i){const n="start"==i?this._onStartFns:this._onDoneFns;n.forEach(c=>c()),n.length=0}}const Sr=!1;function Zh(u){return new m.vHH(3e3,Sr)}function Ng(){return"undefined"!=typeof window&&void 0!==window.document}function Pg(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function pc(u){switch(u.length){case 0:return new ru;case 1:return u[0];default:return new Jm(u)}}function up(u,i,n,c,f={},E={}){const I=[],O=[];let q=-1,te=null;if(c.forEach(Te=>{const Ae=Te.offset,Ze=Ae==q,dt=Ze&&te||{};Object.keys(Te).forEach(yt=>{let Gt=yt,Pn=Te[yt];if("offset"!==yt)switch(Gt=i.normalizePropertyName(Gt,I),Pn){case"!":Pn=f[yt];break;case Ol:Pn=E[yt];break;default:Pn=i.normalizeStyleValue(yt,Gt,Pn,I)}dt[Gt]=Pn}),Ze||O.push(dt),te=dt,q=Ae}),I.length)throw function n_(u){return new m.vHH(3502,Sr)}();return O}function cp(u,i,n,c){switch(i){case"start":u.onStart(()=>c(n&&Yh(n,"start",u)));break;case"done":u.onDone(()=>c(n&&Yh(n,"done",u)));break;case"destroy":u.onDestroy(()=>c(n&&Yh(n,"destroy",u)))}}function Yh(u,i,n){const c=n.totalTime,E=i_(u.element,u.triggerName,u.fromState,u.toState,i||u.phaseName,null==c?u.totalTime:c,!!n.disabled),I=u._data;return null!=I&&(E._data=I),E}function i_(u,i,n,c,f="",E=0,I){return{element:u,triggerName:i,fromState:n,toState:c,phaseName:f,totalTime:E,disabled:!!I}}function Oo(u,i,n){let c;return u instanceof Map?(c=u.get(i),c||u.set(i,c=n)):(c=u[i],c||(c=u[i]=n)),c}function Qh(u){const i=u.indexOf(":");return[u.substring(1,i),u.substr(i+1)]}let gc=(u,i)=>!1,Og=(u,i,n)=>[],dp=null;function kg(u){const i=u.parentNode||u.host;return i===dp?null:i}(Pg()||"undefined"!=typeof Element)&&(Ng()?(dp=(()=>document.documentElement)(),gc=(u,i)=>{for(;i;){if(i===u)return!0;i=kg(i)}return!1}):gc=(u,i)=>u.contains(i),Og=(u,i,n)=>{if(n)return Array.from(u.querySelectorAll(i));const c=u.querySelector(i);return c?[c]:[]});let ju=null,hp=!1;function Fg(u){ju||(ju=function Jh(){return"undefined"!=typeof document?document.body:null}()||{},hp=!!ju.style&&"WebkitAppearance"in ju.style);let i=!0;return ju.style&&!function my(u){return"ebkit"==u.substring(1,6)}(u)&&(i=u in ju.style,!i&&hp&&(i="Webkit"+u.charAt(0).toUpperCase()+u.substr(1)in ju.style)),i}const s_=gc,o_=Og;let Lg=(()=>{class u{validateStyleProperty(n){return Fg(n)}matchesElement(n,c){return!1}containsElement(n,c){return s_(n,c)}getParentElement(n){return kg(n)}query(n,c,f){return o_(n,c,f)}computeStyle(n,c,f){return f||""}animate(n,c,f,E,I,O=[],q){return new ru(f,E)}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})(),ao=(()=>{class u{}return u.NOOP=new Lg,u})();const id="ng-enter",Ug="ng-leave",sd="ng-trigger",su=".ng-trigger",Va="ng-animating",jd=".ng-animating";function il(u){if("number"==typeof u)return u;const i=u.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:Vg(parseFloat(i[1]),i[2])}function Vg(u,i){return"s"===i?1e3*u:u}function gp(u,i,n){return u.hasOwnProperty("duration")?u:function l_(u,i,n){let f,E=0,I="";if("string"==typeof u){const O=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===O)return i.push(Zh()),{duration:0,delay:0,easing:""};f=Vg(parseFloat(O[1]),O[2]);const q=O[3];null!=q&&(E=Vg(parseFloat(q),O[4]));const te=O[5];te&&(I=te)}else f=u;if(!n){let O=!1,q=i.length;f<0&&(i.push(function ly(){return new m.vHH(3100,Sr)}()),O=!0),E<0&&(i.push(function Kh(){return new m.vHH(3101,Sr)}()),O=!0),O&&i.splice(q,0,Zh())}return{duration:f,delay:E,easing:I}}(u,i,n)}function mc(u,i={}){return Object.keys(u).forEach(n=>{i[n]=u[n]}),i}function $u(u,i,n={}){if(i)for(let c in u)n[c]=u[c];else mc(u,n);return n}function ou(u,i,n){return n?i+":"+n+";":""}function yy(u){let i="";for(let n=0;n<u.style.length;n++){const c=u.style.item(n);i+=ou(0,c,u.style.getPropertyValue(c))}for(const n in u.style)u.style.hasOwnProperty(n)&&!n.startsWith("_")&&(i+=ou(0,jg(n),u.style[n]));u.setAttribute("style",i)}function Gu(u,i,n){u.style&&(Object.keys(i).forEach(c=>{const f=c_(c);n&&!n.hasOwnProperty(c)&&(n[c]=u.style[f]),u.style[f]=i[c]}),Pg()&&yy(u))}function ca(u,i){u.style&&(Object.keys(i).forEach(n=>{const c=c_(n);u.style[c]=""}),Pg()&&yy(u))}function Ba(u){return Array.isArray(u)?1==u.length?u[0]:ay(u):u}const mp=new RegExp("{{\\s*(.+?)\\s*}}","g");function u_(u){let i=[];if("string"==typeof u){let n;for(;n=mp.exec(u);)i.push(n[1]);mp.lastIndex=0}return i}function Bg(u,i,n){const c=u.toString(),f=c.replace(mp,(E,I)=>{let O=i[I];return i.hasOwnProperty(I)||(n.push(function _s(u){return new m.vHH(3003,Sr)}()),O=""),O.toString()});return f==c?u:f}function _p(u){const i=[];let n=u.next();for(;!n.done;)i.push(n.value),n=u.next();return i}const dv=/-+([a-z0-9])/g;function c_(u){return u.replace(dv,(...i)=>i[1].toUpperCase())}function jg(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ja(u,i,n){switch(i.type){case 7:return u.visitTrigger(i,n);case 0:return u.visitState(i,n);case 1:return u.visitTransition(i,n);case 2:return u.visitSequence(i,n);case 3:return u.visitGroup(i,n);case 4:return u.visitAnimate(i,n);case 5:return u.visitKeyframes(i,n);case 6:return u.visitStyle(i,n);case 8:return u.visitReference(i,n);case 9:return u.visitAnimateChild(i,n);case 10:return u.visitAnimateRef(i,n);case 11:return u.visitQuery(i,n);case 12:return u.visitStagger(i,n);default:throw function ya(u){return new m.vHH(3004,Sr)}()}}function Ey(u,i){return window.getComputedStyle(u)[i]}function d_(u,i){const n=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(c=>function h_(u,i,n){if(":"==u[0]){const q=function by(u,i){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,c)=>parseFloat(c)>parseFloat(n);case":decrement":return(n,c)=>parseFloat(c)<parseFloat(n);default:return i.push(function Mg(u){return new m.vHH(3016,Sr)}()),"* => *"}}(u,n);if("function"==typeof q)return void i.push(q);u=q}const c=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return n.push(function eo(u){return new m.vHH(3015,Sr)}()),i;const f=c[1],E=c[2],I=c[3];i.push($g(f,I));"<"==E[0]&&!("*"==f&&"*"==I)&&i.push($g(I,f))}(c,n,i)):n.push(u),n}const yp=new Set(["true","1"]),ef=new Set(["false","0"]);function $g(u,i){const n=yp.has(u)||ef.has(u),c=yp.has(i)||ef.has(i);return(f,E)=>{let I="*"==u||u==f,O="*"==i||i==E;return!I&&n&&"boolean"==typeof f&&(I=f?yp.has(u):ef.has(u)),!O&&c&&"boolean"==typeof E&&(O=E?yp.has(i):ef.has(i)),I&&O}}const Cy=new RegExp("s*:selfs*,?","g");function Gg(u,i,n,c){return new tf(u).build(i,n,c)}class tf{constructor(i){this._driver=i}build(i,n,c){const f=new pv(n);this._resetContextStyleTimingState(f);const E=ja(this,Ba(i),f);return f.unsupportedCSSPropertiesFound.size&&f.unsupportedCSSPropertiesFound.keys(),E}_resetContextStyleTimingState(i){i.currentQuerySelector="",i.collectedStyles={},i.collectedStyles[""]={},i.currentTime=0}visitTrigger(i,n){let c=n.queryCount=0,f=n.depCount=0;const E=[],I=[];return"@"==i.name.charAt(0)&&n.errors.push(function uy(){return new m.vHH(3006,Sr)}()),i.definitions.forEach(O=>{if(this._resetContextStyleTimingState(n),0==O.type){const q=O,te=q.name;te.toString().split(/\s*,\s*/).forEach(Te=>{q.name=Te,E.push(this.visitState(q,n))}),q.name=te}else if(1==O.type){const q=this.visitTransition(O,n);c+=q.queryCount,f+=q.depCount,I.push(q)}else n.errors.push(function cy(){return new m.vHH(3007,Sr)}())}),{type:7,name:i.name,states:E,transitions:I,queryCount:c,depCount:f,options:null}}visitState(i,n){const c=this.visitStyle(i.styles,n),f=i.options&&i.options.params||null;if(c.containsDynamicStyles){const E=new Set,I=f||{};c.styles.forEach(O=>{if(qg(O)){const q=O;Object.keys(q).forEach(te=>{u_(q[te]).forEach(Te=>{I.hasOwnProperty(Te)||E.add(Te)})})}}),E.size&&(_p(E.values()),n.errors.push(function Sg(u,i){return new m.vHH(3008,Sr)}()))}return{type:0,name:i.name,style:c,options:f?{params:f}:null}}visitTransition(i,n){n.queryCount=0,n.depCount=0;const c=ja(this,Ba(i.animation),n);return{type:1,matchers:d_(i.expr,n.errors),animation:c,queryCount:n.queryCount,depCount:n.depCount,options:Gd(i.options)}}visitSequence(i,n){return{type:2,steps:i.steps.map(c=>ja(this,c,n)),options:Gd(i.options)}}visitGroup(i,n){const c=n.currentTime;let f=0;const E=i.steps.map(I=>{n.currentTime=c;const O=ja(this,I,n);return f=Math.max(f,n.currentTime),O});return n.currentTime=f,{type:3,steps:E,options:Gd(i.options)}}visitAnimate(i,n){const c=function mv(u,i){if(u.hasOwnProperty("duration"))return u;if("number"==typeof u)return g_(gp(u,i).duration,0,"");const n=u;if(n.split(/\s+/).some(E=>"{"==E.charAt(0)&&"{"==E.charAt(1))){const E=g_(0,0,"");return E.dynamic=!0,E.strValue=n,E}const f=gp(n,i);return g_(f.duration,f.delay,f.easing)}(i.timings,n.errors);n.currentAnimateTimings=c;let f,E=i.styles?i.styles:Ig({});if(5==E.type)f=this.visitKeyframes(E,n);else{let I=i.styles,O=!1;if(!I){O=!0;const te={};c.easing&&(te.easing=c.easing),I=Ig(te)}n.currentTime+=c.duration+c.delay;const q=this.visitStyle(I,n);q.isEmptyStep=O,f=q}return n.currentAnimateTimings=null,{type:4,timings:c,style:f,options:null}}visitStyle(i,n){const c=this._makeStyleAst(i,n);return this._validateStyleAst(c,n),c}_makeStyleAst(i,n){const c=[];Array.isArray(i.styles)?i.styles.forEach(I=>{"string"==typeof I?I==Ol?c.push(I):n.errors.push(function Xm(u){return new m.vHH(3002,Sr)}()):c.push(I)}):c.push(i.styles);let f=!1,E=null;return c.forEach(I=>{if(qg(I)){const O=I,q=O.easing;if(q&&(E=q,delete O.easing),!f)for(let te in O)if(O[te].toString().indexOf("{{")>=0){f=!0;break}}}),{type:6,styles:c,easing:E,offset:i.offset,containsDynamicStyles:f,options:null}}_validateStyleAst(i,n){const c=n.currentAnimateTimings;let f=n.currentTime,E=n.currentTime;c&&E>0&&(E-=c.duration+c.delay),i.styles.forEach(I=>{"string"!=typeof I&&Object.keys(I).forEach(O=>{if(!this._driver.validateStyleProperty(O))return delete I[O],void n.unsupportedCSSPropertiesFound.add(O);const q=n.collectedStyles[n.currentQuerySelector],te=q[O];let Te=!0;te&&(E!=f&&E>=te.startTime&&f<=te.endTime&&(n.errors.push(function e_(u,i,n,c,f){return new m.vHH(3010,Sr)}()),Te=!1),E=te.startTime),Te&&(q[O]={startTime:E,endTime:f}),n.options&&function au(u,i,n){const c=i.params||{},f=u_(u);f.length&&f.forEach(E=>{c.hasOwnProperty(E)||n.push(function iv(u){return new m.vHH(3001,Sr)}())})}(I[O],n.options,n.errors)})})}visitKeyframes(i,n){const c={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function hy(){return new m.vHH(3011,Sr)}()),c;let E=0;const I=[];let O=!1,q=!1,te=0;const Te=i.steps.map(or=>{const Zr=this._makeStyleAst(or,n);let ys=null!=Zr.offset?Zr.offset:function gv(u){if("string"==typeof u)return null;let i=null;if(Array.isArray(u))u.forEach(n=>{if(qg(n)&&n.hasOwnProperty("offset")){const c=n;i=parseFloat(c.offset),delete c.offset}});else if(qg(u)&&u.hasOwnProperty("offset")){const n=u;i=parseFloat(n.offset),delete n.offset}return i}(Zr.styles),to=0;return null!=ys&&(E++,to=Zr.offset=ys),q=q||to<0||to>1,O=O||to<te,te=to,I.push(to),Zr});q&&n.errors.push(function t_(){return new m.vHH(3012,Sr)}()),O&&n.errors.push(function sv(){return new m.vHH(3200,Sr)}());const Ae=i.steps.length;let Ze=0;E>0&&E<Ae?n.errors.push(function js(){return new m.vHH(3202,Sr)}()):0==E&&(Ze=1/(Ae-1));const dt=Ae-1,yt=n.currentTime,Gt=n.currentAnimateTimings,Pn=Gt.duration;return Te.forEach((or,Zr)=>{const ys=Ze>0?Zr==dt?1:Ze*Zr:I[Zr],to=ys*Pn;n.currentTime=yt+Gt.delay+to,Gt.duration=to,this._validateStyleAst(or,n),or.offset=ys,c.styles.push(or)}),c}visitReference(i,n){return{type:8,animation:ja(this,Ba(i.animation),n),options:Gd(i.options)}}visitAnimateChild(i,n){return n.depCount++,{type:9,options:Gd(i.options)}}visitAnimateRef(i,n){return{type:10,animation:this.visitReference(i.animation,n),options:Gd(i.options)}}visitQuery(i,n){const c=n.currentQuerySelector,f=i.options||{};n.queryCount++,n.currentQuery=i;const[E,I]=function p_(u){const i=!!u.split(/\s*,\s*/).find(n=>":self"==n);return i&&(u=u.replace(Cy,"")),u=u.replace(/@\*/g,su).replace(/@\w+/g,n=>su+"-"+n.substr(1)).replace(/:animating/g,jd),[u,i]}(i.selector);n.currentQuerySelector=c.length?c+" "+E:E,Oo(n.collectedStyles,n.currentQuerySelector,{});const O=ja(this,Ba(i.animation),n);return n.currentQuery=null,n.currentQuerySelector=c,{type:11,selector:E,limit:f.limit||0,optional:!!f.optional,includeSelf:I,animation:O,originalSelector:i.selector,options:Gd(i.options)}}visitStagger(i,n){n.currentQuery||n.errors.push(function Ag(){return new m.vHH(3013,Sr)}());const c="full"===i.timings?{duration:0,delay:0,easing:"full"}:gp(i.timings,n.errors,!0);return{type:12,animation:ja(this,Ba(i.animation),n),timings:c,options:null}}}class pv{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function qg(u){return!Array.isArray(u)&&"object"==typeof u}function Gd(u){return u?(u=mc(u)).params&&(u.params=function fv(u){return u?mc(u):null}(u.params)):u={},u}function g_(u,i,n){return{duration:u,delay:i,easing:n}}function Iy(u,i,n,c,f,E,I=null,O=!1){return{type:1,element:u,keyframes:i,preStyleProps:n,postStyleProps:c,duration:f,delay:E,totalTime:f+E,easing:I,subTimeline:O}}class m_{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,n){let c=this._map.get(i);c||this._map.set(i,c=[]),c.push(...n)}has(i){return this._map.has(i)}clear(){this._map.clear()}}const yv=new RegExp(":enter","g"),Sy=new RegExp(":leave","g");function vp(u,i,n,c,f,E={},I={},O,q,te=[]){return(new nf).buildKeyframes(u,i,n,c,f,E,I,O,q,te)}class nf{buildKeyframes(i,n,c,f,E,I,O,q,te,Te=[]){te=te||new m_;const Ae=new Wg(i,n,te,f,E,Te,[]);Ae.options=q,Ae.currentTimeline.setStyles([I],null,Ae.errors,q),ja(this,c,Ae);const Ze=Ae.timelines.filter(dt=>dt.containsAnimation());if(Object.keys(O).length){let dt;for(let yt=Ze.length-1;yt>=0;yt--){const Gt=Ze[yt];if(Gt.element===n){dt=Gt;break}}dt&&!dt.allowOnlyTimelineStyles()&&dt.setStyles([O],null,Ae.errors,q)}return Ze.length?Ze.map(dt=>dt.buildKeyframes()):[Iy(n,[],[],[],0,0,"",!1)]}visitTrigger(i,n){}visitState(i,n){}visitTransition(i,n){}visitAnimateChild(i,n){const c=n.subInstructions.get(n.element);if(c){const f=n.createSubContext(i.options),E=n.currentTimeline.currentTime,I=this._visitSubInstructions(c,f,f.options);E!=I&&n.transformIntoNewTimeline(I)}n.previousNode=i}visitAnimateRef(i,n){const c=n.createSubContext(i.options);c.transformIntoNewTimeline(),this.visitReference(i.animation,c),n.transformIntoNewTimeline(c.currentTimeline.currentTime),n.previousNode=i}_visitSubInstructions(i,n,c){let E=n.currentTimeline.currentTime;const I=null!=c.duration?il(c.duration):null,O=null!=c.delay?il(c.delay):null;return 0!==I&&i.forEach(q=>{const te=n.appendInstructionToTimeline(q,I,O);E=Math.max(E,te.duration+te.delay)}),E}visitReference(i,n){n.updateOptions(i.options,!0),ja(this,i.animation,n),n.previousNode=i}visitSequence(i,n){const c=n.subContextCount;let f=n;const E=i.options;if(E&&(E.params||E.delay)&&(f=n.createSubContext(E),f.transformIntoNewTimeline(),null!=E.delay)){6==f.previousNode.type&&(f.currentTimeline.snapshotCurrentStyles(),f.previousNode=qd);const I=il(E.delay);f.delayNextStep(I)}i.steps.length&&(i.steps.forEach(I=>ja(this,I,f)),f.currentTimeline.applyStylesToKeyframe(),f.subContextCount>c&&f.transformIntoNewTimeline()),n.previousNode=i}visitGroup(i,n){const c=[];let f=n.currentTimeline.currentTime;const E=i.options&&i.options.delay?il(i.options.delay):0;i.steps.forEach(I=>{const O=n.createSubContext(i.options);E&&O.delayNextStep(E),ja(this,I,O),f=Math.max(f,O.currentTimeline.currentTime),c.push(O.currentTimeline)}),c.forEach(I=>n.currentTimeline.mergeTimelineCollectedStyles(I)),n.transformIntoNewTimeline(f),n.previousNode=i}_visitTiming(i,n){if(i.dynamic){const c=i.strValue;return gp(n.params?Bg(c,n.params,n.errors):c,n.errors)}return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,n){const c=n.currentAnimateTimings=this._visitTiming(i.timings,n),f=n.currentTimeline;c.delay&&(n.incrementTime(c.delay),f.snapshotCurrentStyles());const E=i.style;5==E.type?this.visitKeyframes(E,n):(n.incrementTime(c.duration),this.visitStyle(E,n),f.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=i}visitStyle(i,n){const c=n.currentTimeline,f=n.currentAnimateTimings;!f&&c.getCurrentStyleProperties().length&&c.forwardFrame();const E=f&&f.easing||i.easing;i.isEmptyStep?c.applyEmptyStep(E):c.setStyles(i.styles,E,n.errors,n.options),n.previousNode=i}visitKeyframes(i,n){const c=n.currentAnimateTimings,f=n.currentTimeline.duration,E=c.duration,O=n.createSubContext().currentTimeline;O.easing=c.easing,i.styles.forEach(q=>{O.forwardTime((q.offset||0)*E),O.setStyles(q.styles,q.easing,n.errors,n.options),O.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(O),n.transformIntoNewTimeline(f+E),n.previousNode=i}visitQuery(i,n){const c=n.currentTimeline.currentTime,f=i.options||{},E=f.delay?il(f.delay):0;E&&(6===n.previousNode.type||0==c&&n.currentTimeline.getCurrentStyleProperties().length)&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=qd);let I=c;const O=n.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!f.optional,n.errors);n.currentQueryTotal=O.length;let q=null;O.forEach((te,Te)=>{n.currentQueryIndex=Te;const Ae=n.createSubContext(i.options,te);E&&Ae.delayNextStep(E),te===n.element&&(q=Ae.currentTimeline),ja(this,i.animation,Ae),Ae.currentTimeline.applyStylesToKeyframe(),I=Math.max(I,Ae.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(I),q&&(n.currentTimeline.mergeTimelineCollectedStyles(q),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=i}visitStagger(i,n){const c=n.parentContext,f=n.currentTimeline,E=i.timings,I=Math.abs(E.duration),O=I*(n.currentQueryTotal-1);let q=I*n.currentQueryIndex;switch(E.duration<0?"reverse":E.easing){case"reverse":q=O-q;break;case"full":q=c.currentStaggerTime}const Te=n.currentTimeline;q&&Te.delayNextStep(q);const Ae=Te.currentTime;ja(this,i.animation,n),n.previousNode=i,c.currentStaggerTime=f.currentTime-Ae+(f.startTime-c.currentTimeline.startTime)}}const qd={};class Wg{constructor(i,n,c,f,E,I,O,q){this._driver=i,this.element=n,this.subInstructions=c,this._enterClassName=f,this._leaveClassName=E,this.errors=I,this.timelines=O,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=q||new Ep(this._driver,n,0),O.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,n){if(!i)return;const c=i;let f=this.options;null!=c.duration&&(f.duration=il(c.duration)),null!=c.delay&&(f.delay=il(c.delay));const E=c.params;if(E){let I=f.params;I||(I=this.options.params={}),Object.keys(E).forEach(O=>{(!n||!I.hasOwnProperty(O))&&(I[O]=Bg(E[O],I,this.errors))})}}_copyOptions(){const i={};if(this.options){const n=this.options.params;if(n){const c=i.params={};Object.keys(n).forEach(f=>{c[f]=n[f]})}}return i}createSubContext(i=null,n,c){const f=n||this.element,E=new Wg(this._driver,f,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(f,c||0));return E.previousNode=this.previousNode,E.currentAnimateTimings=this.currentAnimateTimings,E.options=this._copyOptions(),E.updateOptions(i),E.currentQueryIndex=this.currentQueryIndex,E.currentQueryTotal=this.currentQueryTotal,E.parentContext=this,this.subContextCount++,E}transformIntoNewTimeline(i){return this.previousNode=qd,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,n,c){const f={duration:null!=n?n:i.duration,delay:this.currentTimeline.currentTime+(null!=c?c:0)+i.delay,easing:""},E=new y_(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,f,i.stretchStartingKeyframe);return this.timelines.push(E),f}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,n,c,f,E,I){let O=[];if(f&&O.push(this.element),i.length>0){i=(i=i.replace(yv,"."+this._enterClassName)).replace(Sy,"."+this._leaveClassName);let te=this._driver.query(this.element,i,1!=c);0!==c&&(te=c<0?te.slice(te.length+c,te.length):te.slice(0,c)),O.push(...te)}return!E&&0==O.length&&I.push(function ov(u){return new m.vHH(3014,Sr)}()),O}}class Ep{constructor(i,n,c,f){this._driver=i,this.element=n,this.startTime=c,this._elementTimelineStylesLookup=f,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(i){const n=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||n?(this.forwardTime(this.currentTime+i),n&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,n){return this.applyStylesToKeyframe(),new Ep(this._driver,i,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,n){this._localTimelineStyles[i]=n,this._globalTimelineStyles[i]=n,this._styleSummary[i]={time:this.currentTime,value:n}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&(this._previousKeyframe.easing=i),Object.keys(this._globalTimelineStyles).forEach(n=>{this._backFill[n]=this._globalTimelineStyles[n]||Ol,this._currentKeyframe[n]=Ol}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,n,c,f){n&&(this._previousKeyframe.easing=n);const E=f&&f.params||{},I=function Ay(u,i){const n={};let c;return u.forEach(f=>{"*"===f?(c=c||Object.keys(i),c.forEach(E=>{n[E]=Ol})):$u(f,!1,n)}),n}(i,this._globalTimelineStyles);Object.keys(I).forEach(O=>{const q=Bg(I[O],E,c);this._pendingStyles[O]=q,this._localTimelineStyles.hasOwnProperty(O)||(this._backFill[O]=this._globalTimelineStyles.hasOwnProperty(O)?this._globalTimelineStyles[O]:Ol),this._updateStyle(O,q)})}applyStylesToKeyframe(){const i=this._pendingStyles,n=Object.keys(i);0!=n.length&&(this._pendingStyles={},n.forEach(c=>{this._currentKeyframe[c]=i[c]}),Object.keys(this._localTimelineStyles).forEach(c=>{this._currentKeyframe.hasOwnProperty(c)||(this._currentKeyframe[c]=this._localTimelineStyles[c])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(i=>{const n=this._localTimelineStyles[i];this._pendingStyles[i]=n,this._updateStyle(i,n)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const i=[];for(let n in this._currentKeyframe)i.push(n);return i}mergeTimelineCollectedStyles(i){Object.keys(i._styleSummary).forEach(n=>{const c=this._styleSummary[n],f=i._styleSummary[n];(!c||f.time>c.time)&&this._updateStyle(n,f.value)})}buildKeyframes(){this.applyStylesToKeyframe();const i=new Set,n=new Set,c=1===this._keyframes.size&&0===this.duration;let f=[];this._keyframes.forEach((O,q)=>{const te=$u(O,!0);Object.keys(te).forEach(Te=>{const Ae=te[Te];"!"==Ae?i.add(Te):Ae==Ol&&n.add(Te)}),c||(te.offset=q/this.duration),f.push(te)});const E=i.size?_p(i.values()):[],I=n.size?_p(n.values()):[];if(c){const O=f[0],q=mc(O);O.offset=0,q.offset=1,f=[O,q]}return Iy(this.element,f,E,I,this.duration,this.startTime,this.easing,!1)}}class y_ extends Ep{constructor(i,n,c,f,E,I,O=!1){super(i,n,I.delay),this.keyframes=c,this.preStyleProps=f,this.postStyleProps=E,this._stretchStartingKeyframe=O,this.timings={duration:I.duration,delay:I.delay,easing:I.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:n,duration:c,easing:f}=this.timings;if(this._stretchStartingKeyframe&&n){const E=[],I=c+n,O=n/I,q=$u(i[0],!1);q.offset=0,E.push(q);const te=$u(i[0],!1);te.offset=rf(O),E.push(te);const Te=i.length-1;for(let Ae=1;Ae<=Te;Ae++){let Ze=$u(i[Ae],!1);Ze.offset=rf((n+Ze.offset*c)/I),E.push(Ze)}c=I,n=0,f="",i=E}return Iy(this.element,i,this.preStyleProps,this.postStyleProps,c,n,f,!0)}}function rf(u,i=3){const n=Math.pow(10,i-1);return Math.round(u*n)/n}class wp{}class Yo extends wp{normalizePropertyName(i,n){return c_(i)}normalizeStyleValue(i,n,c,f){let E="";const I=c.toString().trim();if(Ha[n]&&0!==c&&"0"!==c)if("number"==typeof c)E="px";else{const O=c.match(/^[+-]?[\d\.]+([a-z]*)$/);O&&0==O[1].length&&f.push(function Vu(u,i){return new m.vHH(3005,Sr)}())}return I+E}}const Ha=(()=>function xy(u){const i={};return u.forEach(n=>i[n]=!0),i}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function ld(u,i,n,c,f,E,I,O,q,te,Te,Ae,Ze){return{type:0,element:u,triggerName:i,isRemovalTransition:f,fromState:n,fromStyles:E,toState:c,toStyles:I,timelines:O,queriedElements:q,preStyleProps:te,postStyleProps:Te,totalTime:Ae,errors:Ze}}const sf={};class ud{constructor(i,n,c){this._triggerName=i,this.ast=n,this._stateStyles=c}match(i,n,c,f){return function sl(u,i,n,c,f){return u.some(E=>E(i,n,c,f))}(this.ast.matchers,i,n,c,f)}buildStyles(i,n,c){const f=this._stateStyles["*"],E=this._stateStyles[i],I=f?f.buildStyles(n,c):{};return E?E.buildStyles(n,c):I}build(i,n,c,f,E,I,O,q,te,Te){const Ae=[],Ze=this.ast.options&&this.ast.options.params||sf,yt=this.buildStyles(c,O&&O.params||sf,Ae),Gt=q&&q.params||sf,Pn=this.buildStyles(f,Gt,Ae),or=new Set,Zr=new Map,ys=new Map,to="void"===f,Zd={params:Object.assign(Object.assign({},Ze),Gt)},lu=Te?[]:vp(i,n,this.ast.animation,E,I,yt,Pn,Zd,te,Ae);let da=0;if(lu.forEach(qu=>{da=Math.max(qu.duration+qu.delay,da)}),Ae.length)return ld(n,this._triggerName,c,f,to,yt,Pn,[],[],Zr,ys,da,Ae);lu.forEach(qu=>{const Wu=qu.element,em=Oo(Zr,Wu,{});qu.preStyleProps.forEach(Ap=>em[Ap]=!0);const cf=Oo(ys,Wu,{});qu.postStyleProps.forEach(Ap=>cf[Ap]=!0),Wu!==n&&or.add(Wu)});const uu=_p(or.values());return ld(n,this._triggerName,c,f,to,yt,Pn,lu,uu,Zr,ys,da)}}class Ry{constructor(i,n,c){this.styles=i,this.defaultParams=n,this.normalizer=c}buildStyles(i,n){const c={},f=mc(this.defaultParams);return Object.keys(i).forEach(E=>{const I=i[E];null!=I&&(f[E]=I)}),this.styles.styles.forEach(E=>{if("string"!=typeof E){const I=E;Object.keys(I).forEach(O=>{let q=I[O];q.length>1&&(q=Bg(q,f,n));const te=this.normalizer.normalizePropertyName(O,n);q=this.normalizer.normalizeStyleValue(O,te,q,n),c[te]=q})}}),c}}class bp{constructor(i,n,c){this.name=i,this.ast=n,this._normalizer=c,this.transitionFactories=[],this.states={},n.states.forEach(f=>{this.states[f.name]=new Ry(f.style,f.options&&f.options.params||{},c)}),Zg(this.states,"true","1"),Zg(this.states,"false","0"),n.transitions.forEach(f=>{this.transitionFactories.push(new ud(i,f,this.states))}),this.fallbackTransition=function An(u,i,n){return new ud(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(I,O)=>!0],options:null,queryCount:0,depCount:0},i)}(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,n,c,f){return this.transitionFactories.find(I=>I.match(i,n,c,f))||null}matchStyles(i,n,c){return this.fallbackTransition.buildStyles(i,n,c)}}function Zg(u,i,n){u.hasOwnProperty(i)?u.hasOwnProperty(n)||(u[n]=u[i]):u.hasOwnProperty(n)&&(u[i]=u[n])}const zd=new m_;class vv{constructor(i,n,c){this.bodyNode=i,this._driver=n,this._normalizer=c,this._animations={},this._playersById={},this.players=[]}register(i,n){const c=[],E=Gg(this._driver,n,c,[]);if(c.length)throw function Hv(u){return new m.vHH(3503,Sr)}();this._animations[i]=E}_buildPlayer(i,n,c){const f=i.element,E=up(0,this._normalizer,0,i.keyframes,n,c);return this._driver.animate(f,E,i.duration,i.delay,i.easing,[],!0)}create(i,n,c={}){const f=[],E=this._animations[i];let I;const O=new Map;if(E?(I=vp(this._driver,n,E,id,Ug,{},{},c,zd,f),I.forEach(Te=>{const Ae=Oo(O,Te.element,{});Te.postStyleProps.forEach(Ze=>Ae[Ze]=null)})):(f.push(function lv(){return new m.vHH(3300,Sr)}()),I=[]),f.length)throw function r_(u){return new m.vHH(3504,Sr)}();O.forEach((Te,Ae)=>{Object.keys(Te).forEach(Ze=>{Te[Ze]=this._driver.computeStyle(Ae,Ze,Ol)})});const te=pc(I.map(Te=>{const Ae=O.get(Te.element);return this._buildPlayer(Te,{},Ae)}));return this._playersById[i]=te,te.onDestroy(()=>this.destroy(i)),this.players.push(te),te}destroy(i){const n=this._getPlayer(i);n.destroy(),delete this._playersById[i];const c=this.players.indexOf(n);c>=0&&this.players.splice(c,1)}_getPlayer(i){const n=this._playersById[i];if(!n)throw function fy(u){return new m.vHH(3301,Sr)}();return n}listen(i,n,c,f){const E=i_(n,"","","");return cp(this._getPlayer(i),c,E,f),()=>{}}command(i,n,c,f){if("register"==c)return void this.register(i,f[0]);if("create"==c)return void this.create(i,n,f[0]||{});const E=this._getPlayer(i);switch(c){case"play":E.play();break;case"pause":E.pause();break;case"reset":E.reset();break;case"restart":E.restart();break;case"finish":E.finish();break;case"init":E.init();break;case"setPosition":E.setPosition(parseFloat(f[0]));break;case"destroy":this.destroy(i)}}}const Cp="ng-animate-queued",yl="ng-animate-disabled",v_=[],Ny={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},E_={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},va="__ng_removed";class Tp{constructor(i,n=""){this.namespaceId=n;const c=i&&i.hasOwnProperty("value");if(this.value=function bv(u){return null!=u?u:null}(c?i.value:i),c){const E=mc(i);delete E.value,this.options=E}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(i){const n=i.params;if(n){const c=this.options.params;Object.keys(n).forEach(f=>{null==c[f]&&(c[f]=n[f])})}}}const af="void",lf=new Tp(af);class wv{constructor(i,n,c){this.id=i,this.hostElement=n,this._engine=c,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,vl(n,this._hostClassName)}listen(i,n,c,f){if(!this._triggers.hasOwnProperty(n))throw function py(u,i){return new m.vHH(3302,Sr)}();if(null==c||0==c.length)throw function gy(u){return new m.vHH(3303,Sr)}();if(!function Cv(u){return"start"==u||"done"==u}(c))throw function Rg(u,i){return new m.vHH(3400,Sr)}();const E=Oo(this._elementListeners,i,[]),I={name:n,phase:c,callback:f};E.push(I);const O=Oo(this._engine.statesByElement,i,{});return O.hasOwnProperty(n)||(vl(i,sd),vl(i,sd+"-"+n),O[n]=lf),()=>{this._engine.afterFlush(()=>{const q=E.indexOf(I);q>=0&&E.splice(q,1),this._triggers[n]||delete O[n]})}}register(i,n){return!this._triggers[i]&&(this._triggers[i]=n,!0)}_getTrigger(i){const n=this._triggers[i];if(!n)throw function Bu(u){return new m.vHH(3401,Sr)}();return n}trigger(i,n,c,f=!0){const E=this._getTrigger(n),I=new Yg(this.id,n,i);let O=this._engine.statesByElement.get(i);O||(vl(i,sd),vl(i,sd+"-"+n),this._engine.statesByElement.set(i,O={}));let q=O[n];const te=new Tp(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&q&&te.absorbOptions(q.options),O[n]=te,q||(q=lf),te.value!==af&&q.value===te.value){if(!function l(u,i){const n=Object.keys(u),c=Object.keys(i);if(n.length!=c.length)return!1;for(let f=0;f<n.length;f++){const E=n[f];if(!i.hasOwnProperty(E)||u[E]!==i[E])return!1}return!0}(q.params,te.params)){const Gt=[],Pn=E.matchStyles(q.value,q.params,Gt),or=E.matchStyles(te.value,te.params,Gt);Gt.length?this._engine.reportError(Gt):this._engine.afterFlush(()=>{ca(i,Pn),Gu(i,or)})}return}const Ze=Oo(this._engine.playersByElement,i,[]);Ze.forEach(Gt=>{Gt.namespaceId==this.id&&Gt.triggerName==n&&Gt.queued&&Gt.destroy()});let dt=E.matchTransition(q.value,te.value,i,te.params),yt=!1;if(!dt){if(!f)return;dt=E.fallbackTransition,yt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:n,transition:dt,fromState:q,toState:te,player:I,isFallbackTransition:yt}),yt||(vl(i,Cp),I.onStart(()=>{Dp(i,Cp)})),I.onDone(()=>{let Gt=this.players.indexOf(I);Gt>=0&&this.players.splice(Gt,1);const Pn=this._engine.playersByElement.get(i);if(Pn){let or=Pn.indexOf(I);or>=0&&Pn.splice(or,1)}}),this.players.push(I),Ze.push(I),I}deregister(i){delete this._triggers[i],this._engine.statesByElement.forEach((n,c)=>{delete n[i]}),this._elementListeners.forEach((n,c)=>{this._elementListeners.set(c,n.filter(f=>f.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);const n=this._engine.playersByElement.get(i);n&&(n.forEach(c=>c.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,n){const c=this._engine.driver.query(i,su,!0);c.forEach(f=>{if(f[va])return;const E=this._engine.fetchNamespacesByElement(f);E.size?E.forEach(I=>I.triggerLeaveAnimation(f,n,!1,!0)):this.clearElementCache(f)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(f=>this.clearElementCache(f)))}triggerLeaveAnimation(i,n,c,f){const E=this._engine.statesByElement.get(i),I=new Map;if(E){const O=[];if(Object.keys(E).forEach(q=>{if(I.set(q,E[q].value),this._triggers[q]){const te=this.trigger(i,q,af,f);te&&O.push(te)}}),O.length)return this._engine.markElementAsRemoved(this.id,i,!0,n,I),c&&pc(O).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){const n=this._elementListeners.get(i),c=this._engine.statesByElement.get(i);if(n&&c){const f=new Set;n.forEach(E=>{const I=E.name;if(f.has(I))return;f.add(I);const q=this._triggers[I].fallbackTransition,te=c[I]||lf,Te=new Tp(af),Ae=new Yg(this.id,I,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:I,transition:q,fromState:te,toState:Te,player:Ae,isFallbackTransition:!0})})}}removeNode(i,n){const c=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,n),this.triggerLeaveAnimation(i,n,!0))return;let f=!1;if(c.totalAnimations){const E=c.players.length?c.playersByQueriedElement.get(i):[];if(E&&E.length)f=!0;else{let I=i;for(;I=I.parentNode;)if(c.statesByElement.get(I)){f=!0;break}}}if(this.prepareLeaveAnimationListeners(i),f)c.markElementAsRemoved(this.id,i,!1,n);else{const E=i[va];(!E||E===Ny)&&(c.afterFlush(()=>this.clearElementCache(i)),c.destroyInnerAnimations(i),c._onRemovalComplete(i,n))}}insertNode(i,n){vl(i,this._hostClassName)}drainQueuedTransitions(i){const n=[];return this._queue.forEach(c=>{const f=c.player;if(f.destroyed)return;const E=c.element,I=this._elementListeners.get(E);I&&I.forEach(O=>{if(O.name==c.triggerName){const q=i_(E,c.triggerName,c.fromState.value,c.toState.value);q._data=i,cp(c.player,O.phase,q,O.callback)}}),f.markedForDestroy?this._engine.afterFlush(()=>{f.destroy()}):n.push(c)}),this._queue=[],n.sort((c,f)=>{const E=c.transition.ast.depCount,I=f.transition.ast.depCount;return 0==E||0==I?E-I:this._engine.driver.containsElement(c.element,f.element)?1:-1})}destroy(i){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}elementContainsData(i){let n=!1;return this._elementListeners.has(i)&&(n=!0),n=!!this._queue.find(c=>c.element===i)||n,n}}class Py{constructor(i,n,c){this.bodyNode=i,this.driver=n,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(f,E)=>{}}_onRemovalComplete(i,n){this.onRemovalComplete(i,n)}get queuedPlayers(){const i=[];return this._namespaceList.forEach(n=>{n.players.forEach(c=>{c.queued&&i.push(c)})}),i}createNamespace(i,n){const c=new wv(i,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(c,n):(this.newHostElements.set(n,c),this.collectEnterElement(n)),this._namespaceLookup[i]=c}_balanceNamespaceList(i,n){const c=this._namespaceList,f=this.namespacesByHostElement,E=c.length-1;if(E>=0){let I=!1;if(void 0!==this.driver.getParentElement){let O=this.driver.getParentElement(n);for(;O;){const q=f.get(O);if(q){const te=c.indexOf(q);c.splice(te+1,0,i),I=!0;break}O=this.driver.getParentElement(O)}}else for(let O=E;O>=0;O--)if(this.driver.containsElement(c[O].hostElement,n)){c.splice(O+1,0,i),I=!0;break}I||c.unshift(i)}else c.push(i);return f.set(n,i),i}register(i,n){let c=this._namespaceLookup[i];return c||(c=this.createNamespace(i,n)),c}registerTrigger(i,n,c){let f=this._namespaceLookup[i];f&&f.register(n,c)&&this.totalAnimations++}destroy(i,n){if(!i)return;const c=this._fetchNamespace(i);this.afterFlush(()=>{this.namespacesByHostElement.delete(c.hostElement),delete this._namespaceLookup[i];const f=this._namespaceList.indexOf(c);f>=0&&this._namespaceList.splice(f,1)}),this.afterFlushAnimationsDone(()=>c.destroy(n))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){const n=new Set,c=this.statesByElement.get(i);if(c){const f=Object.keys(c);for(let E=0;E<f.length;E++){const I=c[f[E]].namespaceId;if(I){const O=this._fetchNamespace(I);O&&n.add(O)}}}return n}trigger(i,n,c,f){if(Qg(n)){const E=this._fetchNamespace(i);if(E)return E.trigger(n,c,f),!0}return!1}insertNode(i,n,c,f){if(!Qg(n))return;const E=n[va];if(E&&E.setForRemoval){E.setForRemoval=!1,E.setForMove=!0;const I=this.collectedLeaveElements.indexOf(n);I>=0&&this.collectedLeaveElements.splice(I,1)}if(i){const I=this._fetchNamespace(i);I&&I.insertNode(n,c)}f&&this.collectEnterElement(n)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,n){n?this.disabledNodes.has(i)||(this.disabledNodes.add(i),vl(i,yl)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),Dp(i,yl))}removeNode(i,n,c,f){if(Qg(n)){const E=i?this._fetchNamespace(i):null;if(E?E.removeNode(n,f):this.markElementAsRemoved(i,n,!1,f),c){const I=this.namespacesByHostElement.get(n);I&&I.id!==i&&I.removeNode(n,f)}}else this._onRemovalComplete(n,f)}markElementAsRemoved(i,n,c,f,E){this.collectedLeaveElements.push(n),n[va]={namespaceId:i,setForRemoval:f,hasAnimation:c,removedBeforeQueried:!1,previousTriggersValues:E}}listen(i,n,c,f,E){return Qg(n)?this._fetchNamespace(i).listen(n,c,f,E):()=>{}}_buildInstruction(i,n,c,f,E){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,c,f,i.fromState.options,i.toState.options,n,E)}destroyInnerAnimations(i){let n=this.driver.query(i,su,!0);n.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(i,jd,!0),n.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(i){const n=this.playersByElement.get(i);n&&n.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(i){const n=this.playersByQueriedElement.get(i);n&&n.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return pc(this.players).onDone(()=>i());i()})}processLeaveNode(i){var n;const c=i[va];if(c&&c.setForRemoval){if(i[va]=Ny,c.namespaceId){this.destroyInnerAnimations(i);const f=this._fetchNamespace(c.namespaceId);f&&f.clearElementCache(i)}this._onRemovalComplete(i,c.setForRemoval)}(null===(n=i.classList)||void 0===n?void 0:n.contains(yl))&&this.markElementAsDisabled(i,!1),this.driver.query(i,".ng-animate-disabled",!0).forEach(f=>{this.markElementAsDisabled(f,!1)})}flush(i=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,f)=>this._balanceNamespaceList(c,f)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)vl(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{n=this._flushAnimations(c,i)}finally{for(let f=0;f<c.length;f++)c[f]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],n.length?pc(n).onDone(()=>{c.forEach(f=>f())}):c.forEach(f=>f())}}reportError(i){throw function uv(u){return new m.vHH(3402,Sr)}()}_flushAnimations(i,n){const c=new m_,f=[],E=new Map,I=[],O=new Map,q=new Map,te=new Map,Te=new Set;this.disabledNodes.forEach(bn=>{Te.add(bn);const jn=this.driver.query(bn,".ng-animate-queued",!0);for(let Zn=0;Zn<jn.length;Zn++)Te.add(jn[Zn])});const Ae=this.bodyNode,Ze=Array.from(this.statesByElement.keys()),dt=Jg(Ze,this.collectedEnterElements),yt=new Map;let Gt=0;dt.forEach((bn,jn)=>{const Zn=id+Gt++;yt.set(jn,Zn),bn.forEach(Ti=>vl(Ti,Zn))});const Pn=[],or=new Set,Zr=new Set;for(let bn=0;bn<this.collectedLeaveElements.length;bn++){const jn=this.collectedLeaveElements[bn],Zn=jn[va];Zn&&Zn.setForRemoval&&(Pn.push(jn),or.add(jn),Zn.hasAnimation?this.driver.query(jn,".ng-star-inserted",!0).forEach(Ti=>or.add(Ti)):Zr.add(jn))}const ys=new Map,to=Jg(Ze,Array.from(or));to.forEach((bn,jn)=>{const Zn=Ug+Gt++;ys.set(jn,Zn),bn.forEach(Ti=>vl(Ti,Zn))}),i.push(()=>{dt.forEach((bn,jn)=>{const Zn=yt.get(jn);bn.forEach(Ti=>Dp(Ti,Zn))}),to.forEach((bn,jn)=>{const Zn=ys.get(jn);bn.forEach(Ti=>Dp(Ti,Zn))}),Pn.forEach(bn=>{this.processLeaveNode(bn)})});const Zd=[],lu=[];for(let bn=this._namespaceList.length-1;bn>=0;bn--)this._namespaceList[bn].drainQueuedTransitions(n).forEach(Zn=>{const Ti=Zn.player,wa=Zn.element;if(Zd.push(Ti),this.collectedEnterElements.length){const ol=wa[va];if(ol&&ol.setForMove){if(ol.previousTriggersValues&&ol.previousTriggersValues.has(Zn.triggerName)){const tm=ol.previousTriggersValues.get(Zn.triggerName),df=this.statesByElement.get(Zn.element);df&&df[Zn.triggerName]&&(df[Zn.triggerName].value=tm)}return void Ti.destroy()}}const zu=!Ae||!this.driver.containsElement(Ae,wa),cu=ys.get(wa),Kd=yt.get(wa),ho=this._buildInstruction(Zn,c,Kd,cu,zu);if(ho.errors&&ho.errors.length)return void lu.push(ho);if(zu)return Ti.onStart(()=>ca(wa,ho.fromStyles)),Ti.onDestroy(()=>Gu(wa,ho.toStyles)),void f.push(Ti);if(Zn.isFallbackTransition)return Ti.onStart(()=>ca(wa,ho.fromStyles)),Ti.onDestroy(()=>Gu(wa,ho.toStyles)),void f.push(Ti);const Iv=[];ho.timelines.forEach(ol=>{ol.stretchStartingKeyframe=!0,this.disabledNodes.has(ol.element)||Iv.push(ol)}),ho.timelines=Iv,c.append(wa,ho.timelines),I.push({instruction:ho,player:Ti,element:wa}),ho.queriedElements.forEach(ol=>Oo(O,ol,[]).push(Ti)),ho.preStyleProps.forEach((ol,tm)=>{const df=Object.keys(ol);if(df.length){let cd=q.get(tm);cd||q.set(tm,cd=new Set),df.forEach(Dv=>cd.add(Dv))}}),ho.postStyleProps.forEach((ol,tm)=>{const df=Object.keys(ol);let cd=te.get(tm);cd||te.set(tm,cd=new Set),df.forEach(Dv=>cd.add(Dv))})});if(lu.length){const bn=[];lu.forEach(jn=>{bn.push(function rd(u,i){return new m.vHH(3505,Sr)}())}),Zd.forEach(jn=>jn.destroy()),this.reportError(bn)}const da=new Map,uu=new Map;I.forEach(bn=>{const jn=bn.element;c.has(jn)&&(uu.set(jn,jn),this._beforeAnimationBuild(bn.player.namespaceId,bn.instruction,da))}),f.forEach(bn=>{const jn=bn.element;this._getPreviousPlayers(jn,!1,bn.namespaceId,bn.triggerName,null).forEach(Ti=>{Oo(da,jn,[]).push(Ti),Ti.destroy()})});const qu=Pn.filter(bn=>h(bn,q,te)),Wu=new Map;w_(Wu,this.driver,Zr,te,Ol).forEach(bn=>{h(bn,q,te)&&qu.push(bn)});const cf=new Map;dt.forEach((bn,jn)=>{w_(cf,this.driver,new Set(bn),q,"!")}),qu.forEach(bn=>{const jn=Wu.get(bn),Zn=cf.get(bn);Wu.set(bn,Object.assign(Object.assign({},jn),Zn))});const Ap=[],zv=[],Oy={};I.forEach(bn=>{const{element:jn,player:Zn,instruction:Ti}=bn;if(c.has(jn)){if(Te.has(jn))return Zn.onDestroy(()=>Gu(jn,Ti.toStyles)),Zn.disabled=!0,Zn.overrideTotalTime(Ti.totalTime),void f.push(Zn);let wa=Oy;if(uu.size>1){let cu=jn;const Kd=[];for(;cu=cu.parentNode;){const ho=uu.get(cu);if(ho){wa=ho;break}Kd.push(cu)}Kd.forEach(ho=>uu.set(ho,wa))}const zu=this._buildAnimation(Zn.namespaceId,Ti,da,E,cf,Wu);if(Zn.setRealPlayer(zu),wa===Oy)Ap.push(Zn);else{const cu=this.playersByElement.get(wa);cu&&cu.length&&(Zn.parentPlayer=pc(cu)),f.push(Zn)}}else ca(jn,Ti.fromStyles),Zn.onDestroy(()=>Gu(jn,Ti.toStyles)),zv.push(Zn),Te.has(jn)&&f.push(Zn)}),zv.forEach(bn=>{const jn=E.get(bn.element);if(jn&&jn.length){const Zn=pc(jn);bn.setRealPlayer(Zn)}}),f.forEach(bn=>{bn.parentPlayer?bn.syncPlayerEvents(bn.parentPlayer):bn.destroy()});for(let bn=0;bn<Pn.length;bn++){const jn=Pn[bn],Zn=jn[va];if(Dp(jn,Ug),Zn&&Zn.hasAnimation)continue;let Ti=[];if(O.size){let zu=O.get(jn);zu&&zu.length&&Ti.push(...zu);let cu=this.driver.query(jn,jd,!0);for(let Kd=0;Kd<cu.length;Kd++){let ho=O.get(cu[Kd]);ho&&ho.length&&Ti.push(...ho)}}const wa=Ti.filter(zu=>!zu.destroyed);wa.length?o(this,jn,wa):this.processLeaveNode(jn)}return Pn.length=0,Ap.forEach(bn=>{this.players.push(bn),bn.onDone(()=>{bn.destroy();const jn=this.players.indexOf(bn);this.players.splice(jn,1)}),bn.play()}),Ap}elementContainsData(i,n){let c=!1;const f=n[va];return f&&f.setForRemoval&&(c=!0),this.playersByElement.has(n)&&(c=!0),this.playersByQueriedElement.has(n)&&(c=!0),this.statesByElement.has(n)&&(c=!0),this._fetchNamespace(i).elementContainsData(n)||c}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,n,c,f,E){let I=[];if(n){const O=this.playersByQueriedElement.get(i);O&&(I=O)}else{const O=this.playersByElement.get(i);if(O){const q=!E||E==af;O.forEach(te=>{te.queued||!q&&te.triggerName!=f||I.push(te)})}}return(c||f)&&(I=I.filter(O=>!(c&&c!=O.namespaceId||f&&f!=O.triggerName))),I}_beforeAnimationBuild(i,n,c){const E=n.element,I=n.isRemovalTransition?void 0:i,O=n.isRemovalTransition?void 0:n.triggerName;for(const q of n.timelines){const te=q.element,Te=te!==E,Ae=Oo(c,te,[]);this._getPreviousPlayers(te,Te,I,O,n.toState).forEach(dt=>{const yt=dt.getRealPlayer();yt.beforeDestroy&&yt.beforeDestroy(),dt.destroy(),Ae.push(dt)})}ca(E,n.fromStyles)}_buildAnimation(i,n,c,f,E,I){const O=n.triggerName,q=n.element,te=[],Te=new Set,Ae=new Set,Ze=n.timelines.map(yt=>{const Gt=yt.element;Te.add(Gt);const Pn=Gt[va];if(Pn&&Pn.removedBeforeQueried)return new ru(yt.duration,yt.delay);const or=Gt!==q,Zr=function e(u){const i=[];return t(u,i),i}((c.get(Gt)||v_).map(da=>da.getRealPlayer())).filter(da=>!!da.element&&da.element===Gt),ys=E.get(Gt),to=I.get(Gt),Zd=up(0,this._normalizer,0,yt.keyframes,ys,to),lu=this._buildPlayer(yt,Zd,Zr);if(yt.subTimeline&&f&&Ae.add(Gt),or){const da=new Yg(i,O,Gt);da.setRealPlayer(lu),te.push(da)}return lu});te.forEach(yt=>{Oo(this.playersByQueriedElement,yt.element,[]).push(yt),yt.onDone(()=>function uf(u,i,n){let c;if(u instanceof Map){if(c=u.get(i),c){if(c.length){const f=c.indexOf(n);c.splice(f,1)}0==c.length&&u.delete(i)}}else if(c=u[i],c){if(c.length){const f=c.indexOf(n);c.splice(f,1)}0==c.length&&delete u[i]}return c}(this.playersByQueriedElement,yt.element,yt))}),Te.forEach(yt=>vl(yt,Va));const dt=pc(Ze);return dt.onDestroy(()=>{Te.forEach(yt=>Dp(yt,Va)),Gu(q,n.toStyles)}),Ae.forEach(yt=>{Oo(f,yt,[]).push(dt)}),dt}_buildPlayer(i,n,c){return n.length>0?this.driver.animate(i.element,n,i.duration,i.delay,i.easing,c):new ru(i.duration,i.delay)}}class Yg{constructor(i,n,c){this.namespaceId=i,this.triggerName=n,this.element=c,this._player=new ru,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,Object.keys(this._queuedCallbacks).forEach(n=>{this._queuedCallbacks[n].forEach(c=>cp(i,n,void 0,c))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){const n=this._player;n.triggerCallback&&i.onStart(()=>n.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,n){Oo(this._queuedCallbacks,i,[]).push(n)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){const n=this._player;n.triggerCallback&&n.triggerCallback(i)}}function Qg(u){return u&&1===u.nodeType}function Ip(u,i){const n=u.style.display;return u.style.display=null!=i?i:"none",n}function w_(u,i,n,c,f){const E=[];n.forEach(q=>E.push(Ip(q)));const I=[];c.forEach((q,te)=>{const Te={};q.forEach(Ae=>{const Ze=Te[Ae]=i.computeStyle(te,Ae,f);(!Ze||0==Ze.length)&&(te[va]=E_,I.push(te))}),u.set(te,Te)});let O=0;return n.forEach(q=>Ip(q,E[O++])),I}function Jg(u,i){const n=new Map;if(u.forEach(O=>n.set(O,[])),0==i.length)return n;const f=new Set(i),E=new Map;function I(O){if(!O)return 1;let q=E.get(O);if(q)return q;const te=O.parentNode;return q=n.has(te)?te:f.has(te)?1:I(te),E.set(O,q),q}return i.forEach(O=>{const q=I(O);1!==q&&n.get(q).push(O)}),n}function vl(u,i){var n;null===(n=u.classList)||void 0===n||n.add(i)}function Dp(u,i){var n;null===(n=u.classList)||void 0===n||n.remove(i)}function o(u,i,n){pc(n).onDone(()=>u.processLeaveNode(i))}function t(u,i){for(let n=0;n<u.length;n++){const c=u[n];c instanceof Jm?t(c.players,i):i.push(c)}}function h(u,i,n){const c=n.get(u);if(!c)return!1;let f=i.get(u);return f?c.forEach(E=>f.add(E)):i.set(u,c),n.delete(u),!0}class _{constructor(i,n,c){this.bodyNode=i,this._driver=n,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(f,E)=>{},this._transitionEngine=new Py(i,n,c),this._timelineEngine=new vv(i,n,c),this._transitionEngine.onRemovalComplete=(f,E)=>this.onRemovalComplete(f,E)}registerTrigger(i,n,c,f,E){const I=i+"-"+f;let O=this._triggerCache[I];if(!O){const q=[],Te=Gg(this._driver,E,q,[]);if(q.length)throw function lp(u,i){return new m.vHH(3404,Sr)}();O=function zg(u,i,n){return new bp(u,i,n)}(f,Te,this._normalizer),this._triggerCache[I]=O}this._transitionEngine.registerTrigger(n,f,O)}register(i,n){this._transitionEngine.register(i,n)}destroy(i,n){this._transitionEngine.destroy(i,n)}onInsert(i,n,c,f){this._transitionEngine.insertNode(i,n,c,f)}onRemove(i,n,c,f){this._transitionEngine.removeNode(i,n,f||!1,c)}disableAnimations(i,n){this._transitionEngine.markElementAsDisabled(i,n)}process(i,n,c,f){if("@"==c.charAt(0)){const[E,I]=Qh(c);this._timelineEngine.command(E,n,I,f)}else this._transitionEngine.trigger(i,n,c,f)}listen(i,n,c,f,E){if("@"==c.charAt(0)){const[I,O]=Qh(c);return this._timelineEngine.listen(I,n,O,E)}return this._transitionEngine.listen(i,n,c,f,E)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let R=(()=>{class u{constructor(n,c,f){this._element=n,this._startStyles=c,this._endStyles=f,this._state=0;let E=u.initialStylesByElement.get(n);E||u.initialStylesByElement.set(n,E={}),this._initialStyles=E}start(){this._state<1&&(this._startStyles&&Gu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Gu(this._element,this._initialStyles),this._endStyles&&(Gu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(ca(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ca(this._element,this._endStyles),this._endStyles=null),Gu(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function Y(u){let i=null;const n=Object.keys(u);for(let c=0;c<n.length;c++){const f=n[c];J(f)&&(i=i||{},i[f]=u[f])}return i}function J(u){return"display"===u||"position"===u}class ge{constructor(i,n,c,f){this.element=i,this.keyframes=n,this.options=c,this._specialStyles=f,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(i,n,c){return i.animate(n,c)}onStart(i){this._onStartFns.push(i)}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const i={};if(this.hasStarted()){const n=this._finalKeyframe;Object.keys(n).forEach(c=>{"offset"!=c&&(i[c]=this._finished?n[c]:Ey(this.element,c))})}this.currentSnapshot=i}triggerCallback(i){const n="start"==i?this._onStartFns:this._onDoneFns;n.forEach(c=>c()),n.length=0}}class Re{validateStyleProperty(i){return Fg(i)}matchesElement(i,n){return!1}containsElement(i,n){return s_(i,n)}getParentElement(i){return kg(i)}query(i,n,c){return o_(i,n,c)}computeStyle(i,n,c){return window.getComputedStyle(i)[n]}animate(i,n,c,f,E,I=[]){const q={duration:c,delay:f,fill:0==f?"both":"forwards"};E&&(q.easing=E);const te={},Te=I.filter(Ze=>Ze instanceof ge);(function Xh(u,i){return 0===u||0===i})(c,f)&&Te.forEach(Ze=>{let dt=Ze.currentSnapshot;Object.keys(dt).forEach(yt=>te[yt]=dt[yt])}),n=function vy(u,i,n){const c=Object.keys(n);if(c.length&&i.length){let E=i[0],I=[];if(c.forEach(O=>{E.hasOwnProperty(O)||I.push(O),E[O]=n[O]}),I.length)for(var f=1;f<i.length;f++){let O=i[f];I.forEach(function(q){O[q]=Ey(u,q)})}}return i}(i,n=n.map(Ze=>$u(Ze,!1)),te);const Ae=function C(u,i){let n=null,c=null;return Array.isArray(i)&&i.length?(n=Y(i[0]),i.length>1&&(c=Y(i[i.length-1]))):i&&(n=Y(i)),n||c?new R(u,n,c):null}(i,n);return new ge(i,n,q,Ae)}}let at=(()=>{class u extends sp{constructor(n,c){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(c.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(n){const c=this._nextAnimationId.toString();this._nextAnimationId++;const f=Array.isArray(n)?ay(n):n;return pn(this._renderer,null,c,"register",[f]),new At(c,this._renderer)}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(m.FYo),m.LFG(w.K0))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();class At extends class sy{}{constructor(i,n){super(),this._id=i,this._renderer=n}create(i,n){return new Nt(this._id,i,n||{},this._renderer)}}class Nt{constructor(i,n,c,f){this.id=i,this.element=n,this._renderer=f,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(i,n){return this._renderer.listen(this.element,`@@${this.id}:${i}`,n)}_command(i,...n){return pn(this._renderer,this.element,this.id,i,n)}onDone(i){this._listen("done",i)}onStart(i){this._listen("start",i)}onDestroy(i){this._listen("destroy",i)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(i){this._command("setPosition",i)}getPosition(){var i,n;return null!==(n=null===(i=this._renderer.engine.players[+this.id])||void 0===i?void 0:i.getPosition())&&void 0!==n?n:0}}function pn(u,i,n,c,f){return u.setProperty(i,`@@${n}:${c}`,f)}const Vi="@.disabled";let uo=(()=>{class u{constructor(n,c,f){this.delegate=n,this.engine=c,this._zone=f,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),c.onRemovalComplete=(E,I)=>{const O=null==I?void 0:I.parentNode(E);O&&I.removeChild(O,E)}}createRenderer(n,c){const E=this.delegate.createRenderer(n,c);if(!(n&&c&&c.data&&c.data.animation)){let Te=this._rendererCache.get(E);return Te||(Te=new Bi("",E,this.engine),this._rendererCache.set(E,Te)),Te}const I=c.id,O=c.id+"-"+this._currentId;this._currentId++,this.engine.register(O,n);const q=Te=>{Array.isArray(Te)?Te.forEach(q):this.engine.registerTrigger(I,O,n,Te.name,Te)};return c.data.animation.forEach(q),new co(this,O,E,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(n,c,f){n>=0&&n<this._microtaskId?this._zone.run(()=>c(f)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(E=>{const[I,O]=E;I(O)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,f]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(m.FYo),m.LFG(_),m.LFG(m.R0b))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();class Bi{constructor(i,n,c){this.namespaceId=i,this.delegate=n,this.engine=c,this.destroyNode=this.delegate.destroyNode?f=>n.destroyNode(f):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(i,n){return this.delegate.createElement(i,n)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,n){this.delegate.appendChild(i,n),this.engine.onInsert(this.namespaceId,n,i,!1)}insertBefore(i,n,c,f=!0){this.delegate.insertBefore(i,n,c),this.engine.onInsert(this.namespaceId,n,i,f)}removeChild(i,n,c){this.engine.onRemove(this.namespaceId,n,this.delegate,c)}selectRootElement(i,n){return this.delegate.selectRootElement(i,n)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,n,c,f){this.delegate.setAttribute(i,n,c,f)}removeAttribute(i,n,c){this.delegate.removeAttribute(i,n,c)}addClass(i,n){this.delegate.addClass(i,n)}removeClass(i,n){this.delegate.removeClass(i,n)}setStyle(i,n,c,f){this.delegate.setStyle(i,n,c,f)}removeStyle(i,n,c){this.delegate.removeStyle(i,n,c)}setProperty(i,n,c){"@"==n.charAt(0)&&n==Vi?this.disableAnimations(i,!!c):this.delegate.setProperty(i,n,c)}setValue(i,n){this.delegate.setValue(i,n)}listen(i,n,c){return this.delegate.listen(i,n,c)}disableAnimations(i,n){this.engine.disableAnimations(i,n)}}class co extends Bi{constructor(i,n,c,f){super(n,c,f),this.factory=i,this.namespaceId=n}setProperty(i,n,c){"@"==n.charAt(0)?"."==n.charAt(1)&&n==Vi?this.disableAnimations(i,c=void 0===c||!!c):this.engine.process(this.namespaceId,i,n.substr(1),c):this.delegate.setProperty(i,n,c)}listen(i,n,c){if("@"==n.charAt(0)){const f=function ji(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(i);let E=n.substr(1),I="";return"@"!=E.charAt(0)&&([E,I]=function Hs(u){const i=u.indexOf(".");return[u.substring(0,i),u.substr(i+1)]}(E)),this.engine.listen(this.namespaceId,f,E,I,O=>{this.factory.scheduleListenerCallback(O._data||-1,c,O)})}return this.delegate.listen(i,n,c)}}let Ea=(()=>{class u extends _{constructor(n,c,f){super(n.body,c,f)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(n){return new(n||u)(m.LFG(w.K0),m.LFG(ao),m.LFG(wp))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();const Gv=new m.OlP("AnimationModuleType"),Tv=[{provide:sp,useClass:at},{provide:wp,useFactory:function Sp(){return new Yo}},{provide:_,useClass:Ea},{provide:m.FYo,useFactory:function a0(u,i,n){return new uo(u,i,n)},deps:[tt,_,m.R0b]}],qv=[{provide:ao,useFactory:()=>new Re},{provide:Gv,useValue:"BrowserAnimations"},...Tv],l0=[{provide:ao,useClass:Lg},{provide:Gv,useValue:"NoopAnimations"},...Tv];let Xg=(()=>{class u{static withConfig(n){return{ngModule:u,providers:n.disableAnimations?l0:qv}}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:qv,imports:[Mr]}),u})(),Wv=(()=>{class u{}return u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=m.oAB({type:u,bootstrap:[ir]}),u.\u0275inj=m.cJS({providers:[],imports:[[Mr,Ai,hr.u5,B.hO.initializeApp(X_firebaseConfig),iy,Ca,hr.UX,Xg,si.IngresoModule]]}),u})();(0,m.G48)(),ni().bootstrapModule(Wv).catch(u=>console.error(u))},5867:(Ut,We,$)=>{$.d(We,{C6:()=>w.getApps,Mq:()=>w.getApp});var w=$(9681);(0,w.registerVersion)("firebase","9.8.2","app")},127:(Ut,We,$)=>{$.d(We,{Z:()=>w.Z});var w=$(3942);w.Z.registerVersion("firebase","9.8.2","app-compat")},9606:(Ut,We,$)=>{$.r(We);var w=$(5861),m=$(3942),ie=$(2090),Fe=$(9681),z=$(655),De=$(1877),Ve=$(4859);const rt=function Tt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ht=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Xe=new ie.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new De.Yd("@firebase/auth");function Lt(b,...g){Oe.logLevel<=De.in.ERROR&&Oe.error(`Auth (${Fe.SDK_VERSION}): ${b}`,...g)}function ct(b,...g){throw It(b,...g)}function it(b,...g){return It(b,...g)}function Qe(b,g,y){const A=Object.assign(Object.assign({},ht()),{[g]:y});return new ie.LL("auth","Firebase",A).create(g,{appName:b.name})}function ze(b,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&ct(b,"argument-error"),Qe(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function It(b,...g){if("string"!=typeof b){const y=g[0],A=[...g.slice(1)];return A[0]&&(A[0].appName=b.name),b._errorFactory.create(y,...A)}return Xe.create(b,...g)}function le(b,g,...y){if(!b)throw It(g,...y)}function ut(b){const g="INTERNAL ASSERTION FAILED: "+b;throw Lt(g),new Error(g)}function me(b,g){b||ut(g)}const je=new Map;function He(b){me(b instanceof Function,"Expected a class definition");let g=je.get(b);return g?(me(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,je.set(b,g),g)}function mt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Le(){return"http:"===ft()||"https:"===ft()}function ft(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class dn{constructor(g,y){this.shortDelay=g,this.longDelay=y,me(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,ie.uI)()||(0,ie.b$)()}get(){return function Ot(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Le()||(0,ie.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kt(b,g){me(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class qt{static initialize(g,y,A){this.fetchImpl=g,y&&(this.headersImpl=y),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ht={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},mn=new dn(3e4,6e4);function wn(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function vn(b,g,y,A){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,w.Z)(function*(b,g,y,A,K={}){return pr(b,K,(0,w.Z)(function*(){let oe={},Ue={};A&&("GET"===g?Ue=A:oe={body:JSON.stringify(A)});const pt=(0,ie.xO)(Object.assign({key:b.config.apiKey},Ue)).slice(1),Ft=yield b._getAdditionalHeaders();return Ft["Content-Type"]="application/json",b.languageCode&&(Ft["X-Firebase-Locale"]=b.languageCode),qt.fetch()(ar(b,b.config.apiHost,y,pt),Object.assign({method:g,headers:Ft,referrerPolicy:"no-referrer"},oe))}))})).apply(this,arguments)}function pr(b,g,y){return kr.apply(this,arguments)}function kr(){return(kr=(0,w.Z)(function*(b,g,y){b._canInitEmulator=!1;const A=Object.assign(Object.assign({},Ht),g);try{const K=new Mr(b),oe=yield Promise.race([y(),K.promise]);K.clearNetworkTimeout();const Ue=yield oe.json();if("needConfirmation"in Ue)throw Yn(b,"account-exists-with-different-credential",Ue);if(oe.ok&&!("errorMessage"in Ue))return Ue;{const pt=oe.ok?Ue.errorMessage:Ue.error.message,[Ft,sn]=pt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ft)throw Yn(b,"credential-already-in-use",Ue);if("EMAIL_EXISTS"===Ft)throw Yn(b,"email-already-in-use",Ue);if("USER_DISABLED"===Ft)throw Yn(b,"user-disabled",Ue);const Dn=A[Ft]||Ft.toLowerCase().replace(/[_\s]+/g,"-");if(sn)throw Qe(b,Dn,sn);ct(b,Dn)}}catch(K){if(K instanceof ie.ZR)throw K;ct(b,"network-request-failed")}})).apply(this,arguments)}function wr(b,g,y,A){return ni.apply(this,arguments)}function ni(){return(ni=(0,w.Z)(function*(b,g,y,A,K={}){const oe=yield vn(b,g,y,A,K);return"mfaPendingCredential"in oe&&ct(b,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function ar(b,g,y,A){const K=`${g}${y}?${A}`;return b.config.emulator?Kt(b.config,K):`${b.config.apiScheme}://${K}`}class Mr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,A)=>{this.timer=setTimeout(()=>A(it(this.auth,"network-request-failed")),mn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yn(b,g,y){const A={appName:b.name};y.email&&(A.email=y.email),y.phoneNumber&&(A.phoneNumber=y.phoneNumber);const K=it(b,g,A);return K.customData._tokenResponse=y,K}function Vn(){return(Vn=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Rn(b,g){return hn.apply(this,arguments)}function hn(){return(hn=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Zi(b,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function fi(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Lr(){return(Lr=(0,w.Z)(function*(b,g=!1){const y=(0,ie.m9)(b),A=yield y.getIdToken(g),K=Xt(A);le(K&&K.exp&&K.auth_time&&K.iat,y.auth,"internal-error");const oe="object"==typeof K.firebase?K.firebase:void 0,Ue=null==oe?void 0:oe.sign_in_provider;return{claims:K,token:A,authTime:fi(Bt(K.auth_time)),issuedAtTime:fi(Bt(K.iat)),expirationTime:fi(Bt(K.exp)),signInProvider:Ue||null,signInSecondFactor:(null==oe?void 0:oe.sign_in_second_factor)||null}})).apply(this,arguments)}function Bt(b){return 1e3*Number(b)}function Xt(b){const[g,y,A]=b.split(".");if(void 0===g||void 0===y||void 0===A)return Lt("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,ie.tV)(y);return K?JSON.parse(K):(Lt("Failed to decode base64 JWT payload"),null)}catch(K){return Lt("Caught error parsing JWT payload as JSON",K),null}}function li(b,g){return pi.apply(this,arguments)}function pi(){return(pi=(0,w.Z)(function*(b,g,y=!1){if(y)return g;try{return yield g}catch(A){throw A instanceof ie.ZR&&$n(A)&&b.auth.currentUser===b&&(yield b.auth.signOut()),A}})).apply(this,arguments)}function $n({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class xs{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const K=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const A=this.getInterval(g);this.timerId=setTimeout((0,w.Z)(function*(){yield y.iteration()}),A)}iteration(){var g=this;return(0,w.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class dr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=fi(this.lastLoginAt),this.creationTime=fi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tr(b){return ye.apply(this,arguments)}function ye(){return(ye=(0,w.Z)(function*(b){var g;const y=b.auth,A=yield b.getIdToken(),K=yield li(b,Zi(y,{idToken:A}));le(null==K?void 0:K.users.length,y,"internal-error");const oe=K.users[0];b._notifyReloadListener(oe);const Ue=(null===(g=oe.providerUserInfo)||void 0===g?void 0:g.length)?we(oe.providerUserInfo):[],pt=Et(b.providerData,Ue),Dn=!!b.isAnonymous&&!(b.email&&oe.passwordHash||(null==pt?void 0:pt.length)),Sn={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:pt,metadata:new dr(oe.createdAt,oe.lastLoginAt),isAnonymous:Dn};Object.assign(b,Sn)})).apply(this,arguments)}function xe(){return(xe=(0,w.Z)(function*(b){const g=(0,ie.m9)(b);yield Tr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Et(b,g){return[...b.filter(A=>!g.some(K=>K.providerId===A.providerId)),...g]}function we(b){return b.map(g=>{var{providerId:y}=g,A=(0,z._T)(g,["providerId"]);return{providerId:y,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function wt(){return(wt=(0,w.Z)(function*(b,g){const y=yield pr(b,{},(0,w.Z)(function*(){const A=(0,ie.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:K,apiKey:oe}=b.config,Ue=ar(b,K,"/v1/token",`key=${oe}`),pt=yield b._getAdditionalHeaders();return pt["Content-Type"]="application/x-www-form-urlencoded",qt.fetch()(Ue,{method:"POST",headers:pt,body:A})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){le(g.idToken,"internal-error"),le(void 0!==g.idToken,"internal-error"),le(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function tn(b){const g=Xt(b);return le(g,"internal-error"),le(void 0!==g.exp,"internal-error"),le(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var A=this;return(0,w.Z)(function*(){return le(!A.accessToken||A.refreshToken,g,"user-token-expired"),y||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(g,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var A=this;return(0,w.Z)(function*(){const{accessToken:K,refreshToken:oe,expiresIn:Ue}=yield function $e(b,g){return wt.apply(this,arguments)}(g,y);A.updateTokensAndExpiration(K,oe,Number(Ue))})()}updateTokensAndExpiration(g,y,A){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(g,y){const{refreshToken:A,accessToken:K,expirationTime:oe}=y,Ue=new Vt;return A&&(le("string"==typeof A,"internal-error",{appName:g}),Ue.refreshToken=A),K&&(le("string"==typeof K,"internal-error",{appName:g}),Ue.accessToken=K),oe&&(le("number"==typeof oe,"internal-error",{appName:g}),Ue.expirationTime=oe),Ue}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Vt,this.toJSON())}_performRefresh(){return ut("not implemented")}}function zt(b,g){le("string"==typeof b||void 0===b,"internal-error",{appName:g})}class an{constructor(g){var{uid:y,auth:A,stsTokenManager:K}=g,oe=(0,z._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=A,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new dr(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,w.Z)(function*(){const A=yield li(y,y.stsTokenManager.getToken(y.auth,g));return le(A,y.auth,"internal-error"),y.accessToken!==A&&(y.accessToken=A,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),A})()}getIdTokenResult(g){return function Hi(b){return Lr.apply(this,arguments)}(this,g)}reload(){return function Se(b){return xe.apply(this,arguments)}(this)}_assign(g){this!==g&&(le(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new an(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var A=this;return(0,w.Z)(function*(){let K=!1;g.idToken&&g.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(g),K=!0),y&&(yield Tr(A)),yield A.auth._persistUserIfCurrent(A),K&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var g=this;return(0,w.Z)(function*(){const y=yield g.getIdToken();return yield li(g,function on(b,g){return Vn.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var A,K,oe,Ue,pt,Ft,sn,Dn;const Sn=null!==(A=y.displayName)&&void 0!==A?A:void 0,Xs=null!==(K=y.email)&&void 0!==K?K:void 0,Fa=null!==(oe=y.phoneNumber)&&void 0!==oe?oe:void 0,Lc=null!==(Ue=y.photoURL)&&void 0!==Ue?Ue:void 0,Rf=null!==(pt=y.tenantId)&&void 0!==pt?pt:void 0,Nf=null!==(Ft=y._redirectEventId)&&void 0!==Ft?Ft:void 0,Au=null!==(sn=y.createdAt)&&void 0!==sn?sn:void 0,lh=null!==(Dn=y.lastLoginAt)&&void 0!==Dn?Dn:void 0,{uid:uh,emailVerified:Lp,isAnonymous:ch,providerData:Pf,stsTokenManager:Up}=y;le(uh&&Up,g,"internal-error");const dh=Vt.fromJSON(this.name,Up);le("string"==typeof uh,g,"internal-error"),zt(Sn,g.name),zt(Xs,g.name),le("boolean"==typeof Lp,g,"internal-error"),le("boolean"==typeof ch,g,"internal-error"),zt(Fa,g.name),zt(Lc,g.name),zt(Rf,g.name),zt(Nf,g.name),zt(Au,g.name),zt(lh,g.name);const Td=new an({uid:uh,auth:g,email:Xs,emailVerified:Lp,displayName:Sn,isAnonymous:ch,photoURL:Lc,phoneNumber:Fa,tenantId:Rf,stsTokenManager:dh,createdAt:Au,lastLoginAt:lh});return Pf&&Array.isArray(Pf)&&(Td.providerData=Pf.map(Vp=>Object.assign({},Vp))),Nf&&(Td._redirectEventId=Nf),Td}static _fromIdTokenResponse(g,y,A=!1){return(0,w.Z)(function*(){const K=new Vt;K.updateFromServerResponse(y);const oe=new an({uid:y.localId,auth:g,stsTokenManager:K,isAnonymous:A});return yield Tr(oe),oe})()}}const _n=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(y,A){var K=this;return(0,w.Z)(function*(){K.storage[y]=A})()}_get(y){var A=this;return(0,w.Z)(function*(){const K=A.storage[y];return void 0===K?null:K})()}_remove(y){var A=this;return(0,w.Z)(function*(){delete A.storage[y]})()}_addListener(y,A){}_removeListener(y,A){}}return b.type="NONE",b})();function xr(b,g,y){return`firebase:${b}:${g}:${y}`}class ri{constructor(g,y,A){this.persistence=g,this.auth=y,this.userKey=A;const{config:K,name:oe}=this.auth;this.fullUserKey=xr(this.userKey,K.apiKey,oe),this.fullPersistenceKey=xr("persistence",K.apiKey,oe),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,w.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?an._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,w.Z)(function*(){if(y.persistence===g)return;const A=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,A?y.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,A="authUser"){return(0,w.Z)(function*(){if(!y.length)return new ri(He(_n),g,A);const K=(yield Promise.all(y.map(function(){var sn=(0,w.Z)(function*(Dn){if(yield Dn._isAvailable())return Dn});return function(Dn){return sn.apply(this,arguments)}}()))).filter(sn=>sn);let oe=K[0]||He(_n);const Ue=xr(A,g.config.apiKey,g.name);let pt=null;for(const sn of y)try{const Dn=yield sn._get(Ue);if(Dn){const Sn=an._fromJSON(g,Dn);sn!==oe&&(pt=Sn),oe=sn;break}}catch(Dn){}const Ft=K.filter(sn=>sn._shouldAllowMigration);return oe._shouldAllowMigration&&Ft.length?(oe=Ft[0],pt&&(yield oe._set(Ue,pt.toJSON())),yield Promise.all(y.map(function(){var sn=(0,w.Z)(function*(Dn){if(Dn!==oe)try{yield Dn._remove(Ue)}catch(Sn){}});return function(Dn){return sn.apply(this,arguments)}}())),new ri(oe,g,A)):new ri(oe,g,A)})()}}function Ur(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Vr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ui(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Di(g))return"Blackberry";if(er(g))return"Webos";if(Ii(g))return"Safari";if((g.includes("chrome/")||Tn(g))&&!g.includes("edge/"))return"Chrome";if(hr(g))return"Android";{const A=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function ui(b=(0,ie.z$)()){return/firefox\//i.test(b)}function Ii(b=(0,ie.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Tn(b=(0,ie.z$)()){return/crios\//i.test(b)}function Vr(b=(0,ie.z$)()){return/iemobile/i.test(b)}function hr(b=(0,ie.z$)()){return/android/i.test(b)}function Di(b=(0,ie.z$)()){return/blackberry/i.test(b)}function er(b=(0,ie.z$)()){return/webos/i.test(b)}function gi(b=(0,ie.z$)()){return/iphone|ipad|ipod/i.test(b)}function mi(b=(0,ie.z$)()){return gi(b)||hr(b)||er(b)||Di(b)||/windows phone/i.test(b)||Vr(b)}function Kr(b,g=[]){let y;switch(b){case"Browser":y=Ur((0,ie.z$)());break;case"Worker":y=`${Ur((0,ie.z$)())}-${b}`;break;default:y=b}const A=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${Fe.SDK_VERSION}/${A}`}class qn{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const A=oe=>new Promise((Ue,pt)=>{try{Ue(g(oe))}catch(Ft){pt(Ft)}});A.onAbort=y,this.queue.push(A);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,w.Z)(function*(){if(y.auth.currentUser===g)return;const A=[];try{for(const K of y.queue)yield K(g),K.onAbort&&A.push(K.onAbort)}catch(K){A.reverse();for(const oe of A)try{oe()}catch(Ue){}throw y.auth._errorFactory.create("login-blocked",{originalMessage:K.message})}})()}}class Mt{constructor(g,y,A){this.app=g,this.heartbeatServiceProvider=y,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new On(this),this.idTokenSubscription=new On(this),this.beforeStateQueue=new qn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(g,y){var A=this;return y&&(this._popupRedirectResolver=He(y)),this._initializationPromise=this.queue((0,w.Z)(function*(){var K,oe;if(!A._deleted&&(A.persistenceManager=yield ri.create(A,g),!A._deleted)){if(null===(K=A._popupRedirectResolver)||void 0===K?void 0:K._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(Ue){}yield A.initializeCurrentUser(y),A.lastNotifiedUid=(null===(oe=A.currentUser)||void 0===oe?void 0:oe.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,w.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,w.Z)(function*(){var A;const K=yield y.assertedPersistence.getCurrentUser();let oe=K,Ue=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const pt=null===(A=y.redirectUser)||void 0===A?void 0:A._redirectEventId,Ft=null==oe?void 0:oe._redirectEventId,sn=yield y.tryRedirectSignIn(g);(!pt||pt===Ft)&&(null==sn?void 0:sn.user)&&(oe=sn.user,Ue=!0)}if(!oe)return y.directlySetCurrentUser(null);if(!oe._redirectEventId){if(Ue)try{yield y.beforeStateQueue.runMiddleware(oe)}catch(pt){oe=K,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(pt))}return oe?y.reloadAndSetCurrentUserOrClear(oe):y.directlySetCurrentUser(null)}return le(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===oe._redirectEventId?y.directlySetCurrentUser(oe):y.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(g){var y=this;return(0,w.Z)(function*(){let A=null;try{A=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(K){yield y._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,w.Z)(function*(){try{yield Tr(g)}catch(A){if("auth/network-request-failed"!==A.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function lt(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,w.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,w.Z)(function*(){const A=g?(0,ie.m9)(g):null;return A&&le(A.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(A&&A._clone(y))})()}_updateCurrentUser(g,y=!1){var A=this;return(0,w.Z)(function*(){if(!A._deleted)return g&&le(A.tenantId===g.tenantId,A,"tenant-id-mismatch"),y||(yield A.beforeStateQueue.runMiddleware(g)),A.queue((0,w.Z)(function*(){yield A.directlySetCurrentUser(g),A.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,w.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,w.Z)(function*(){yield y.assertedPersistence.setPersistence(He(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new ie.LL("auth","Firebase",g())}onAuthStateChanged(g,y,A){return this.registerStateListener(this.authStateSubscription,g,y,A)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,A){return this.registerStateListener(this.idTokenSubscription,g,y,A)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var A=this;return(0,w.Z)(function*(){const K=yield A.getOrInitRedirectPersistenceManager(y);return null===g?K.removeCurrentUser():K.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,w.Z)(function*(){if(!y.redirectPersistenceManager){const A=g&&He(g)||y._popupRedirectResolver;le(A,y,"argument-error"),y.redirectPersistenceManager=yield ri.create(y,[He(A._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,w.Z)(function*(){var A,K;return y._isInitialized&&(yield y.queue((0,w.Z)(function*(){}))),(null===(A=y._currentUser)||void 0===A?void 0:A._redirectEventId)===g?y._currentUser:(null===(K=y.redirectUser)||void 0===K?void 0:K._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,w.Z)(function*(){if(g===y.currentUser)return y.queue((0,w.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,A,K){if(this._deleted)return()=>{};const oe="function"==typeof y?y:y.next.bind(y),Ue=this._isInitialized?Promise.resolve():this._initializationPromise;return le(Ue,this,"internal-error"),Ue.then(()=>oe(this.currentUser)),"function"==typeof y?g.addObserver(y,A,K):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,w.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Kr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,w.Z)(function*(){var y;const A={"X-Client-Version":g.clientVersion};g.app.options.appId&&(A["X-Firebase-gmpid"]=g.app.options.appId);const K=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return K&&(A["X-Firebase-Client"]=K),A})()}}function Yt(b){return(0,ie.m9)(b)}class On{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,ie.ne)(y=>this.observer=y)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function es(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Ki(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class $i{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return ut("not implemented")}_getIdTokenResponse(g){return ut("not implemented")}_linkToIdToken(g,y){return ut("not implemented")}_getReauthenticationResolver(g){return ut("not implemented")}}function Rr(b,g){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:resetPassword",wn(b,g))})).apply(this,arguments)}function Yi(b,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ns(b,g){return _i.apply(this,arguments)}function _i(){return(_i=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:update",wn(b,g))})).apply(this,arguments)}function ei(){return(ei=(0,w.Z)(function*(b,g){return wr(b,"POST","/v1/accounts:signInWithPassword",wn(b,g))})).apply(this,arguments)}function ii(b,g){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:sendOobCode",wn(b,g))})).apply(this,arguments)}function nr(b,g){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,w.Z)(function*(b,g){return ii(b,g)})).apply(this,arguments)}function Si(b,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,w.Z)(function*(b,g){return ii(b,g)})).apply(this,arguments)}function di(b,g){return no.apply(this,arguments)}function no(){return(no=(0,w.Z)(function*(b,g){return ii(b,g)})).apply(this,arguments)}function ha(b,g){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,w.Z)(function*(b,g){return ii(b,g)})).apply(this,arguments)}function Es(){return(Es=(0,w.Z)(function*(b,g){return wr(b,"POST","/v1/accounts:signInWithEmailLink",wn(b,g))})).apply(this,arguments)}function Qo(){return(Qo=(0,w.Z)(function*(b,g){return wr(b,"POST","/v1/accounts:signInWithEmailLink",wn(b,g))})).apply(this,arguments)}class zr extends $i{constructor(g,y,A,K=null){super("password",A),this._email=g,this._password=y,this._tenantId=K}static _fromEmailAndPassword(g,y){return new zr(g,y,"password")}static _fromEmailAndCode(g,y,A=null){return new zr(g,y,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,w.Z)(function*(){switch(y.signInMethod){case"password":return function Wr(b,g){return ei.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Hr(b,g){return Es.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:ct(g,"internal-error")}})()}_linkToIdToken(g,y){var A=this;return(0,w.Z)(function*(){switch(A.signInMethod){case"password":return Yi(g,{idToken:y,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function Gs(b,g){return Qo.apply(this,arguments)}(g,{idToken:y,email:A._email,oobCode:A._password});default:ct(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function cs(b,g){return ts.apply(this,arguments)}function ts(){return(ts=(0,w.Z)(function*(b,g){return wr(b,"POST","/v1/accounts:signInWithIdp",wn(b,g))})).apply(this,arguments)}class be extends $i{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new be(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):ct("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K}=y,oe=(0,z._T)(y,["providerId","signInMethod"]);if(!A||!K)return null;const Ue=new be(A,K);return Ue.idToken=oe.idToken||void 0,Ue.accessToken=oe.accessToken||void 0,Ue.secret=oe.secret,Ue.nonce=oe.nonce,Ue.pendingToken=oe.pendingToken||null,Ue}_getIdTokenResponse(g){return cs(g,this.buildRequest())}_linkToIdToken(g,y){const A=this.buildRequest();return A.idToken=y,cs(g,A)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,cs(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,ie.xO)(y)}return g}}function Je(b,g){return bt.apply(this,arguments)}function bt(){return(bt=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:sendVerificationCode",wn(b,g))})).apply(this,arguments)}function Zt(){return(Zt=(0,w.Z)(function*(b,g){return wr(b,"POST","/v1/accounts:signInWithPhoneNumber",wn(b,g))})).apply(this,arguments)}function $r(){return($r=(0,w.Z)(function*(b,g){const y=yield wr(b,"POST","/v1/accounts:signInWithPhoneNumber",wn(b,g));if(y.temporaryProof)throw Yn(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const rr={USER_NOT_FOUND:"user-not-found"};function wo(){return(wo=(0,w.Z)(function*(b,g){return wr(b,"POST","/v1/accounts:signInWithPhoneNumber",wn(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),rr)})).apply(this,arguments)}class Oi extends $i{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Oi({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Oi({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function Pt(b,g){return Zt.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function mr(b,g){return $r.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function ns(b,g){return wo.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:A,verificationCode:K}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:A,code:K}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:A,phoneNumber:K,temporaryProof:oe}=g;return A||y||K||oe?new Oi({verificationId:y,verificationCode:A,phoneNumber:K,temporaryProof:oe}):null}}class qs{constructor(g){var y,A,K,oe,Ue,pt;const Ft=(0,ie.zd)((0,ie.pd)(g)),sn=null!==(y=Ft.apiKey)&&void 0!==y?y:null,Dn=null!==(A=Ft.oobCode)&&void 0!==A?A:null,Sn=function ko(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=Ft.mode)&&void 0!==K?K:null);le(sn&&Dn&&Sn,"argument-error"),this.apiKey=sn,this.operation=Sn,this.code=Dn,this.continueUrl=null!==(oe=Ft.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(Ue=Ft.languageCode)&&void 0!==Ue?Ue:null,this.tenantId=null!==(pt=Ft.tenantId)&&void 0!==pt?pt:null}static parseLink(g){const y=function ws(b){const g=(0,ie.zd)((0,ie.pd)(b)).link,y=g?(0,ie.zd)((0,ie.pd)(g)).deep_link_id:null,A=(0,ie.zd)((0,ie.pd)(b)).deep_link_id;return(A?(0,ie.zd)((0,ie.pd)(A)).link:null)||A||y||g||b}(g);try{return new qs(y)}catch(A){return null}}}let fa=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,A){return zr._fromEmailAndPassword(y,A)}static credentialWithLink(y,A){const K=qs.parseLink(A);return le(K,"argument-error"),zr._fromEmailAndCode(y,K.code,K.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class si{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class bs extends si{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Cs extends bs{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return le("providerId"in y&&"signInMethod"in y,"argument-error"),be._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return le(g.idToken||g.accessToken,"argument-error"),be._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Cs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Cs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:A,oauthTokenSecret:K,pendingToken:oe,nonce:Ue,providerId:pt}=g;if(!A&&!K&&!y&&!oe||!pt)return null;try{return new Cs(pt)._credential({idToken:y,accessToken:A,nonce:Ue,pendingToken:oe})}catch(Ft){return null}}}let Ps=(()=>{class b extends bs{constructor(){super("facebook.com")}static credential(y){return be._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(A){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Fo=(()=>{class b extends bs{constructor(){super("google.com"),this.addScope("profile")}static credential(y,A){return be._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:A})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:A,oauthAccessToken:K}=y;if(!A&&!K)return null;try{return b.credential(A,K)}catch(oe){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Os=(()=>{class b extends bs{constructor(){super("github.com")}static credential(y){return be._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(A){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class yi extends $i{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return cs(g,this.buildRequest())}_linkToIdToken(g,y){const A=this.buildRequest();return A.idToken=y,cs(g,A)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,cs(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K,pendingToken:oe}=y;return A&&K&&oe&&A===K?new yi(A,oe):null}static _create(g,y){return new yi(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Gi extends si{constructor(g){le(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Gi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Gi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=yi.fromJSON(g);return le(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:A}=g;if(!y||!A)return null;try{return yi._create(A,y)}catch(K){return null}}}let Co=(()=>{class b extends bs{constructor(){super("twitter.com")}static credential(y,A){return be._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:A})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:A,oauthTokenSecret:K}=y;if(!A||!K)return null;try{return b.credential(A,K)}catch(oe){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function vi(b,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,w.Z)(function*(b,g){return wr(b,"POST","/v1/accounts:signUp",wn(b,g))})).apply(this,arguments)}class Ai{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,A,K=!1){return(0,w.Z)(function*(){const oe=yield an._fromIdTokenResponse(g,A,K),Ue=Lo(A);return new Ai({user:oe,providerId:Ue,_tokenResponse:A,operationType:y})})()}static _forOperation(g,y,A){return(0,w.Z)(function*(){yield g._updateTokensIfNecessary(A,!0);const K=Lo(A);return new Ai({user:g,providerId:K,_tokenResponse:A,operationType:y})})()}}function Lo(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function To(){return(To=(0,w.Z)(function*(b){var g;const y=Yt(b);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new Ai({user:y.currentUser,providerId:null,operationType:"signIn"});const A=yield vi(y,{returnSecureToken:!0}),K=yield Ai._fromIdTokenResponse(y,"signIn",A,!0);return yield y._updateCurrentUser(K.user),K})).apply(this,arguments)}class rs extends ie.ZR{constructor(g,y,A,K){var oe;super(y.code,y.message),this.operationType=A,this.user=K,Object.setPrototypeOf(this,rs.prototype),this.customData={appName:g.name,tenantId:null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:y.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(g,y,A,K){return new rs(g,y,A,K)}}function ks(b,g,y,A){return("reauthenticate"===g?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?rs._fromErrorAndOperation(b,oe,g,A):oe})}function zs(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function ir(){return(ir=(0,w.Z)(function*(b,g){const y=(0,ie.m9)(b);yield V(!0,y,g);const{providerUserInfo:A}=yield Rn(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),K=zs(A||[]);return y.providerData=y.providerData.filter(oe=>K.has(oe.providerId)),K.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function B(b,g){return X.apply(this,arguments)}function X(){return(X=(0,w.Z)(function*(b,g,y=!1){const A=yield li(b,g._linkToIdToken(b.auth,yield b.getIdToken()),y);return Ai._forOperation(b,"link",A)})).apply(this,arguments)}function V(b,g,y){return ae.apply(this,arguments)}function ae(){return(ae=(0,w.Z)(function*(b,g,y){yield Tr(g);const K=!1===b?"provider-already-linked":"no-such-provider";le(zs(g.providerData).has(y)===b,g.auth,K)})).apply(this,arguments)}function ve(b,g){return st.apply(this,arguments)}function st(){return(st=(0,w.Z)(function*(b,g,y=!1){const{auth:A}=b,K="reauthenticate";try{const oe=yield li(b,ks(A,K,g,b),y);le(oe.idToken,A,"internal-error");const Ue=Xt(oe.idToken);le(Ue,A,"internal-error");const{sub:pt}=Ue;return le(b.uid===pt,A,"user-mismatch"),Ai._forOperation(b,K,oe)}catch(oe){throw"auth/user-not-found"===(null==oe?void 0:oe.code)&&ct(A,"user-mismatch"),oe}})).apply(this,arguments)}function vt(b,g){return en.apply(this,arguments)}function en(){return(en=(0,w.Z)(function*(b,g,y=!1){const A="signIn",K=yield ks(b,A,g),oe=yield Ai._fromIdTokenResponse(b,A,K);return y||(yield b._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function ln(b,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,w.Z)(function*(b,g){return vt(Yt(b),g)})).apply(this,arguments)}function kn(b,g){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,w.Z)(function*(b,g){const y=(0,ie.m9)(b);return yield V(!1,y,g.providerId),B(y,g)})).apply(this,arguments)}function Jr(b,g){return br.apply(this,arguments)}function br(){return(br=(0,w.Z)(function*(b,g){return ve((0,ie.m9)(b),g)})).apply(this,arguments)}function Gr(b,g){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,w.Z)(function*(b,g){return wr(b,"POST","/v1/accounts:signInWithCustomToken",wn(b,g))})).apply(this,arguments)}function un(){return(un=(0,w.Z)(function*(b,g){const y=Yt(b),A=yield Gr(y,{token:g,returnSecureToken:!0}),K=yield Ai._fromIdTokenResponse(y,"signIn",A);return yield y._updateCurrentUser(K.user),K})).apply(this,arguments)}class Wi{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Xo._fromServerResponse(g,y):ct(g,"internal-error")}}class Xo extends Wi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Xo(y)}}function po(b,g,y){var A;le((null===(A=y.url)||void 0===A?void 0:A.length)>0,b,"invalid-continue-uri"),le(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(le(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(le(y.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function G(){return(G=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b),K={requestType:"PASSWORD_RESET",email:g};y&&po(A,K,y),yield Si(A,K)})).apply(this,arguments)}function k(){return(k=(0,w.Z)(function*(b,g,y){yield Rr((0,ie.m9)(b),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Ee(){return(Ee=(0,w.Z)(function*(b,g){yield Ns((0,ie.m9)(b),{oobCode:g})})).apply(this,arguments)}function Dt(b,g){return W.apply(this,arguments)}function W(){return(W=(0,w.Z)(function*(b,g){const y=(0,ie.m9)(b),A=yield Rr(y,{oobCode:g}),K=A.requestType;switch(le(K,y,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(A.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(A.mfaInfo,y,"internal-error");default:le(A.email,y,"internal-error")}let oe=null;return A.mfaInfo&&(oe=Wi._fromServerResponse(Yt(y),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:oe},operation:K}})).apply(this,arguments)}function ne(){return(ne=(0,w.Z)(function*(b,g){const{data:y}=yield Dt((0,ie.m9)(b),g);return y.email})).apply(this,arguments)}function Ce(){return(Ce=(0,w.Z)(function*(b,g,y){const A=Yt(b),K=yield vi(A,{returnSecureToken:!0,email:g,password:y}),oe=yield Ai._fromIdTokenResponse(A,"signIn",K);return yield A._updateCurrentUser(oe.user),oe})).apply(this,arguments)}function nn(){return(nn=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b),K={requestType:"EMAIL_SIGNIN",email:g};le(y.handleCodeInApp,A,"argument-error"),y&&po(A,K,y),yield di(A,K)})).apply(this,arguments)}function Un(){return(Un=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b),K=fa.credentialWithLink(g,y||mt());return le(K._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),ln(A,K)})).apply(this,arguments)}function lr(b,g){return _r.apply(this,arguments)}function _r(){return(_r=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:createAuthUri",wn(b,g))})).apply(this,arguments)}function Nr(){return(Nr=(0,w.Z)(function*(b,g){const A={identifier:g,continueUri:Le()?mt():"http://localhost"},{signinMethods:K}=yield lr((0,ie.m9)(b),A);return K||[]})).apply(this,arguments)}function Gn(){return(Gn=(0,w.Z)(function*(b,g){const y=(0,ie.m9)(b),K={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&po(y.auth,K,g);const{email:oe}=yield nr(y.auth,K);oe!==b.email&&(yield b.reload())})).apply(this,arguments)}function Zs(){return(Zs=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};y&&po(A.auth,oe,y);const{email:Ue}=yield ha(A.auth,oe);Ue!==b.email&&(yield b.reload())})).apply(this,arguments)}function Qi(b,g){return ki.apply(this,arguments)}function ki(){return(ki=(0,w.Z)(function*(b,g){return vn(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ea(){return(ea=(0,w.Z)(function*(b,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const A=(0,ie.m9)(b),oe={idToken:yield A.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},Ue=yield li(A,Qi(A.auth,oe));A.displayName=Ue.displayName||null,A.photoURL=Ue.photoUrl||null;const pt=A.providerData.find(({providerId:Ft})=>"password"===Ft);pt&&(pt.displayName=A.displayName,pt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(Ue)})).apply(this,arguments)}function Uo(b,g,y){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,w.Z)(function*(b,g,y){const{auth:A}=b,oe={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(oe.email=g),y&&(oe.password=y);const Ue=yield li(b,Yi(A,oe));yield b._updateTokensIfNecessary(Ue,!0)})).apply(this,arguments)}class al{constructor(g,y,A={}){this.isNewUser=g,this.providerId=y,this.profile=A}}class Zu extends al{constructor(g,y,A,K){super(g,y,A),this.username=K}}class El extends al{constructor(g,y){super(g,"facebook.com",y)}}class ta extends Zu{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class vc extends al{constructor(g,y){super(g,"google.com",y)}}class Ga extends Zu{constructor(g,y,A){super(g,"twitter.com",y,A)}}function Is(b){const{user:g,_tokenResponse:y}=b;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Ta(b){var g,y;if(!b)return null;const{providerId:A}=b,K=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},oe=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!A&&(null==b?void 0:b.idToken)){const Ue=null===(y=null===(g=Xt(b.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(Ue)return new al(oe,"anonymous"!==Ue&&"custom"!==Ue?Ue:null)}if(!A)return null;switch(A){case"facebook.com":return new El(oe,K);case"github.com":return new ta(oe,K);case"google.com":return new vc(oe,K);case"twitter.com":return new Ga(oe,K,b.screenName||null);case"custom":case"anonymous":return new al(oe,null);default:return new al(oe,A,K)}}(y)}class na{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new na("enroll",g)}static _fromMfaPendingCredential(g){return new na("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,A;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return na._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(A=g.multiFactorSession)||void 0===A?void 0:A.idToken)return na._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Wa{constructor(g,y,A){this.session=g,this.hints=y,this.signInResolver=A}static _fromError(g,y){const A=Yt(g),K=y.customData._serverResponse,oe=(K.mfaInfo||[]).map(pt=>Wi._fromServerResponse(A,pt));le(K.mfaPendingCredential,A,"internal-error");const Ue=na._fromMfaPendingCredential(K.mfaPendingCredential);return new Wa(Ue,oe,function(){var pt=(0,w.Z)(function*(Ft){const sn=yield Ft._process(A,Ue);delete K.mfaInfo,delete K.mfaPendingCredential;const Dn=Object.assign(Object.assign({},K),{idToken:sn.idToken,refreshToken:sn.refreshToken});switch(y.operationType){case"signIn":const Sn=yield Ai._fromIdTokenResponse(A,y.operationType,Dn);return yield A._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return le(y.user,A,"internal-error"),Ai._forOperation(y.user,y.operationType,Dn);default:ct(A,"internal-error")}});return function(Ft){return pt.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,w.Z)(function*(){return y.signInResolver(g)})()}}function hu(b,g){return vn(b,"POST","/v2/accounts/mfaEnrollment:start",wn(b,g))}class Vo{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(A=>Wi._fromServerResponse(g.auth,A)))})}static _fromUser(g){return new Vo(g)}getSession(){var g=this;return(0,w.Z)(function*(){return na._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var A=this;return(0,w.Z)(function*(){const K=g,oe=yield A.getSession(),Ue=yield li(A.user,K._process(A.user.auth,oe,y));return yield A.user._updateTokensIfNecessary(Ue),A.user.reload()})()}unenroll(g){var y=this;return(0,w.Z)(function*(){const A="string"==typeof g?g:g.uid,K=yield y.user.getIdToken(),oe=yield li(y.user,function ce(b,g){return vn(b,"POST","/v2/accounts/mfaEnrollment:withdraw",wn(b,g))}(y.user.auth,{idToken:K,mfaEnrollmentId:A}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Ue})=>Ue!==A),yield y.user._updateTokensIfNecessary(oe);try{yield y.user.reload()}catch(Ue){if("auth/user-token-expired"!==Ue.code)throw Ue}})()}}const Bo=new WeakMap,Io="__sak";class Ia{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Io,"1"),this.storage.removeItem(Io),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const za=(()=>{class b extends Ia{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,A)=>this.onStorageEvent(y,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Do(){const b=(0,ie.z$)();return Ii(b)||gi(b)}()&&function tr(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=mi(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const A of Object.keys(this.listeners)){const K=this.storage.getItem(A),oe=this.localCache[A];K!==oe&&y(A,oe,K)}}onStorageEvent(y,A=!1){if(!y.key)return void this.forAllChangedKeys((pt,Ft,sn)=>{this.notifyListeners(pt,sn)});const K=y.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pt=this.storage.getItem(K);if(y.newValue!==pt)null!==y.newValue?this.storage.setItem(K,y.newValue):this.storage.removeItem(K);else if(this.localCache[K]===y.newValue&&!A)return}const oe=()=>{const pt=this.storage.getItem(K);!A&&this.localCache[K]===pt||this.notifyListeners(K,pt)},Ue=this.storage.getItem(K);!function Xi(){return(0,ie.w1)()&&10===document.documentMode}()||Ue===y.newValue||y.newValue===y.oldValue?oe():setTimeout(oe,10)}notifyListeners(y,A){this.localCache[y]=A;const K=this.listeners[y];if(K)for(const oe of Array.from(K))oe(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,A,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:A,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,A){var K=()=>super._set,oe=this;return(0,w.Z)(function*(){yield K().call(oe,y,A),oe.localCache[y]=JSON.stringify(A)})()}_get(y){var A=()=>super._get,K=this;return(0,w.Z)(function*(){const oe=yield A().call(K,y);return K.localCache[y]=JSON.stringify(oe),oe})()}_remove(y){var A=()=>super._remove,K=this;return(0,w.Z)(function*(){yield A().call(K,y),delete K.localCache[y]})()}}return b.type="LOCAL",b})(),go=(()=>{class b extends Ia{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,A){}_removeListener(y,A){}}return b.type="SESSION",b})();let Cl=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const A=this.receivers.find(oe=>oe.isListeningto(y));if(A)return A;const K=new b(y);return this.receivers.push(K),K}isListeningto(y){return this.eventTarget===y}handleEvent(y){var A=this;return(0,w.Z)(function*(){const K=y,{eventId:oe,eventType:Ue,data:pt}=K.data,Ft=A.handlersMap[Ue];if(!(null==Ft?void 0:Ft.size))return;K.ports[0].postMessage({status:"ack",eventId:oe,eventType:Ue});const sn=Array.from(Ft).map(function(){var Sn=(0,w.Z)(function*(Xs){return Xs(K.origin,pt)});return function(Xs){return Sn.apply(this,arguments)}}()),Dn=yield function bl(b){return Promise.all(b.map(function(){var g=(0,w.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(A){return{fulfilled:!1,reason:A}}});return function(y){return g.apply(this,arguments)}}()))}(sn);K.ports[0].postMessage({status:"done",eventId:oe,eventType:Ue,response:Dn})})()}_subscribe(y,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(A)}_unsubscribe(y,A){this.handlersMap[y]&&A&&this.handlersMap[y].delete(A),(!A||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function So(b="",g=10){let y="";for(let A=0;A<g;A++)y+=Math.floor(10*Math.random());return b+y}class Da{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,A=50){var K=this;return(0,w.Z)(function*(){const oe="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!oe)throw new Error("connection_unavailable");let Ue,pt;return new Promise((Ft,sn)=>{const Dn=So("",20);oe.port1.start();const Sn=setTimeout(()=>{sn(new Error("unsupported_event"))},A);pt={messageChannel:oe,onMessage(Xs){const Fa=Xs;if(Fa.data.eventId===Dn)switch(Fa.data.status){case"ack":clearTimeout(Sn),Ue=setTimeout(()=>{sn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ue),Ft(Fa.data.response);break;default:clearTimeout(Sn),clearTimeout(Ue),sn(new Error("invalid_response"))}}},K.handlers.add(pt),oe.port1.addEventListener("message",pt.onMessage),K.target.postMessage({eventType:g,eventId:Dn,data:y},[oe.port2])}).finally(()=>{pt&&K.removeMessageHandler(pt)})})()}}function Fi(){return window}function Ho(){return void 0!==Fi().WorkerGlobalScope&&"function"==typeof Fi().importScripts}function Ys(){return(Ys=(0,w.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const kl="firebaseLocalStorageDb",yr="firebaseLocalStorage",ds="fbase_key";class mo{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function M(b,g){return b.transaction([yr],g?"readwrite":"readonly").objectStore(yr)}function D(){const b=indexedDB.open(kl,1);return new Promise((g,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const A=b.result;try{A.createObjectStore(yr,{keyPath:ds})}catch(K){y(K)}}),b.addEventListener("success",(0,w.Z)(function*(){const A=b.result;A.objectStoreNames.contains(yr)?g(A):(A.close(),yield function S(){const b=indexedDB.deleteDatabase(kl);return new mo(b).toPromise()}(),g(yield D()))}))})}function N(b,g,y){return P.apply(this,arguments)}function P(){return(P=(0,w.Z)(function*(b,g,y){const A=M(b,!0).put({[ds]:g,value:y});return new mo(A).toPromise()})).apply(this,arguments)}function he(){return(he=(0,w.Z)(function*(b,g){const y=M(b,!1).get(g),A=yield new mo(y).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function Ie(b,g){const y=M(b,!0).delete(g);return new mo(y).toPromise()}const rn=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,w.Z)(function*(){return y.db||(y.db=yield D()),y.db})()}_withRetries(y){var A=this;return(0,w.Z)(function*(){let K=0;for(;;)try{const oe=yield A._openDb();return yield y(oe)}catch(oe){if(K++>3)throw oe;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,w.Z)(function*(){return Ho()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,w.Z)(function*(){y.receiver=Cl._getInstance(function Tl(){return Ho()?self:null}()),y.receiver._subscribe("keyChanged",function(){var A=(0,w.Z)(function*(K,oe){return{keyProcessed:(yield y._poll()).includes(oe.key)}});return function(K,oe){return A.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var A=(0,w.Z)(function*(K,oe){return["keyChanged"]});return function(K,oe){return A.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,w.Z)(function*(){var A,K;if(y.activeServiceWorker=yield function Ri(){return Ys.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Da(y.activeServiceWorker);const oe=yield y.sender._send("ping",{},800);!oe||(null===(A=oe[0])||void 0===A?void 0:A.fulfilled)&&(null===(K=oe[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var A=this;return(0,w.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function Ni(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:y},A.serviceWorkerReceiverAvailable?800:50)}catch(K){}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const y=yield D();return yield N(y,Io,"1"),yield Ie(y,Io),!0}catch(y){}return!1})()}_withPendingWrite(y){var A=this;return(0,w.Z)(function*(){A.pendingWrites++;try{yield y()}finally{A.pendingWrites--}})()}_set(y,A){var K=this;return(0,w.Z)(function*(){return K._withPendingWrite((0,w.Z)(function*(){return yield K._withRetries(oe=>N(oe,y,A)),K.localCache[y]=A,K.notifyServiceWorker(y)}))})()}_get(y){var A=this;return(0,w.Z)(function*(){const K=yield A._withRetries(oe=>function Z(b,g){return he.apply(this,arguments)}(oe,y));return A.localCache[y]=K,K})()}_remove(y){var A=this;return(0,w.Z)(function*(){return A._withPendingWrite((0,w.Z)(function*(){return yield A._withRetries(K=>Ie(K,y)),delete A.localCache[y],A.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,w.Z)(function*(){const A=yield y._withRetries(Ue=>{const pt=M(Ue,!1).getAll();return new mo(pt).toPromise()});if(!A)return[];if(0!==y.pendingWrites)return[];const K=[],oe=new Set;for(const{fbase_key:Ue,value:pt}of A)oe.add(Ue),JSON.stringify(y.localCache[Ue])!==JSON.stringify(pt)&&(y.notifyListeners(Ue,pt),K.push(Ue));for(const Ue of Object.keys(y.localCache))y.localCache[Ue]&&!oe.has(Ue)&&(y.notifyListeners(Ue,null),K.push(Ue));return K})()}notifyListeners(y,A){this.localCache[y]=A;const K=this.listeners[y];if(K)for(const oe of Array.from(K))oe(A)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Cr(b,g){return vn(b,"POST","/v2/accounts/mfaSignIn:start",wn(b,g))}function Ao(){return(Ao=(0,w.Z)(function*(b){return(yield vn(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fl(b){return new Promise((g,y)=>{const A=document.createElement("script");A.setAttribute("src",b),A.onload=g,A.onerror=K=>{const oe=it("internal-error");oe.customData=K,y(oe)},A.type="text/javascript",A.charset="UTF-8",function hs(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(A)})}function Ds(b){return`__${b}${Math.floor(1e6*Math.random())}`}const fu=1e12;class zi{constructor(g){this.auth=g,this.counter=fu,this._widgets=new Map}render(g,y){const A=this.counter;return this._widgets.set(A,new In(g,this.auth.name,y||{})),this.counter++,A}reset(g){var y;const A=g||fu;null===(y=this._widgets.get(A))||void 0===y||y.delete(),this._widgets.delete(A)}getResponse(g){var y;return(null===(y=this._widgets.get(g||fu))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,w.Z)(function*(){var A;return null===(A=y._widgets.get(g||fu))||void 0===A||A.execute(),""})()}}class In{constructor(g,y,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof g?document.getElementById(g):g;le(K,"argument-error",{appName:y}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ec(b){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<b;A++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cl=Ds("rcb"),Ji=new dn(3e4,6e4);class qr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Fi().grecaptcha}load(g,y=""){return le(function ff(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Fi().grecaptcha):new Promise((A,K)=>{const oe=Fi().setTimeout(()=>{K(it(g,"network-request-failed"))},Ji.get());Fi()[cl]=()=>{Fi().clearTimeout(oe),delete Fi()[cl];const pt=Fi().grecaptcha;if(!pt)return void K(it(g,"internal-error"));const Ft=pt.render;pt.render=(sn,Dn)=>{const Sn=Ft(sn,Dn);return this.counter++,Sn},this.hostLanguage=y,A(pt)},Fl(`https://www.google.com/recaptcha/api.js??${(0,ie.xO)({onload:cl,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(oe),K(it(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Fi().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fs{load(g){return(0,w.Z)(function*(){return new zi(g)})()}clearedOneInstance(){}}const Ll="recaptcha",pf={theme:"light",type:"image"};class Qs{constructor(g,y=Object.assign({},pf),A){this.parameters=y,this.type=Ll,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yt(A),this.isInvisible="invisible"===this.parameters.size,le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof g?document.getElementById(g):g;le(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fs:new qr,this.validateStartingState()}verify(){var g=this;return(0,w.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),A=g.getAssertedRecaptcha();return A.getResponse(y)||new Promise(oe=>{const Ue=pt=>{!pt||(g.tokenChangeListeners.delete(Ue),oe(pt))};g.tokenChangeListeners.add(Ue),g.isInvisible&&A.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(A=>A(y)),"function"==typeof g)g(y);else if("string"==typeof g){const A=Fi()[g];"function"==typeof A&&A(y)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,w.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const A=document.createElement("div");y.appendChild(A),y=A}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,w.Z)(function*(){le(Le()&&!Ho(),g.auth,"internal-error"),yield function Ul(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Ls(b){return Ao.apply(this,arguments)}(g.auth);le(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Sa{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Oi._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Aa(){return(Aa=(0,w.Z)(function*(b,g,y){const A=Yt(b),K=yield ps(A,g,(0,ie.m9)(y));return new Sa(K,oe=>ln(A,oe))})).apply(this,arguments)}function wc(){return(wc=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b);yield V(!1,A,"phone");const K=yield ps(A.auth,g,(0,ie.m9)(y));return new Sa(K,oe=>kn(A,oe))})).apply(this,arguments)}function Mo(){return(Mo=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b),K=yield ps(A.auth,g,(0,ie.m9)(y));return new Sa(K,oe=>Jr(A,oe))})).apply(this,arguments)}function ps(b,g,y){return dl.apply(this,arguments)}function dl(){return(dl=(0,w.Z)(function*(b,g,y){var A;const K=yield y.verify();try{let oe;if(le("string"==typeof K,b,"argument-error"),le(y.type===Ll,b,"argument-error"),oe="string"==typeof g?{phoneNumber:g}:g,"session"in oe){const Ue=oe.session;if("phoneNumber"in oe)return le("enroll"===Ue.type,b,"internal-error"),(yield hu(b,{idToken:Ue.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{le("signin"===Ue.type,b,"internal-error");const pt=(null===(A=oe.multiFactorHint)||void 0===A?void 0:A.uid)||oe.multiFactorUid;return le(pt,b,"missing-multi-factor-info"),(yield Cr(b,{mfaPendingCredential:Ue.credential,mfaEnrollmentId:pt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ue}=yield Je(b,{phoneNumber:oe.phoneNumber,recaptchaToken:K});return Ue}}finally{y._reset()}})).apply(this,arguments)}function xa(){return(xa=(0,w.Z)(function*(b,g){yield B((0,ie.m9)(b),g)})).apply(this,arguments)}let jt=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=Yt(y)}verifyPhoneNumber(y,A){return ps(this.auth,y,(0,ie.m9)(A))}static credential(y,A){return Oi._fromVerification(y,A)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:A,temporaryProof:K}=y;return A&&K?Oi._fromTokenResponse(A,K):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function _o(b,g){return g?He(g):(le(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Il extends $i{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return cs(g,this._buildIdpRequest())}_linkToIdToken(g,y){return cs(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return cs(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Dl(b){return vt(b.auth,new Il(b),b.bypassAuthState)}function Ra(b){const{auth:g,user:y}=b;return le(y,g,"internal-error"),ve(y,new Il(b),b.bypassAuthState)}function mu(b){return is.apply(this,arguments)}function is(){return(is=(0,w.Z)(function*(b){const{auth:g,user:y}=b;return le(y,g,"internal-error"),B(y,new Il(b),b.bypassAuthState)})).apply(this,arguments)}class bc{constructor(g,y,A,K,oe=!1){this.auth=g,this.resolver=A,this.user=K,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,w.Z)(function*(A,K){g.pendingPromise={resolve:A,reject:K};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(oe){g.reject(oe)}});return function(A,K){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,w.Z)(function*(){const{urlResponse:A,sessionId:K,postBody:oe,tenantId:Ue,error:pt,type:Ft}=g;if(pt)return void y.reject(pt);const sn={auth:y.auth,requestUri:A,sessionId:K,tenantId:Ue||void 0,postBody:oe||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Ft)(sn))}catch(Dn){y.reject(Dn)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Dl;case"linkViaPopup":case"linkViaRedirect":return mu;case"reauthViaPopup":case"reauthViaRedirect":return Ra;default:ct(this.auth,"internal-error")}}resolve(g){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Na=new dn(2e3,1e4);function ss(){return(ss=(0,w.Z)(function*(b,g,y){const A=Yt(b);ze(b,g,si);const K=_o(A,y);return new Pa(A,"signInViaPopup",g,K).executeNotNull()})).apply(this,arguments)}function Vl(){return(Vl=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b);ze(A.auth,g,si);const K=_o(A.auth,y);return new Pa(A.auth,"reauthViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}function ra(){return(ra=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b);ze(A.auth,g,si);const K=_o(A.auth,y);return new Pa(A.auth,"linkViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}let Pa=(()=>{class b extends bc{constructor(y,A,K,oe,Ue){super(y,A,oe,Ue),this.provider=K,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,w.Z)(function*(){const A=yield y.execute();return le(A,y.auth,"internal-error"),A})()}onExecution(){var y=this;return(0,w.Z)(function*(){me(1===y.filter.length,"Popup operations only handle one event");const A=So();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],A),y.authWindow.associatedEvent=A,y.resolver._originValidation(y.auth).catch(K=>{y.reject(K)}),y.resolver._isIframeWebStorageSupported(y.auth,K=>{K||y.reject(it(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(it(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var A,K;this.pollId=(null===(K=null===(A=this.authWindow)||void 0===A?void 0:A.window)||void 0===K?void 0:K.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(it(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Na.get())};y()}}return b.currentPopupAction=null,b})();const Sl=new Map;class fd extends bc{constructor(g,y,A=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,A),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,w.Z)(function*(){let A=Sl.get(y.auth._key());if(!A){try{const oe=(yield function gf(b,g){return Al.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;A=()=>Promise.resolve(oe)}catch(K){A=()=>Promise.reject(K)}Sl.set(y.auth._key(),A)}return y.bypassAuthState||Sl.set(y.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,A=this;return(0,w.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(A,g);if("unknown"!==g.type){if(g.eventId){const K=yield A.auth._redirectUserForId(g.eventId);if(K)return A.user=K,y().call(A,g);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Al(){return(Al=(0,w.Z)(function*(b,g){const y=_e(g),A=se(b);if(!(yield A._isAvailable()))return!1;const K="true"===(yield A._get(y));return yield A._remove(y),K})).apply(this,arguments)}function Ml(b,g){return gs.apply(this,arguments)}function gs(){return(gs=(0,w.Z)(function*(b,g){return se(b)._set(_e(g),"true")})).apply(this,arguments)}function H(b,g){Sl.set(b._key(),g)}function se(b){return He(b._redirectPersistence)}function _e(b){return xr("pendingRedirect",b.config.apiKey,b.name)}function Rt(){return(Rt=(0,w.Z)(function*(b,g,y){const A=Yt(b);ze(b,g,si);const K=_o(A,y);return yield Ml(K,A),K._openRedirect(A,g,"signInViaRedirect")})).apply(this,arguments)}function En(){return(En=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b);ze(A.auth,g,si);const K=_o(A.auth,y);yield Ml(K,A.auth);const oe=yield Us(A);return K._openRedirect(A.auth,g,"reauthViaRedirect",oe)})).apply(this,arguments)}function os(){return(os=(0,w.Z)(function*(b,g,y){const A=(0,ie.m9)(b);ze(A.auth,g,si);const K=_o(A.auth,y);yield V(!1,A,g.providerId),yield Ml(K,A.auth);const oe=yield Us(A);return K._openRedirect(A.auth,g,"linkViaRedirect",oe)})).apply(this,arguments)}function yn(){return(yn=(0,w.Z)(function*(b,g){return yield Yt(b)._initializationPromise,vr(b,g,!1)})).apply(this,arguments)}function vr(b,g){return xn.apply(this,arguments)}function xn(){return(xn=(0,w.Z)(function*(b,g,y=!1){const A=Yt(b),K=_o(A,g),Ue=yield new fd(A,K,y).execute();return Ue&&!y&&(delete Ue.user._redirectEventId,yield A._persistUserIfCurrent(Ue.user),yield A._setRedirectUser(null,g)),Ue})).apply(this,arguments)}function Us(b){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,w.Z)(function*(b){const g=So(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Mp{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(g,A)&&(y=!0,this.sendToConsumer(g,A),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function hi(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yu(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var A;if(g.error&&!yu(g)){const K=(null===(A=g.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";y.onError(it(this.auth,K))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const A=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&A}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hl(g))}saveEventToCache(g){this.cachedEventUids.add(hl(g)),this.lastProcessedEventTime=Date.now()}}function hl(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function yu({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===(null==g?void 0:g.code)}function ur(b){return yo.apply(this,arguments)}function yo(){return(yo=(0,w.Z)(function*(b,g={}){return vn(b,"GET","/v1/projects",g)})).apply(this,arguments)}const xo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vu=/^https?/;function mf(){return(mf=(0,w.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield ur(b);for(const y of g)try{if(nm(y))return}catch(A){}ct(b,"unauthorized-domain")})).apply(this,arguments)}function nm(b){const g=mt(),{protocol:y,hostname:A}=new URL(g);if(b.startsWith("chrome-extension://")){const Ue=new URL(b);return""===Ue.hostname&&""===A?"chrome-extension:"===y&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&Ue.hostname===A}if(!vu.test(y))return!1;if(xo.test(b))return A===b;const K=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(A)}const xp=new dn(3e4,6e4);function _f(){const b=Fi().___jsl;if(null==b?void 0:b.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let Tc=null;function Za(b){return Tc=Tc||function Cc(b){return new Promise((g,y)=>{var A,K,oe;function Ue(){_f(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{_f(),y(it(b,"network-request-failed"))},timeout:xp.get()})}if(null===(K=null===(A=Fi().gapi)||void 0===A?void 0:A.iframes)||void 0===K?void 0:K.Iframe)g(gapi.iframes.getContext());else{if(!(null===(oe=Fi().gapi)||void 0===oe?void 0:oe.load)){const pt=Ds("iframefcb");return Fi()[pt]=()=>{gapi.load?Ue():y(it(b,"network-request-failed"))},Fl(`https://apis.google.com/js/api.js?onload=${pt}`).catch(Ft=>y(Ft))}Ue()}}).catch(g=>{throw Tc=null,g})}(b),Tc}const Ic=new dn(5e3,15e3),Xu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rp(b){const g=b.config;le(g.authDomain,b,"auth-domain-config-required");const y=g.emulator?Kt(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,A={apiKey:g.apiKey,appName:b.name,v:Fe.SDK_VERSION},K=Bl.get(b.config.apiHost);K&&(A.eid=K);const oe=b._getFrameworks();return oe.length&&(A.fw=oe.join(",")),`${y}?${(0,ie.xO)(A).slice(1)}`}function Ka(){return Ka=(0,w.Z)(function*(b){const g=yield Za(b),y=Fi().gapi;return le(y,b,"internal-error"),g.open({where:document.body,url:Rp(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xu,dontclear:!0},A=>new Promise(function(){var K=(0,w.Z)(function*(oe,Ue){yield A.restyle({setHideOnLeave:!1});const pt=it(b,"network-request-failed"),Ft=Fi().setTimeout(()=>{Ue(pt)},Ic.get());function sn(){Fi().clearTimeout(Ft),oe(A)}A.ping(sn).then(sn,()=>{Ue(pt)})});return function(oe,Ue){return K.apply(this,arguments)}}()))}),Ka.apply(this,arguments)}const cr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Oa(b,g,y,A,K,oe){le(b.config.authDomain,b,"auth-domain-config-required"),le(b.config.apiKey,b,"invalid-api-key");const Ue={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:A,v:Fe.SDK_VERSION,eventId:K};if(g instanceof si){g.setDefaultLanguage(b.languageCode),Ue.providerId=g.providerId||"",(0,ie.xb)(g.getCustomParameters())||(Ue.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Ft,sn]of Object.entries(oe||{}))Ue[Ft]=sn}if(g instanceof bs){const Ft=g.getScopes().filter(sn=>""!==sn);Ft.length>0&&(Ue.scopes=Ft.join(","))}b.tenantId&&(Ue.tid=b.tenantId);const pt=Ue;for(const Ft of Object.keys(pt))void 0===pt[Ft]&&delete pt[Ft];return`${function wu({config:b}){return b.emulator?Kt(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,ie.xO)(pt).slice(1)}`}const vf="webStorageSupport";class xl extends class Op{constructor(g){this.factorId=g}_process(g,y,A){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,A);case"signin":return this._finalizeSignIn(g,y.credential);default:return ut("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new xl(g)}_finalizeEnroll(g,y,A){return function wl(b,g){return vn(b,"POST","/v2/accounts/mfaEnrollment:finalize",wn(b,g))}(g,{idToken:y,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function fr(b,g){return vn(b,"POST","/v2/accounts/mfaSignIn:finalize",wn(b,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rm=(()=>{class b{constructor(){}static assertion(y){return xl._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var nh="@firebase/auth";class Ac{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,w.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(A=>{var K;g((null===(K=A)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bu(){return window}function vo(){return(vo=(0,w.Z)(function*(b,g,y){var A;const{BuildInfo:K}=bu();me(g.sessionId,"AuthEvent did not contain a session ID");const oe=yield As(g.sessionId),Ue={};return gi()?Ue.ibi=K.packageName:hr()?Ue.apn=K.packageName:ct(b,"operation-not-supported-in-this-environment"),K.displayName&&(Ue.appDisplayName=K.displayName),Ue.sessionId=oe,Oa(b,y,g.type,void 0,null!==(A=g.eventId)&&void 0!==A?A:void 0,Ue)})).apply(this,arguments)}function Cu(){return(Cu=(0,w.Z)(function*(b){const{BuildInfo:g}=bu(),y={};gi()?y.iosBundleId=g.packageName:hr()?y.androidPackageName=g.packageName:ct(b,"operation-not-supported-in-this-environment"),yield ur(b,y)})).apply(this,arguments)}function jl(){return(jl=(0,w.Z)(function*(b,g,y){const{cordova:A}=bu();let K=()=>{};try{yield new Promise((oe,Ue)=>{let pt=null;function Ft(){var Sn;oe();const Xs=null===(Sn=A.plugins.browsertab)||void 0===Sn?void 0:Sn.close;"function"==typeof Xs&&Xs(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function sn(){pt||(pt=window.setTimeout(()=>{Ue(it(b,"redirect-cancelled-by-user"))},2e3))}function Dn(){"visible"===(null==document?void 0:document.visibilityState)&&sn()}g.addPassiveListener(Ft),document.addEventListener("resume",sn,!1),hr()&&document.addEventListener("visibilitychange",Dn,!1),K=()=>{g.removePassiveListener(Ft),document.removeEventListener("resume",sn,!1),document.removeEventListener("visibilitychange",Dn,!1),pt&&window.clearTimeout(pt)}})}finally{K()}})).apply(this,arguments)}function As(b){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,w.Z)(function*(b){const g=Cf(b),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Cf(b){if(me(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),y=new Uint8Array(g);for(let A=0;A<b.length;A++)y[A]=b.charCodeAt(A);return y}!function Li(b){(0,Fe._registerComponent)(new Ve.wA("auth",(g,{options:y})=>{const A=g.getProvider("app").getImmediate(),K=g.getProvider("heartbeat"),{apiKey:oe,authDomain:Ue}=A.options;return((pt,Ft)=>{le(oe&&!oe.includes(":"),"invalid-api-key",{appName:pt.name}),le(!(null==Ue?void 0:Ue.includes(":")),"argument-error",{appName:pt.name});const sn={apiKey:oe,authDomain:Ue,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kr(b)},Dn=new Mt(pt,Ft,sn);return function Me(b,g){const y=(null==g?void 0:g.persistence)||[],A=(Array.isArray(y)?y:[y]).map(He);(null==g?void 0:g.errorMap)&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(A,null==g?void 0:g.popupRedirectResolver)}(Dn,y),Dn})(A,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,A)=>{g.getProvider("auth-internal").initialize()})),(0,Fe._registerComponent)(new Ve.wA("auth-internal",g=>{const y=Yt(g.getProvider("auth").getImmediate());return new Ac(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Fe.registerVersion)(nh,"0.20.2",function nc(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,Fe.registerVersion)(nh,"0.20.2","esm2017")}("Browser");class xc extends Mp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,w.Z)(function*(){yield g.initPromise})()}}function rh(b){return ih.apply(this,arguments)}function ih(){return(ih=(0,w.Z)(function*(b){const g=yield rc()._get(fl(b));return g&&(yield rc()._remove(fl(b))),g})).apply(this,arguments)}function Nc(){const b=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const A=Math.floor(Math.random()*g.length);b.push(g.charAt(A))}return b.join("")}function rc(){return He(za)}function fl(b){return xr("authEvent",b.config.apiKey,b.name)}function _d(b){if(!(null==b?void 0:b.includes("?")))return{};const[g,...y]=b.split("?");return(0,ie.zd)(y.join("?"))}function Eo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:it("no-auth-event")}}function vd(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function sm(b=(0,ie.z$)()){return!("file:"!==vd()&&"ionic:"!==vd()&&"capacitor:"!==vd()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function sh(){try{const b=self.localStorage,g=So();if(b)return b.setItem(g,"1"),b.removeItem(g),!function Gl(b=(0,ie.z$)()){return function Rl(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Js(b=(0,ie.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,ie.hl)()}catch(b){return Tu()&&(0,ie.hl)()}return!1}function Tu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ls(){return(function ti(){return"http:"===vd()||"https:"===vd()}()||(0,ie.ru)()||sm())&&!function Pc(){return(0,ie.b$)()||(0,ie.UG)()}()&&sh()&&!Tu()}function Iu(){return sm()&&"undefined"!=typeof document}function oh(){return(oh=(0,w.Z)(function*(){return!!Iu()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})})).apply(this,arguments)}const oa={LOCAL:"local",NONE:"none",SESSION:"session"},Ed=le,ic="persistence";function aa(b){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,w.Z)(function*(b){yield b._initializationPromise;const g=sc(),y=xr(ic,b.config.apiKey,b.name);g&&g.setItem(y,b._getPersistence())})).apply(this,arguments)}function sc(){var b;try{return(null===(b=function om(){return"undefined"!=typeof window?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(g){return null}}const Du=le;class Bs{constructor(){this.browserResolver=He(class Pp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=go,this._completeRedirectFn=vr,this._overrideRedirectResult=H}_openPopup(g,y,A,K){var oe=this;return(0,w.Z)(function*(){var Ue;me(null===(Ue=oe.eventManagers[g._key()])||void 0===Ue?void 0:Ue.manager,"_initialize() not called before _openPopup()");const pt=Oa(g,y,A,mt(),K);return function sa(b,g,y,A=500,K=600){const oe=Math.max((window.screen.availHeight-K)/2,0).toString(),Ue=Math.max((window.screen.availWidth-A)/2,0).toString();let pt="";const Ft=Object.assign(Object.assign({},cr),{width:A.toString(),height:K.toString(),top:oe,left:Ue}),sn=(0,ie.z$)().toLowerCase();y&&(pt=Tn(sn)?"_blank":y),ui(sn)&&(g=g||"http://localhost",Ft.scrollbars="yes");const Dn=Object.entries(Ft).reduce((Xs,[Fa,Lc])=>`${Xs}${Fa}=${Lc},`,"");if(function Rs(b=(0,ie.z$)()){var g;return gi(b)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(sn)&&"_self"!==pt)return function Np(b,g){const y=document.createElement("a");y.href=b,y.target=g;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(A)}(g||"",pt),new Sc(null);const Sn=window.open(g||"",pt,Dn);le(Sn,b,"popup-blocked");try{Sn.focus()}catch(Xs){}return new Sc(Sn)}(g,pt,So())})()}_openRedirect(g,y,A,K){var oe=this;return(0,w.Z)(function*(){return yield oe._originValidation(g),function bi(b){Fi().location.href=b}(Oa(g,y,A,mt(),K)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:K,promise:oe}=this.eventManagers[y];return K?Promise.resolve(K):(me(oe,"If manager is not set, promise should be"),oe)}const A=this.initAndGetManager(g);return this.eventManagers[y]={promise:A},A.catch(()=>{delete this.eventManagers[y]}),A}initAndGetManager(g){var y=this;return(0,w.Z)(function*(){const A=yield function Dc(b){return Ka.apply(this,arguments)}(g),K=new Mp(g);return A.register("authEvent",oe=>(le(null==oe?void 0:oe.authEvent,g,"invalid-auth-event"),{status:K.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:K},y.iframes[g._key()]=A,K})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(vf,{type:vf},K=>{var oe;const Ue=null===(oe=null==K?void 0:K[0])||void 0===oe?void 0:oe[vf];void 0!==Ue&&y(!!Ue),ct(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function qo(b){return mf.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return mi()||Ii()||gi()}}),this.cordovaResolver=He(class Qa{constructor(){this._redirectPersistence=go,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vr,this._overrideRedirectResult=H}_initialize(g){var y=this;return(0,w.Z)(function*(){const A=g._key();let K=y.eventManagers.get(A);return K||(K=new xc(g),y.eventManagers.set(A,K),y.attachCallbackListeners(g,K)),K})()}_openPopup(g){ct(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,A,K){var oe=this;return(0,w.Z)(function*(){!function bf(b){var g,y,A,K,oe,Ue,pt,Ft,sn,Dn;const Sn=bu();le("function"==typeof(null===(g=null==Sn?void 0:Sn.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(void 0!==(null===(y=null==Sn?void 0:Sn.BuildInfo)||void 0===y?void 0:y.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(oe=null===(K=null===(A=null==Sn?void 0:Sn.cordova)||void 0===A?void 0:A.plugins)||void 0===K?void 0:K.browsertab)||void 0===oe?void 0:oe.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Ft=null===(pt=null===(Ue=null==Sn?void 0:Sn.cordova)||void 0===Ue?void 0:Ue.plugins)||void 0===pt?void 0:pt.browsertab)||void 0===Ft?void 0:Ft.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Dn=null===(sn=null==Sn?void 0:Sn.cordova)||void 0===sn?void 0:sn.InAppBrowser)||void 0===Dn?void 0:Dn.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Ue=yield oe._initialize(g);yield Ue.initialized(),Ue.resetRedirect(),function L(){Sl.clear()}(),yield oe._originValidation(g);const pt=function Rc(b,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:Nc(),postBody:null,tenantId:b.tenantId,error:it(b,"no-auth-event")}}(g,A,K);yield function $l(b,g){return rc()._set(fl(b),g)}(g,pt);const Ft=yield function md(b,g,y){return vo.apply(this,arguments)}(g,pt,y),sn=yield function Jn(b){const{cordova:g}=bu();return new Promise(y=>{g.plugins.browsertab.isAvailable(A=>{let K=null;A?g.plugins.browsertab.openUrl(b):K=g.InAppBrowser.open(b,function $s(b=(0,ie.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),y(K)})})}(Ft);return function Vs(b,g,y){return jl.apply(this,arguments)}(g,Ue,sn)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ro(b){return Cu.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:A,handleOpenURL:K,BuildInfo:oe}=bu(),Ue=setTimeout((0,w.Z)(function*(){yield rh(g),y.onEvent(Eo())}),500),pt=function(){var Dn=(0,w.Z)(function*(Sn){clearTimeout(Ue);const Xs=yield rh(g);let Fa=null;Xs&&(null==Sn?void 0:Sn.url)&&(Fa=function Tf(b,g){var y,A;const K=function Er(b){const g=_d(b),y=g.link?decodeURIComponent(g.link):void 0,A=_d(y).link,K=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return _d(K).link||K||A||y||b}(g);if(K.includes("/__/auth/callback")){const oe=_d(K),Ue=oe.firebaseError?function as(b){try{return JSON.parse(b)}catch(g){return null}}(decodeURIComponent(oe.firebaseError)):null,pt=null===(A=null===(y=null==Ue?void 0:Ue.code)||void 0===y?void 0:y.split("auth/"))||void 0===A?void 0:A[1],Ft=pt?it(pt):null;return Ft?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Ft,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:K,postBody:null}}return null}(Xs,Sn.url)),y.onEvent(Fa||Eo())});return function(Xs){return Dn.apply(this,arguments)}}();void 0!==A&&"function"==typeof A.subscribe&&A.subscribe(null,pt);const Ft=K,sn=`${oe.packageName.toLowerCase()}://`;bu().handleOpenURL=function(){var Dn=(0,w.Z)(function*(Sn){if(Sn.toLowerCase().startsWith(sn)&&pt({url:Sn}),"function"==typeof Ft)try{Ft(Sn)}catch(Xs){console.error(Xs)}});return function(Sn){return Dn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=go,this._completeRedirectFn=vr,this._overrideRedirectResult=H}_initialize(g){var y=this;return(0,w.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,A,K){var oe=this;return(0,w.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openPopup(g,y,A,K)})()}_openRedirect(g,y,A,K){var oe=this;return(0,w.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openRedirect(g,y,A,K)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Iu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Du(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,w.Z)(function*(){if(g.underlyingResolver)return;const y=yield function Oc(){return oh.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function Ja(b){return b.unwrap()}function Xa(b){return Sf(b)}function Sf(b){const{_tokenResponse:g}=b instanceof ie.ZR?b.customData:b;if(!g)return null;if(!(b instanceof ie.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return jt.credentialFromResult(b);const y=g.providerId;if(!y||"password"===y)return null;let A;switch(y){case"google.com":A=Fo;break;case"facebook.com":A=Ps;break;case"github.com":A=Os;break;case"twitter.com":A=Co;break;default:const{oauthIdToken:K,oauthAccessToken:oe,oauthTokenSecret:Ue,pendingToken:pt,nonce:Ft}=g;return oe||Ue||K||pt?pt?y.startsWith("saml.")?yi._create(y,pt):be._fromParams({providerId:y,signInMethod:y,pendingToken:pt,idToken:K,accessToken:oe}):new Cs(y).credential({idToken:K,accessToken:oe,rawNonce:Ft}):null}return b instanceof ie.ZR?A.credentialFromError(b):A.credentialFromResult(b)}function so(b,g){return g.catch(y=>{throw y instanceof ie.ZR&&function bd(b,g){var y;const A=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Su(b,function sr(b,g){var y;const A=(0,ie.m9)(b),K=g;return le(g.customData.operationType,A,"argument-error"),le(null===(y=K.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,A,"argument-error"),Wa._fromError(A,K)}(b,g));else if(A){const K=Sf(g),oe=g;K&&(oe.credential=K,oe.tenantId=A.tenantId||void 0,oe.email=A.email||void 0,oe.phoneNumber=A.phoneNumber||void 0)}}(b,y),y}).then(y=>{const K=y.user;return{operationType:y.operationType,credential:Xa(y),additionalUserInfo:Is(y),user:zo.getOrCreate(K)}})}function Af(b,g){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,w.Z)(function*(b,g){const y=yield g;return{verificationId:y.verificationId,confirm:A=>so(b,y.confirm(A))}})).apply(this,arguments)}class Su{constructor(g,y){this.resolver=y,this.auth=function oc(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return so(Ja(this.auth),this.resolver.resolveSignIn(g))}}class zo{constructor(g){this._delegate=g,this.multiFactor=function Ku(b){const g=(0,ie.m9)(b);return Bo.has(g)||Bo.set(g,Vo._fromUser(g)),Bo.get(g)}(g)}static getOrCreate(g){return zo.USER_MAP.has(g)||zo.USER_MAP.set(g,new zo(g)),zo.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,w.Z)(function*(){return so(y.auth,kn(y._delegate,g))})()}linkWithPhoneNumber(g,y){var A=this;return(0,w.Z)(function*(){return Af(A.auth,function gu(b,g,y){return wc.apply(this,arguments)}(A._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,w.Z)(function*(){return so(y.auth,function eh(b,g,y){return ra.apply(this,arguments)}(y._delegate,g,Bs))})()}linkWithRedirect(g){var y=this;return(0,w.Z)(function*(){return yield aa(Yt(y.auth)),function Pr(b,g,y){return function cn(b,g,y){return os.apply(this,arguments)}(b,g,y)}(y._delegate,g,Bs)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,w.Z)(function*(){return so(y.auth,Jr(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return Af(this.auth,function Ju(b,g,y){return Mo.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return so(this.auth,function _u(b,g,y){return Vl.apply(this,arguments)}(this._delegate,g,Bs))}reauthenticateWithRedirect(g){var y=this;return(0,w.Z)(function*(){return yield aa(Yt(y.auth)),function fn(b,g,y){return function gn(b,g,y){return En.apply(this,arguments)}(b,g,y)}(y._delegate,g,Bs)})()}sendEmailVerification(g){return function wi(b,g){return Gn.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,w.Z)(function*(){return yield function fo(b,g){return ir.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function $a(b,g){return Uo((0,ie.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function pa(b,g){return Uo((0,ie.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Ma(b,g){return xa.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function io(b,g){return ea.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function Fs(b,g,y){return Zs.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zo.USER_MAP=new WeakMap;const kc=le;let Fc=(()=>{class b{constructor(y,A){if(this.app=y,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=y.options;kc(K,"invalid-api-key",{appName:y.name}),kc(K,"invalid-api-key",{appName:y.name});const oe="undefined"!=typeof window?Bs:void 0;this._delegate=A.initialize({options:{persistence:ah(K,y.name),popupRedirectResolver:oe}}),this._delegate._updateErrorMap(rt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,A){!function Br(b,g,y){const A=Yt(b);le(A._canInitEmulator,A,"emulator-config-failed"),le(/^https?:\/\//.test(g),A,"invalid-emulator-scheme");const K=!!(null==y?void 0:y.disableWarnings),oe=es(g),{host:Ue,port:pt}=function jr(b){const g=es(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!y)return{host:"",port:null};const A=y[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(A);if(K){const oe=K[1];return{host:oe,port:Ki(A.substr(oe.length+1))}}{const[oe,Ue]=A.split(":");return{host:oe,port:Ki(Ue)}}}(g);A.config.emulator={url:`${oe}//${Ue}${null===pt?"":`:${pt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:Ue,port:pt,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function gr(){function b(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,y,A)}applyActionCode(y){return function re(b,g){return Ee.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return Dt(this._delegate,y)}confirmPasswordReset(y,A){return function U(b,g,y){return k.apply(this,arguments)}(this._delegate,y,A)}createUserWithEmailAndPassword(y,A){var K=this;return(0,w.Z)(function*(){return so(K._delegate,function de(b,g,y){return Ce.apply(this,arguments)}(K._delegate,y,A))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function oi(b,g){return Nr.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Wt(b,g){const y=qs.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,w.Z)(function*(){kc(ls(),y._delegate,"operation-not-supported-in-this-environment");const A=yield function Or(b,g){return yn.apply(this,arguments)}(y._delegate,Bs);return A?so(y._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function kp(b,g){Yt(b)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,A,K){const{next:oe,error:Ue,complete:pt}=ql(y,A,K);return this._delegate.onAuthStateChanged(oe,Ue,pt)}onIdTokenChanged(y,A,K){const{next:oe,error:Ue,complete:pt}=ql(y,A,K);return this._delegate.onIdTokenChanged(oe,Ue,pt)}sendSignInLinkToEmail(y,A){return function St(b,g,y){return nn.apply(this,arguments)}(this._delegate,y,A)}sendPasswordResetEmail(y,A){return function ro(b,g,y){return G.apply(this,arguments)}(this._delegate,y,A||void 0)}setPersistence(y){var A=this;return(0,w.Z)(function*(){let K;switch(function Fp(b,g){Ed(Object.values(oa).includes(g),b,"invalid-persistence-type"),(0,ie.b$)()?Ed(g!==oa.SESSION,b,"unsupported-persistence-type"):(0,ie.UG)()?Ed(g===oa.NONE,b,"unsupported-persistence-type"):Tu()?Ed(g===oa.NONE||g===oa.LOCAL&&(0,ie.hl)(),b,"unsupported-persistence-type"):Ed(g===oa.NONE||sh(),b,"unsupported-persistence-type")}(A._delegate,y),y){case oa.SESSION:K=go;break;case oa.LOCAL:K=(yield He(rn)._isAvailable())?rn:za;break;case oa.NONE:K=_n;break;default:return ct("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return so(this._delegate,function Ts(b){return To.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return so(this._delegate,ln(this._delegate,y))}signInWithCustomToken(y){return so(this._delegate,function qi(b,g){return un.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,A){return so(this._delegate,function et(b,g,y){return ln((0,ie.m9)(b),fa.credential(g,y))}(this._delegate,y,A))}signInWithEmailLink(y,A){return so(this._delegate,function Fn(b,g,y){return Un.apply(this,arguments)}(this._delegate,y,A))}signInWithPhoneNumber(y,A){return Af(this._delegate,function Qn(b,g,y){return Aa.apply(this,arguments)}(this._delegate,y,A))}signInWithPopup(y){var A=this;return(0,w.Z)(function*(){return kc(ls(),A._delegate,"operation-not-supported-in-this-environment"),so(A._delegate,function Xd(b,g,y){return ss.apply(this,arguments)}(A._delegate,y,Bs))})()}signInWithRedirect(y){var A=this;return(0,w.Z)(function*(){return kc(ls(),A._delegate,"operation-not-supported-in-this-environment"),yield aa(A._delegate),function qe(b,g,y){return function nt(b,g,y){return Rt.apply(this,arguments)}(b,g,y)}(A._delegate,y,Bs)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function j(b,g){return ne.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=oa,b})();function ql(b,g,y){let A=b;"function"!=typeof b&&({next:A,error:g,complete:y}=b);const K=A;return{next:Ue=>K(Ue&&zo.getOrCreate(Ue)),error:g,complete:y}}function ah(b,g){const y=function wd(b,g){const y=sc();if(!y)return[];const A=xr(ic,b,g);switch(y.getItem(A)){case oa.NONE:return[_n];case oa.LOCAL:return[rn,go];case oa.SESSION:return[go];default:return[]}}(b,g);if("undefined"!=typeof self&&!y.includes(rn)&&y.push(rn),"undefined"!=typeof window)for(const A of[za,go])y.includes(A)||y.push(A);return y.includes(_n)||y.push(_n),y}class xf{constructor(){this.providerId="phone",this._delegate=new jt(Ja(m.Z.auth()))}static credential(g,y){return jt.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}xf.PHONE_SIGN_IN_METHOD=jt.PHONE_SIGN_IN_METHOD,xf.PROVIDER_ID=jt.PROVIDER_ID;const Ui=le;class pl{constructor(g,y,A=m.Z.app()){var K;Ui(null===(K=A.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Qs(g,y,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ka(b){b.INTERNAL.registerComponent(new Ve.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),A=g.getProvider("auth");return new Fc(y,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:fa,FacebookAuthProvider:Ps,GithubAuthProvider:Os,GoogleAuthProvider:Fo,OAuthProvider:Cs,SAMLAuthProvider:Gi,PhoneAuthProvider:xf,PhoneMultiFactorGenerator:rm,RecaptchaVerifier:pl,TwitterAuthProvider:Co,Auth:Fc,AuthCredential:$i,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.2.15")}(m.Z)},8306:(Ut,We,$)=>{$.d(We,{y:()=>pe});var w=$(930),m=$(727),ie=$(8822),Fe=$(4671);var Ve=$(2416),ke=$(576),Ge=$(2806);let pe=(()=>{class Ke{constructor(ht){ht&&(this._subscribe=ht)}lift(ht){const Xe=new Ke;return Xe.source=this,Xe.operator=ht,Xe}subscribe(ht,Xe,ot){const Oe=function Tt(Ke){return Ke&&Ke instanceof w.Lv||function Pe(Ke){return Ke&&(0,ke.m)(Ke.next)&&(0,ke.m)(Ke.error)&&(0,ke.m)(Ke.complete)}(Ke)&&(0,m.Nn)(Ke)}(ht)?ht:new w.Hp(ht,Xe,ot);return(0,Ge.x)(()=>{const{operator:Lt,source:ct}=this;Oe.add(Lt?Lt.call(Oe,ct):ct?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(ht){try{return this._subscribe(ht)}catch(Xe){ht.error(Xe)}}forEach(ht,Xe){return new(Xe=ue(Xe))((ot,Oe)=>{const Lt=new w.Hp({next:ct=>{try{ht(ct)}catch(it){Oe(it),Lt.unsubscribe()}},error:Oe,complete:ot});this.subscribe(Lt)})}_subscribe(ht){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(ht)}[ie.L](){return this}pipe(...ht){return function De(Ke){return 0===Ke.length?Fe.y:1===Ke.length?Ke[0]:function(ht){return Ke.reduce((Xe,ot)=>ot(Xe),ht)}}(ht)(this)}toPromise(ht){return new(ht=ue(ht))((Xe,ot)=>{let Oe;this.subscribe(Lt=>Oe=Lt,Lt=>ot(Lt),()=>Xe(Oe))})}}return Ke.create=rt=>new Ke(rt),Ke})();function ue(Ke){var rt;return null!==(rt=null!=Ke?Ke:Ve.v.Promise)&&void 0!==rt?rt:Promise}},7579:(Ut,We,$)=>{$.d(We,{x:()=>Ve});var w=$(8306),m=$(727);const Fe=(0,$(3888).d)(Ge=>function(){Ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var z=$(8737),De=$(2806);let Ve=(()=>{class Ge extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const Pe=new ke(this,this);return Pe.operator=ue,Pe}_throwIfClosed(){if(this.closed)throw new Fe}next(ue){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Pe of this.currentObservers)Pe.next(ue)}})}error(ue){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().error(ue)}})}complete(){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:Pe,isStopped:Tt,observers:Ke}=this;return Pe||Tt?m.Lc:(this.currentObservers=null,Ke.push(ue),new m.w0(()=>{this.currentObservers=null,(0,z.P)(Ke,ue)}))}_checkFinalizedStatuses(ue){const{hasError:Pe,thrownError:Tt,isStopped:Ke}=this;Pe?ue.error(Tt):Ke&&ue.complete()}asObservable(){const ue=new w.y;return ue.source=this,ue}}return Ge.create=(pe,ue)=>new ke(pe,ue),Ge})();class ke extends Ve{constructor(pe,ue){super(),this.destination=pe,this.source=ue}next(pe){var ue,Pe;null===(Pe=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===Pe||Pe.call(ue,pe)}error(pe){var ue,Pe;null===(Pe=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===Pe||Pe.call(ue,pe)}complete(){var pe,ue;null===(ue=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===ue||ue.call(pe)}_subscribe(pe){var ue,Pe;return null!==(Pe=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(pe))&&void 0!==Pe?Pe:m.Lc}}},930:(Ut,We,$)=>{$.d(We,{Hp:()=>ht,Lv:()=>Pe});var w=$(576),m=$(727),ie=$(2416),Fe=$(7849),z=$(5032);const De=Ge("C",void 0,void 0);function Ge(ct,it,Qe){return{kind:ct,value:it,error:Qe}}var pe=$(3410),ue=$(2806);class Pe extends m.w0{constructor(it){super(),this.isStopped=!1,it?(this.destination=it,(0,m.Nn)(it)&&it.add(this)):this.destination=Lt}static create(it,Qe,ze){return new ht(it,Qe,ze)}next(it){this.isStopped?Oe(function ke(ct){return Ge("N",ct,void 0)}(it),this):this._next(it)}error(it){this.isStopped?Oe(function Ve(ct){return Ge("E",void 0,ct)}(it),this):(this.isStopped=!0,this._error(it))}complete(){this.isStopped?Oe(De,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(it){this.destination.next(it)}_error(it){try{this.destination.error(it)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Tt=Function.prototype.bind;function Ke(ct,it){return Tt.call(ct,it)}class rt{constructor(it){this.partialObserver=it}next(it){const{partialObserver:Qe}=this;if(Qe.next)try{Qe.next(it)}catch(ze){Xe(ze)}}error(it){const{partialObserver:Qe}=this;if(Qe.error)try{Qe.error(it)}catch(ze){Xe(ze)}else Xe(it)}complete(){const{partialObserver:it}=this;if(it.complete)try{it.complete()}catch(Qe){Xe(Qe)}}}class ht extends Pe{constructor(it,Qe,ze){let It;if(super(),(0,w.m)(it)||!it)It={next:null!=it?it:void 0,error:null!=Qe?Qe:void 0,complete:null!=ze?ze:void 0};else{let le;this&&ie.v.useDeprecatedNextContext?(le=Object.create(it),le.unsubscribe=()=>this.unsubscribe(),It={next:it.next&&Ke(it.next,le),error:it.error&&Ke(it.error,le),complete:it.complete&&Ke(it.complete,le)}):It=it}this.destination=new rt(It)}}function Xe(ct){ie.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(ct):(0,Fe.h)(ct)}function Oe(ct,it){const{onStoppedNotification:Qe}=ie.v;Qe&&pe.z.setTimeout(()=>Qe(ct,it))}const Lt={closed:!0,next:z.Z,error:function ot(ct){throw ct},complete:z.Z}},727:(Ut,We,$)=>{$.d(We,{Lc:()=>De,w0:()=>z,Nn:()=>Ve});var w=$(576);const ie=(0,$(3888).d)(Ge=>function(ue){Ge(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((Pe,Tt)=>`${Tt+1}) ${Pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var Fe=$(8737);class z{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const Ke of ue)Ke.remove(this);else ue.remove(this);const{initialTeardown:Pe}=this;if((0,w.m)(Pe))try{Pe()}catch(Ke){pe=Ke instanceof ie?Ke.errors:[Ke]}const{_finalizers:Tt}=this;if(Tt){this._finalizers=null;for(const Ke of Tt)try{ke(Ke)}catch(rt){pe=null!=pe?pe:[],rt instanceof ie?pe=[...pe,...rt.errors]:pe.push(rt)}}if(pe)throw new ie(pe)}}add(pe){var ue;if(pe&&pe!==this)if(this.closed)ke(pe);else{if(pe instanceof z){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(pe)}}_hasParent(pe){const{_parentage:ue}=this;return ue===pe||Array.isArray(ue)&&ue.includes(pe)}_addParent(pe){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(pe),ue):ue?[ue,pe]:pe}_removeParent(pe){const{_parentage:ue}=this;ue===pe?this._parentage=null:Array.isArray(ue)&&(0,Fe.P)(ue,pe)}remove(pe){const{_finalizers:ue}=this;ue&&(0,Fe.P)(ue,pe),pe instanceof z&&pe._removeParent(this)}}z.EMPTY=(()=>{const Ge=new z;return Ge.closed=!0,Ge})();const De=z.EMPTY;function Ve(Ge){return Ge instanceof z||Ge&&"closed"in Ge&&(0,w.m)(Ge.remove)&&(0,w.m)(Ge.add)&&(0,w.m)(Ge.unsubscribe)}function ke(Ge){(0,w.m)(Ge)?Ge():Ge.unsubscribe()}},2416:(Ut,We,$)=>{$.d(We,{v:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Ut,We,$)=>{$.d(We,{z:()=>z});var w=$(8189),ie=$(7669),Fe=$(8996);function z(...De){return function m(){return(0,w.J)(1)}()((0,Fe.D)(De,(0,ie.yG)(De)))}},515:(Ut,We,$)=>{$.d(We,{E:()=>m});const m=new($(8306).y)(z=>z.complete())},8996:(Ut,We,$)=>{$.d(We,{D:()=>it});var w=$(8421),m=$(5363),ie=$(9468),De=$(8306),ke=$(2202),Ge=$(576),pe=$(9672);function Pe(Qe,ze){if(!Qe)throw new Error("Iterable cannot be null");return new De.y(It=>{(0,pe.f)(It,ze,()=>{const le=Qe[Symbol.asyncIterator]();(0,pe.f)(It,ze,()=>{le.next().then(ut=>{ut.done?It.complete():It.next(ut.value)})},0,!0)})})}var Tt=$(3670),Ke=$(8239),rt=$(1144),ht=$(6495),Xe=$(2206),ot=$(4532),Oe=$(3260);function it(Qe,ze){return ze?function ct(Qe,ze){if(null!=Qe){if((0,Tt.c)(Qe))return function Fe(Qe,ze){return(0,w.Xf)(Qe).pipe((0,ie.R)(ze),(0,m.Q)(ze))}(Qe,ze);if((0,rt.z)(Qe))return function Ve(Qe,ze){return new De.y(It=>{let le=0;return ze.schedule(function(){le===Qe.length?It.complete():(It.next(Qe[le++]),It.closed||this.schedule())})})}(Qe,ze);if((0,Ke.t)(Qe))return function z(Qe,ze){return(0,w.Xf)(Qe).pipe((0,ie.R)(ze),(0,m.Q)(ze))}(Qe,ze);if((0,Xe.D)(Qe))return Pe(Qe,ze);if((0,ht.T)(Qe))return function ue(Qe,ze){return new De.y(It=>{let le;return(0,pe.f)(It,ze,()=>{le=Qe[ke.h](),(0,pe.f)(It,ze,()=>{let ut,me;try{({value:ut,done:me}=le.next())}catch(je){return void It.error(je)}me?It.complete():It.next(ut)},0,!0)}),()=>(0,Ge.m)(null==le?void 0:le.return)&&le.return()})}(Qe,ze);if((0,Oe.L)(Qe))return function Lt(Qe,ze){return Pe((0,Oe.Q)(Qe),ze)}(Qe,ze)}throw(0,ot.z)(Qe)}(Qe,ze):(0,w.Xf)(Qe)}},8421:(Ut,We,$)=>{$.d(We,{Xf:()=>Tt});var w=$(655),m=$(1144),ie=$(8239),Fe=$(8306),z=$(3670),De=$(2206),Ve=$(4532),ke=$(6495),Ge=$(3260),pe=$(576),ue=$(7849),Pe=$(8822);function Tt(ct){if(ct instanceof Fe.y)return ct;if(null!=ct){if((0,z.c)(ct))return function Ke(ct){return new Fe.y(it=>{const Qe=ct[Pe.L]();if((0,pe.m)(Qe.subscribe))return Qe.subscribe(it);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ct);if((0,m.z)(ct))return function rt(ct){return new Fe.y(it=>{for(let Qe=0;Qe<ct.length&&!it.closed;Qe++)it.next(ct[Qe]);it.complete()})}(ct);if((0,ie.t)(ct))return function ht(ct){return new Fe.y(it=>{ct.then(Qe=>{it.closed||(it.next(Qe),it.complete())},Qe=>it.error(Qe)).then(null,ue.h)})}(ct);if((0,De.D)(ct))return ot(ct);if((0,ke.T)(ct))return function Xe(ct){return new Fe.y(it=>{for(const Qe of ct)if(it.next(Qe),it.closed)return;it.complete()})}(ct);if((0,Ge.L)(ct))return function Oe(ct){return ot((0,Ge.Q)(ct))}(ct)}throw(0,Ve.z)(ct)}function ot(ct){return new Fe.y(it=>{(function Lt(ct,it){var Qe,ze,It,le;return(0,w.mG)(this,void 0,void 0,function*(){try{for(Qe=(0,w.KL)(ct);!(ze=yield Qe.next()).done;)if(it.next(ze.value),it.closed)return}catch(ut){It={error:ut}}finally{try{ze&&!ze.done&&(le=Qe.return)&&(yield le.call(Qe))}finally{if(It)throw It.error}}it.complete()})})(ct,it).catch(Qe=>it.error(Qe))})}},6451:(Ut,We,$)=>{$.d(We,{T:()=>De});var w=$(8189),m=$(8421),ie=$(515),Fe=$(7669),z=$(8996);function De(...Ve){const ke=(0,Fe.yG)(Ve),Ge=(0,Fe._6)(Ve,1/0),pe=Ve;return pe.length?1===pe.length?(0,m.Xf)(pe[0]):(0,w.J)(Ge)((0,z.D)(pe,ke)):ie.E}},9646:(Ut,We,$)=>{$.d(We,{of:()=>ie});var w=$(7669),m=$(8996);function ie(...Fe){const z=(0,w.yG)(Fe);return(0,m.D)(Fe,z)}},5403:(Ut,We,$)=>{$.d(We,{x:()=>m});var w=$(930);function m(Fe,z,De,Ve,ke){return new ie(Fe,z,De,Ve,ke)}class ie extends w.Lv{constructor(z,De,Ve,ke,Ge,pe){super(z),this.onFinalize=Ge,this.shouldUnsubscribe=pe,this._next=De?function(ue){try{De(ue)}catch(Pe){z.error(Pe)}}:super._next,this._error=ke?function(ue){try{ke(ue)}catch(Pe){z.error(Pe)}finally{this.unsubscribe()}}:super._error,this._complete=Ve?function(){try{Ve()}catch(ue){z.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var z;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:De}=this;super.unsubscribe(),!De&&(null===(z=this.onFinalize)||void 0===z||z.call(this))}}}},4351:(Ut,We,$)=>{$.d(We,{b:()=>ie});var w=$(5577),m=$(576);function ie(Fe,z){return(0,m.m)(z)?(0,w.z)(Fe,z,1):(0,w.z)(Fe,1)}},6590:(Ut,We,$)=>{$.d(We,{d:()=>ie});var w=$(4482),m=$(5403);function ie(Fe){return(0,w.e)((z,De)=>{let Ve=!1;z.subscribe((0,m.x)(De,ke=>{Ve=!0,De.next(ke)},()=>{Ve||De.next(Fe),De.complete()}))})}},1884:(Ut,We,$)=>{$.d(We,{x:()=>Fe});var w=$(4671),m=$(4482),ie=$(5403);function Fe(De,Ve=w.y){return De=null!=De?De:z,(0,m.e)((ke,Ge)=>{let pe,ue=!0;ke.subscribe((0,ie.x)(Ge,Pe=>{const Tt=Ve(Pe);(ue||!De(pe,Tt))&&(ue=!1,pe=Tt,Ge.next(Pe))}))})}function z(De,Ve){return De===Ve}},9300:(Ut,We,$)=>{$.d(We,{h:()=>ie});var w=$(4482),m=$(5403);function ie(Fe,z){return(0,w.e)((De,Ve)=>{let ke=0;De.subscribe((0,m.x)(Ve,Ge=>Fe.call(z,Ge,ke++)&&Ve.next(Ge)))})}},8746:(Ut,We,$)=>{$.d(We,{x:()=>m});var w=$(4482);function m(ie){return(0,w.e)((Fe,z)=>{try{Fe.subscribe(z)}finally{z.add(ie)}})}},590:(Ut,We,$)=>{$.d(We,{P:()=>Ve});var w=$(6805),m=$(9300),ie=$(5698),Fe=$(6590),z=$(8068),De=$(4671);function Ve(ke,Ge){const pe=arguments.length>=2;return ue=>ue.pipe(ke?(0,m.h)((Pe,Tt)=>ke(Pe,Tt,ue)):De.y,(0,ie.q)(1),pe?(0,Fe.d)(Ge):(0,z.T)(()=>new w.K))}},4004:(Ut,We,$)=>{$.d(We,{U:()=>ie});var w=$(4482),m=$(5403);function ie(Fe,z){return(0,w.e)((De,Ve)=>{let ke=0;De.subscribe((0,m.x)(Ve,Ge=>{Ve.next(Fe.call(z,Ge,ke++))}))})}},8189:(Ut,We,$)=>{$.d(We,{J:()=>ie});var w=$(5577),m=$(4671);function ie(Fe=1/0){return(0,w.z)(m.y,Fe)}},5577:(Ut,We,$)=>{$.d(We,{z:()=>ke});var w=$(4004),m=$(8421),ie=$(4482),Fe=$(9672),z=$(5403),Ve=$(576);function ke(Ge,pe,ue=1/0){return(0,Ve.m)(pe)?ke((Pe,Tt)=>(0,w.U)((Ke,rt)=>pe(Pe,Ke,Tt,rt))((0,m.Xf)(Ge(Pe,Tt))),ue):("number"==typeof pe&&(ue=pe),(0,ie.e)((Pe,Tt)=>function De(Ge,pe,ue,Pe,Tt,Ke,rt,ht){const Xe=[];let ot=0,Oe=0,Lt=!1;const ct=()=>{Lt&&!Xe.length&&!ot&&pe.complete()},it=ze=>ot<Pe?Qe(ze):Xe.push(ze),Qe=ze=>{Ke&&pe.next(ze),ot++;let It=!1;(0,m.Xf)(ue(ze,Oe++)).subscribe((0,z.x)(pe,le=>{null==Tt||Tt(le),Ke?it(le):pe.next(le)},()=>{It=!0},void 0,()=>{if(It)try{for(ot--;Xe.length&&ot<Pe;){const le=Xe.shift();rt?(0,Fe.f)(pe,rt,()=>Qe(le)):Qe(le)}ct()}catch(le){pe.error(le)}}))};return Ge.subscribe((0,z.x)(pe,it,()=>{Lt=!0,ct()})),()=>{null==ht||ht()}}(Pe,Tt,Ge,ue)))}},5363:(Ut,We,$)=>{$.d(We,{Q:()=>Fe});var w=$(9672),m=$(4482),ie=$(5403);function Fe(z,De=0){return(0,m.e)((Ve,ke)=>{Ve.subscribe((0,ie.x)(ke,Ge=>(0,w.f)(ke,z,()=>ke.next(Ge),De),()=>(0,w.f)(ke,z,()=>ke.complete(),De),Ge=>(0,w.f)(ke,z,()=>ke.error(Ge),De)))})}},5026:(Ut,We,$)=>{$.d(We,{R:()=>Fe});var w=$(4482),m=$(5403);function ie(z,De,Ve,ke,Ge){return(pe,ue)=>{let Pe=Ve,Tt=De,Ke=0;pe.subscribe((0,m.x)(ue,rt=>{const ht=Ke++;Tt=Pe?z(Tt,rt,ht):(Pe=!0,rt),ke&&ue.next(Tt)},Ge&&(()=>{Pe&&ue.next(Tt),ue.complete()})))}}function Fe(z,De){return(0,w.e)(ie(z,De,arguments.length>=2,!0))}},3099:(Ut,We,$)=>{$.d(We,{B:()=>De});var w=$(8996),m=$(5698),ie=$(7579),Fe=$(930),z=$(4482);function De(ke={}){const{connector:Ge=(()=>new ie.x),resetOnError:pe=!0,resetOnComplete:ue=!0,resetOnRefCountZero:Pe=!0}=ke;return Tt=>{let Ke=null,rt=null,ht=null,Xe=0,ot=!1,Oe=!1;const Lt=()=>{null==rt||rt.unsubscribe(),rt=null},ct=()=>{Lt(),Ke=ht=null,ot=Oe=!1},it=()=>{const Qe=Ke;ct(),null==Qe||Qe.unsubscribe()};return(0,z.e)((Qe,ze)=>{Xe++,!Oe&&!ot&&Lt();const It=ht=null!=ht?ht:Ge();ze.add(()=>{Xe--,0===Xe&&!Oe&&!ot&&(rt=Ve(it,Pe))}),It.subscribe(ze),Ke||(Ke=new Fe.Hp({next:le=>It.next(le),error:le=>{Oe=!0,Lt(),rt=Ve(ct,pe,le),It.error(le)},complete:()=>{ot=!0,Lt(),rt=Ve(ct,ue),It.complete()}}),(0,w.D)(Qe).subscribe(Ke))})(Tt)}}function Ve(ke,Ge,...pe){return!0===Ge?(ke(),null):!1===Ge?null:Ge(...pe).pipe((0,m.q)(1)).subscribe(()=>ke())}},8675:(Ut,We,$)=>{$.d(We,{O:()=>Fe});var w=$(7272),m=$(7669),ie=$(4482);function Fe(...z){const De=(0,m.yG)(z);return(0,ie.e)((Ve,ke)=>{(De?(0,w.z)(z,Ve,De):(0,w.z)(z,Ve)).subscribe(ke)})}},9468:(Ut,We,$)=>{$.d(We,{R:()=>m});var w=$(4482);function m(ie,Fe=0){return(0,w.e)((z,De)=>{De.add(ie.schedule(()=>z.subscribe(De),Fe))})}},3900:(Ut,We,$)=>{$.d(We,{w:()=>Fe});var w=$(8421),m=$(4482),ie=$(5403);function Fe(z,De){return(0,m.e)((Ve,ke)=>{let Ge=null,pe=0,ue=!1;const Pe=()=>ue&&!Ge&&ke.complete();Ve.subscribe((0,ie.x)(ke,Tt=>{null==Ge||Ge.unsubscribe();let Ke=0;const rt=pe++;(0,w.Xf)(z(Tt,rt)).subscribe(Ge=(0,ie.x)(ke,ht=>ke.next(De?De(Tt,ht,rt,Ke++):ht),()=>{Ge=null,Pe()}))},()=>{ue=!0,Pe()}))})}},5698:(Ut,We,$)=>{$.d(We,{q:()=>Fe});var w=$(515),m=$(4482),ie=$(5403);function Fe(z){return z<=0?()=>w.E:(0,m.e)((De,Ve)=>{let ke=0;De.subscribe((0,ie.x)(Ve,Ge=>{++ke<=z&&(Ve.next(Ge),z<=ke&&Ve.complete())}))})}},8505:(Ut,We,$)=>{$.d(We,{b:()=>z});var w=$(576),m=$(4482),ie=$(5403),Fe=$(4671);function z(De,Ve,ke){const Ge=(0,w.m)(De)||Ve||ke?{next:De,error:Ve,complete:ke}:De;return Ge?(0,m.e)((pe,ue)=>{var Pe;null===(Pe=Ge.subscribe)||void 0===Pe||Pe.call(Ge);let Tt=!0;pe.subscribe((0,ie.x)(ue,Ke=>{var rt;null===(rt=Ge.next)||void 0===rt||rt.call(Ge,Ke),ue.next(Ke)},()=>{var Ke;Tt=!1,null===(Ke=Ge.complete)||void 0===Ke||Ke.call(Ge),ue.complete()},Ke=>{var rt;Tt=!1,null===(rt=Ge.error)||void 0===rt||rt.call(Ge,Ke),ue.error(Ke)},()=>{var Ke,rt;Tt&&(null===(Ke=Ge.unsubscribe)||void 0===Ke||Ke.call(Ge)),null===(rt=Ge.finalize)||void 0===rt||rt.call(Ge)}))}):Fe.y}},8068:(Ut,We,$)=>{$.d(We,{T:()=>Fe});var w=$(6805),m=$(4482),ie=$(5403);function Fe(De=z){return(0,m.e)((Ve,ke)=>{let Ge=!1;Ve.subscribe((0,ie.x)(ke,pe=>{Ge=!0,ke.next(pe)},()=>Ge?ke.complete():ke.error(De())))})}function z(){return new w.K}},4408:(Ut,We,$)=>{$.d(We,{o:()=>z});var w=$(727);class m extends w.w0{constructor(Ve,ke){super()}schedule(Ve,ke=0){return this}}const ie={setInterval(De,Ve,...ke){const{delegate:Ge}=ie;return(null==Ge?void 0:Ge.setInterval)?Ge.setInterval(De,Ve,...ke):setInterval(De,Ve,...ke)},clearInterval(De){const{delegate:Ve}=ie;return((null==Ve?void 0:Ve.clearInterval)||clearInterval)(De)},delegate:void 0};var Fe=$(8737);class z extends m{constructor(Ve,ke){super(Ve,ke),this.scheduler=Ve,this.work=ke,this.pending=!1}schedule(Ve,ke=0){if(this.closed)return this;this.state=Ve;const Ge=this.id,pe=this.scheduler;return null!=Ge&&(this.id=this.recycleAsyncId(pe,Ge,ke)),this.pending=!0,this.delay=ke,this.id=this.id||this.requestAsyncId(pe,this.id,ke),this}requestAsyncId(Ve,ke,Ge=0){return ie.setInterval(Ve.flush.bind(Ve,this),Ge)}recycleAsyncId(Ve,ke,Ge=0){if(null!=Ge&&this.delay===Ge&&!1===this.pending)return ke;ie.clearInterval(ke)}execute(Ve,ke){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ge=this._execute(Ve,ke);if(Ge)return Ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ve,ke){let pe,Ge=!1;try{this.work(Ve)}catch(ue){Ge=!0,pe=ue||new Error("Scheduled action threw falsy error")}if(Ge)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:Ve,scheduler:ke}=this,{actions:Ge}=ke;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Fe.P)(Ge,this),null!=Ve&&(this.id=this.recycleAsyncId(ke,Ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ut,We,$)=>{$.d(We,{v:()=>ie});var w=$(6063);class m{constructor(z,De=m.now){this.schedulerActionCtor=z,this.now=De}schedule(z,De=0,Ve){return new this.schedulerActionCtor(this,z).schedule(Ve,De)}}m.now=w.l.now;class ie extends m{constructor(z,De=m.now){super(z,De),this.actions=[],this._active=!1,this._scheduled=void 0}flush(z){const{actions:De}=this;if(this._active)return void De.push(z);let Ve;this._active=!0;do{if(Ve=z.execute(z.state,z.delay))break}while(z=De.shift());if(this._active=!1,Ve){for(;z=De.shift();)z.unsubscribe();throw Ve}}}},4986:(Ut,We,$)=>{$.d(We,{z:()=>ie});var w=$(4408);const ie=new($(7565).v)(w.o)},6063:(Ut,We,$)=>{$.d(We,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},3410:(Ut,We,$)=>{$.d(We,{z:()=>w});const w={setTimeout(m,ie,...Fe){const{delegate:z}=w;return(null==z?void 0:z.setTimeout)?z.setTimeout(m,ie,...Fe):setTimeout(m,ie,...Fe)},clearTimeout(m){const{delegate:ie}=w;return((null==ie?void 0:ie.clearTimeout)||clearTimeout)(m)},delegate:void 0}},2202:(Ut,We,$)=>{$.d(We,{h:()=>m});const m=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ut,We,$)=>{$.d(We,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Ut,We,$)=>{$.d(We,{K:()=>m});const m=(0,$(3888).d)(ie=>function(){ie(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Ut,We,$)=>{$.d(We,{_6:()=>De,jO:()=>Fe,yG:()=>z});var w=$(576);function ie(Ve){return Ve[Ve.length-1]}function Fe(Ve){return(0,w.m)(ie(Ve))?Ve.pop():void 0}function z(Ve){return function m(Ve){return Ve&&(0,w.m)(Ve.schedule)}(ie(Ve))?Ve.pop():void 0}function De(Ve,ke){return"number"==typeof ie(Ve)?Ve.pop():ke}},4742:(Ut,We,$)=>{$.d(We,{D:()=>z});const{isArray:w}=Array,{getPrototypeOf:m,prototype:ie,keys:Fe}=Object;function z(Ve){if(1===Ve.length){const ke=Ve[0];if(w(ke))return{args:ke,keys:null};if(function De(Ve){return Ve&&"object"==typeof Ve&&m(Ve)===ie}(ke)){const Ge=Fe(ke);return{args:Ge.map(pe=>ke[pe]),keys:Ge}}}return{args:Ve,keys:null}}},8737:(Ut,We,$)=>{function w(m,ie){if(m){const Fe=m.indexOf(ie);0<=Fe&&m.splice(Fe,1)}}$.d(We,{P:()=>w})},3888:(Ut,We,$)=>{function w(m){const Fe=m(z=>{Error.call(z),z.stack=(new Error).stack});return Fe.prototype=Object.create(Error.prototype),Fe.prototype.constructor=Fe,Fe}$.d(We,{d:()=>w})},1810:(Ut,We,$)=>{function w(m,ie){return m.reduce((Fe,z,De)=>(Fe[z]=ie[De],Fe),{})}$.d(We,{n:()=>w})},2806:(Ut,We,$)=>{$.d(We,{O:()=>Fe,x:()=>ie});var w=$(2416);let m=null;function ie(z){if(w.v.useDeprecatedSynchronousErrorHandling){const De=!m;if(De&&(m={errorThrown:!1,error:null}),z(),De){const{errorThrown:Ve,error:ke}=m;if(m=null,Ve)throw ke}}else z()}function Fe(z){w.v.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=z)}},9672:(Ut,We,$)=>{function w(m,ie,Fe,z=0,De=!1){const Ve=ie.schedule(function(){Fe(),De?m.add(this.schedule(null,z)):this.unsubscribe()},z);if(m.add(Ve),!De)return Ve}$.d(We,{f:()=>w})},4671:(Ut,We,$)=>{function w(m){return m}$.d(We,{y:()=>w})},1144:(Ut,We,$)=>{$.d(We,{z:()=>w});const w=m=>m&&"number"==typeof m.length&&"function"!=typeof m},2206:(Ut,We,$)=>{$.d(We,{D:()=>m});var w=$(576);function m(ie){return Symbol.asyncIterator&&(0,w.m)(null==ie?void 0:ie[Symbol.asyncIterator])}},576:(Ut,We,$)=>{function w(m){return"function"==typeof m}$.d(We,{m:()=>w})},3670:(Ut,We,$)=>{$.d(We,{c:()=>ie});var w=$(8822),m=$(576);function ie(Fe){return(0,m.m)(Fe[w.L])}},6495:(Ut,We,$)=>{$.d(We,{T:()=>ie});var w=$(2202),m=$(576);function ie(Fe){return(0,m.m)(null==Fe?void 0:Fe[w.h])}},8239:(Ut,We,$)=>{$.d(We,{t:()=>m});var w=$(576);function m(ie){return(0,w.m)(null==ie?void 0:ie.then)}},3260:(Ut,We,$)=>{$.d(We,{L:()=>Fe,Q:()=>ie});var w=$(655),m=$(576);function ie(z){return(0,w.FC)(this,arguments,function*(){const Ve=z.getReader();try{for(;;){const{value:ke,done:Ge}=yield(0,w.qq)(Ve.read());if(Ge)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(ke)}}finally{Ve.releaseLock()}})}function Fe(z){return(0,m.m)(null==z?void 0:z.getReader)}},4482:(Ut,We,$)=>{$.d(We,{A:()=>m,e:()=>ie});var w=$(576);function m(Fe){return(0,w.m)(null==Fe?void 0:Fe.lift)}function ie(Fe){return z=>{if(m(z))return z.lift(function(De){try{return Fe(De,this)}catch(Ve){this.error(Ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Ut,We,$)=>{$.d(We,{Z:()=>Fe});var w=$(4004);const{isArray:m}=Array;function Fe(z){return(0,w.U)(De=>function ie(z,De){return m(De)?z(...De):z(De)}(z,De))}},5032:(Ut,We,$)=>{function w(){}$.d(We,{Z:()=>w})},7849:(Ut,We,$)=>{$.d(We,{h:()=>ie});var w=$(2416),m=$(3410);function ie(Fe){m.z.setTimeout(()=>{const{onUnhandledError:z}=w.v;if(!z)throw Fe;z(Fe)})}},4532:(Ut,We,$)=>{function w(m){return new TypeError(`You provided ${null!==m&&"object"==typeof m?"an invalid object":`'${m}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(We,{z:()=>w})},655:(Ut,We,$)=>{function Fe(me,je){var He={};for(var tt in me)Object.prototype.hasOwnProperty.call(me,tt)&&je.indexOf(tt)<0&&(He[tt]=me[tt]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(tt=Object.getOwnPropertySymbols(me);Me<tt.length;Me++)je.indexOf(tt[Me])<0&&Object.prototype.propertyIsEnumerable.call(me,tt[Me])&&(He[tt[Me]]=me[tt[Me]])}return He}function ke(me,je,He,tt){return new(He||(He=Promise))(function(mt,Le){function ft(dn){try{lt(tt.next(dn))}catch(Kt){Le(Kt)}}function Ot(dn){try{lt(tt.throw(dn))}catch(Kt){Le(Kt)}}function lt(dn){dn.done?mt(dn.value):function Me(mt){return mt instanceof He?mt:new He(function(Le){Le(mt)})}(dn.value).then(ft,Ot)}lt((tt=tt.apply(me,je||[])).next())})}function Xe(me){return this instanceof Xe?(this.v=me,this):new Xe(me)}function ot(me,je,He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,tt=He.apply(me,je||[]),mt=[];return Me={},Le("next"),Le("throw"),Le("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function Le(qt){tt[qt]&&(Me[qt]=function(Ht){return new Promise(function(mn,wn){mt.push([qt,Ht,mn,wn])>1||ft(qt,Ht)})})}function ft(qt,Ht){try{!function Ot(qt){qt.value instanceof Xe?Promise.resolve(qt.value.v).then(lt,dn):Kt(mt[0][2],qt)}(tt[qt](Ht))}catch(mn){Kt(mt[0][3],mn)}}function lt(qt){ft("next",qt)}function dn(qt){ft("throw",qt)}function Kt(qt,Ht){qt(Ht),mt.shift(),mt.length&&ft(mt[0][0],mt[0][1])}}function Lt(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,je=me[Symbol.asyncIterator];return je?je.call(me):(me=function Pe(me){var je="function"==typeof Symbol&&Symbol.iterator,He=je&&me[je],tt=0;if(He)return He.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&tt>=me.length&&(me=void 0),{value:me&&me[tt++],done:!me}}};throw new TypeError(je?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),He={},tt("next"),tt("throw"),tt("return"),He[Symbol.asyncIterator]=function(){return this},He);function tt(mt){He[mt]=me[mt]&&function(Le){return new Promise(function(ft,Ot){!function Me(mt,Le,ft,Ot){Promise.resolve(Ot).then(function(lt){mt({value:lt,done:ft})},Le)}(ft,Ot,(Le=me[mt](Le)).done,Le.value)})}}}$.d(We,{FC:()=>ot,KL:()=>Lt,_T:()=>Fe,mG:()=>ke,qq:()=>Xe})},9808:(Ut,We,$)=>{$.d(We,{Do:()=>ct,EM:()=>To,HT:()=>z,JF:()=>ir,K0:()=>Ve,Mx:()=>Yi,O5:()=>Yr,Ov:()=>Je,PC:()=>Es,PM:()=>Ws,S$:()=>Xe,V_:()=>pe,Ye:()=>it,b0:()=>Lt,bD:()=>yi,ez:()=>ba,lw:()=>ke,mr:()=>Oe,q:()=>ie,sg:()=>Wr,w_:()=>De});var w=$(5e3);let m=null;function ie(){return m}function z(B){m||(m=B)}class De{}const Ve=new w.OlP("DocumentToken");let ke=(()=>{class B{historyGo(V){throw new Error("Not implemented")}}return B.\u0275fac=function(V){return new(V||B)},B.\u0275prov=w.Yz7({token:B,factory:function(){return function Ge(){return(0,w.LFG)(ue)}()},providedIn:"platform"}),B})();const pe=new w.OlP("Location Initialized");let ue=(()=>{class B extends ke{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ie().getBaseHref(this._doc)}onPopState(V){const ae=ie().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("popstate",V,!1),()=>ae.removeEventListener("popstate",V)}onHashChange(V){const ae=ie().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("hashchange",V,!1),()=>ae.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,ae,ve){Pe()?this._history.pushState(V,ae,ve):this.location.hash=ve}replaceState(V,ae,ve){Pe()?this._history.replaceState(V,ae,ve):this.location.hash=ve}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return B.\u0275fac=function(V){return new(V||B)(w.LFG(Ve))},B.\u0275prov=w.Yz7({token:B,factory:function(){return function Tt(){return new ue((0,w.LFG)(Ve))}()},providedIn:"platform"}),B})();function Pe(){return!!window.history.pushState}function Ke(B,X){if(0==B.length)return X;if(0==X.length)return B;let V=0;return B.endsWith("/")&&V++,X.startsWith("/")&&V++,2==V?B+X.substring(1):1==V?B+X:B+"/"+X}function rt(B){const X=B.match(/#|\?|$/),V=X&&X.index||B.length;return B.slice(0,V-("/"===B[V-1]?1:0))+B.slice(V)}function ht(B){return B&&"?"!==B[0]?"?"+B:B}let Xe=(()=>{class B{historyGo(V){throw new Error("Not implemented")}}return B.\u0275fac=function(V){return new(V||B)},B.\u0275prov=w.Yz7({token:B,factory:function(){return function ot(B){const X=(0,w.LFG)(Ve).location;return new Lt((0,w.LFG)(ke),X&&X.origin||"")}()},providedIn:"root"}),B})();const Oe=new w.OlP("appBaseHref");let Lt=(()=>{class B extends Xe{constructor(V,ae){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==ae&&(ae=this._platformLocation.getBaseHrefFromDOM()),null==ae)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ae}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return Ke(this._baseHref,V)}path(V=!1){const ae=this._platformLocation.pathname+ht(this._platformLocation.search),ve=this._platformLocation.hash;return ve&&V?`${ae}${ve}`:ae}pushState(V,ae,ve,st){const vt=this.prepareExternalUrl(ve+ht(st));this._platformLocation.pushState(V,ae,vt)}replaceState(V,ae,ve,st){const vt=this.prepareExternalUrl(ve+ht(st));this._platformLocation.replaceState(V,ae,vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var ae,ve;null===(ve=(ae=this._platformLocation).historyGo)||void 0===ve||ve.call(ae,V)}}return B.\u0275fac=function(V){return new(V||B)(w.LFG(ke),w.LFG(Oe,8))},B.\u0275prov=w.Yz7({token:B,factory:B.\u0275fac}),B})(),ct=(()=>{class B extends Xe{constructor(V,ae){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=ae&&(this._baseHref=ae)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let ae=this._platformLocation.hash;return null==ae&&(ae="#"),ae.length>0?ae.substring(1):ae}prepareExternalUrl(V){const ae=Ke(this._baseHref,V);return ae.length>0?"#"+ae:ae}pushState(V,ae,ve,st){let vt=this.prepareExternalUrl(ve+ht(st));0==vt.length&&(vt=this._platformLocation.pathname),this._platformLocation.pushState(V,ae,vt)}replaceState(V,ae,ve,st){let vt=this.prepareExternalUrl(ve+ht(st));0==vt.length&&(vt=this._platformLocation.pathname),this._platformLocation.replaceState(V,ae,vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var ae,ve;null===(ve=(ae=this._platformLocation).historyGo)||void 0===ve||ve.call(ae,V)}}return B.\u0275fac=function(V){return new(V||B)(w.LFG(ke),w.LFG(Oe,8))},B.\u0275prov=w.Yz7({token:B,factory:B.\u0275fac}),B})(),it=(()=>{class B{constructor(V,ae){this._subject=new w.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const ve=this._platformStrategy.getBaseHref();this._platformLocation=ae,this._baseHref=rt(It(ve)),this._platformStrategy.onPopState(st=>{this._subject.emit({url:this.path(!0),pop:!0,state:st.state,type:st.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,ae=""){return this.path()==this.normalize(V+ht(ae))}normalize(V){return B.stripTrailingSlash(function ze(B,X){return B&&X.startsWith(B)?X.substring(B.length):X}(this._baseHref,It(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,ae="",ve=null){this._platformStrategy.pushState(ve,"",V,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+ht(ae)),ve)}replaceState(V,ae="",ve=null){this._platformStrategy.replaceState(ve,"",V,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+ht(ae)),ve)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var ae,ve;null===(ve=(ae=this._platformStrategy).historyGo)||void 0===ve||ve.call(ae,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ae=>{this._notifyUrlChangeListeners(ae.url,ae.state)}))}_notifyUrlChangeListeners(V="",ae){this._urlChangeListeners.forEach(ve=>ve(V,ae))}subscribe(V,ae,ve){return this._subject.subscribe({next:V,error:ae,complete:ve})}}return B.normalizeQueryParams=ht,B.joinWithSlash=Ke,B.stripTrailingSlash=rt,B.\u0275fac=function(V){return new(V||B)(w.LFG(Xe),w.LFG(ke))},B.\u0275prov=w.Yz7({token:B,factory:function(){return function Qe(){return new it((0,w.LFG)(Xe),(0,w.LFG)(ke))}()},providedIn:"root"}),B})();function It(B){return B.replace(/\/index.html$/,"")}function Yi(B,X){X=encodeURIComponent(X);for(const V of B.split(";")){const ae=V.indexOf("="),[ve,st]=-1==ae?[V,""]:[V.slice(0,ae),V.slice(ae+1)];if(ve.trim()===X)return decodeURIComponent(st)}return null}class _i{constructor(X,V,ae,ve){this.$implicit=X,this.ngForOf=V,this.index=ae,this.count=ve}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wr=(()=>{class B{constructor(V,ae,ve){this._viewContainer=V,this._template=ae,this._differs=ve,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const ae=this._viewContainer;V.forEachOperation((ve,st,vt)=>{if(null==ve.previousIndex)ae.createEmbeddedView(this._template,new _i(ve.item,this._ngForOf,-1,-1),null===vt?void 0:vt);else if(null==vt)ae.remove(null===st?void 0:st);else if(null!==st){const en=ae.get(st);ae.move(en,vt),ei(en,ve)}});for(let ve=0,st=ae.length;ve<st;ve++){const en=ae.get(ve).context;en.index=ve,en.count=st,en.ngForOf=this._ngForOf}V.forEachIdentityChange(ve=>{ei(ae.get(ve.currentIndex),ve)})}static ngTemplateContextGuard(V,ae){return!0}}return B.\u0275fac=function(V){return new(V||B)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),B})();function ei(B,X){B.context.$implicit=X.item}let Yr=(()=>{class B{constructor(V,ae){this._viewContainer=V,this._context=new nr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ae}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Qr("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Qr("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,ae){return!0}}return B.\u0275fac=function(V){return new(V||B)(w.Y36(w.s_b),w.Y36(w.Rgc))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),B})();class nr{constructor(){this.$implicit=null,this.ngIf=null}}function Qr(B,X){if(X&&!X.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,w.AaK)(X)}'.`)}let Es=(()=>{class B{constructor(V,ae,ve){this._ngEl=V,this._differs=ae,this._renderer=ve,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,ae){const[ve,st]=V.split(".");null!=(ae=null!=ae&&st?`${ae}${st}`:ae)?this._renderer.setStyle(this._ngEl.nativeElement,ve,ae):this._renderer.removeStyle(this._ngEl.nativeElement,ve)}_applyChanges(V){V.forEachRemovedItem(ae=>this._setStyle(ae.key,null)),V.forEachAddedItem(ae=>this._setStyle(ae.key,ae.currentValue)),V.forEachChangedItem(ae=>this._setStyle(ae.key,ae.currentValue))}}return B.\u0275fac=function(V){return new(V||B)(w.Y36(w.SBq),w.Y36(w.aQg),w.Y36(w.Qsj))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),B})();class cs{createSubscription(X,V){return X.subscribe({next:V,error:ae=>{throw ae}})}dispose(X){X.unsubscribe()}onDestroy(X){X.unsubscribe()}}class ts{createSubscription(X,V){return X.then(V,ae=>{throw ae})}dispose(X){}onDestroy(X){}}const Be=new ts,be=new cs;let Je=(()=>{class B{constructor(V){this._ref=V,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,ae=>this._updateLatestValue(V,ae))}_selectStrategy(V){if((0,w.QGY)(V))return Be;if((0,w.F4k)(V))return be;throw function zr(B,X){return new w.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,ae){V===this._obj&&(this._latestValue=ae,this._ref.markForCheck())}}return B.\u0275fac=function(V){return new(V||B)(w.Y36(w.sBO,16))},B.\u0275pipe=w.Yjl({name:"async",type:B,pure:!1}),B})(),ba=(()=>{class B{}return B.\u0275fac=function(V){return new(V||B)},B.\u0275mod=w.oAB({type:B}),B.\u0275inj=w.cJS({}),B})();const yi="browser";function Ws(B){return"server"===B}let To=(()=>{class B{}return B.\u0275prov=(0,w.Yz7)({token:B,providedIn:"root",factory:()=>new rs((0,w.LFG)(Ve),window)}),B})();class rs{constructor(X,V){this.document=X,this.window=V,this.offset=()=>[0,0]}setOffset(X){this.offset=Array.isArray(X)?()=>X:X}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(X){this.supportsScrolling()&&this.window.scrollTo(X[0],X[1])}scrollToAnchor(X){if(!this.supportsScrolling())return;const V=function zs(B,X){const V=B.getElementById(X)||B.getElementsByName(X)[0];if(V)return V;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const ae=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let ve=ae.currentNode;for(;ve;){const st=ve.shadowRoot;if(st){const vt=st.getElementById(X)||st.querySelector(`[name="${X}"]`);if(vt)return vt}ve=ae.nextNode()}}return null}(this.document,X);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(X){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=X)}}scrollToElement(X){const V=X.getBoundingClientRect(),ae=V.left+this.window.pageXOffset,ve=V.top+this.window.pageYOffset,st=this.offset();this.window.scrollTo(ae-st[0],ve-st[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const X=ks(this.window.history)||ks(Object.getPrototypeOf(this.window.history));return!(!X||!X.writable&&!X.set)}catch(X){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(X){return!1}}}function ks(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class ir{}},5e3:(Ut,We,$)=>{$.d(We,{$8M:()=>Fl,$Z:()=>ov,AFp:()=>GE,ALo:()=>fE,AaK:()=>ke,AsE:()=>d_,CHM:()=>W,CRH:()=>bE,CZH:()=>D0,CqO:()=>uv,EJc:()=>Ib,EpF:()=>gy,F4k:()=>Bu,FYo:()=>J0,FiY:()=>Us,G48:()=>Zb,GfV:()=>X0,Gpc:()=>ue,JOm:()=>oe,LFG:()=>gn,LSH:()=>Eo,Lbi:()=>bb,MAs:()=>Tg,NdJ:()=>iu,OlP:()=>Ji,Oqu:()=>ad,PXZ:()=>Bb,Q6J:()=>eo,QGY:()=>Rg,Qsj:()=>vw,R0b:()=>Yd,RDi:()=>ks,Rgc:()=>Rv,SBq:()=>Sv,Sil:()=>Sb,Suo:()=>wE,TTD:()=>Cs,TgZ:()=>xg,VKq:()=>aE,VLi:()=>Lb,W1O:()=>DE,X6Q:()=>zb,XFs:()=>on,Xpm:()=>zt,Y36:()=>Ag,YKP:()=>rE,YNc:()=>rp,Yjl:()=>Tn,Yz7:()=>Ht,ZZ4:()=>B0,_Bn:()=>Kd,_UZ:()=>n_,_Vd:()=>cd,_c5:()=>cC,_uU:()=>hv,aQg:()=>j0,c2e:()=>Cb,cJS:()=>wn,cg1:()=>ud,dDg:()=>YE,deG:()=>pu,dqk:()=>$n,eFA:()=>XE,ekj:()=>$u,g9A:()=>WE,h0i:()=>Fy,hGG:()=>dC,hij:()=>$d,iGM:()=>EE,ifc:()=>Bt,ip1:()=>$E,kL8:()=>Ry,lG2:()=>Ii,lcZ:()=>pE,lnq:()=>h_,n5z:()=>Ao,oAB:()=>ri,oxw:()=>cp,q4F:()=>eE,qLn:()=>bd,qOj:()=>ed,qZA:()=>lp,sBO:()=>Kb,sIi:()=>oo,s_b:()=>Yv,soG:()=>A0,tBr:()=>xn,tb:()=>zE,tp0:()=>Go,uIk:()=>zm,vHH:()=>rt,vpe:()=>hf,wAp:()=>An,xp6:()=>Th,z2F:()=>O0,zSh:()=>jh,zs3:()=>ku});var w=$(7579),m=$(727),ie=$(8306),Fe=$(6451),z=$(3099);function De(r){for(let s in r)if(r[s]===De)return s;throw Error("Could not find renamed property on target object.")}function Ve(r,s){for(const a in s)s.hasOwnProperty(a)&&!r.hasOwnProperty(a)&&(r[a]=s[a])}function ke(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ke).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Ge(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const pe=De({__forward_ref__:De});function ue(r){return r.__forward_ref__=ue,r.toString=function(){return ke(this())},r}function Pe(r){return Tt(r)?r():r}function Tt(r){return"function"==typeof r&&r.hasOwnProperty(pe)&&r.__forward_ref__===ue}class rt extends Error{constructor(s,a){super(function ht(r,s){return`NG0${Math.abs(r)}${s?": "+s:""}`}(s,a)),this.code=s}}function Xe(r){return"string"==typeof r?r:null==r?"":String(r)}function ot(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Xe(r)}function it(r,s){const a=s?` in ${s}`:"";throw new rt(-201,`No provider for ${ot(r)} found${a}`)}function Ot(r,s){null==r&&function lt(r,s,a,d){throw new Error(`ASSERTION ERROR: ${r}`+(null==d?"":` [Expected=> ${a} ${d} ${s} <=Actual]`))}(s,r,null,"!=")}function Ht(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function wn(r){return{providers:r.providers||[],imports:r.imports||[]}}function vn(r){return Ln(r,ni)||Ln(r,Mr)}function Ln(r,s){return r.hasOwnProperty(s)?r[s]:null}function wr(r){return r&&(r.hasOwnProperty(ar)||r.hasOwnProperty(Yn))?r[ar]:null}const ni=De({\u0275prov:De}),ar=De({\u0275inj:De}),Mr=De({ngInjectableDef:De}),Yn=De({ngInjectorDef:De});var on=(()=>((on=on||{})[on.Default=0]="Default",on[on.Host=1]="Host",on[on.Self=2]="Self",on[on.SkipSelf=4]="SkipSelf",on[on.Optional=8]="Optional",on))();let Vn;function hn(r){const s=Vn;return Vn=r,s}function Zi(r,s,a){const d=vn(r);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:a&on.Optional?null:void 0!==s?s:void it(ke(r),"Injector")}function fi(r){return{toString:r}.toString()}var Fr=(()=>((Fr=Fr||{})[Fr.OnPush=0]="OnPush",Fr[Fr.Default=1]="Default",Fr))(),Bt=(()=>{return(r=Bt||(Bt={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Bt;var r})();const Xt="undefined"!=typeof globalThis&&globalThis,tn="undefined"!=typeof window&&window,li="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$n=Xt||"undefined"!=typeof global&&global||tn||li,Tr={},ye=[],Se=De({\u0275cmp:De}),xe=De({\u0275dir:De}),Et=De({\u0275pipe:De}),we=De({\u0275mod:De}),$e=De({\u0275fac:De}),wt=De({__NG_ELEMENT_ID__:De});let Vt=0;function zt(r){return fi(()=>{const a={},d={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Fr.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||ye,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Bt.Emulated,id:"c",styles:r.styles||ye,_:null,setInput:null,schemas:r.schemas||null,tView:null},p=r.directives,v=r.features,T=r.pipes;return d.id+=Vt++,d.inputs=ui(r.inputs,a),d.outputs=ui(r.outputs),v&&v.forEach(x=>x(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(Dr):null,d.pipeDefs=T?()=>("function"==typeof T?T():T).map(_n):null,d})}function Dr(r){return Vr(r)||function hr(r){return r[xe]||null}(r)}function _n(r){return function Di(r){return r[Et]||null}(r)}const xr={};function ri(r){return fi(()=>{const s={type:r.type,bootstrap:r.bootstrap||ye,declarations:r.declarations||ye,imports:r.imports||ye,exports:r.exports||ye,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(xr[r.id]=r.type),s})}function ui(r,s){if(null==r)return Tr;const a={};for(const d in r)if(r.hasOwnProperty(d)){let p=r[d],v=p;Array.isArray(p)&&(v=p[1],p=p[0]),a[p]=d,s&&(s[p]=v)}return a}const Ii=zt;function Tn(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Vr(r){return r[Se]||null}function er(r,s){const a=r[we]||null;if(!a&&!0===s)throw new Error(`Type ${ke(r)} does not have '\u0275mod' property.`);return a}function ci(r){return Array.isArray(r)&&"object"==typeof r[1]}function di(r){return Array.isArray(r)&&!0===r[1]}function no(r){return 0!=(8&r.flags)}function ha(r){return 2==(2&r.flags)}function Pi(r){return 1==(1&r.flags)}function Hr(r){return null!==r.template}function Es(r){return 0!=(512&r[2])}function si(r,s){return r.hasOwnProperty($e)?r[$e]:null}class bs{constructor(s,a,d){this.previousValue=s,this.currentValue=a,this.firstChange=d}isFirstChange(){return this.firstChange}}function Cs(){return Ps}function Ps(r){return r.type.prototype.ngOnChanges&&(r.setInput=Os),Fo}function Fo(){const r=yi(this),s=null==r?void 0:r.current;if(s){const a=r.previous;if(a===Tr)r.previous=s;else for(let d in s)a[d]=s[d];r.current=null,this.ngOnChanges(s)}}function Os(r,s,a,d){const p=yi(r)||function bo(r,s){return r[ba]=s}(r,{previous:Tr,current:null}),v=p.current||(p.current={}),T=p.previous,x=this.declaredInputs[a],F=T[x];v[x]=new bs(F&&F.currentValue,s,T===Tr),r[d]=s}Cs.ngInherit=!0;const ba="__ngSimpleChanges__";function yi(r){return r[ba]||null}let rs;function ks(r){rs=r}function ir(r){return!!r.listen}const B={createRenderer:(r,s)=>function zs(){return void 0!==rs?rs:"undefined"!=typeof document?document:void 0}()};function V(r){for(;Array.isArray(r);)r=r[0];return r}function st(r,s){return V(s[r])}function vt(r,s){return V(s[r.index])}function ln(r,s){return r.data[s]}function Kn(r,s){return r[s]}function kn(r,s){const a=s[r];return ci(a)?a:a[0]}function Wn(r){return 4==(4&r[2])}function Jr(r){return 128==(128&r[2])}function Gr(r,s){return null==s?null:r[s]}function Ei(r){r[18]=0}function qi(r,s){r[5]+=s;let a=r,d=r[3];for(;null!==d&&(1===s&&1===a[5]||-1===s&&0===a[5]);)d[5]+=s,a=d,d=d[3]}const un={lFrame:al(null),bindingsEnabled:!0};function U(){return un.bindingsEnabled}function Ee(){return un.lFrame.lView}function Dt(){return un.lFrame.tView}function W(r){return un.lFrame.contextLView=r,r[8]}function j(){let r=ne();for(;null!==r&&64===r.type;)r=r.parent;return r}function ne(){return un.lFrame.currentTNode}function Ce(r,s){const a=un.lFrame;a.currentTNode=r,a.isParent=s}function et(){return un.lFrame.isParent}function lr(){const r=un.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function _r(){return un.lFrame.bindingIndex}function Nr(){return un.lFrame.bindingIndex++}function wi(r){const s=un.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,a}function Zs(r,s){const a=un.lFrame;a.bindingIndex=a.bindingRootIndex=r,ki(s)}function ki(r){un.lFrame.currentDirectiveIndex=r}function ea(){return un.lFrame.currentQueryIndex}function $a(r){un.lFrame.currentQueryIndex=r}function pa(r){const s=r[1];return 2===s.type?s.declTNode:1===s.type?r[6]:null}function Uo(r,s,a){if(a&on.SkipSelf){let p=s,v=r;for(;!(p=p.parent,null!==p||a&on.Host||(p=pa(v),null===p||(v=v[15],10&p.type))););if(null===p)return!1;s=p,r=v}const d=un.lFrame=Ta();return d.currentTNode=s,d.lView=r,!0}function Ca(r){const s=Ta(),a=r[1];un.lFrame=s,s.currentTNode=a.firstChild,s.lView=r,s.tView=a,s.contextLView=r,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Ta(){const r=un.lFrame,s=null===r?null:r.child;return null===s?al(r):s}function al(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function Zu(){const r=un.lFrame;return un.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const El=Zu;function ta(){const r=Zu();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Is(){return un.lFrame.selectedIndex}function qa(r){un.lFrame.selectedIndex=r}function Mi(){const r=un.lFrame;return ln(r.tView,r.selectedIndex)}function Ks(r,s){for(let a=s.directiveStart,d=s.directiveEnd;a<d;a++){const v=r.data[a].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:x,ngAfterViewInit:F,ngAfterViewChecked:Q,ngOnDestroy:ee}=v;T&&(r.contentHooks||(r.contentHooks=[])).push(-a,T),x&&((r.contentHooks||(r.contentHooks=[])).push(a,x),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(a,x)),F&&(r.viewHooks||(r.viewHooks=[])).push(-a,F),Q&&((r.viewHooks||(r.viewHooks=[])).push(a,Q),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(a,Q)),null!=ee&&(r.destroyHooks||(r.destroyHooks=[])).push(a,ee)}}function na(r,s,a){hu(r,s,3,a)}function Wa(r,s,a,d){(3&r[2])===a&&hu(r,s,a,d)}function sr(r,s){let a=r[2];(3&a)===s&&(a&=2047,a+=1,r[2]=a)}function hu(r,s,a,d){const v=null!=d?d:-1,T=s.length-1;let x=0;for(let F=void 0!==d?65535&r[18]:0;F<T;F++)if("number"==typeof s[F+1]){if(x=s[F],null!=d&&x>=d)break}else s[F]<0&&(r[18]+=65536),(x<v||-1==v)&&(wl(r,a,s,F),r[18]=(4294901760&r[18])+F+2),F++}function wl(r,s,a,d){const p=a[d]<0,v=a[d+1],x=r[p?-a[d]:a[d]];if(p){if(r[2]>>11<r[18]>>16&&(3&r[2])===s){r[2]+=2048;try{v.call(x)}finally{}}}else try{v.call(x)}finally{}}class Vo{constructor(s,a,d){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=d}}function za(r,s,a){const d=ir(r);let p=0;for(;p<a.length;){const v=a[p];if("number"==typeof v){if(0!==v)break;p++;const T=a[p++],x=a[p++],F=a[p++];d?r.setAttribute(s,x,F,T):s.setAttributeNS(T,x,F)}else{const T=v,x=a[++p];go(T)?d&&r.setProperty(s,T,x):d?r.setAttribute(s,T,x):s.setAttribute(T,x),p++}}return p}function jo(r){return 3===r||4===r||6===r}function go(r){return 64===r.charCodeAt(0)}function bl(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let a=-1;for(let d=0;d<s.length;d++){const p=s[d];"number"==typeof p?a=p:0===a||Cl(r,a,p,null,-1===a||2===a?s[++d]:null)}}return r}function Cl(r,s,a,d,p){let v=0,T=r.length;if(-1===s)T=-1;else for(;v<r.length;){const x=r[v++];if("number"==typeof x){if(x===s){T=-1;break}if(x>s){T=v-1;break}}}for(;v<r.length;){const x=r[v];if("number"==typeof x)break;if(x===a){if(null===d)return void(null!==p&&(r[v+1]=p));if(d===r[v+1])return void(r[v+2]=p)}v++,null!==d&&v++,null!==p&&v++}-1!==T&&(r.splice(T,0,s),v=T+1),r.splice(v++,0,a),null!==d&&r.splice(v++,0,d),null!==p&&r.splice(v++,0,p)}function So(r){return-1!==r}function Da(r){return 32767&r}function bi(r,s){let a=function Fi(r){return r>>16}(r),d=s;for(;a>0;)d=d[15],a--;return d}let Ho=!0;function Ri(r){const s=Ho;return Ho=r,s}let kl=0;function yr(r,s){const a=mo(r,s);if(-1!==a)return a;const d=s[1];d.firstCreatePass&&(r.injectorIndex=s.length,ds(d.data,r),ds(s,null),ds(d.blueprint,null));const p=M(r,s),v=r.injectorIndex;if(So(p)){const T=Da(p),x=bi(p,s),F=x[1].data;for(let Q=0;Q<8;Q++)s[v+Q]=x[T+Q]|F[T+Q]}return s[v+8]=p,v}function ds(r,s){r.push(0,0,0,0,0,0,0,0,s)}function mo(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function M(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let a=0,d=null,p=s;for(;null!==p;){const v=p[1],T=v.type;if(d=2===T?v.declTNode:1===T?p[6]:null,null===d)return-1;if(a++,p=p[15],-1!==d.injectorIndex)return d.injectorIndex|a<<16}return-1}function S(r,s,a){!function kt(r,s,a){let d;"string"==typeof a?d=a.charCodeAt(0)||0:a.hasOwnProperty(wt)&&(d=a[wt]),null==d&&(d=a[wt]=kl++);const p=255&d;s.data[r+(p>>5)]|=1<<p}(r,s,a)}function N(r,s,a){if(a&on.Optional)return r;it(s,"NodeInjector")}function P(r,s,a,d){if(a&on.Optional&&void 0===d&&(d=null),0==(a&(on.Self|on.Host))){const p=r[9],v=hn(void 0);try{return p?p.get(s,d,a&on.Optional):Zi(s,d,a&on.Optional)}finally{hn(v)}}return N(d,s,a)}function Z(r,s,a,d=on.Default,p){if(null!==r){const v=function rn(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(wt)?r[wt]:void 0;return"number"==typeof s?s>=0?255&s:Ie:s}(a);if("function"==typeof v){if(!Uo(s,r,d))return d&on.Host?N(p,a,d):P(s,a,d,p);try{const T=v(d);if(null!=T||d&on.Optional)return T;it(a)}finally{El()}}else if("number"==typeof v){let T=null,x=mo(r,s),F=-1,Q=d&on.Host?s[16][6]:null;for((-1===x||d&on.SkipSelf)&&(F=-1===x?M(r,s):s[x+8],-1!==F&&fr(d,!1)?(T=s[1],x=Da(F),s=bi(F,s)):x=-1);-1!==x;){const ee=s[1];if(Cr(v,x,ee.data)){const fe=_t(x,s,a,T,d,Q);if(fe!==he)return fe}F=s[x+8],-1!==F&&fr(d,s[1].data[x+8]===Q)&&Cr(v,x,s)?(T=ee,x=Da(F),s=bi(F,s)):x=-1}}}return P(s,a,d,p)}const he={};function Ie(){return new Ls(j(),Ee())}function _t(r,s,a,d,p,v){const T=s[1],x=T.data[r+8],ee=Qt(x,T,a,null==d?ha(x)&&Ho:d!=T&&0!=(3&x.type),p&on.Host&&v===x);return null!==ee?zn(s,T,ee,x):he}function Qt(r,s,a,d,p){const v=r.providerIndexes,T=s.data,x=1048575&v,F=r.directiveStart,ee=v>>20,Ne=p?x+ee:r.directiveEnd;for(let Ye=d?x:x+ee;Ye<Ne;Ye++){const Ct=T[Ye];if(Ye<F&&a===Ct||Ye>=F&&Ct.type===a)return Ye}if(p){const Ye=T[F];if(Ye&&Hr(Ye)&&Ye.type===a)return F}return null}function zn(r,s,a,d){let p=r[a];const v=s.data;if(function Bo(r){return r instanceof Vo}(p)){const T=p;T.resolving&&function Oe(r,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new rt(-200,`Circular dependency in DI detected for ${r}${a}`)}(ot(v[a]));const x=Ri(T.canSeeViewProviders);T.resolving=!0;const F=T.injectImpl?hn(T.injectImpl):null;Uo(r,d,on.Default);try{p=r[a]=T.factory(void 0,v,r,d),s.firstCreatePass&&a>=d.directiveStart&&function hd(r,s,a){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:v}=s.type.prototype;if(d){const T=Ps(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(r,T),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(r,T)}p&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-r,p),v&&((a.preOrderHooks||(a.preOrderHooks=[])).push(r,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(r,v))}(a,v[a],s)}finally{null!==F&&hn(F),Ri(x),T.resolving=!1,El()}}return p}function Cr(r,s,a){return!!(a[s+(r>>5)]&1<<r)}function fr(r,s){return!(r&on.Self||r&on.Host&&s)}class Ls{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,d){return Z(this._tNode,this._lView,s,d,a)}}function Ao(r){return fi(()=>{const s=r.prototype.constructor,a=s[$e]||hs(s),d=Object.prototype;let p=Object.getPrototypeOf(r.prototype).constructor;for(;p&&p!==d;){const v=p[$e]||hs(p);if(v&&v!==a)return v;p=Object.getPrototypeOf(p)}return v=>new v})}function hs(r){return Tt(r)?()=>{const s=hs(Pe(r));return s&&s()}:si(r)}function Fl(r){return function D(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const a=r.attrs;if(a){const d=a.length;let p=0;for(;p<d;){const v=a[p];if(jo(v))break;if(0===v)p+=2;else if("number"==typeof v)for(p++;p<d&&"string"==typeof a[p];)p++;else{if(v===s)return a[p+1];p+=2}}}return null}(j(),r)}const Nn="__parameters__";function In(r,s,a){return fi(()=>{const d=function zi(r){return function(...a){if(r){const d=r(...a);for(const p in d)this[p]=d[p]}}}(s);function p(...v){if(this instanceof p)return d.apply(this,v),this;const T=new p(...v);return x.annotation=T,x;function x(F,Q,ee){const fe=F.hasOwnProperty(Nn)?F[Nn]:Object.defineProperty(F,Nn,{value:[]})[Nn];for(;fe.length<=ee;)fe.push(null);return(fe[ee]=fe[ee]||[]).push(T),F}}return a&&(p.prototype=Object.create(a.prototype)),p.prototype.ngMetadataName=r,p.annotationCls=p,p})}class Ji{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ht({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pu=new Ji("AnalyzeForEntryComponents");function Mo(r,s){void 0===s&&(s=r);for(let a=0;a<r.length;a++){let d=r[a];Array.isArray(d)?(s===r&&(s=r.slice(0,a)),Mo(d,s)):s!==r&&s.push(d)}return s}function ps(r,s){r.forEach(a=>Array.isArray(a)?ps(a,s):s(a))}function dl(r,s,a){s>=r.length?r.push(a):r.splice(s,0,a)}function Ma(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function is(r,s,a){let d=Na(r,s);return d>=0?r[1|d]=a:(d=~d,function Il(r,s,a,d){let p=r.length;if(p==s)r.push(a,d);else if(1===p)r.push(d,r[0]),r[0]=a;else{for(p--,r.push(r[p-1],r[p]);p>s;)r[p]=r[p-2],p--;r[s]=a,r[s+1]=d}}(r,d,s,a)),d}function bc(r,s){const a=Na(r,s);if(a>=0)return r[1|a]}function Na(r,s){return function ss(r,s,a){let d=0,p=r.length>>a;for(;p!==d;){const v=d+(p-d>>1),T=r[v<<a];if(s===T)return v<<a;T>s?p=v:d=v+1}return~(p<<a)}(r,s,1)}const Al={},Ml="__NG_DI_FLAG__",gs="ngTempTokenPath",H=/\n/gm,_e="__source",qe=De({provide:String,useValue:De});let nt;function Rt(r){const s=nt;return nt=r,s}function fn(r,s=on.Default){if(void 0===nt)throw new rt(203,"");return null===nt?Zi(r,void 0,s):nt.get(r,s&on.Optional?null:void 0,s)}function gn(r,s=on.Default){return(function Rn(){return Vn}()||fn)(Pe(r),s)}const Pr=gn;function cn(r){const s=[];for(let a=0;a<r.length;a++){const d=Pe(r[a]);if(Array.isArray(d)){if(0===d.length)throw new rt(900,"");let p,v=on.Default;for(let T=0;T<d.length;T++){const x=d[T],F=Or(x);"number"==typeof F?-1===F?p=x.token:v|=F:p=x}s.push(gn(p,v))}else s.push(gn(d))}return s}function os(r,s){return r[Ml]=s,r.prototype[Ml]=s,r}function Or(r){return r[Ml]}const xn=os(In("Inject",r=>({token:r})),-1),Us=os(In("Optional"),8),Go=os(In("SkipSelf"),4);class Ss{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Oa(r){return r instanceof Ss?r.changingThisBreaksApplicationSecurity:r}const Li=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ms=(()=>((ms=ms||{})[ms.NONE=0]="NONE",ms[ms.HTML=1]="HTML",ms[ms.STYLE=2]="STYLE",ms[ms.SCRIPT=3]="SCRIPT",ms[ms.URL=4]="URL",ms[ms.RESOURCE_URL=5]="RESOURCE_URL",ms))();function Eo(r){const s=function Rl(){const r=Ee();return r&&r[12]}();return s?s.sanitize(ms.URL,r)||"":function wu(r,s){const a=function vf(r){return r instanceof Ss&&r.getTypeName()||null}(r);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(r,"URL")?Oa(r):function Ya(r){return(r=String(r)).match(Li)||r.match(bu)?r:"unsafe:"+r}(Xe(r))}const Tu="__ngContext__";function ls(r,s){r[Tu]=s}function Oc(r){const s=function Iu(r){return r[Tu]||null}(r);return s?Array.isArray(s)?s:s.lView:null}function Ja(r){return r.ngOriginalError}function Xa(r,...s){r.error(...s)}class bd{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),d=function oc(r){return r&&r.ngErrorLogger||Xa}(s);d(this._console,"ERROR",s),a&&d(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ja(s);for(;a&&Ja(a);)a=Ja(a);return a||null}}const xf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($n))();function b(r){return r instanceof Function?r():r}var oe=(()=>((oe=oe||{})[oe.Important=1]="Important",oe[oe.DashCase=2]="DashCase",oe))();function pt(r,s){return undefined(r,s)}function Dn(r){const s=r[3];return di(s)?s[3]:s}function Fa(r){return Rf(r[13])}function Lc(r){return Rf(r[4])}function Rf(r){for(;null!==r&&!di(r);)r=r[4];return r}function Au(r,s,a,d,p){if(null!=d){let v,T=!1;di(d)?v=d:ci(d)&&(T=!0,d=d[0]);const x=V(d);0===r&&null!==a?null==p?ph(s,a,x):Id(s,a,x,p||null,!0):1===r&&null!==a?Id(s,a,x,p||null,!0):2===r?function cm(r,s,a){const d=Wl(r,s);d&&function Vy(r,s,a,d){ir(r)?r.removeChild(s,a,d):s.removeChild(a)}(r,d,s,a)}(s,x,T):3===r&&s.destroyNode(x),null!=v&&function Eh(r,s,a,d,p){const v=a[7];v!==V(a)&&Au(s,r,d,v,p);for(let x=10;x<a.length;x++){const F=a[x];Zl(F[1],F,r,s,d,v)}}(s,r,v,a,p)}}function ch(r,s,a){if(ir(r))return r.createElement(s,a);{const d=null!==a?function To(r){const s=r.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===d?r.createElement(s):r.createElementNS(d,s)}}function I_(r,s){const a=r[9],d=a.indexOf(s),p=s[3];1024&s[2]&&(s[2]&=-1025,qi(p,-1)),a.splice(d,1)}function hh(r,s){if(r.length<=10)return;const a=10+s,d=r[a];if(d){const p=d[17];null!==p&&p!==r&&I_(p,d),s>0&&(r[a-1][4]=d[4]);const v=Ma(r,10+s);!function Pf(r,s){Zl(r,s,s[11],2,null,null),s[0]=null,s[6]=null}(d[1],d);const T=v[19];null!==T&&T.detachView(v[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function am(r,s){if(!(256&s[2])){const a=s[11];ir(a)&&a.destroyNode&&Zl(r,s,a,3,null,null),function Td(r){let s=r[13];if(!s)return kf(r[1],r);for(;s;){let a=null;if(ci(s))a=s[13];else{const d=s[10];d&&(a=d)}if(!a){for(;s&&!s[4]&&s!==r;)ci(s)&&kf(s[1],s),s=s[3];null===s&&(s=r),ci(s)&&kf(s[1],s),a=s&&s[4]}s=a}}(s)}}function kf(r,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function gt(r,s){let a;if(null!=r&&null!=(a=r.destroyHooks))for(let d=0;d<a.length;d+=2){const p=s[a[d]];if(!(p instanceof Vo)){const v=a[d+1];if(Array.isArray(v))for(let T=0;T<v.length;T+=2){const x=p[v[T]],F=v[T+1];try{F.call(x)}finally{}}else try{v.call(p)}finally{}}}}(r,s),function D_(r,s){const a=r.cleanup,d=s[7];let p=-1;if(null!==a)for(let v=0;v<a.length-1;v+=2)if("string"==typeof a[v]){const T=a[v+1],x="function"==typeof T?T(s):V(s[T]),F=d[p=a[v+2]],Q=a[v+3];"boolean"==typeof Q?x.removeEventListener(a[v],F,Q):Q>=0?d[p=Q]():d[p=-Q].unsubscribe(),v+=2}else{const T=d[p=a[v+1]];a[v].call(T)}if(null!==d){for(let v=p+1;v<d.length;v++)d[v]();s[7]=null}}(r,s),1===s[1].type&&ir(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&di(s[3])){a!==s[3]&&I_(a,s);const d=s[19];null!==d&&d.detachView(r)}}}function fh(r,s,a){return function el(r,s,a){let d=s;for(;null!==d&&40&d.type;)d=(s=d).parent;if(null===d)return a[0];if(2&d.flags){const p=r.data[d.directiveStart].encapsulation;if(p===Bt.None||p===Bt.Emulated)return null}return vt(d,a)}(r,s.parent,a)}function Id(r,s,a,d,p){ir(r)?r.insertBefore(s,a,d,p):s.insertBefore(a,d,p)}function ph(r,s,a){ir(r)?r.appendChild(s,a):s.appendChild(a)}function Uc(r,s,a,d,p){null!==d?Id(r,s,a,d,p):ph(r,s,a)}function Wl(r,s){return ir(r)?r.parentNode(s):s.parentNode}let No=function Bp(r,s,a){return 40&r.type?vt(r,a):null};function yh(r,s,a,d){const p=fh(r,d,s),v=s[11],x=function gh(r,s,a){return No(r,s,a)}(d.parent||s[6],d,s);if(null!=p)if(Array.isArray(a))for(let F=0;F<a.length;F++)Uc(v,p,a[F],x,!1);else Uc(v,p,a,x,!1)}function zl(r,s){if(null!==s){const a=s.type;if(3&a)return vt(s,r);if(4&a)return um(-1,r[s.index]);if(8&a){const d=s.child;if(null!==d)return zl(r,d);{const p=r[s.index];return di(p)?um(-1,p):V(p)}}if(32&a)return pt(s,r)()||V(r[s.index]);{const d=lm(r,s);return null!==d?Array.isArray(d)?d[0]:zl(Dn(r[16]),d):zl(r,s.next)}}return null}function lm(r,s){return null!==s?r[16][6].projection[s.projection]:null}function um(r,s){const a=10+r+1;if(a<s.length){const d=s[a],p=d[1].firstChild;if(null!==p)return zl(d,p)}return s[7]}function vh(r,s,a,d,p,v,T){for(;null!=a;){const x=d[a.index],F=a.type;if(T&&0===s&&(x&&ls(V(x),d),a.flags|=4),64!=(64&a.flags))if(8&F)vh(r,s,a.child,d,p,v,!1),Au(s,r,p,x,v);else if(32&F){const Q=pt(a,d);let ee;for(;ee=Q();)Au(s,r,p,ee,v);Au(s,r,p,x,v)}else 16&F?Dd(r,s,d,a,p,v):Au(s,r,p,x,v);a=T?a.projectionNext:a.next}}function Zl(r,s,a,d,p,v){vh(a,d,r.firstChild,s,p,v,!1)}function Dd(r,s,a,d,p,v){const T=a[16],F=T[6].projection[d.projection];if(Array.isArray(F))for(let Q=0;Q<F.length;Q++)Au(s,r,p,F[Q],v);else vh(r,s,F,T[3],p,v,!0)}function jp(r,s,a){ir(r)?r.setAttribute(s,"style",a):s.style.cssText=a}function wh(r,s,a){ir(r)?""===a?r.removeAttribute(s,"class"):r.setAttribute(s,"class",a):s.className=a}function bh(r,s,a){let d=r.length;for(;;){const p=r.indexOf(s,a);if(-1===p)return p;if(0===p||r.charCodeAt(p-1)<=32){const v=s.length;if(p+v===d||r.charCodeAt(p+v)<=32)return p}a=p+1}}const hm="ng-template";function S_(r,s,a){let d=0;for(;d<r.length;){let p=r[d++];if(a&&"class"===p){if(p=r[d],-1!==bh(p.toLowerCase(),s,0))return!0}else if(1===p){for(;d<r.length&&"string"==typeof(p=r[d++]);)if(p.toLowerCase()===s)return!0;return!1}}return!1}function Hp(r){return 4===r.type&&r.value!==hm}function Sd(r,s,a){return s===(4!==r.type||a?r.value:hm)}function Bc(r,s,a){let d=4;const p=r.attrs||[],v=function M_(r){for(let s=0;s<r.length;s++)if(jo(r[s]))return s;return r.length}(p);let T=!1;for(let x=0;x<s.length;x++){const F=s[x];if("number"!=typeof F){if(!T)if(4&d){if(d=2|1&d,""!==F&&!Sd(r,F,a)||""===F&&1===s.length){if(Kl(d))return!1;T=!0}}else{const Q=8&d?F:s[++x];if(8&d&&null!==r.attrs){if(!S_(r.attrs,Q,a)){if(Kl(d))return!1;T=!0}continue}const fe=A_(8&d?"class":F,p,Hp(r),a);if(-1===fe){if(Kl(d))return!1;T=!0;continue}if(""!==Q){let Ne;Ne=fe>v?"":p[fe+1].toLowerCase();const Ye=8&d?Ne:null;if(Ye&&-1!==bh(Ye,Q,0)||2&d&&Q!==Ne){if(Kl(d))return!1;T=!0}}}}else{if(!T&&!Kl(d)&&!Kl(F))return!1;if(T&&Kl(F))continue;T=!1,d=F|1&d}}return Kl(d)||T}function Kl(r){return 0==(1&r)}function A_(r,s,a,d){if(null===s)return-1;let p=0;if(d||!a){let v=!1;for(;p<s.length;){const T=s[p];if(T===r)return p;if(3===T||6===T)v=!0;else{if(1===T||2===T){let x=s[++p];for(;"string"==typeof x;)x=s[++p];continue}if(4===T)break;if(0===T){p+=4;continue}}p+=v?1:2}return-1}return function Ch(r,s){let a=r.indexOf(4);if(a>-1)for(a++;a<r.length;){const d=r[a];if("number"==typeof d)return-1;if(d===s)return a;a++}return-1}(s,r)}function fm(r,s,a=!1){for(let d=0;d<s.length;d++)if(Bc(r,s[d],a))return!0;return!1}function Yl(r,s){return r?":not("+s.trim()+")":s}function Lf(r){let s=r[0],a=1,d=2,p="",v=!1;for(;a<r.length;){let T=r[a];if("string"==typeof T)if(2&d){const x=r[++a];p+="["+T+(x.length>0?'="'+x+'"':"")+"]"}else 8&d?p+="."+T:4&d&&(p+=" "+T);else""!==p&&!Kl(T)&&(s+=Yl(v,p),p=""),d=T,v=v||!Kl(d);a++}return""!==p&&(s+=Yl(v,p)),s}const Xn={};function Th(r){$p(Dt(),Ee(),Is()+r,!1)}function $p(r,s,a,d){if(!d)if(3==(3&s[2])){const v=r.preOrderCheckHooks;null!==v&&na(s,v,a)}else{const v=r.preOrderHooks;null!==v&&Wa(s,v,0,a)}qa(a)}function La(r,s){return r<<17|s<<2}function Zo(r){return r>>17&32767}function ga(r){return 2|r}function Nl(r){return(131068&r)>>2}function Ih(r,s){return-131069&r|s<<2}function Vf(r){return 1|r}function ma(r,s){const a=r.contentQueries;if(null!==a)for(let d=0;d<a.length;d+=2){const p=a[d],v=a[d+1];if(-1!==v){const T=r.data[v];$a(p),T.contentQueries(2,s[v],v)}}}function Rd(r,s,a,d,p,v,T,x,F,Q){const ee=s.blueprint.slice();return ee[0]=p,ee[2]=140|d,Ei(ee),ee[3]=ee[15]=r,ee[8]=a,ee[10]=T||r&&r[10],ee[11]=x||r&&r[11],ee[12]=F||r&&r[12]||null,ee[9]=Q||r&&r[9]||null,ee[6]=v,ee[16]=2==s.type?r[16]:ee,ee}function uc(r,s,a,d,p){let v=r.data[s];if(null===v)v=function Gc(r,s,a,d,p){const v=ne(),T=et(),F=r.data[s]=function Rh(r,s,a,d,p,v){return{type:a,index:d,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?v:v&&v.parent,a,s,d,p);return null===r.firstChild&&(r.firstChild=F),null!==v&&(T?null==v.child&&null!==F.parent&&(v.child=F):null===v.next&&(v.next=F)),F}(r,s,a,d,p),function Gn(){return un.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=a,v.value=d,v.attrs=p;const T=function de(){const r=un.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();v.injectorIndex=null===T?-1:T.injectorIndex}return Ce(v,!0),v}function Ru(r,s,a,d){if(0===a)return-1;const p=s.length;for(let v=0;v<a;v++)s.push(d),r.blueprint.push(d),r.data.push(null);return p}function Nd(r,s,a){Ca(s);try{const d=r.viewQuery;null!==d&&Pu(1,d,a);const p=r.template;null!==p&&L_(r,s,p,1,a),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&ma(r,s),r.staticViewQueries&&Pu(2,r.viewQuery,a);const v=r.components;null!==v&&function Yp(r,s){for(let a=0;a<s.length;a++)zc(r,s[a])}(s,v)}catch(d){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),d}finally{s[2]&=-5,ta()}}function la(r,s,a,d){const p=s[2];if(256!=(256&p)){Ca(s);try{Ei(s),function oi(r){return un.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==a&&L_(r,s,a,2,d);const T=3==(3&p);if(T){const Q=r.preOrderCheckHooks;null!==Q&&na(s,Q,null)}else{const Q=r.preOrderHooks;null!==Q&&Wa(s,Q,0,null),sr(s,0)}if(function G_(r){for(let s=Fa(r);null!==s;s=Lc(s)){if(!s[2])continue;const a=s[9];for(let d=0;d<a.length;d++){const p=a[d],v=p[3];0==(1024&p[2])&&qi(v,1),p[2]|=1024}}}(s),function Yf(r){for(let s=Fa(r);null!==s;s=Lc(s))for(let a=10;a<s.length;a++){const d=s[a],p=d[1];Jr(d)&&la(p,d,p.template,d[8])}}(s),null!==r.contentQueries&&ma(r,s),T){const Q=r.contentCheckHooks;null!==Q&&na(s,Q)}else{const Q=r.contentHooks;null!==Q&&Wa(s,Q,1),sr(s,1)}!function xu(r,s){const a=r.hostBindingOpCodes;if(null!==a)try{for(let d=0;d<a.length;d++){const p=a[d];if(p<0)qa(~p);else{const v=p,T=a[++d],x=a[++d];Zs(T,v),x(2,s[v])}}}finally{qa(-1)}}(r,s);const x=r.components;null!==x&&function xd(r,s){for(let a=0;a<s.length;a++)Am(r,s[a])}(s,x);const F=r.viewQuery;if(null!==F&&Pu(2,F,d),T){const Q=r.viewCheckHooks;null!==Q&&na(s,Q)}else{const Q=r.viewHooks;null!==Q&&Wa(s,Q,2),sr(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,qi(s[3],-1))}finally{ta()}}}function Qp(r,s,a,d){const p=s[10],T=Wn(s);try{!T&&p.begin&&p.begin(),T&&Nd(r,s,d),la(r,s,a,d)}finally{!T&&p.end&&p.end()}}function L_(r,s,a,d,p){const v=Is(),T=2&d;try{qa(-1),T&&s.length>20&&$p(r,s,20,!1),a(d,p)}finally{qa(v)}}function Pd(r,s,a){!U()||(function rg(r,s,a,d){const p=a.directiveStart,v=a.directiveEnd;r.firstCreatePass||yr(a,s),ls(d,s);const T=a.initialInputs;for(let x=p;x<v;x++){const F=r.data[x],Q=Hr(F);Q&&Ph(s,a,F);const ee=zn(s,r,x,a);ls(ee,s),null!==T&&kd(0,x-p,ee,F,0,T),Q&&(kn(a.index,s)[8]=ee)}}(r,s,a,vt(a,s)),128==(128&a.flags)&&function Zf(r,s,a){const d=a.directiveStart,p=a.directiveEnd,T=a.index,x=function Qi(){return un.lFrame.currentDirectiveIndex}();try{qa(T);for(let F=d;F<p;F++){const Q=r.data[F],ee=s[F];ki(F),(null!==Q.hostBindings||0!==Q.hostVars||null!==Q.hostAttrs)&&Nh(Q,ee)}}finally{qa(-1),ki(x)}}(r,s,a))}function Ci(r,s,a=vt){const d=s.localNames;if(null!==d){let p=s.index+1;for(let v=0;v<d.length;v+=2){const T=d[v+1],x=-1===T?a(s,r):r[T];r[p++]=x}}}function bm(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=Jp(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function Jp(r,s,a,d,p,v,T,x,F,Q){const ee=20+d,fe=ee+p,Ne=function U_(r,s){const a=[];for(let d=0;d<s;d++)a.push(d<r?null:Xn);return a}(ee,fe),Ye="function"==typeof Q?Q():Q;return Ne[1]={type:r,blueprint:Ne,template:a,queries:null,viewQuery:x,declTNode:s,data:Ne.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:F,consts:Ye,incompleteFirstPass:!1}}function zf(r,s,a,d){const p=Zc(s);null===a?p.push(d):(p.push(a),r.firstCreatePass&&zy(r).push(d,p.length-1))}function Xp(r,s,a){for(let d in r)if(r.hasOwnProperty(d)){const p=r[d];(a=null===a?{}:a).hasOwnProperty(d)?a[d].push(s,p):a[d]=[s,p]}return a}function Dm(r,s,a,d){let p=!1;if(U()){const v=function qc(r,s,a){const d=r.directiveRegistry;let p=null;if(d)for(let v=0;v<d.length;v++){const T=d[v];fm(a,T.selectors,!1)&&(p||(p=[]),S(yr(a,s),r,T.type),Hr(T)?(Nu(r,a),p.unshift(T)):p.push(T))}return p}(r,s,a),T=null===d?null:{"":-1};if(null!==v){p=!0,Kf(a,r.data.length,v.length);for(let ee=0;ee<v.length;ee++){const fe=v[ee];fe.providersResolver&&fe.providersResolver(fe)}let x=!1,F=!1,Q=Ru(r,s,v.length,null);for(let ee=0;ee<v.length;ee++){const fe=v[ee];a.mergedAttrs=bl(a.mergedAttrs,fe.hostAttrs),$_(r,a,s,Q,fe),Sm(Q,fe,T),null!==fe.contentQueries&&(a.flags|=8),(null!==fe.hostBindings||null!==fe.hostAttrs||0!==fe.hostVars)&&(a.flags|=128);const Ne=fe.type.prototype;!x&&(Ne.ngOnChanges||Ne.ngOnInit||Ne.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(a.index),x=!0),!F&&(Ne.ngOnChanges||Ne.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(a.index),F=!0),Q++}!function eg(r,s){const d=s.directiveEnd,p=r.data,v=s.attrs,T=[];let x=null,F=null;for(let Q=s.directiveStart;Q<d;Q++){const ee=p[Q],fe=ee.inputs,Ne=null===v||Hp(s)?null:ig(fe,v);T.push(Ne),x=Xp(fe,Q,x),F=Xp(ee.outputs,Q,F)}null!==x&&(x.hasOwnProperty("class")&&(s.flags|=16),x.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=T,s.inputs=x,s.outputs=F}(r,a)}T&&function Wy(r,s,a){if(s){const d=r.localNames=[];for(let p=0;p<s.length;p+=2){const v=a[s[p+1]];if(null==v)throw new rt(-301,!1);d.push(s[p],v)}}}(a,d,T)}return a.mergedAttrs=bl(a.mergedAttrs,a.attrs),p}function H_(r,s,a,d,p,v){const T=v.hostBindings;if(T){let x=r.hostBindingOpCodes;null===x&&(x=r.hostBindingOpCodes=[]);const F=~s.index;(function qy(r){let s=r.length;for(;s>0;){const a=r[--s];if("number"==typeof a&&a<0)return a}return 0})(x)!=F&&x.push(F),x.push(d,p,T)}}function Nh(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function Nu(r,s){s.flags|=2,(r.components||(r.components=[])).push(s.index)}function Sm(r,s,a){if(a){if(s.exportAs)for(let d=0;d<s.exportAs.length;d++)a[s.exportAs[d]]=r;Hr(s)&&(a[""]=r)}}function Kf(r,s,a){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+a,r.providerIndexes=s}function $_(r,s,a,d,p){r.data[d]=p;const v=p.factory||(p.factory=si(p.type)),T=new Vo(v,Hr(p),null);r.blueprint[d]=T,a[d]=T,H_(r,s,0,d,Ru(r,a,p.hostVars,Xn),p)}function Ph(r,s,a){const d=vt(s,r),p=bm(a),v=r[10],T=Qf(r,Rd(r,p,null,a.onPush?64:16,d,s,v,v.createRenderer(d,a),null,null));r[s.index]=T}function nl(r,s,a,d,p,v){const T=vt(r,s);!function Oh(r,s,a,d,p,v,T){if(null==v)ir(r)?r.removeAttribute(s,p,a):s.removeAttribute(p);else{const x=null==T?Xe(v):T(v,d||"",p);ir(r)?r.setAttribute(s,p,x,a):a?s.setAttributeNS(a,p,x):s.setAttribute(p,x)}}(s[11],T,v,r.value,a,d,p)}function kd(r,s,a,d,p,v){const T=v[s];if(null!==T){const x=d.setInput;for(let F=0;F<T.length;){const Q=T[F++],ee=T[F++],fe=T[F++];null!==x?d.setInput(a,fe,Q,ee):a[ee]=fe}}}function ig(r,s){let a=null,d=0;for(;d<s.length;){const p=s[d];if(0!==p)if(5!==p){if("number"==typeof p)break;r.hasOwnProperty(p)&&(null===a&&(a=[]),a.push(p,r[p],s[d+1])),d+=2}else d+=2;else d+=4}return a}function Wc(r,s,a,d){return new Array(r,!0,!1,s,null,0,d,a,null,null)}function Am(r,s){const a=kn(s,r);if(Jr(a)){const d=a[1];80&a[2]?la(d,a,d.template,a[8]):a[5]>0&&Fd(a)}}function Fd(r){for(let d=Fa(r);null!==d;d=Lc(d))for(let p=10;p<d.length;p++){const v=d[p];if(1024&v[2]){const T=v[1];la(T,v,T.template,v[8])}else v[5]>0&&Fd(v)}const a=r[1].components;if(null!==a)for(let d=0;d<a.length;d++){const p=kn(a[d],r);Jr(p)&&p[5]>0&&Fd(p)}}function zc(r,s){const a=kn(s,r),d=a[1];(function Mm(r,s){for(let a=s.length;a<r.blueprint.length;a++)s.push(r.blueprint[a])})(d,a),Nd(d,a,a[8])}function Qf(r,s){return r[13]?r[14][4]=s:r[13]=s,r[14]=s,s}function Fh(r){for(;r;){r[2]|=64;const s=Dn(r);if(Es(r)&&!s)return r;r=s}return null}function eu(r){!function Ko(r){for(let s=0;s<r.components.length;s++){const a=r.components[s],d=Oc(a),p=d[1];Qp(p,d,p.template,a)}}(r[8])}function Pu(r,s,a){$a(0),s(r,a)}const sg=(()=>Promise.resolve(null))();function Zc(r){return r[7]||(r[7]=[])}function zy(r){return r.cleanup||(r.cleanup=[])}function Rm(r,s){const a=r[9],d=a?a.get(bd,null):null;d&&d.handleError(s)}function og(r,s,a,d,p){for(let v=0;v<a.length;){const T=a[v++],x=a[v++],F=s[T],Q=r.data[T];null!==Q.setInput?Q.setInput(F,p,d,x):F[x]=p}}function tu(r,s,a){const d=st(s,r);!function uh(r,s,a){ir(r)?r.setValue(s,a):s.textContent=a}(r[11],d,a)}function ag(r,s,a){let d=a?r.styles:null,p=a?r.classes:null,v=0;if(null!==s)for(let T=0;T<s.length;T++){const x=s[T];"number"==typeof x?v=x:1==v?p=Ge(p,x):2==v&&(d=Ge(d,x+": "+s[++T]+";"))}a?r.styles=d:r.stylesWithoutHost=d,a?r.classes=p:r.classesWithoutHost=p}const Bh=new Ji("INJECTOR",-1);class Kc{get(s,a=Al){if(a===Al){const d=new Error(`NullInjectorError: No provider for ${ke(s)}!`);throw d.name="NullInjectorError",d}return a}}const jh=new Ji("Set Injector scope."),Yc={},lg={};let Hh;function Qc(){return void 0===Hh&&(Hh=new Kc),Hh}function Ou(r,s=null,a=null,d){const p=rl(r,s,a,d);return p._resolveInjectorDefTypes(),p}function rl(r,s=null,a=null,d){return new Ld(r,a,s||Qc(),d)}class Ld{constructor(s,a,d,p=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const v=[];a&&ps(a,x=>this.processProvider(x,s,a)),ps([s],x=>this.processInjectorType(x,[],v)),this.records.set(Bh,Gh(void 0,this));const T=this.records.get(jh);this.scope=null!=T?T.value:null,this.source=p||("object"==typeof s?null:ke(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Al,d=on.Default){this.assertNotDestroyed();const p=Rt(this),v=hn(void 0);try{if(!(d&on.SkipSelf)){let x=this.records.get(s);if(void 0===x){const F=function Lm(r){return"function"==typeof r||"object"==typeof r&&r instanceof Ji}(s)&&vn(s);x=F&&this.injectableDefInScope(F)?Gh(Jc(s),Yc):null,this.records.set(s,x)}if(null!=x)return this.hydrate(s,x)}return(d&on.Self?Qc():this.parent).get(s,a=d&on.Optional&&a===Al?null:a)}catch(T){if("NullInjectorError"===T.name){if((T[gs]=T[gs]||[]).unshift(ke(s)),p)throw T;return function yn(r,s,a,d){const p=r[gs];throw s[_e]&&p.unshift(s[_e]),r.message=function vr(r,s,a,d=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let p=ke(s);if(Array.isArray(s))p=s.map(ke).join(" -> ");else if("object"==typeof s){let v=[];for(let T in s)if(s.hasOwnProperty(T)){let x=s[T];v.push(T+":"+("string"==typeof x?JSON.stringify(x):ke(x)))}p=`{${v.join(", ")}}`}return`${a}${d?"("+d+")":""}[${p}]: ${r.replace(H,"\n  ")}`}("\n"+r.message,p,a,d),r.ngTokenPath=p,r[gs]=null,r}(T,s,"R3InjectorError",this.source)}throw T}finally{hn(v),Rt(p)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((d,p)=>s.push(ke(p))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new rt(205,!1)}processInjectorType(s,a,d){if(!(s=Pe(s)))return!1;let p=wr(s);const v=null==p&&s.ngModule||void 0,T=void 0===v?s:v,x=-1!==d.indexOf(T);if(void 0!==v&&(p=wr(v)),null==p)return!1;if(null!=p.imports&&!x){let ee;d.push(T);try{ps(p.imports,fe=>{this.processInjectorType(fe,a,d)&&(void 0===ee&&(ee=[]),ee.push(fe))})}finally{}if(void 0!==ee)for(let fe=0;fe<ee.length;fe++){const{ngModule:Ne,providers:Ye}=ee[fe];ps(Ye,Ct=>this.processProvider(Ct,Ne,Ye||ye))}}this.injectorDefTypes.add(T);const F=si(T)||(()=>new T);this.records.set(T,Gh(F,Yc));const Q=p.providers;if(null!=Q&&!x){const ee=s;ps(Q,fe=>this.processProvider(fe,ee,Q))}return void 0!==v&&void 0!==s.providers}processProvider(s,a,d){let p=Xc(s=Pe(s))?s:Pe(s&&s.provide);const v=function $h(r,s,a){return ug(r)?Gh(void 0,r.useValue):Gh(Pm(r),Yc)}(s);if(Xc(s)||!0!==s.multi)this.records.get(p);else{let T=this.records.get(p);T||(T=Gh(void 0,Yc,!0),T.factory=()=>cn(T.multi),this.records.set(p,T)),p=s,T.multi.push(s)}this.records.set(p,v)}hydrate(s,a){return a.value===Yc&&(a.value=lg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Fm(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Pe(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Jc(r){const s=vn(r),a=null!==s?s.factory:si(r);if(null!==a)return a;if(r instanceof Ji)throw new rt(204,!1);if(r instanceof Function)return function W_(r){const s=r.length;if(s>0)throw function xa(r,s){const a=[];for(let d=0;d<r;d++)a.push(s);return a}(s,"?"),new rt(204,!1);const a=function pr(r){const s=r&&(r[ni]||r[Mr]);if(s){const a=function kr(r){if(r.hasOwnProperty("name"))return r.name;const s=(""+r).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(r);return null!==a?()=>a.factory(r):()=>new r}(r);throw new rt(204,!1)}function Pm(r,s,a){let d;if(Xc(r)){const p=Pe(r);return si(p)||Jc(p)}if(ug(r))d=()=>Pe(r.useValue);else if(function km(r){return!(!r||!r.useFactory)}(r))d=()=>r.useFactory(...cn(r.deps||[]));else if(function Om(r){return!(!r||!r.useExisting)}(r))d=()=>gn(Pe(r.useExisting));else{const p=Pe(r&&(r.useClass||r.provide));if(!function Yy(r){return!!r.deps}(r))return si(p)||Jc(p);d=()=>new p(...cn(r.deps))}return d}function Gh(r,s,a=!1){return{factory:r,value:s,multi:a?[]:void 0}}function ug(r){return null!==r&&"object"==typeof r&&qe in r}function Xc(r){return"function"==typeof r}let ku=(()=>{class r{static create(a,d){var p;if(Array.isArray(a))return Ou({name:""},d,a,"");{const v=null!==(p=a.name)&&void 0!==p?p:"";return Ou({name:v},a.parent,a.providers,v)}}}return r.THROW_IF_NOT_FOUND=Al,r.NULL=new Kc,r.\u0275prov=Ht({token:r,providedIn:"any",factory:()=>gn(Bh)}),r.__NG_ELEMENT_ID__=-1,r})();function Gm(r,s){Ks(Oc(r)[1],j())}function ed(r){let s=function mg(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),a=!0;const d=[r];for(;s;){let p;if(Hr(r))p=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new rt(903,"");p=s.\u0275dir}if(p){if(a){d.push(p);const T=r;T.inputs=_g(r.inputs),T.declaredInputs=_g(r.declaredInputs),T.outputs=_g(r.outputs);const x=p.hostBindings;x&&cc(r,x);const F=p.viewQuery,Q=p.contentQueries;if(F&&tv(r,F),Q&&qm(r,Q),Ve(r.inputs,p.inputs),Ve(r.declaredInputs,p.declaredInputs),Ve(r.outputs,p.outputs),Hr(p)&&p.data.animation){const ee=r.data;ee.animation=(ee.animation||[]).concat(p.data.animation)}}const v=p.features;if(v)for(let T=0;T<v.length;T++){const x=v[T];x&&x.ngInherit&&x(r),x===ed&&(a=!1)}}s=Object.getPrototypeOf(s)}!function ev(r){let s=0,a=null;for(let d=r.length-1;d>=0;d--){const p=r[d];p.hostVars=s+=p.hostVars,p.hostAttrs=bl(p.hostAttrs,a=bl(a,p.hostAttrs))}}(d)}function _g(r){return r===Tr?{}:r===ye?[]:r}function tv(r,s){const a=r.viewQuery;r.viewQuery=a?(d,p)=>{s(d,p),a(d,p)}:s}function qm(r,s){const a=r.contentQueries;r.contentQueries=a?(d,p,v)=>{s(d,p,v),a(d,p,v)}:s}function cc(r,s){const a=r.hostBindings;r.hostBindings=a?(d,p)=>{s(d,p),a(d,p)}:s}let vg=null;function qh(){if(!vg){const r=$n.Symbol;if(r&&r.iterator)vg=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const d=s[a];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(vg=d)}}}return vg}function oo(r){return!!tp(r)&&(Array.isArray(r)||!(r instanceof Map)&&qh()in r)}function tp(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function ua(r,s,a){return!Object.is(r[s],a)&&(r[s]=a,!0)}function _a(r,s,a,d){const p=ua(r,s,a);return ua(r,s+1,d)||p}function zm(r,s,a,d){const p=Ee();return ua(p,Nr(),s)&&(Dt(),nl(Mi(),p,r,s,a,d)),zm}function hc(r,s,a,d,p,v,T,x){const Q=function np(r,s,a,d,p){const v=_a(r,s,a,d);return ua(r,s+2,p)||v}(r,_r(),a,p,T);return wi(3),Q?s+Xe(a)+d+Xe(p)+v+Xe(T)+x:Xn}function rp(r,s,a,d,p,v,T,x){const F=Ee(),Q=Dt(),ee=r+20,fe=Q.firstCreatePass?function ry(r,s,a,d,p,v,T,x,F){const Q=s.consts,ee=uc(s,r,4,T||null,Gr(Q,x));Dm(s,a,ee,Gr(Q,F)),Ks(s,ee);const fe=ee.tViews=Jp(2,ee,d,p,v,s.directiveRegistry,s.pipeRegistry,null,s.schemas,Q);return null!==s.queries&&(s.queries.template(s,ee),fe.queries=s.queries.embeddedTView(ee)),ee}(ee,Q,F,s,a,d,p,v,T):Q.data[ee];Ce(fe,!1);const Ne=F[11].createComment("");yh(Q,F,Ne,fe),ls(Ne,F),Qf(F,F[ee]=Wc(Ne,F,Ne,fe)),Pi(fe)&&Pd(Q,F,fe),null!=T&&Ci(F,fe,x)}function Tg(r){return Kn(function Wt(){return un.lFrame.contextLView}(),20+r)}function Ag(r,s=on.Default){const a=Ee();return null===a?gn(r,s):Z(j(),a,Pe(r),s)}function ov(){throw new Error("invalid")}function eo(r,s,a){const d=Ee();return ua(d,Nr(),s)&&function Po(r,s,a,d,p,v,T,x){const F=vt(s,a);let ee,Q=s.inputs;!x&&null!=Q&&(ee=Q[d])?(og(r,a,ee,d,p),ha(s)&&function Od(r,s){const a=kn(s,r);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(d=function tg(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(d),p=null!=T?T(p,s.value||"",d):p,ir(v)?v.setProperty(F,d,p):go(d)||(F.setProperty?F.setProperty(d,p):F[d]=p))}(Dt(),Mi(),d,r,s,d[11],a,!1),eo}function Mg(r,s,a,d,p){const T=p?"class":"style";og(r,a,s.inputs[T],T,d)}function xg(r,s,a,d){const p=Ee(),v=Dt(),T=20+r,x=p[11],F=p[T]=ch(x,s,function dd(){return un.lFrame.currentNamespace}()),Q=v.firstCreatePass?function av(r,s,a,d,p,v,T){const x=s.consts,Q=uc(s,r,2,p,Gr(x,v));return Dm(s,a,Q,Gr(x,T)),null!==Q.attrs&&ag(Q,Q.attrs,!1),null!==Q.mergedAttrs&&ag(Q,Q.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,Q),Q}(T,v,p,0,s,a,d):v.data[T];Ce(Q,!0);const ee=Q.mergedAttrs;null!==ee&&za(x,F,ee);const fe=Q.classes;null!==fe&&wh(x,F,fe);const Ne=Q.styles;return null!==Ne&&jp(x,F,Ne),64!=(64&Q.flags)&&yh(v,p,F,Q),0===function po(){return un.lFrame.elementDepthCount}()&&ls(F,p),function ro(){un.lFrame.elementDepthCount++}(),Pi(Q)&&(Pd(v,p,Q),function Wf(r,s,a){if(no(s)){const p=s.directiveEnd;for(let v=s.directiveStart;v<p;v++){const T=r.data[v];T.contentQueries&&T.contentQueries(1,a[v],v)}}}(v,Q,p)),null!==d&&Ci(p,Q),xg}function lp(){let r=j();et()?function St(){un.lFrame.isParent=!1}():(r=r.parent,Ce(r,!1));const s=r;!function G(){un.lFrame.elementDepthCount--}();const a=Dt();return a.firstCreatePass&&(Ks(a,r),no(r)&&a.queries.elementEnd(r)),null!=s.classesWithoutHost&&function Do(r){return 0!=(16&r.flags)}(s)&&Mg(a,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Yu(r){return 0!=(32&r.flags)}(s)&&Mg(a,s,Ee(),s.stylesWithoutHost,!1),lp}function n_(r,s,a,d){return xg(r,s,a,d),lp(),n_}function gy(){return Ee()}function Rg(r){return!!r&&"function"==typeof r.then}function Bu(r){return!!r&&"function"==typeof r.subscribe}const uv=Bu;function iu(r,s,a,d){const p=Ee(),v=Dt(),T=j();return function Pg(r,s,a,d,p,v,T,x){const F=Pi(d),ee=r.firstCreatePass&&zy(r),fe=s[8],Ne=Zc(s);let Ye=!0;if(3&d.type||x){const Jt=vt(d,s),Cn=x?x(Jt):Jt,xt=Ne.length,Hn=x?ai=>x(V(ai[d.index])):d.index;if(ir(a)){let ai=null;if(!x&&F&&(ai=function Ng(r,s,a,d){const p=r.cleanup;if(null!=p)for(let v=0;v<p.length-1;v+=2){const T=p[v];if(T===a&&p[v+1]===d){const x=s[7],F=p[v+2];return x.length>F?x[F]:null}"string"==typeof T&&(v+=2)}return null}(r,s,p,d.index)),null!==ai)(ai.__ngLastListenerFn__||ai).__ngNextListenerFn__=v,ai.__ngLastListenerFn__=v,Ye=!1;else{v=up(d,s,fe,v,!1);const us=a.listen(Cn,p,v);Ne.push(v,us),ee&&ee.push(p,Hn,xt,xt+1)}}else v=up(d,s,fe,v,!0),Cn.addEventListener(p,v,T),Ne.push(v),ee&&ee.push(p,Hn,xt,T)}else v=up(d,s,fe,v,!1);const Ct=d.outputs;let $t;if(Ye&&null!==Ct&&($t=Ct[p])){const Jt=$t.length;if(Jt)for(let Cn=0;Cn<Jt;Cn+=2){const yc=s[$t[Cn]][$t[Cn+1]].subscribe(v),T_=Ne.length;Ne.push(v,yc),ee&&ee.push(p,d.index,T_,-(T_+1))}}}(v,p,p[11],T,r,s,!!a,d),iu}function pc(r,s,a,d){try{return!1!==a(d)}catch(p){return Rm(r,p),!1}}function up(r,s,a,d,p){return function v(T){if(T===Function)return d;const x=2&r.flags?kn(r.index,s):s;0==(32&s[2])&&Fh(x);let F=pc(s,0,d,T),Q=v.__ngNextListenerFn__;for(;Q;)F=pc(s,0,Q,T)&&F,Q=Q.__ngNextListenerFn__;return p&&!1===F&&(T.preventDefault(),T.returnValue=!1),F}}function cp(r=1){return function vc(r){return(un.lFrame.contextLView=function Ga(r,s){for(;r>0;)s=s[15],r--;return s}(r,un.lFrame.contextLView))[8]}(r)}function a_(r,s,a,d,p){const v=r[a+1],T=null===s;let x=d?Zo(v):Nl(v),F=!1;for(;0!==x&&(!1===F||T);){const ee=r[x+1];Lg(r[x],s)&&(F=!0,r[x+1]=d?Vf(ee):ga(ee)),x=d?Zo(ee):Nl(ee)}F&&(r[a+1]=d?ga(v):Vf(v))}function Lg(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&Na(r,s)>=0}function $u(r,s){return function Ba(r,s,a,d){const p=Ee(),v=Dt(),T=wi(2);v.firstUpdatePass&&function u_(r,s,a,d){const p=r.data;if(null===p[a+1]){const v=p[Is()],T=function mp(r,s){return s>=r.expandoStartIndex}(r,a);(function _c(r,s){return 0!=(r.flags&(s?16:32))})(v,d)&&null===s&&!T&&(s=!1),s=function Bg(r,s,a,d){const p=function io(r){const s=un.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let v=d?s.residualClasses:s.residualStyles;if(null===p)0===(d?s.classBindings:s.styleBindings)&&(a=Xh(a=jg(null,r,s,a,d),s.attrs,d),v=null);else{const T=s.directiveStylingLast;if(-1===T||r[T]!==p)if(a=jg(p,r,s,a,d),null===v){let F=function _p(r,s,a){const d=a?s.classBindings:s.styleBindings;if(0!==Nl(d))return r[Zo(d)]}(r,s,d);void 0!==F&&Array.isArray(F)&&(F=jg(null,r,s,F[1],d),F=Xh(F,s.attrs,d),function dv(r,s,a,d){r[Zo(a?s.classBindings:s.styleBindings)]=d}(r,s,d,F))}else v=function c_(r,s,a){let d;const p=s.directiveEnd;for(let v=1+s.directiveStylingLast;v<p;v++)d=Xh(d,r[v].hostAttrs,a);return Xh(d,s.attrs,a)}(r,s,d)}return void 0!==v&&(d?s.residualClasses=v:s.residualStyles=v),a}(p,v,s,d),function s_(r,s,a,d,p,v){let T=v?s.classBindings:s.styleBindings,x=Zo(T),F=Nl(T);r[d]=a;let ee,Q=!1;if(Array.isArray(a)){const fe=a;ee=fe[1],(null===ee||Na(fe,ee)>0)&&(Q=!0)}else ee=a;if(p)if(0!==F){const Ne=Zo(r[x+1]);r[d+1]=La(Ne,x),0!==Ne&&(r[Ne+1]=Ih(r[Ne+1],d)),r[x+1]=function x_(r,s){return 131071&r|s<<17}(r[x+1],d)}else r[d+1]=La(x,0),0!==x&&(r[x+1]=Ih(r[x+1],d)),x=d;else r[d+1]=La(F,0),0===x?x=d:r[F+1]=Ih(r[F+1],d),F=d;Q&&(r[d+1]=ga(r[d+1])),a_(r,ee,d,!0),a_(r,ee,d,!1),function o_(r,s,a,d,p){const v=p?r.residualClasses:r.residualStyles;null!=v&&"string"==typeof s&&Na(v,s)>=0&&(a[d+1]=Vf(a[d+1]))}(s,ee,r,d,v),T=La(x,F),v?s.classBindings=T:s.styleBindings=T}(p,v,s,a,T,d)}}(v,r,T,d),s!==Xn&&ua(p,T,s)&&function Hd(r,s,a,d,p,v,T,x){if(!(3&s.type))return;const F=r.data,Q=F[x+1];Hg(function Gp(r){return 1==(1&r)}(Q)?od(F,s,a,p,Nl(Q),T):void 0)||(Hg(v)||function Uf(r){return 2==(2&r)}(Q)&&(v=od(F,null,a,p,x,T)),function dm(r,s,a,d,p){const v=ir(r);if(s)p?v?r.addClass(a,d):a.classList.add(d):v?r.removeClass(a,d):a.classList.remove(d);else{let T=-1===d.indexOf("-")?void 0:oe.DashCase;if(null==p)v?r.removeStyle(a,d,T):a.style.removeProperty(d);else{const x="string"==typeof p&&p.endsWith("!important");x&&(p=p.slice(0,-10),T|=oe.Important),v?r.setStyle(a,d,p,T):a.style.setProperty(d,p,x?"important":"")}}}(d,T,st(Is(),a),p,v))}(v,v.data[Is()],p,p[11],r,p[T+1]=function wy(r,s){return null==r||("string"==typeof s?r+=s:"object"==typeof r&&(r=ke(Oa(r)))),r}(s,a),d,T)}(r,s,null,!0),$u}function jg(r,s,a,d,p){let v=null;const T=a.directiveEnd;let x=a.directiveStylingLast;for(-1===x?x=a.directiveStart:x++;x<T&&(v=s[x],d=Xh(d,v.hostAttrs,p),v!==r);)x++;return null!==r&&(a.directiveStylingLast=x),d}function Xh(r,s,a){const d=a?1:2;let p=-1;if(null!==s)for(let v=0;v<s.length;v++){const T=s[v];"number"==typeof T?p=T:p===d&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),is(r,T,!!a||s[++v]))}return void 0===r?null:r}function od(r,s,a,d,p,v){const T=null===s;let x;for(;p>0;){const F=r[p],Q=Array.isArray(F),ee=Q?F[1]:F,fe=null===ee;let Ne=a[p+1];Ne===Xn&&(Ne=fe?ye:void 0);let Ye=fe?bc(Ne,d):ee===d?Ne:void 0;if(Q&&!Hg(Ye)&&(Ye=bc(F,d)),Hg(Ye)&&(x=Ye,T))return x;const Ct=r[p+1];p=T?Zo(Ct):Nl(Ct)}if(null!==s){let F=v?s.residualClasses:s.residualStyles;null!=F&&(x=bc(F,d))}return x}function Hg(r){return void 0!==r}function hv(r,s=""){const a=Ee(),d=Dt(),p=r+20,v=d.firstCreatePass?uc(d,p,1,s,null):d.data[p],T=a[p]=function lh(r,s){return ir(r)?r.createText(s):r.createTextNode(s)}(a[11],s);yh(d,a,T,v),Ce(v,!1)}function ad(r){return $d("",r,""),ad}function $d(r,s,a){const d=Ee(),p=function Vd(r,s,a,d){return ua(r,Nr(),a)?s+Xe(a)+d:Xn}(d,r,s,a);return p!==Xn&&tu(d,Is(),p),$d}function d_(r,s,a,d,p){const v=Ee(),T=function dc(r,s,a,d,p,v){const x=_a(r,_r(),a,p);return wi(2),x?s+Xe(a)+d+Xe(p)+v:Xn}(v,r,s,a,d,p);return T!==Xn&&tu(v,Is(),T),d_}function h_(r,s,a,d,p,v,T){const x=Ee(),F=hc(x,r,s,a,d,p,v,T);return F!==Xn&&tu(x,Is(),F),h_}const Yo=void 0;var xy=["en",[["a","p"],["AM","PM"],Yo],[["AM","PM"],Yo,Yo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yo,"{1} 'at' {0}",Yo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ha(r){const a=Math.floor(Math.abs(r)),d=r.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===d?1:5}];let ld={};function ud(r){const s=function Zg(r){return r.toLowerCase().replace(/_/g,"-")}(r);let a=zg(s);if(a)return a;const d=s.split("-")[0];if(a=zg(d),a)return a;if("en"===d)return xy;throw new Error(`Missing locale data for the locale "${r}".`)}function Ry(r){return ud(r)[An.PluralCase]}function zg(r){return r in ld||(ld[r]=$n.ng&&$n.ng.common&&$n.ng.common.locales&&$n.ng.common.locales[r]),ld[r]}var An=(()=>((An=An||{})[An.LocaleId=0]="LocaleId",An[An.DayPeriodsFormat=1]="DayPeriodsFormat",An[An.DayPeriodsStandalone=2]="DayPeriodsStandalone",An[An.DaysFormat=3]="DaysFormat",An[An.DaysStandalone=4]="DaysStandalone",An[An.MonthsFormat=5]="MonthsFormat",An[An.MonthsStandalone=6]="MonthsStandalone",An[An.Eras=7]="Eras",An[An.FirstDayOfWeek=8]="FirstDayOfWeek",An[An.WeekendRange=9]="WeekendRange",An[An.DateFormat=10]="DateFormat",An[An.TimeFormat=11]="TimeFormat",An[An.DateTimeFormat=12]="DateTimeFormat",An[An.NumberSymbols=13]="NumberSymbols",An[An.NumberFormats=14]="NumberFormats",An[An.CurrencyCode=15]="CurrencyCode",An[An.CurrencySymbol=16]="CurrencySymbol",An[An.CurrencyName=17]="CurrencyName",An[An.Currencies=18]="Currencies",An[An.Directionality=19]="Directionality",An[An.PluralCase=20]="PluralCase",An[An.ExtraData=21]="ExtraData",An))();const Cp="en-US";let v_=Cp;function Oy(r,s,a,d,p){if(r=Pe(r),Array.isArray(r))for(let v=0;v<r.length;v++)Oy(r[v],s,a,d,p);else{const v=Dt(),T=Ee();let x=Xc(r)?r:Pe(r.provide),F=Pm(r);const Q=j(),ee=1048575&Q.providerIndexes,fe=Q.directiveStart,Ne=Q.providerIndexes>>20;if(Xc(r)||!r.multi){const Ye=new Vo(F,p,Ag),Ct=Zn(x,s,p?ee:ee+Ne,fe);-1===Ct?(S(yr(Q,T),v,x),bn(v,r,s.length),s.push(x),Q.directiveStart++,Q.directiveEnd++,p&&(Q.providerIndexes+=1048576),a.push(Ye),T.push(Ye)):(a[Ct]=Ye,T[Ct]=Ye)}else{const Ye=Zn(x,s,ee+Ne,fe),Ct=Zn(x,s,ee,ee+Ne),$t=Ye>=0&&a[Ye],Jt=Ct>=0&&a[Ct];if(p&&!Jt||!p&&!$t){S(yr(Q,T),v,x);const Cn=function cu(r,s,a,d,p){const v=new Vo(r,a,Ag);return v.multi=[],v.index=s,v.componentProviders=0,jn(v,p,d&&!a),v}(p?wa:Ti,a.length,p,d,F);!p&&Jt&&(a[Ct].providerFactory=Cn),bn(v,r,s.length,0),s.push(x),Q.directiveStart++,Q.directiveEnd++,p&&(Q.providerIndexes+=1048576),a.push(Cn),T.push(Cn)}else bn(v,r,Ye>-1?Ye:Ct,jn(a[p?Ct:Ye],F,!p&&d));!p&&d&&Jt&&a[Ct].componentProviders++}}}function bn(r,s,a,d){const p=Xc(s),v=function Ky(r){return!!r.useClass}(s);if(p||v){const F=(v?Pe(s.useClass):s).prototype.ngOnDestroy;if(F){const Q=r.destroyHooks||(r.destroyHooks=[]);if(!p&&s.multi){const ee=Q.indexOf(a);-1===ee?Q.push(a,[d,F]):Q[ee+1].push(d,F)}else Q.push(a,F)}}}function jn(r,s,a){return a&&r.componentProviders++,r.multi.push(s)-1}function Zn(r,s,a,d){for(let p=a;p<d;p++)if(s[p]===r)return p;return-1}function Ti(r,s,a,d){return zu(this.multi,[])}function wa(r,s,a,d){const p=this.multi;let v;if(this.providerFactory){const T=this.providerFactory.componentProviders,x=zn(a,a[1],this.providerFactory.index,d);v=x.slice(0,T),zu(p,v);for(let F=T;F<x.length;F++)v.push(x[F])}else v=[],zu(p,v);return v}function zu(r,s){for(let a=0;a<r.length;a++)s.push((0,r[a])());return s}function Kd(r,s=[]){return a=>{a.providersResolver=(d,p)=>function zv(r,s,a){const d=Dt();if(d.firstCreatePass){const p=Hr(r);Oy(a,d.data,d.blueprint,p,!0),Oy(s,d.data,d.blueprint,p,!1)}}(d,p?p(r):r,s)}}class Iv{}class df{resolveComponentFactory(s){throw function u0(r){const s=Error(`No component factory found for ${ke(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let cd=(()=>{class r{}return r.NULL=new df,r})();function Dv(){return ky(j(),Ee())}function ky(r,s){return new Sv(vt(r,s))}let Sv=(()=>{class r{constructor(a){this.nativeElement=a}}return r.__NG_ELEMENT_ID__=Dv,r})();function yw(r){return r instanceof Sv?r.nativeElement:r}class J0{}let vw=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function ww(){const r=Ee(),a=kn(j().index,r);return function Ew(r){return r[11]}(ci(a)?a:r)}(),r})(),bw=(()=>{class r{}return r.\u0275prov=Ht({token:r,providedIn:"root",factory:()=>null}),r})();class X0{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const eE=new X0("13.3.10"),c0={};function Zv(r,s,a,d,p=!1){for(;null!==a;){const v=s[a.index];if(null!==v&&d.push(V(v)),di(v))for(let x=10;x<v.length;x++){const F=v[x],Q=F[1].firstChild;null!==Q&&Zv(F[1],F,Q,d)}const T=a.type;if(8&T)Zv(r,s,a.child,d);else if(32&T){const x=pt(a,s);let F;for(;F=x();)d.push(F)}else if(16&T){const x=lm(s,a);if(Array.isArray(x))d.push(...x);else{const F=Dn(s[16]);Zv(F[1],F,x,d,!0)}}a=p?a.projectionNext:a.next}return d}class Av{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Zv(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(di(s)){const a=s[8],d=a?a.indexOf(this):-1;d>-1&&(hh(s,d),Ma(a,d))}this._attachedToViewContainer=!1}am(this._lView[1],this._lView)}onDestroy(s){zf(this._lView[1],this._lView,null,s)}markForCheck(){Fh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Lh(r,s,a){const d=s[10];d.begin&&d.begin();try{la(r,s,r.template,a)}catch(p){throw Rm(s,p),p}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new rt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dh(r,s){Zl(r,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new rt(902,"");this._appRef=s}}class Cw extends Av{constructor(s){super(s),this._view=s}detectChanges(){eu(this._view)}checkNoChanges(){}get context(){return null}}class tE extends cd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Vr(s);return new d0(a,this.ngModule)}}function nE(r){const s=[];for(let a in r)r.hasOwnProperty(a)&&s.push({propName:r[a],templateName:a});return s}class d0 extends Iv{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function jy(r){return r.map(Lf).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return nE(this.componentDef.inputs)}get outputs(){return nE(this.componentDef.outputs)}create(s,a,d,p){const v=(p=p||this.ngModule)?function Iw(r,s){return{get:(a,d,p)=>{const v=r.get(a,c0,p);return v!==c0||d===c0?v:s.get(a,d,p)}}}(s,p.injector):s,T=v.get(J0,B),x=v.get(bw,null),F=T.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",ee=d?function B_(r,s,a){if(ir(r))return r.selectRootElement(s,a===Bt.ShadowDom);let d="string"==typeof s?r.querySelector(s):s;return d.textContent="",d}(F,d,this.componentDef.encapsulation):ch(T.createRenderer(null,this.componentDef),Q,function Tw(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(Q)),fe=this.componentDef.onPush?576:528,Ne=function J_(r,s){return{components:[],scheduler:r||xf,clean:sg,playerHandler:s||null,flags:0}}(),Ye=Jp(0,null,null,1,0,null,null,null,null,null),Ct=Rd(null,Ye,Ne,fe,null,null,T,F,x,v);let $t,Jt;Ca(Ct);try{const Cn=function Q_(r,s,a,d,p,v){const T=a[1];a[20]=r;const F=uc(T,20,2,"#host",null),Q=F.mergedAttrs=s.hostAttrs;null!==Q&&(ag(F,Q,!0),null!==r&&(za(p,r,Q),null!==F.classes&&wh(p,r,F.classes),null!==F.styles&&jp(p,r,F.styles)));const ee=d.createRenderer(r,s),fe=Rd(a,bm(s),null,s.onPush?64:16,a[20],F,d,ee,v||null,null);return T.firstCreatePass&&(S(yr(F,a),T,s.type),Nu(T,F),Kf(F,a.length,1)),Qf(a,fe),a[20]=fe}(ee,this.componentDef,Ct,T,F);if(ee)if(d)za(F,ee,["ng-version",eE.full]);else{const{attrs:xt,classes:Hn}=function Hy(r){const s=[],a=[];let d=1,p=2;for(;d<r.length;){let v=r[d];if("string"==typeof v)2===p?""!==v&&s.push(v,r[++d]):8===p&&a.push(v);else{if(!Kl(p))break;p=v}d++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);xt&&za(F,ee,xt),Hn&&Hn.length>0&&wh(F,ee,Hn.join(" "))}if(Jt=ln(Ye,20),void 0!==a){const xt=Jt.projection=[];for(let Hn=0;Hn<this.ngContentSelectors.length;Hn++){const ai=a[Hn];xt.push(null!=ai?Array.from(ai):null)}}$t=function gg(r,s,a,d,p){const v=a[1],T=function Im(r,s,a){const d=j();r.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),$_(r,d,s,Ru(r,s,1,null),a));const p=zn(s,r,d.directiveStart,d);ls(p,s);const v=vt(d,s);return v&&ls(v,s),p}(v,a,s);if(d.components.push(T),r[8]=T,p&&p.forEach(F=>F(T,s)),s.contentQueries){const F=j();s.contentQueries(1,T,F.directiveStart)}const x=j();return!v.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(qa(x.index),H_(a[1],x,0,x.directiveStart,x.directiveEnd,s),Nh(s,T)),T}(Cn,this.componentDef,Ct,Ne,[Gm]),Nd(Ye,Ct,null)}finally{ta()}return new Sw(this.componentType,$t,ky(Jt,Ct),Ct,Jt)}}class Sw extends class ho{}{constructor(s,a,d,p,v){super(),this.location=d,this._rootLView=p,this._tNode=v,this.instance=a,this.hostView=this.changeDetectorRef=new Cw(p),this.componentType=s}get injector(){return new Ls(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Fy{}class rE{}const Ly=new Map;class oE extends Fy{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tE(this);const d=er(s);this._bootstrapComponents=b(d.bootstrap),this._r3Injector=rl(s,a,[{provide:Fy,useValue:this},{provide:cd,useValue:this.componentFactoryResolver}],ke(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ku.THROW_IF_NOT_FOUND,d=on.Default){return s===ku||s===Fy||s===Bh?this:this._r3Injector.get(s,a,d)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class h0 extends rE{constructor(s){super(),this.moduleType=s,null!==er(s)&&function Mw(r){const s=new Set;!function a(d){const p=er(d,!0),v=p.id;null!==v&&(function iE(r,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${r} - ${ke(s)} vs ${ke(s.name)}`)}(v,Ly.get(v),d),Ly.set(v,d));const T=b(p.imports);for(const x of T)s.has(x)||(s.add(x),a(x))}(r)}(s)}create(s){return new oE(this.moduleType,s)}}function aE(r,s,a,d){return lE(Ee(),lr(),r,s,a,d)}function lE(r,s,a,d,p,v){const T=s+a;return ua(r,T,p)?function Lu(r,s,a){return r[s]=a}(r,T+1,v?d.call(v,p):d(p)):function Mv(r,s){const a=r[s];return a===Xn?void 0:a}(r,T+1)}function fE(r,s){const a=Dt();let d;const p=r+20;a.firstCreatePass?(d=function Vw(r,s){if(s)for(let a=s.length-1;a>=0;a--){const d=s[a];if(r===d.name)return d}}(s,a.pipeRegistry),a.data[p]=d,d.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(p,d.onDestroy)):d=a.data[p];const v=d.factory||(d.factory=si(d.type)),T=hn(Ag);try{const x=Ri(!1),F=v();return Ri(x),function Km(r,s,a,d){a>=r.data.length&&(r.data[a]=null,r.blueprint[a]=null),s[a]=d}(a,Ee(),p,F),F}finally{hn(T)}}function pE(r,s,a){const d=r+20,p=Ee(),v=Kn(p,d);return function xv(r,s){return r[1].data[s].pure}(p,d)?lE(p,lr(),s,v.transform,a,v):v.transform(a)}function f0(r){return s=>{setTimeout(r,void 0,s)}}const hf=class Gw extends w.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,d){var p,v,T;let x=s,F=a||(()=>null),Q=d;if(s&&"object"==typeof s){const fe=s;x=null===(p=fe.next)||void 0===p?void 0:p.bind(fe),F=null===(v=fe.error)||void 0===v?void 0:v.bind(fe),Q=null===(T=fe.complete)||void 0===T?void 0:T.bind(fe)}this.__isAsync&&(F=f0(F),x&&(x=f0(x)),Q&&(Q=f0(Q)));const ee=super.subscribe({next:x,error:F,complete:Q});return s instanceof m.w0&&s.add(ee),ee}};function qw(){return this._results[qh()]()}class p0{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=qh(),d=p0.prototype;d[a]||(d[a]=qw)}get changes(){return this._changes||(this._changes=new hf)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const d=this;d.dirty=!1;const p=Mo(s);(this._changesDetected=!function Ju(r,s,a){if(r.length!==s.length)return!1;for(let d=0;d<r.length;d++){let p=r[d],v=s[d];if(a&&(p=a(p),v=a(v)),v!==p)return!1}return!0}(d._results,p,a))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Rv=(()=>{class r{}return r.__NG_ELEMENT_ID__=Zw,r})();const Ww=Rv,zw=class extends Ww{constructor(s,a,d){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=d}createEmbeddedView(s){const a=this._declarationTContainer.tViews,d=Rd(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(a)),Nd(a,d,s),new Av(d)}};function Zw(){return Kv(j(),Ee())}function Kv(r,s){return 4&r.type?new zw(s,r,ky(r,s)):null}let Yv=(()=>{class r{}return r.__NG_ELEMENT_ID__=Kw,r})();function Kw(){return _E(j(),Ee())}const Yw=Yv,gE=class extends Yw{constructor(s,a,d){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=d}get element(){return ky(this._hostTNode,this._hostLView)}get injector(){return new Ls(this._hostTNode,this._hostLView)}get parentInjector(){const s=M(this._hostTNode,this._hostLView);if(So(s)){const a=bi(s,this._hostLView),d=Da(s);return new Ls(a[1].data[d+8],a)}return new Ls(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=mE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,d){const p=s.createEmbeddedView(a||{});return this.insert(p,d),p}createComponent(s,a,d,p,v){const T=s&&!function gu(r){return"function"==typeof r}(s);let x;if(T)x=a;else{const fe=a||{};x=fe.index,d=fe.injector,p=fe.projectableNodes,v=fe.ngModuleRef}const F=T?s:new d0(Vr(s)),Q=d||this.parentInjector;if(!v&&null==F.ngModule){const Ne=(T?Q:this.parentInjector).get(Fy,null);Ne&&(v=Ne)}const ee=F.create(Q,p,void 0,v);return this.insert(ee.hostView,x),ee}insert(s,a){const d=s._lView,p=d[1];if(function br(r){return di(r[3])}(d)){const ee=this.indexOf(s);if(-1!==ee)this.detach(ee);else{const fe=d[3],Ne=new gE(fe,fe[6],fe[3]);Ne.detach(Ne.indexOf(s))}}const v=this._adjustIndex(a),T=this._lContainer;!function Vp(r,s,a,d){const p=10+d,v=a.length;d>0&&(a[p-1][4]=s),d<v-10?(s[4]=a[p],dl(a,10+d,s)):(a.push(s),s[4]=null),s[3]=a;const T=s[17];null!==T&&a!==T&&function Of(r,s){const a=r[9];s[16]!==s[3][3][16]&&(r[2]=!0),null===a?r[9]=[s]:a.push(s)}(T,s);const x=s[19];null!==x&&x.insertView(r),s[2]|=128}(p,d,T,v);const x=um(v,T),F=d[11],Q=Wl(F,T[7]);return null!==Q&&function Up(r,s,a,d,p,v){d[0]=p,d[6]=s,Zl(r,d,a,1,p,v)}(p,T[6],F,d,Q,x),s.attachToViewContainerRef(),dl(g0(T),v,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=mE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),d=hh(this._lContainer,a);d&&(Ma(g0(this._lContainer),a),am(d[1],d))}detach(s){const a=this._adjustIndex(s,-1),d=hh(this._lContainer,a);return d&&null!=Ma(g0(this._lContainer),a)?new Av(d):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function mE(r){return r[8]}function g0(r){return r[8]||(r[8]=[])}function _E(r,s){let a;const d=s[r.index];if(di(d))a=d;else{let p;if(8&r.type)p=V(d);else{const v=s[11];p=v.createComment("");const T=vt(r,s);Id(v,Wl(v,T),p,function Ff(r,s){return ir(r)?r.nextSibling(s):s.nextSibling}(v,T),!1)}s[r.index]=a=Wc(d,s,p,r),Qf(s,a)}return new gE(a,r,s)}class m0{constructor(s){this.queryList=s,this.matches=null}clone(){return new m0(this.queryList)}setDirty(){this.queryList.setDirty()}}class _0{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const d=null!==s.contentQueries?s.contentQueries[0]:a.length,p=[];for(let v=0;v<d;v++){const T=a.getByIndex(v);p.push(this.queries[T.indexInDeclarationView].clone())}return new _0(p)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==IE(s,a).matches&&this.queries[a].setDirty()}}class yE{constructor(s,a,d=null){this.predicate=s,this.flags=a,this.read=d}}class y0{constructor(s=[]){this.queries=s}elementStart(s,a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let d=0;d<this.length;d++){const p=null!==a?a.length:0,v=this.getByIndex(d).embeddedTView(s,p);v&&(v.indexInDeclarationView=d,null!==a?a.push(v):a=[v])}return null!==a?new y0(a):null}template(s,a){for(let d=0;d<this.queries.length;d++)this.queries[d].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class v0{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new v0(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let d=s.parent;for(;null!==d&&8&d.type&&d.index!==a;)d=d.parent;return a===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const v=d[p];this.matchTNodeWithReadOption(s,a,Xw(a,v)),this.matchTNodeWithReadOption(s,a,Qt(a,s,v,!1,!1))}else d===Rv?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Qt(a,s,d,!1,!1))}matchTNodeWithReadOption(s,a,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===Sv||p===Yv||p===Rv&&4&a.type)this.addMatch(a.index,-2);else{const v=Qt(a,s,p,!1,!1);null!==v&&this.addMatch(a.index,v)}else this.addMatch(a.index,d)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Xw(r,s){const a=r.localNames;if(null!==a)for(let d=0;d<a.length;d+=2)if(a[d]===s)return a[d+1];return null}function tb(r,s,a,d){return-1===a?function eb(r,s){return 11&r.type?ky(r,s):4&r.type?Kv(r,s):null}(s,r):-2===a?function nb(r,s,a){return a===Sv?ky(s,r):a===Rv?Kv(s,r):a===Yv?_E(s,r):void 0}(r,s,d):zn(r,r[1],a,s)}function vE(r,s,a,d){const p=s[19].queries[d];if(null===p.matches){const v=r.data,T=a.matches,x=[];for(let F=0;F<T.length;F+=2){const Q=T[F];x.push(Q<0?null:tb(s,v[Q],T[F+1],a.metadata.read))}p.matches=x}return p.matches}function E0(r,s,a,d){const p=r.queries.getByIndex(a),v=p.matches;if(null!==v){const T=vE(r,s,p,a);for(let x=0;x<v.length;x+=2){const F=v[x];if(F>0)d.push(T[x/2]);else{const Q=v[x+1],ee=s[-F];for(let fe=10;fe<ee.length;fe++){const Ne=ee[fe];Ne[17]===Ne[3]&&E0(Ne[1],Ne,Q,d)}if(null!==ee[9]){const fe=ee[9];for(let Ne=0;Ne<fe.length;Ne++){const Ye=fe[Ne];E0(Ye[1],Ye,Q,d)}}}}}return d}function EE(r){const s=Ee(),a=Dt(),d=ea();$a(d+1);const p=IE(a,d);if(r.dirty&&Wn(s)===(2==(2&p.metadata.flags))){if(null===p.matches)r.reset([]);else{const v=p.crossesNgTemplate?E0(a,s,d,[]):vE(a,s,p,d);r.reset(v,yw),r.notifyOnChanges()}return!0}return!1}function wE(r,s,a,d){const p=Dt();if(p.firstCreatePass){const v=j();(function TE(r,s,a){null===r.queries&&(r.queries=new y0),r.queries.track(new v0(s,a))})(p,new yE(s,a,d),v.index),function sb(r,s){const a=r.contentQueries||(r.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(r.queries.length-1,s)}(p,r),2==(2&a)&&(p.staticContentQueries=!0)}!function CE(r,s,a){const d=new p0(4==(4&a));zf(r,s,d,d.destroy),null===s[19]&&(s[19]=new _0),s[19].queries.push(new m0(d))}(p,Ee(),a)}function bE(){return function ib(r,s){return r[19].queries[s].queryList}(Ee(),ea())}function IE(r,s){return r.queries.getByIndex(s)}function DE(r,s){return Kv(r,s)}function Xv(...r){}const $E=new Ji("Application Initializer");let D0=(()=>{class r{constructor(a){this.appInits=a,this.resolve=Xv,this.reject=Xv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const a=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const v=this.appInits[p]();if(Rg(v))a.push(v);else if(uv(v)){const T=new Promise((x,F)=>{v.subscribe({complete:x,error:F})});a.push(T)}}Promise.all(a).then(()=>{d()}).catch(p=>{this.reject(p)}),0===a.length&&d(),this.initialized=!0}}return r.\u0275fac=function(a){return new(a||r)(gn($E,8))},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const GE=new Ji("AppId",{providedIn:"root",factory:function qE(){return`${S0()}${S0()}${S0()}`}});function S0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WE=new Ji("Platform Initializer"),bb=new Ji("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zE=new Ji("appBootstrapListener");let Cb=(()=>{class r{log(a){console.log(a)}warn(a){console.warn(a)}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const A0=new Ji("LocaleId",{providedIn:"root",factory:()=>Pr(A0,on.Optional|on.SkipSelf)||function Tb(){return"undefined"!=typeof $localize&&$localize.locale||Cp}()}),Ib=new Ji("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Db{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Sb=(()=>{class r{compileModuleSync(a){return new h0(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const d=this.compileModuleSync(a),v=b(er(a).declarations).reduce((T,x)=>{const F=Vr(x);return F&&T.push(new d0(F)),T},[]);return new Db(d,v)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Mb=(()=>Promise.resolve(0))();function M0(r){"undefined"==typeof Zone?Mb.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Yd{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hf(!1),this.onMicrotaskEmpty=new hf(!1),this.onStable=new hf(!1),this.onError=new hf(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&a,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function xb(){let r=$n.requestAnimationFrame,s=$n.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const d=s[Zone.__symbol__("OriginalDelegate")];d&&(s=d)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Pb(r){const s=()=>{!function Nb(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call($n,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,R0(r),r.isCheckStableRunning=!0,x0(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),R0(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,d,p,v,T,x)=>{try{return ZE(r),a.invokeTask(p,v,T,x)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||r.shouldCoalesceRunChangeDetection)&&s(),KE(r)}},onInvoke:(a,d,p,v,T,x,F)=>{try{return ZE(r),a.invoke(p,v,T,x,F)}finally{r.shouldCoalesceRunChangeDetection&&s(),KE(r)}},onHasTask:(a,d,p,v)=>{a.hasTask(p,v),d===p&&("microTask"==v.change?(r._hasPendingMicrotasks=v.microTask,R0(r),x0(r)):"macroTask"==v.change&&(r.hasPendingMacrotasks=v.macroTask))},onHandleError:(a,d,p,v)=>(a.handleError(p,v),r.runOutsideAngular(()=>r.onError.emit(v)),!1)})}(p)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yd.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yd.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,d){return this._inner.run(s,a,d)}runTask(s,a,d,p){const v=this._inner,T=v.scheduleEventTask("NgZoneEvent: "+p,s,Rb,Xv,Xv);try{return v.runTask(T,a,d)}finally{v.cancelTask(T)}}runGuarded(s,a,d){return this._inner.runGuarded(s,a,d)}runOutsideAngular(s){return this._outer.run(s)}}const Rb={};function x0(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function R0(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function ZE(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function KE(r){r._nesting--,x0(r)}class Ob{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hf,this.onMicrotaskEmpty=new hf,this.onStable=new hf,this.onError=new hf}run(s,a,d){return s.apply(a,d)}runGuarded(s,a,d){return s.apply(a,d)}runOutsideAngular(s){return s()}runTask(s,a,d,p){return s.apply(a,d)}}let YE=(()=>{class r{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yd.assertNotInAngularZone(),M0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())M0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(a)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,d,p){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==v),a(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:a,timeoutId:v,updateCb:p})}whenStable(a,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,d,p){return[]}}return r.\u0275fac=function(a){return new(a||r)(gn(Yd))},r.\u0275prov=Ht({token:r,factory:r.\u0275fac}),r})(),kb=(()=>{class r{constructor(){this._applications=new Map,N0.addToWindow(this)}registerApplication(a,d){this._applications.set(a,d)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,d=!0){return N0.findTestabilityInTree(this,a,d)}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();class Fb{addToWindow(s){}findTestabilityInTree(s,a,d){return null}}function Lb(r){N0=r}let N0=new Fb,b_=null;const QE=new Ji("AllowMultipleToken"),JE=new Ji("PlatformOnDestroy");class Bb{constructor(s,a){this.name=s,this.token=a}}function XE(r,s,a=[]){const d=`Platform: ${s}`,p=new Ji(d);return(v=[])=>{let T=P0();if(!T||T.injector.get(QE,!1)){const x=[...a,...v,{provide:p,useValue:!0}];r?r(x):function jb(r){if(b_&&!b_.get(QE,!1))throw new rt(400,"");b_=r;const s=r.get(ew),a=r.get(WE,null);a&&a.forEach(d=>d())}(function $b(r=[],s){return ku.create({name:s,providers:[{provide:jh,useValue:"platform"},{provide:JE,useValue:()=>b_=null},...r]})}(x,d))}return function Hb(r){const s=P0();if(!s)throw new rt(401,"");return s}()}}function P0(){var r;return null!==(r=null==b_?void 0:b_.get(ew))&&void 0!==r?r:null}let ew=(()=>{class r{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,d){const x=function Gb(r,s){let a;return a="noop"===r?new Ob:("zone.js"===r?void 0:r)||new Yd({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),F=[{provide:Yd,useValue:x}];return x.run(()=>{const Q=ku.create({providers:F,parent:this.injector,name:a.moduleType.name}),ee=a.create(Q),fe=ee.injector.get(bd,null);if(!fe)throw new rt(402,"");return x.runOutsideAngular(()=>{const Ne=x.onError.subscribe({next:Ye=>{fe.handleError(Ye)}});ee.onDestroy(()=>{k0(this._modules,ee),Ne.unsubscribe()})}),function qb(r,s,a){try{const d=a();return Rg(d)?d.catch(p=>{throw s.runOutsideAngular(()=>r.handleError(p)),p}):d}catch(d){throw s.runOutsideAngular(()=>r.handleError(d)),d}}(fe,x,()=>{const Ne=ee.injector.get(D0);return Ne.runInitializers(),Ne.donePromise.then(()=>(function Ny(r){Ot(r,"Expected localeId to be defined"),"string"==typeof r&&(v_=r.toLowerCase().replace(/_/g,"-"))}(ee.injector.get(A0,Cp)||Cp),this._moduleDoBootstrap(ee),ee))})})}bootstrapModule(a,d=[]){const p=tw({},d);return function Ub(r,s,a){const d=new h0(a);return Promise.resolve(d)}(0,0,a).then(v=>this.bootstrapModuleFactory(v,p))}_moduleDoBootstrap(a){const d=a.injector.get(O0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!a.instance.ngDoBootstrap)throw new rt(403,"");a.instance.ngDoBootstrap(d)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new rt(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const a=this._injector.get(JE,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(a){return new(a||r)(gn(ku))},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function tw(r,s){return Array.isArray(s)?s.reduce(tw,r):Object.assign(Object.assign({},r),s)}let O0=(()=>{class r{constructor(a,d,p,v){this._zone=a,this._injector=d,this._exceptionHandler=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new ie.y(F=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{F.next(this._stable),F.complete()})}),x=new ie.y(F=>{let Q;this._zone.runOutsideAngular(()=>{Q=this._zone.onStable.subscribe(()=>{Yd.assertNotInAngularZone(),M0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,F.next(!0))})})});const ee=this._zone.onUnstable.subscribe(()=>{Yd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{F.next(!1)}))});return()=>{Q.unsubscribe(),ee.unsubscribe()}});this.isStable=(0,Fe.T)(T,x.pipe((0,z.B)()))}bootstrap(a,d){if(!this._initStatus.done)throw new rt(405,"");let p;p=a instanceof Iv?a:this._injector.get(cd).resolveComponentFactory(a),this.componentTypes.push(p.componentType);const v=function Vb(r){return r.isBoundToModule}(p)?void 0:this._injector.get(Fy),x=p.create(ku.NULL,[],d||p.selector,v),F=x.location.nativeElement,Q=x.injector.get(YE,null),ee=Q&&x.injector.get(kb);return Q&&ee&&ee.registerApplication(F,Q),x.onDestroy(()=>{this.detachView(x.hostView),k0(this.components,x),ee&&ee.unregisterApplication(F)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new rt(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const d=a;this._views.push(d),d.attachToAppRef(this)}detachView(a){const d=a;k0(this._views,d),d.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(zE,[]).concat(this._bootstrapListeners).forEach(p=>p(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(a){return new(a||r)(gn(Yd),gn(ku),gn(bd),gn(D0))},r.\u0275prov=Ht({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function k0(r,s){const a=r.indexOf(s);a>-1&&r.splice(a,1)}let rw=!0,iw=!1;function zb(){return iw=!0,rw}function Zb(){if(iw)throw new Error("Cannot enable prod mode after platform setup.");rw=!1}let Kb=(()=>{class r{}return r.__NG_ELEMENT_ID__=Yb,r})();function Yb(r){return function Qb(r,s,a){if(ha(r)&&!a){const d=kn(r.index,s);return new Av(d,d)}return 47&r.type?new Av(s[16],s):null}(j(),Ee(),16==(16&r))}class lw{constructor(){}supports(s){return oo(s)}create(s){return new rC(s)}}const nC=(r,s)=>s;class rC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||nC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,d=this._removalsHead,p=0,v=null;for(;a||d;){const T=!d||a&&a.currentIndex<cw(d,p,v)?a:d,x=cw(T,p,v),F=T.currentIndex;if(T===d)p--,d=d._nextRemoved;else if(a=a._next,null==T.previousIndex)p++;else{v||(v=[]);const Q=x-p,ee=F-p;if(Q!=ee){for(let Ne=0;Ne<Q;Ne++){const Ye=Ne<v.length?v[Ne]:v[Ne]=0,Ct=Ye+Ne;ee<=Ct&&Ct<Q&&(v[Ne]=Ye+1)}v[T.previousIndex]=ee-Q}}x!==F&&s(T,x,F)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!oo(s))throw new rt(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let p,v,T,a=this._itHead,d=!1;if(Array.isArray(s)){this.length=s.length;for(let x=0;x<this.length;x++)v=s[x],T=this._trackByFn(x,v),null!==a&&Object.is(a.trackById,T)?(d&&(a=this._verifyReinsertion(a,v,T,x)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,T,x),d=!0),a=a._next}else p=0,function ep(r,s){if(Array.isArray(r))for(let a=0;a<r.length;a++)s(r[a]);else{const a=r[qh()]();let d;for(;!(d=a.next()).done;)s(d.value)}}(s,x=>{T=this._trackByFn(p,x),null!==a&&Object.is(a.trackById,T)?(d&&(a=this._verifyReinsertion(a,x,T,p)),Object.is(a.item,x)||this._addIdentityChange(a,x)):(a=this._mismatch(a,x,T,p),d=!0),a=a._next,p++}),this.length=p;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,d,p){let v;return null===s?v=this._itTail:(v=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,v,p)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,v,p)):s=this._addAfter(new iC(a,d),v,p),s}_verifyReinsertion(s,a,d,p){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?s=this._reinsertAfter(v,s._prev,p):s.currentIndex!=p&&(s.currentIndex=p,this._addToMoves(s,p)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const p=s._prevRemoved,v=s._nextRemoved;return null===p?this._removalsHead=v:p._nextRemoved=v,null===v?this._removalsTail=p:v._prevRemoved=p,this._insertAfter(s,a,d),this._addToMoves(s,d),s}_moveAfter(s,a,d){return this._unlink(s),this._insertAfter(s,a,d),this._addToMoves(s,d),s}_addAfter(s,a,d){return this._insertAfter(s,a,d),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,d){const p=null===a?this._itHead:a._next;return s._next=p,s._prev=a,null===p?this._itTail=s:p._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new uw),this._linkedRecords.put(s),s.currentIndex=d,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,d=s._next;return null===a?this._itHead=d:a._next=d,null===d?this._itTail=a:d._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uw),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class iC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===a||a<=d.currentIndex)&&Object.is(d.trackById,s))return d;return null}remove(s){const a=s._prevDup,d=s._nextDup;return null===a?this._head=d:a._nextDup=d,null===d?this._tail=a:d._prevDup=a,null===this._head}}class uw{constructor(){this.map=new Map}put(s){const a=s.trackById;let d=this.map.get(a);d||(d=new sC,this.map.set(a,d)),d.add(s)}get(s,a){const p=this.map.get(s);return p?p.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cw(r,s,a){const d=r.previousIndex;if(null===d)return d;let p=0;return a&&d<a.length&&(p=a[d]),d+s+p}class dw{constructor(){}supports(s){return s instanceof Map||tp(s)}create(){return new oC}}class oC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||tp(s)))throw new rt(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(d,p)=>{if(a&&a.key===p)this._maybeAddToChanges(a,d),this._appendAfter=a,a=a._next;else{const v=this._getOrCreateRecordForKey(p,d);a=this._insertBeforeOrAppend(a,v)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let d=a;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const d=s._prev;return a._next=s,a._prev=d,s._prev=a,d&&(d._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const p=this._records.get(s);this._maybeAddToChanges(p,a);const v=p._prev,T=p._next;return v&&(v._next=T),T&&(T._prev=v),p._next=null,p._prev=null,p}const d=new aC(s);return this._records.set(s,d),d.currentValue=a,this._addToAdditions(d),d}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(d=>a(s[d],d))}}class aC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hw(){return new B0([new lw])}let B0=(()=>{class r{constructor(a){this.factories=a}static create(a,d){if(null!=d){const p=d.factories.slice();a=a.concat(p)}return new r(a)}static extend(a){return{provide:r,useFactory:d=>r.create(a,d||hw()),deps:[[r,new Go,new Us]]}}find(a){const d=this.factories.find(p=>p.supports(a));if(null!=d)return d;throw new rt(901,"")}}return r.\u0275prov=Ht({token:r,providedIn:"root",factory:hw}),r})();function fw(){return new j0([new dw])}let j0=(()=>{class r{constructor(a){this.factories=a}static create(a,d){if(d){const p=d.factories.slice();a=a.concat(p)}return new r(a)}static extend(a){return{provide:r,useFactory:d=>r.create(a,d||fw()),deps:[[r,new Go,new Us]]}}find(a){const d=this.factories.find(v=>v.supports(a));if(d)return d;throw new rt(901,"")}}return r.\u0275prov=Ht({token:r,providedIn:"root",factory:fw}),r})();const cC=XE(null,"core",[]);let dC=(()=>{class r{constructor(a){}}return r.\u0275fac=function(a){return new(a||r)(gn(O0))},r.\u0275mod=ri({type:r}),r.\u0275inj=wn({}),r})()},2382:(Ut,We,$)=>{$.d(We,{Fj:()=>ct,qu:()=>po,u:()=>Ps,sg:()=>ws,u5:()=>un,JJ:()=>Fr,JL:()=>Hi,F:()=>ci,On:()=>cs,YN:()=>bo,UX:()=>Wi,EJ:()=>yi,kI:()=>ut,_Y:()=>ts,Kr:()=>Lo});var w=$(5e3),m=$(9808),ie=$(8306),Fe=$(4742),z=$(8421),De=$(7669),Ve=$(5403),ke=$(3268),Ge=$(1810),ue=$(8996),Pe=$(4004);let Tt=(()=>{class G{constructor(k,re){this._renderer=k,this._elementRef=re,this.onChange=Ee=>{},this.onTouched=()=>{}}setProperty(k,re){this._renderer.setProperty(this._elementRef.nativeElement,k,re)}registerOnTouched(k){this.onTouched=k}registerOnChange(k){this.onChange=k}setDisabledState(k){this.setProperty("disabled",k)}}return G.\u0275fac=function(k){return new(k||G)(w.Y36(w.Qsj),w.Y36(w.SBq))},G.\u0275dir=w.lG2({type:G}),G})(),Ke=(()=>{class G extends Tt{}return G.\u0275fac=function(){let U;return function(re){return(U||(U=w.n5z(G)))(re||G)}}(),G.\u0275dir=w.lG2({type:G,features:[w.qOj]}),G})();const rt=new w.OlP("NgValueAccessor"),ot={provide:rt,useExisting:(0,w.Gpc)(()=>ct),multi:!0},Lt=new w.OlP("CompositionEventMode");let ct=(()=>{class G extends Tt{constructor(k,re,Ee){super(k,re),this._compositionMode=Ee,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Oe(){const G=(0,m.q)()?(0,m.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(k){this.setProperty("value",null==k?"":k)}_handleInput(k){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(k)}_compositionStart(){this._composing=!0}_compositionEnd(k){this._composing=!1,this._compositionMode&&this.onChange(k)}}return G.\u0275fac=function(k){return new(k||G)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Lt,8))},G.\u0275dir=w.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(k,re){1&k&&w.NdJ("input",function(Dt){return re._handleInput(Dt.target.value)})("blur",function(){return re.onTouched()})("compositionstart",function(){return re._compositionStart()})("compositionend",function(Dt){return re._compositionEnd(Dt.target.value)})},features:[w._Bn([ot]),w.qOj]}),G})();function it(G){return null==G||0===G.length}function Qe(G){return null!=G&&"number"==typeof G.length}const ze=new w.OlP("NgValidators"),It=new w.OlP("NgAsyncValidators"),le=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ut{static min(U){return function me(G){return U=>{if(it(U.value)||it(G))return null;const k=parseFloat(U.value);return!isNaN(k)&&k<G?{min:{min:G,actual:U.value}}:null}}(U)}static max(U){return function je(G){return U=>{if(it(U.value)||it(G))return null;const k=parseFloat(U.value);return!isNaN(k)&&k>G?{max:{max:G,actual:U.value}}:null}}(U)}static required(U){return function He(G){return it(G.value)?{required:!0}:null}(U)}static requiredTrue(U){return function tt(G){return!0===G.value?null:{required:!0}}(U)}static email(U){return function Me(G){return it(G.value)||le.test(G.value)?null:{email:!0}}(U)}static minLength(U){return function mt(G){return U=>it(U.value)||!Qe(U.value)?null:U.value.length<G?{minlength:{requiredLength:G,actualLength:U.value.length}}:null}(U)}static maxLength(U){return function Le(G){return U=>Qe(U.value)&&U.value.length>G?{maxlength:{requiredLength:G,actualLength:U.value.length}}:null}(U)}static pattern(U){return function ft(G){if(!G)return Ot;let U,k;return"string"==typeof G?(k="","^"!==G.charAt(0)&&(k+="^"),k+=G,"$"!==G.charAt(G.length-1)&&(k+="$"),U=new RegExp(k)):(k=G.toString(),U=G),re=>{if(it(re.value))return null;const Ee=re.value;return U.test(Ee)?null:{pattern:{requiredPattern:k,actualValue:Ee}}}}(U)}static nullValidator(U){return null}static compose(U){return wn(U)}static composeAsync(U){return Ln(U)}}function Ot(G){return null}function lt(G){return null!=G}function dn(G){const U=(0,w.QGY)(G)?(0,ue.D)(G):G;return(0,w.CqO)(U),U}function Kt(G){let U={};return G.forEach(k=>{U=null!=k?Object.assign(Object.assign({},U),k):U}),0===Object.keys(U).length?null:U}function qt(G,U){return U.map(k=>k(G))}function mn(G){return G.map(U=>function Ht(G){return!G.validate}(U)?U:k=>U.validate(k))}function wn(G){if(!G)return null;const U=G.filter(lt);return 0==U.length?null:function(k){return Kt(qt(k,U))}}function vn(G){return null!=G?wn(mn(G)):null}function Ln(G){if(!G)return null;const U=G.filter(lt);return 0==U.length?null:function(k){return function pe(...G){const U=(0,De.jO)(G),{args:k,keys:re}=(0,Fe.D)(G),Ee=new ie.y(Dt=>{const{length:W}=k;if(!W)return void Dt.complete();const j=new Array(W);let ne=W,de=W;for(let Ce=0;Ce<W;Ce++){let et=!1;(0,z.Xf)(k[Ce]).subscribe((0,Ve.x)(Dt,St=>{et||(et=!0,de--),j[Ce]=St},()=>ne--,void 0,()=>{(!ne||!et)&&(de||Dt.next(re?(0,Ge.n)(re,j):j),Dt.complete())}))}});return U?Ee.pipe((0,ke.Z)(U)):Ee}(qt(k,U).map(dn)).pipe((0,Pe.U)(Kt))}}function pr(G){return null!=G?Ln(mn(G)):null}function kr(G,U){return null===G?[U]:Array.isArray(G)?[...G,U]:[G,U]}function wr(G){return G._rawValidators}function ni(G){return G._rawAsyncValidators}function ar(G){return G?Array.isArray(G)?G:[G]:[]}function Mr(G,U){return Array.isArray(G)?G.includes(U):G===U}function Yn(G,U){const k=ar(U);return ar(G).forEach(Ee=>{Mr(k,Ee)||k.push(Ee)}),k}function on(G,U){return ar(U).filter(k=>!Mr(G,k))}class Vn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(U){this._rawValidators=U||[],this._composedValidatorFn=vn(this._rawValidators)}_setAsyncValidators(U){this._rawAsyncValidators=U||[],this._composedAsyncValidatorFn=pr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(U){this._onDestroyCallbacks.push(U)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(U=>U()),this._onDestroyCallbacks=[]}reset(U){this.control&&this.control.reset(U)}hasError(U,k){return!!this.control&&this.control.hasError(U,k)}getError(U,k){return this.control?this.control.getError(U,k):null}}class Rn extends Vn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hn extends Vn{get formDirective(){return null}get path(){return null}}class Zi{constructor(U){this._cd=U}is(U){var k,re,Ee;return"submitted"===U?!!(null===(k=this._cd)||void 0===k?void 0:k.submitted):!!(null===(Ee=null===(re=this._cd)||void 0===re?void 0:re.control)||void 0===Ee?void 0:Ee[U])}}let Fr=(()=>{class G extends Zi{constructor(k){super(k)}}return G.\u0275fac=function(k){return new(k||G)(w.Y36(Rn,2))},G.\u0275dir=w.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(k,re){2&k&&w.ekj("ng-untouched",re.is("untouched"))("ng-touched",re.is("touched"))("ng-pristine",re.is("pristine"))("ng-dirty",re.is("dirty"))("ng-valid",re.is("valid"))("ng-invalid",re.is("invalid"))("ng-pending",re.is("pending"))},features:[w.qOj]}),G})(),Hi=(()=>{class G extends Zi{constructor(k){super(k)}}return G.\u0275fac=function(k){return new(k||G)(w.Y36(hn,10))},G.\u0275dir=w.lG2({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(k,re){2&k&&w.ekj("ng-untouched",re.is("untouched"))("ng-touched",re.is("touched"))("ng-pristine",re.is("pristine"))("ng-dirty",re.is("dirty"))("ng-valid",re.is("valid"))("ng-invalid",re.is("invalid"))("ng-pending",re.is("pending"))("ng-submitted",re.is("submitted"))},features:[w.qOj]}),G})();function wt(G,U){return[...U.path,G]}function Vt(G,U){_n(G,U),U.valueAccessor.writeValue(G.value),function ri(G,U){U.valueAccessor.registerOnChange(k=>{G._pendingValue=k,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&ui(G,U)})}(G,U),function Ii(G,U){const k=(re,Ee)=>{U.valueAccessor.writeValue(re),Ee&&U.viewToModelUpdate(re)};G.registerOnChange(k),U._registerOnDestroy(()=>{G._unregisterOnChange(k)})}(G,U),function Ur(G,U){U.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&ui(G,U),"submit"!==G.updateOn&&G.markAsTouched()})}(G,U),function Dr(G,U){if(U.valueAccessor.setDisabledState){const k=re=>{U.valueAccessor.setDisabledState(re)};G.registerOnDisabledChange(k),U._registerOnDestroy(()=>{G._unregisterOnDisabledChange(k)})}}(G,U)}function zt(G,U,k=!0){const re=()=>{};U.valueAccessor&&(U.valueAccessor.registerOnChange(re),U.valueAccessor.registerOnTouched(re)),xr(G,U),G&&(U._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function an(G,U){G.forEach(k=>{k.registerOnValidatorChange&&k.registerOnValidatorChange(U)})}function _n(G,U){const k=wr(G);null!==U.validator?G.setValidators(kr(k,U.validator)):"function"==typeof k&&G.setValidators([k]);const re=ni(G);null!==U.asyncValidator?G.setAsyncValidators(kr(re,U.asyncValidator)):"function"==typeof re&&G.setAsyncValidators([re]);const Ee=()=>G.updateValueAndValidity();an(U._rawValidators,Ee),an(U._rawAsyncValidators,Ee)}function xr(G,U){let k=!1;if(null!==G){if(null!==U.validator){const Ee=wr(G);if(Array.isArray(Ee)&&Ee.length>0){const Dt=Ee.filter(W=>W!==U.validator);Dt.length!==Ee.length&&(k=!0,G.setValidators(Dt))}}if(null!==U.asyncValidator){const Ee=ni(G);if(Array.isArray(Ee)&&Ee.length>0){const Dt=Ee.filter(W=>W!==U.asyncValidator);Dt.length!==Ee.length&&(k=!0,G.setAsyncValidators(Dt))}}}const re=()=>{};return an(U._rawValidators,re),an(U._rawAsyncValidators,re),k}function ui(G,U){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),U.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function Tn(G,U){_n(G,U)}function $s(G,U){if(!G.hasOwnProperty("model"))return!1;const k=G.model;return!!k.isFirstChange()||!Object.is(U,k.currentValue)}function Xi(G,U){G._syncPendingControls(),U.forEach(k=>{const re=k.control;"submit"===re.updateOn&&re._pendingChange&&(k.viewToModelUpdate(re._pendingValue),re._pendingChange=!1)})}function mi(G,U){if(!U)return null;let k,re,Ee;return Array.isArray(U),U.forEach(Dt=>{Dt.constructor===ct?k=Dt:function Rs(G){return Object.getPrototypeOf(G.constructor)===Ke}(Dt)?re=Dt:Ee=Dt}),Ee||re||k||null}function tr(G,U){const k=G.indexOf(U);k>-1&&G.splice(k,1)}const Mt="VALID",Yt="INVALID",On="PENDING",Br="DISABLED";function jr(G){return(Rr(G)?G.validators:G)||null}function Ki(G){return Array.isArray(G)?vn(G):G||null}function gr(G,U){return(Rr(U)?U.asyncValidators:G)||null}function $i(G){return Array.isArray(G)?pr(G):G||null}function Rr(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}const Mn=G=>G instanceof ii,Yi=G=>G instanceof Yr,vs=G=>G instanceof nr;function Ns(G){return Mn(G)?G.value:G.getRawValue()}function _i(G,U){const k=Yi(G),re=G.controls;if(!(k?Object.keys(re):re).length)throw new w.vHH(1e3,"");if(!re[U])throw new w.vHH(1001,"")}function Wr(G,U){Yi(G),G._forEachChild((re,Ee)=>{if(void 0===U[Ee])throw new w.vHH(1002,"")})}class ei{constructor(U,k){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=U,this._rawAsyncValidators=k,this._composedValidatorFn=Ki(this._rawValidators),this._composedAsyncValidatorFn=$i(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(U){this._rawValidators=this._composedValidatorFn=U}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(U){this._rawAsyncValidators=this._composedAsyncValidatorFn=U}get parent(){return this._parent}get valid(){return this.status===Mt}get invalid(){return this.status===Yt}get pending(){return this.status==On}get disabled(){return this.status===Br}get enabled(){return this.status!==Br}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(U){this._rawValidators=U,this._composedValidatorFn=Ki(U)}setAsyncValidators(U){this._rawAsyncValidators=U,this._composedAsyncValidatorFn=$i(U)}addValidators(U){this.setValidators(Yn(U,this._rawValidators))}addAsyncValidators(U){this.setAsyncValidators(Yn(U,this._rawAsyncValidators))}removeValidators(U){this.setValidators(on(U,this._rawValidators))}removeAsyncValidators(U){this.setAsyncValidators(on(U,this._rawAsyncValidators))}hasValidator(U){return Mr(this._rawValidators,U)}hasAsyncValidator(U){return Mr(this._rawAsyncValidators,U)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(U={}){this.touched=!0,this._parent&&!U.onlySelf&&this._parent.markAsTouched(U)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(U=>U.markAllAsTouched())}markAsUntouched(U={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(k=>{k.markAsUntouched({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}markAsDirty(U={}){this.pristine=!1,this._parent&&!U.onlySelf&&this._parent.markAsDirty(U)}markAsPristine(U={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(k=>{k.markAsPristine({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}markAsPending(U={}){this.status=On,!1!==U.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!U.onlySelf&&this._parent.markAsPending(U)}disable(U={}){const k=this._parentMarkedDirty(U.onlySelf);this.status=Br,this.errors=null,this._forEachChild(re=>{re.disable(Object.assign(Object.assign({},U),{onlySelf:!0}))}),this._updateValue(),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},U),{skipPristineCheck:k})),this._onDisabledChange.forEach(re=>re(!0))}enable(U={}){const k=this._parentMarkedDirty(U.onlySelf);this.status=Mt,this._forEachChild(re=>{re.enable(Object.assign(Object.assign({},U),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},U),{skipPristineCheck:k})),this._onDisabledChange.forEach(re=>re(!1))}_updateAncestors(U){this._parent&&!U.onlySelf&&(this._parent.updateValueAndValidity(U),U.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(U){this._parent=U}updateValueAndValidity(U={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mt||this.status===On)&&this._runAsyncValidator(U.emitEvent)),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!U.onlySelf&&this._parent.updateValueAndValidity(U)}_updateTreeValidity(U={emitEvent:!0}){this._forEachChild(k=>k._updateTreeValidity(U)),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Br:Mt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(U){if(this.asyncValidator){this.status=On,this._hasOwnPendingAsyncValidator=!0;const k=dn(this.asyncValidator(this));this._asyncValidationSubscription=k.subscribe(re=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(re,{emitEvent:U})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(U,k={}){this.errors=U,this._updateControlsErrors(!1!==k.emitEvent)}get(U){return function es(G,U,k){if(null==U||(Array.isArray(U)||(U=U.split(k)),Array.isArray(U)&&0===U.length))return null;let re=G;return U.forEach(Ee=>{re=Yi(re)?re.controls.hasOwnProperty(Ee)?re.controls[Ee]:null:vs(re)&&re.at(Ee)||null}),re}(this,U,".")}getError(U,k){const re=k?this.get(k):this;return re&&re.errors?re.errors[U]:null}hasError(U,k){return!!this.getError(U,k)}get root(){let U=this;for(;U._parent;)U=U._parent;return U}_updateControlsErrors(U){this.status=this._calculateStatus(),U&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(U)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?Br:this.errors?Yt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(On)?On:this._anyControlsHaveStatus(Yt)?Yt:Mt}_anyControlsHaveStatus(U){return this._anyControls(k=>k.status===U)}_anyControlsDirty(){return this._anyControls(U=>U.dirty)}_anyControlsTouched(){return this._anyControls(U=>U.touched)}_updatePristine(U={}){this.pristine=!this._anyControlsDirty(),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}_updateTouched(U={}){this.touched=this._anyControlsTouched(),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}_isBoxedValue(U){return"object"==typeof U&&null!==U&&2===Object.keys(U).length&&"value"in U&&"disabled"in U}_registerOnCollectionChange(U){this._onCollectionChange=U}_setUpdateStrategy(U){Rr(U)&&null!=U.updateOn&&(this._updateOn=U.updateOn)}_parentMarkedDirty(U){return!U&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ii extends ei{constructor(U=null,k,re){super(jr(k),gr(re,k)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(U),this._setUpdateStrategy(k),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rr(k)&&k.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(U)?U.value:U)}setValue(U,k={}){this.value=this._pendingValue=U,this._onChange.length&&!1!==k.emitModelToViewChange&&this._onChange.forEach(re=>re(this.value,!1!==k.emitViewToModelChange)),this.updateValueAndValidity(k)}patchValue(U,k={}){this.setValue(U,k)}reset(U=this.defaultValue,k={}){this._applyFormState(U),this.markAsPristine(k),this.markAsUntouched(k),this.setValue(this.value,k),this._pendingChange=!1}_updateValue(){}_anyControls(U){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(U){this._onChange.push(U)}_unregisterOnChange(U){tr(this._onChange,U)}registerOnDisabledChange(U){this._onDisabledChange.push(U)}_unregisterOnDisabledChange(U){tr(this._onDisabledChange,U)}_forEachChild(U){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(U){this._isBoxedValue(U)?(this.value=this._pendingValue=U.value,U.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=U}}class Yr extends ei{constructor(U,k,re){super(jr(k),gr(re,k)),this.controls=U,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(U,k){return this.controls[U]?this.controls[U]:(this.controls[U]=k,k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange),k)}addControl(U,k,re={}){this.registerControl(U,k),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}removeControl(U,k={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),delete this.controls[U],this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}setControl(U,k,re={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),delete this.controls[U],k&&this.registerControl(U,k),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}contains(U){return this.controls.hasOwnProperty(U)&&this.controls[U].enabled}setValue(U,k={}){Wr(this,U),Object.keys(U).forEach(re=>{_i(this,re),this.controls[re].setValue(U[re],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(U,k={}){null!=U&&(Object.keys(U).forEach(re=>{this.controls[re]&&this.controls[re].patchValue(U[re],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(U={},k={}){this._forEachChild((re,Ee)=>{re.reset(U[Ee],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this._reduceChildren({},(U,k,re)=>(U[re]=Ns(k),U))}_syncPendingControls(){let U=this._reduceChildren(!1,(k,re)=>!!re._syncPendingControls()||k);return U&&this.updateValueAndValidity({onlySelf:!0}),U}_forEachChild(U){Object.keys(this.controls).forEach(k=>{const re=this.controls[k];re&&U(re,k)})}_setUpControls(){this._forEachChild(U=>{U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(U){for(const k of Object.keys(this.controls)){const re=this.controls[k];if(this.contains(k)&&U(re))return!0}return!1}_reduceValue(){return this._reduceChildren({},(U,k,re)=>((k.enabled||this.disabled)&&(U[re]=k.value),U))}_reduceChildren(U,k){let re=U;return this._forEachChild((Ee,Dt)=>{re=k(re,Ee,Dt)}),re}_allControlsDisabled(){for(const U of Object.keys(this.controls))if(this.controls[U].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class nr extends ei{constructor(U,k,re){super(jr(k),gr(re,k)),this.controls=U,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(U){return this.controls[U]}push(U,k={}){this.controls.push(U),this._registerControl(U),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}insert(U,k,re={}){this.controls.splice(U,0,k),this._registerControl(k),this.updateValueAndValidity({emitEvent:re.emitEvent})}removeAt(U,k={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),this.controls.splice(U,1),this.updateValueAndValidity({emitEvent:k.emitEvent})}setControl(U,k,re={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),this.controls.splice(U,1),k&&(this.controls.splice(U,0,k),this._registerControl(k)),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(U,k={}){Wr(this,U),U.forEach((re,Ee)=>{_i(this,Ee),this.at(Ee).setValue(re,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(U,k={}){null!=U&&(U.forEach((re,Ee)=>{this.at(Ee)&&this.at(Ee).patchValue(re,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(U=[],k={}){this._forEachChild((re,Ee)=>{re.reset(U[Ee],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this.controls.map(U=>Ns(U))}clear(U={}){this.controls.length<1||(this._forEachChild(k=>k._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:U.emitEvent}))}_syncPendingControls(){let U=this.controls.reduce((k,re)=>!!re._syncPendingControls()||k,!1);return U&&this.updateValueAndValidity({onlySelf:!0}),U}_forEachChild(U){this.controls.forEach((k,re)=>{U(k,re)})}_updateValue(){this.value=this.controls.filter(U=>U.enabled||this.disabled).map(U=>U.value)}_anyControls(U){return this.controls.some(k=>k.enabled&&U(k))}_setUpControls(){this._forEachChild(U=>this._registerControl(U))}_allControlsDisabled(){for(const U of this.controls)if(U.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(U){U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange)}}const Qr={provide:hn,useExisting:(0,w.Gpc)(()=>ci)},Si=(()=>Promise.resolve(null))();let ci=(()=>{class G extends hn{constructor(k,re){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new w.vpe,this.form=new Yr({},vn(k),pr(re))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(k){Si.then(()=>{const re=this._findContainer(k.path);k.control=re.registerControl(k.name,k.control),Vt(k.control,k),k.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(k)})}getControl(k){return this.form.get(k.path)}removeControl(k){Si.then(()=>{const re=this._findContainer(k.path);re&&re.removeControl(k.name),this._directives.delete(k)})}addFormGroup(k){Si.then(()=>{const re=this._findContainer(k.path),Ee=new Yr({});Tn(Ee,k),re.registerControl(k.name,Ee),Ee.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(k){Si.then(()=>{const re=this._findContainer(k.path);re&&re.removeControl(k.name)})}getFormGroup(k){return this.form.get(k.path)}updateModel(k,re){Si.then(()=>{this.form.get(k.path).setValue(re)})}setValue(k){this.control.setValue(k)}onSubmit(k){return this.submitted=!0,Xi(this.form,this._directives),this.ngSubmit.emit(k),!1}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(k){return k.pop(),k.length?this.form.get(k):this.form}}return G.\u0275fac=function(k){return new(k||G)(w.Y36(ze,10),w.Y36(It,10))},G.\u0275dir=w.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(k,re){1&k&&w.NdJ("submit",function(Dt){return re.onSubmit(Dt)})("reset",function(){return re.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([Qr]),w.qOj]}),G})();const Qo={provide:Rn,useExisting:(0,w.Gpc)(()=>cs)},zr=(()=>Promise.resolve(null))();let cs=(()=>{class G extends Rn{constructor(k,re,Ee,Dt,W){super(),this._changeDetectorRef=W,this.control=new ii,this._registered=!1,this.update=new w.vpe,this._parent=k,this._setValidators(re),this._setAsyncValidators(Ee),this.valueAccessor=mi(0,Dt)}ngOnChanges(k){if(this._checkForErrors(),!this._registered||"name"in k){if(this._registered&&(this._checkName(),this.formDirective)){const re=k.name.previousValue;this.formDirective.removeControl({name:re,path:this._getPath(re)})}this._setUpControl()}"isDisabled"in k&&this._updateDisabled(k),$s(k,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(k){zr.then(()=>{var re;this.control.setValue(k,{emitViewToModelChange:!1}),null===(re=this._changeDetectorRef)||void 0===re||re.markForCheck()})}_updateDisabled(k){const re=k.isDisabled.currentValue,Ee=""===re||re&&"false"!==re;zr.then(()=>{var Dt;Ee&&!this.control.disabled?this.control.disable():!Ee&&this.control.disabled&&this.control.enable(),null===(Dt=this._changeDetectorRef)||void 0===Dt||Dt.markForCheck()})}_getPath(k){return this._parent?wt(k,this._parent):[k]}}return G.\u0275fac=function(k){return new(k||G)(w.Y36(hn,9),w.Y36(ze,10),w.Y36(It,10),w.Y36(rt,10),w.Y36(w.sBO,8))},G.\u0275dir=w.lG2({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[w._Bn([Qo]),w.qOj,w.TTD]}),G})(),ts=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275dir=w.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),G})(),Pt=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=w.oAB({type:G}),G.\u0275inj=w.cJS({}),G})();const ns=new w.OlP("NgModelWithFormControlWarning"),ko={provide:hn,useExisting:(0,w.Gpc)(()=>ws)};let ws=(()=>{class G extends hn{constructor(k,re){super(),this.validators=k,this.asyncValidators=re,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators(k),this._setAsyncValidators(re)}ngOnChanges(k){this._checkFormPresent(),k.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(k){const re=this.form.get(k.path);return Vt(re,k),re.updateValueAndValidity({emitEvent:!1}),this.directives.push(k),re}getControl(k){return this.form.get(k.path)}removeControl(k){zt(k.control||null,k,!1),tr(this.directives,k)}addFormGroup(k){this._setUpFormContainer(k)}removeFormGroup(k){this._cleanUpFormContainer(k)}getFormGroup(k){return this.form.get(k.path)}addFormArray(k){this._setUpFormContainer(k)}removeFormArray(k){this._cleanUpFormContainer(k)}getFormArray(k){return this.form.get(k.path)}updateModel(k,re){this.form.get(k.path).setValue(re)}onSubmit(k){return this.submitted=!0,Xi(this.form,this.directives),this.ngSubmit.emit(k),!1}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_updateDomValue(){this.directives.forEach(k=>{const re=k.control,Ee=this.form.get(k.path);re!==Ee&&(zt(re||null,k),Mn(Ee)&&(Vt(Ee,k),k.control=Ee))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(k){const re=this.form.get(k.path);Tn(re,k),re.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(k){if(this.form){const re=this.form.get(k.path);re&&function Vr(G,U){return xr(G,U)}(re,k)&&re.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_n(this.form,this),this._oldForm&&xr(this._oldForm,this)}_checkFormPresent(){}}return G.\u0275fac=function(k){return new(k||G)(w.Y36(ze,10),w.Y36(It,10))},G.\u0275dir=w.lG2({type:G,selectors:[["","formGroup",""]],hostBindings:function(k,re){1&k&&w.NdJ("submit",function(Dt){return re.onSubmit(Dt)})("reset",function(){return re.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([ko]),w.qOj,w.TTD]}),G})();const Cs={provide:Rn,useExisting:(0,w.Gpc)(()=>Ps)};let Ps=(()=>{class G extends Rn{constructor(k,re,Ee,Dt,W){super(),this._ngModelWarningConfig=W,this._added=!1,this.update=new w.vpe,this._ngModelWarningSent=!1,this._parent=k,this._setValidators(re),this._setAsyncValidators(Ee),this.valueAccessor=mi(0,Dt)}set isDisabled(k){}ngOnChanges(k){this._added||this._setUpControl(),$s(k,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}get path(){return wt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return G._ngModelWarningSentOnce=!1,G.\u0275fac=function(k){return new(k||G)(w.Y36(hn,13),w.Y36(ze,10),w.Y36(It,10),w.Y36(rt,10),w.Y36(ns,8))},G.\u0275dir=w.lG2({type:G,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[w._Bn([Cs]),w.qOj,w.TTD]}),G})();const Fo={provide:rt,useExisting:(0,w.Gpc)(()=>yi),multi:!0};function Os(G,U){return null==G?`${U}`:(U&&"object"==typeof U&&(U="Object"),`${G}: ${U}`.slice(0,50))}let yi=(()=>{class G extends Ke{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(k){this._compareWith=k}writeValue(k){this.value=k;const Ee=Os(this._getOptionId(k),k);this.setProperty("value",Ee)}registerOnChange(k){this.onChange=re=>{this.value=this._getOptionValue(re),k(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(k){for(const re of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(re),k))return re;return null}_getOptionValue(k){const re=function ba(G){return G.split(":")[0]}(k);return this._optionMap.has(re)?this._optionMap.get(re):k}}return G.\u0275fac=function(){let U;return function(re){return(U||(U=w.n5z(G)))(re||G)}}(),G.\u0275dir=w.lG2({type:G,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(k,re){1&k&&w.NdJ("change",function(Dt){return re.onChange(Dt.target.value)})("blur",function(){return re.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([Fo]),w.qOj]}),G})(),bo=(()=>{class G{constructor(k,re,Ee){this._element=k,this._renderer=re,this._select=Ee,this._select&&(this.id=this._select._registerOption())}set ngValue(k){null!=this._select&&(this._select._optionMap.set(this.id,k),this._setElementValue(Os(this.id,k)),this._select.writeValue(this._select.value))}set value(k){this._setElementValue(k),this._select&&this._select.writeValue(this._select.value)}_setElementValue(k){this._renderer.setProperty(this._element.nativeElement,"value",k)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return G.\u0275fac=function(k){return new(k||G)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(yi,9))},G.\u0275dir=w.lG2({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),G})();const Gi={provide:rt,useExisting:(0,w.Gpc)(()=>Ai),multi:!0};function Co(G,U){return null==G?`${U}`:("string"==typeof U&&(U=`'${U}'`),U&&"object"==typeof U&&(U="Object"),`${G}: ${U}`.slice(0,50))}let Ai=(()=>{class G extends Ke{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(k){this._compareWith=k}writeValue(k){let re;if(this.value=k,Array.isArray(k)){const Ee=k.map(Dt=>this._getOptionId(Dt));re=(Dt,W)=>{Dt._setSelected(Ee.indexOf(W.toString())>-1)}}else re=(Ee,Dt)=>{Ee._setSelected(!1)};this._optionMap.forEach(re)}registerOnChange(k){this.onChange=re=>{const Ee=[],Dt=re.selectedOptions;if(void 0!==Dt){const W=Dt;for(let j=0;j<W.length;j++){const de=this._getOptionValue(W[j].value);Ee.push(de)}}else{const W=re.options;for(let j=0;j<W.length;j++){const ne=W[j];if(ne.selected){const de=this._getOptionValue(ne.value);Ee.push(de)}}}this.value=Ee,k(Ee)}}_registerOption(k){const re=(this._idCounter++).toString();return this._optionMap.set(re,k),re}_getOptionId(k){for(const re of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(re)._value,k))return re;return null}_getOptionValue(k){const re=function vi(G){return G.split(":")[0]}(k);return this._optionMap.has(re)?this._optionMap.get(re)._value:k}}return G.\u0275fac=function(){let U;return function(re){return(U||(U=w.n5z(G)))(re||G)}}(),G.\u0275dir=w.lG2({type:G,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(k,re){1&k&&w.NdJ("change",function(Dt){return re.onChange(Dt.target)})("blur",function(){return re.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([Gi]),w.qOj]}),G})(),Lo=(()=>{class G{constructor(k,re,Ee){this._element=k,this._renderer=re,this._select=Ee,this._select&&(this.id=this._select._registerOption(this))}set ngValue(k){null!=this._select&&(this._value=k,this._setElementValue(Co(this.id,k)),this._select.writeValue(this._select.value))}set value(k){this._select?(this._value=k,this._setElementValue(Co(this.id,k)),this._select.writeValue(this._select.value)):this._setElementValue(k)}_setElementValue(k){this._renderer.setProperty(this._element.nativeElement,"value",k)}_setSelected(k){this._renderer.setProperty(this._element.nativeElement,"selected",k)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return G.\u0275fac=function(k){return new(k||G)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(Ai,9))},G.\u0275dir=w.lG2({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),G})(),qi=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=w.oAB({type:G}),G.\u0275inj=w.cJS({imports:[[Pt]]}),G})(),un=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=w.oAB({type:G}),G.\u0275inj=w.cJS({imports:[qi]}),G})(),Wi=(()=>{class G{static withConfig(k){return{ngModule:G,providers:[{provide:ns,useValue:k.warnOnNgModelWithFormControl}]}}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=w.oAB({type:G}),G.\u0275inj=w.cJS({imports:[qi]}),G})(),po=(()=>{class G{group(k,re=null){const Ee=this._reduceControls(k);let j,Dt=null,W=null;return null!=re&&(function Xo(G){return void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn}(re)?(Dt=null!=re.validators?re.validators:null,W=null!=re.asyncValidators?re.asyncValidators:null,j=null!=re.updateOn?re.updateOn:void 0):(Dt=null!=re.validator?re.validator:null,W=null!=re.asyncValidator?re.asyncValidator:null)),new Yr(Ee,{asyncValidators:W,updateOn:j,validators:Dt})}control(k,re,Ee){return new ii(k,re,Ee)}array(k,re,Ee){const Dt=k.map(W=>this._createControl(W));return new nr(Dt,re,Ee)}_reduceControls(k){const re={};return Object.keys(k).forEach(Ee=>{re[Ee]=this._createControl(k[Ee])}),re}_createControl(k){return Mn(k)||Yi(k)||vs(k)?k:Array.isArray(k)?this.control(k[0],k.length>1?k[1]:null,k.length>2?k[2]:null):this.control(k)}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275prov=w.Yz7({token:G,factory:G.\u0275fac,providedIn:Wi}),G})()},832:(Ut,We,$)=>{$.d(We,{F0:()=>sr,Bz:()=>So,lC:()=>To});var w=$(5e3),m=$(7579);class ie extends m.x{constructor(S){super(),this._value=S}get value(){return this.getValue()}_subscribe(S){const D=super._subscribe(S);return!D.closed&&S.next(this._value),D}getValue(){const{hasError:S,thrownError:D,_value:N}=this;if(S)throw D;return this._throwIfClosed(),N}next(S){super.next(this._value=S)}}var Fe=$(8306),z=$(4742),De=$(8996),Ve=$(4671),ke=$(3268),Ge=$(7669),pe=$(1810),ue=$(5403),Pe=$(9672);function rt(M,S,D){M?(0,Pe.f)(D,M,S):S()}var ht=$(576);function Xe(M,S){const D=(0,ht.m)(M)?M:()=>M,N=P=>P.error(D());return new Fe.y(S?P=>S.schedule(N,0,P):N)}var ot=$(8421);function Oe(M){return new Fe.y(S=>{(0,ot.Xf)(M()).subscribe(S)})}var Lt=$(727),ct=$(4482);function it(){return(0,ct.e)((M,S)=>{let D=null;M._refCount++;const N=(0,ue.x)(S,void 0,void 0,void 0,()=>{if(!M||M._refCount<=0||0<--M._refCount)return void(D=null);const P=M._connection,Z=D;D=null,P&&(!Z||P===Z)&&P.unsubscribe(),S.unsubscribe()});M.subscribe(N),N.closed||(D=M.connect())})}class Qe extends Fe.y{constructor(S,D){super(),this.source=S,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,ct.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,null==S||S.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new Lt.w0;const D=this.getSubject();S.add(this.source.subscribe((0,ue.x)(D,void 0,()=>{this._teardown(),D.complete()},N=>{this._teardown(),D.error(N)},()=>this._teardown()))),S.closed&&(this._connection=null,S=Lt.w0.EMPTY)}return S}refCount(){return it()(this)}}var ze=$(9646),It=$(6805),le=$(7272),ut=$(515);function me(M){return(0,ct.e)((S,D)=>{let Z,N=null,P=!1;N=S.subscribe((0,ue.x)(D,void 0,void 0,he=>{Z=(0,ot.Xf)(M(he,me(M)(S))),N?(N.unsubscribe(),N=null,Z.subscribe(D)):P=!0})),P&&(N.unsubscribe(),N=null,Z.subscribe(D))})}var je=$(9300);function He(M){return M<=0?()=>ut.E:(0,ct.e)((S,D)=>{let N=[];S.subscribe((0,ue.x)(D,P=>{N.push(P),M<N.length&&N.shift()},()=>{for(const P of N)D.next(P);D.complete()},void 0,()=>{N=null}))})}var tt=$(8068),Me=$(6590),Le=$(4004),ft=$(3900),Ot=$(5698),lt=$(8675),dn=$(5026),Kt=$(4351),qt=$(590),Ht=$(5577),mn=$(8505),wn=$(8746),vn=$(8189),Ln=$(9808);class pr{constructor(S,D){this.id=S,this.url=D}}class kr extends pr{constructor(S,D,N="imperative",P=null){super(S,D),this.navigationTrigger=N,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wr extends pr{constructor(S,D,N){super(S,D),this.urlAfterRedirects=N}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ni extends pr{constructor(S,D,N){super(S,D),this.reason=N}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ar extends pr{constructor(S,D,N){super(S,D),this.error=N}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mr extends pr{constructor(S,D,N,P){super(S,D),this.urlAfterRedirects=N,this.state=P}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yn extends pr{constructor(S,D,N,P){super(S,D),this.urlAfterRedirects=N,this.state=P}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class on extends pr{constructor(S,D,N,P,Z){super(S,D),this.urlAfterRedirects=N,this.state=P,this.shouldActivate=Z}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vn extends pr{constructor(S,D,N,P){super(S,D),this.urlAfterRedirects=N,this.state=P}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rn extends pr{constructor(S,D,N,P){super(S,D),this.urlAfterRedirects=N,this.state=P}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hn{constructor(S){this.route=S}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zi{constructor(S){this.route=S}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xr{constructor(S){this.snapshot=S}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fi{constructor(S){this.snapshot=S}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fr{constructor(S){this.snapshot=S}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hi{constructor(S){this.snapshot=S}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lr{constructor(S,D,N){this.routerEvent=S,this.position=D,this.anchor=N}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Bt="primary";class Xt{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D[0]:D}return null}getAll(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function tn(M){return new Xt(M)}const li="ngNavigationCancelingError";function pi(M){const S=Error("NavigationCancelingError: "+M);return S[li]=!0,S}function xs(M,S,D){const N=D.path.split("/");if(N.length>M.length||"full"===D.pathMatch&&(S.hasChildren()||N.length<M.length))return null;const P={};for(let Z=0;Z<N.length;Z++){const he=N[Z],Ie=M[Z];if(he.startsWith(":"))P[he.substring(1)]=Ie;else if(he!==Ie.path)return null}return{consumed:M.slice(0,N.length),posParams:P}}function Tr(M,S){const D=M?Object.keys(M):void 0,N=S?Object.keys(S):void 0;if(!D||!N||D.length!=N.length)return!1;let P;for(let Z=0;Z<D.length;Z++)if(P=D[Z],!ye(M[P],S[P]))return!1;return!0}function ye(M,S){if(Array.isArray(M)&&Array.isArray(S)){if(M.length!==S.length)return!1;const D=[...M].sort(),N=[...S].sort();return D.every((P,Z)=>N[Z]===P)}return M===S}function Se(M){return Array.prototype.concat.apply([],M)}function xe(M){return M.length>0?M[M.length-1]:null}function we(M,S){for(const D in M)M.hasOwnProperty(D)&&S(M[D],D)}function $e(M){return(0,w.CqO)(M)?M:(0,w.QGY)(M)?(0,De.D)(Promise.resolve(M)):(0,ze.of)(M)}const Vt={exact:function _n(M,S,D){if(!Di(M.segments,S.segments)||!ui(M.segments,S.segments,D)||M.numberOfChildren!==S.numberOfChildren)return!1;for(const N in S.children)if(!M.children[N]||!_n(M.children[N],S.children[N],D))return!1;return!0},subset:ri},zt={exact:function Dr(M,S){return Tr(M,S)},subset:function xr(M,S){return Object.keys(S).length<=Object.keys(M).length&&Object.keys(S).every(D=>ye(M[D],S[D]))},ignored:()=>!0};function an(M,S,D){return Vt[D.paths](M.root,S.root,D.matrixParams)&&zt[D.queryParams](M.queryParams,S.queryParams)&&!("exact"===D.fragment&&M.fragment!==S.fragment)}function ri(M,S,D){return Ur(M,S,S.segments,D)}function Ur(M,S,D,N){if(M.segments.length>D.length){const P=M.segments.slice(0,D.length);return!(!Di(P,D)||S.hasChildren()||!ui(P,D,N))}if(M.segments.length===D.length){if(!Di(M.segments,D)||!ui(M.segments,D,N))return!1;for(const P in S.children)if(!M.children[P]||!ri(M.children[P],S.children[P],N))return!1;return!0}{const P=D.slice(0,M.segments.length),Z=D.slice(M.segments.length);return!!(Di(M.segments,P)&&ui(M.segments,P,N)&&M.children[Bt])&&Ur(M.children[Bt],S,Z,N)}}function ui(M,S,D){return S.every((N,P)=>zt[D](M[P].parameters,N.parameters))}class Ii{constructor(S,D,N){this.root=S,this.queryParams=D,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tn(this.queryParams)),this._queryParamMap}toString(){return Rs.serialize(this)}}class Tn{constructor(S,D){this.segments=S,this.children=D,this.parent=null,we(D,(N,P)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xi(this)}}class Vr{constructor(S,D){this.path=S,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=tn(this.parameters)),this._parameterMap}toString(){return Br(this)}}function Di(M,S){return M.length===S.length&&M.every((D,N)=>D.path===S[N].path)}class gi{}class $s{parse(S){const D=new vs(S);return new Ii(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(S){const D=`/${mi(S.root,!0)}`,N=function jr(M){const S=Object.keys(M).map(D=>{const N=M[D];return Array.isArray(N)?N.map(P=>`${Kr(D)}=${Kr(P)}`).join("&"):`${Kr(D)}=${Kr(N)}`}).filter(D=>!!D);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${D}${N}${"string"==typeof S.fragment?`#${function qn(M){return encodeURI(M)}(S.fragment)}`:""}`}}const Rs=new $s;function Xi(M){return M.segments.map(S=>Br(S)).join("/")}function mi(M,S){if(!M.hasChildren())return Xi(M);if(S){const D=M.children[Bt]?mi(M.children[Bt],!1):"",N=[];return we(M.children,(P,Z)=>{Z!==Bt&&N.push(`${Z}:${mi(P,!1)}`)}),N.length>0?`${D}(${N.join("//")})`:D}{const D=function er(M,S){let D=[];return we(M.children,(N,P)=>{P===Bt&&(D=D.concat(S(N,P)))}),we(M.children,(N,P)=>{P!==Bt&&(D=D.concat(S(N,P)))}),D}(M,(N,P)=>P===Bt?[mi(M.children[Bt],!1)]:[`${P}:${mi(N,!1)}`]);return 1===Object.keys(M.children).length&&null!=M.children[Bt]?`${Xi(M)}/${D[0]}`:`${Xi(M)}/(${D.join("//")})`}}function tr(M){return encodeURIComponent(M).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kr(M){return tr(M).replace(/%3B/gi,";")}function Mt(M){return tr(M).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yt(M){return decodeURIComponent(M)}function On(M){return Yt(M.replace(/\+/g,"%20"))}function Br(M){return`${Mt(M.path)}${function es(M){return Object.keys(M).map(S=>`;${Mt(S)}=${Mt(M[S])}`).join("")}(M.parameters)}`}const Ki=/^[^\/()?;=#]+/;function gr(M){const S=M.match(Ki);return S?S[0]:""}const $i=/^[^=?&#]+/,Mn=/^[^&#]+/;class vs{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(S.length>0||Object.keys(D).length>0)&&(N[Bt]=new Tn(S,D)),N}parseSegment(){const S=gr(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(S),new Vr(Yt(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const D=gr(this.remaining);if(!D)return;this.capture(D);let N="";if(this.consumeOptional("=")){const P=gr(this.remaining);P&&(N=P,this.capture(N))}S[Yt(D)]=Yt(N)}parseQueryParam(S){const D=function Rr(M){const S=M.match($i);return S?S[0]:""}(this.remaining);if(!D)return;this.capture(D);let N="";if(this.consumeOptional("=")){const he=function Yi(M){const S=M.match(Mn);return S?S[0]:""}(this.remaining);he&&(N=he,this.capture(N))}const P=On(D),Z=On(N);if(S.hasOwnProperty(P)){let he=S[P];Array.isArray(he)||(he=[he],S[P]=he),he.push(Z)}else S[P]=Z}parseParens(S){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=gr(this.remaining),P=this.remaining[N.length];if("/"!==P&&")"!==P&&";"!==P)throw new Error(`Cannot parse url '${this.url}'`);let Z;N.indexOf(":")>-1?(Z=N.substr(0,N.indexOf(":")),this.capture(Z),this.capture(":")):S&&(Z=Bt);const he=this.parseChildren();D[Z]=1===Object.keys(he).length?he[Bt]:new Tn([],he),this.consumeOptional("//")}return D}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new Error(`Expected "${S}".`)}}class Ns{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const D=this.pathFromRoot(S);return D.length>1?D[D.length-2]:null}children(S){const D=_i(S,this._root);return D?D.children.map(N=>N.value):[]}firstChild(S){const D=_i(S,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(S){const D=Wr(S,this._root);return D.length<2?[]:D[D.length-2].children.map(P=>P.value).filter(P=>P!==S)}pathFromRoot(S){return Wr(S,this._root).map(D=>D.value)}}function _i(M,S){if(M===S.value)return S;for(const D of S.children){const N=_i(M,D);if(N)return N}return null}function Wr(M,S){if(M===S.value)return[S];for(const D of S.children){const N=Wr(M,D);if(N.length)return N.unshift(S),N}return[]}class ei{constructor(S,D){this.value=S,this.children=D}toString(){return`TreeNode(${this.value})`}}function ii(M){const S={};return M&&M.children.forEach(D=>S[D.value.outlet]=D),S}class Yr extends Ns{constructor(S,D){super(S),this.snapshot=D,Pi(this,S)}toString(){return this.snapshot.toString()}}function nr(M,S){const D=function Qr(M,S){const he=new no([],{},{},"",{},Bt,S,null,M.root,-1,{});return new ha("",new ei(he,[]))}(M,S),N=new ie([new Vr("",{})]),P=new ie({}),Z=new ie({}),he=new ie({}),Ie=new ie(""),_t=new Si(N,P,he,Ie,Z,Bt,S,D.root);return _t.snapshot=D.root,new Yr(new ei(_t,[]),D)}class Si{constructor(S,D,N,P,Z,he,Ie,_t){this.url=S,this.params=D,this.queryParams=N,this.fragment=P,this.data=Z,this.outlet=he,this.component=Ie,this._futureSnapshot=_t}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Le.U)(S=>tn(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Le.U)(S=>tn(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ci(M,S="emptyOnly"){const D=M.pathFromRoot;let N=0;if("always"!==S)for(N=D.length-1;N>=1;){const P=D[N],Z=D[N-1];if(P.routeConfig&&""===P.routeConfig.path)N--;else{if(Z.component)break;N--}}return function di(M){return M.reduce((S,D)=>({params:Object.assign(Object.assign({},S.params),D.params),data:Object.assign(Object.assign({},S.data),D.data),resolve:Object.assign(Object.assign({},S.resolve),D._resolvedData)}),{params:{},data:{},resolve:{}})}(D.slice(N))}class no{constructor(S,D,N,P,Z,he,Ie,_t,Qt,zn,rn){this.url=S,this.params=D,this.queryParams=N,this.fragment=P,this.data=Z,this.outlet=he,this.component=Ie,this.routeConfig=_t,this._urlSegment=Qt,this._lastPathIndex=zn,this._resolve=rn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=tn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ha extends Ns{constructor(S,D){super(D),this.url=S,Pi(this,D)}toString(){return Hr(this._root)}}function Pi(M,S){S.value._routerState=M,S.children.forEach(D=>Pi(M,D))}function Hr(M){const S=M.children.length>0?` { ${M.children.map(Hr).join(", ")} } `:"";return`${M.value}${S}`}function Es(M){if(M.snapshot){const S=M.snapshot,D=M._futureSnapshot;M.snapshot=D,Tr(S.queryParams,D.queryParams)||M.queryParams.next(D.queryParams),S.fragment!==D.fragment&&M.fragment.next(D.fragment),Tr(S.params,D.params)||M.params.next(D.params),function dr(M,S){if(M.length!==S.length)return!1;for(let D=0;D<M.length;++D)if(!Tr(M[D],S[D]))return!1;return!0}(S.url,D.url)||M.url.next(D.url),Tr(S.data,D.data)||M.data.next(D.data)}else M.snapshot=M._futureSnapshot,M.data.next(M._futureSnapshot.data)}function Gs(M,S){const D=Tr(M.params,S.params)&&function hr(M,S){return Di(M,S)&&M.every((D,N)=>Tr(D.parameters,S[N].parameters))}(M.url,S.url);return D&&!(!M.parent!=!S.parent)&&(!M.parent||Gs(M.parent,S.parent))}function zr(M,S,D){if(D&&M.shouldReuseRoute(S.value,D.value.snapshot)){const N=D.value;N._futureSnapshot=S.value;const P=function cs(M,S,D){return S.children.map(N=>{for(const P of D.children)if(M.shouldReuseRoute(N.value,P.value.snapshot))return zr(M,N,P);return zr(M,N)})}(M,S,D);return new ei(N,P)}{if(M.shouldAttach(S.value)){const Z=M.retrieve(S.value);if(null!==Z){const he=Z.route;return he.value._futureSnapshot=S.value,he.children=S.children.map(Ie=>zr(M,Ie)),he}}const N=function ts(M){return new Si(new ie(M.url),new ie(M.params),new ie(M.queryParams),new ie(M.fragment),new ie(M.data),M.outlet,M.component,M)}(S.value),P=S.children.map(Z=>zr(M,Z));return new ei(N,P)}}function be(M){return"object"==typeof M&&null!=M&&!M.outlets&&!M.segmentPath}function Je(M){return"object"==typeof M&&null!=M&&M.outlets}function bt(M,S,D,N,P){let Z={};if(N&&we(N,(Ie,_t)=>{Z[_t]=Array.isArray(Ie)?Ie.map(Qt=>`${Qt}`):`${Ie}`}),M===S)return new Ii(D,Z,P);const he=Pt(M,S,D);return new Ii(he,Z,P)}function Pt(M,S,D){const N={};return we(M.children,(P,Z)=>{N[Z]=P===S?D:Pt(P,S,D)}),new Tn(M.segments,N)}class Zt{constructor(S,D,N){if(this.isAbsolute=S,this.numberOfDoubleDots=D,this.commands=N,S&&N.length>0&&be(N[0]))throw new Error("Root segment cannot have matrix parameters");const P=N.find(Je);if(P&&P!==xe(N))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $r{constructor(S,D,N){this.segmentGroup=S,this.processChildren=D,this.index=N}}function Oi(M,S,D){if(M||(M=new Tn([],{})),0===M.segments.length&&M.hasChildren())return ko(M,S,D);const N=function ws(M,S,D){let N=0,P=S;const Z={match:!1,pathIndex:0,commandIndex:0};for(;P<M.segments.length;){if(N>=D.length)return Z;const he=M.segments[P],Ie=D[N];if(Je(Ie))break;const _t=`${Ie}`,Qt=N<D.length-1?D[N+1]:null;if(P>0&&void 0===_t)break;if(_t&&Qt&&"object"==typeof Qt&&void 0===Qt.outlets){if(!si(_t,Qt,he))return Z;N+=2}else{if(!si(_t,{},he))return Z;N++}P++}return{match:!0,pathIndex:P,commandIndex:N}}(M,S,D),P=D.slice(N.commandIndex);if(N.match&&N.pathIndex<M.segments.length){const Z=new Tn(M.segments.slice(0,N.pathIndex),{});return Z.children[Bt]=new Tn(M.segments.slice(N.pathIndex),M.children),ko(Z,0,P)}return N.match&&0===P.length?new Tn(M.segments,{}):N.match&&!M.hasChildren()?qs(M,S,D):N.match?ko(M,0,P):qs(M,S,D)}function ko(M,S,D){if(0===D.length)return new Tn(M.segments,{});{const N=function wo(M){return Je(M[0])?M[0].outlets:{[Bt]:M}}(D),P={};return we(N,(Z,he)=>{"string"==typeof Z&&(Z=[Z]),null!==Z&&(P[he]=Oi(M.children[he],S,Z))}),we(M.children,(Z,he)=>{void 0===N[he]&&(P[he]=Z)}),new Tn(M.segments,P)}}function qs(M,S,D){const N=M.segments.slice(0,S);let P=0;for(;P<D.length;){const Z=D[P];if(Je(Z)){const _t=Jo(Z.outlets);return new Tn(N,_t)}if(0===P&&be(D[0])){N.push(new Vr(M.segments[S].path,fa(D[0]))),P++;continue}const he=Je(Z)?Z.outlets[Bt]:`${Z}`,Ie=P<D.length-1?D[P+1]:null;he&&Ie&&be(Ie)?(N.push(new Vr(he,fa(Ie))),P+=2):(N.push(new Vr(he,{})),P++)}return new Tn(N,{})}function Jo(M){const S={};return we(M,(D,N)=>{"string"==typeof D&&(D=[D]),null!==D&&(S[N]=qs(new Tn([],{}),0,D))}),S}function fa(M){const S={};return we(M,(D,N)=>S[N]=`${D}`),S}function si(M,S,D){return M==D.path&&Tr(S,D.parameters)}class Cs{constructor(S,D,N,P){this.routeReuseStrategy=S,this.futureState=D,this.currState=N,this.forwardEvent=P}activate(S){const D=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,N,S),Es(this.futureState.root),this.activateChildRoutes(D,N,S)}deactivateChildRoutes(S,D,N){const P=ii(D);S.children.forEach(Z=>{const he=Z.value.outlet;this.deactivateRoutes(Z,P[he],N),delete P[he]}),we(P,(Z,he)=>{this.deactivateRouteAndItsChildren(Z,N)})}deactivateRoutes(S,D,N){const P=S.value,Z=D?D.value:null;if(P===Z)if(P.component){const he=N.getContext(P.outlet);he&&this.deactivateChildRoutes(S,D,he.children)}else this.deactivateChildRoutes(S,D,N);else Z&&this.deactivateRouteAndItsChildren(D,N)}deactivateRouteAndItsChildren(S,D){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,D):this.deactivateRouteAndOutlet(S,D)}detachAndStoreRouteSubtree(S,D){const N=D.getContext(S.value.outlet),P=N&&S.value.component?N.children:D,Z=ii(S);for(const he of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[he],P);if(N&&N.outlet){const he=N.outlet.detach(),Ie=N.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:he,route:S,contexts:Ie})}}deactivateRouteAndOutlet(S,D){const N=D.getContext(S.value.outlet),P=N&&S.value.component?N.children:D,Z=ii(S);for(const he of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[he],P);N&&N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated(),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(S,D,N){const P=ii(D);S.children.forEach(Z=>{this.activateRoutes(Z,P[Z.value.outlet],N),this.forwardEvent(new Hi(Z.value.snapshot))}),S.children.length&&this.forwardEvent(new fi(S.value.snapshot))}activateRoutes(S,D,N){const P=S.value,Z=D?D.value:null;if(Es(P),P===Z)if(P.component){const he=N.getOrCreateContext(P.outlet);this.activateChildRoutes(S,D,he.children)}else this.activateChildRoutes(S,D,N);else if(P.component){const he=N.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const Ie=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),he.children.onOutletReAttached(Ie.contexts),he.attachRef=Ie.componentRef,he.route=Ie.route.value,he.outlet&&he.outlet.attach(Ie.componentRef,Ie.route.value),Es(Ie.route.value),this.activateChildRoutes(S,null,he.children)}else{const Ie=function Ps(M){for(let S=M.parent;S;S=S.parent){const D=S.routeConfig;if(D&&D._loadedConfig)return D._loadedConfig;if(D&&D.component)return null}return null}(P.snapshot),_t=Ie?Ie.module.componentFactoryResolver:null;he.attachRef=null,he.route=P,he.resolver=_t,he.outlet&&he.outlet.activateWith(P,_t),this.activateChildRoutes(S,null,he.children)}}else this.activateChildRoutes(S,null,N)}}class Fo{constructor(S,D){this.routes=S,this.module=D}}function Os(M){return"function"==typeof M}function yi(M){return M instanceof Ii}const Ws=Symbol("INITIAL_VALUE");function Ai(){return(0,ft.w)(M=>function Tt(...M){const S=(0,Ge.yG)(M),D=(0,Ge.jO)(M),{args:N,keys:P}=(0,z.D)(M);if(0===N.length)return(0,De.D)([],S);const Z=new Fe.y(function Ke(M,S,D=Ve.y){return N=>{rt(S,()=>{const{length:P}=M,Z=new Array(P);let he=P,Ie=P;for(let _t=0;_t<P;_t++)rt(S,()=>{const Qt=(0,De.D)(M[_t],S);let zn=!1;Qt.subscribe((0,ue.x)(N,rn=>{Z[_t]=rn,zn||(zn=!0,Ie--),Ie||N.next(D(Z.slice()))},()=>{--he||N.complete()}))},N)},N)}}(N,S,P?he=>(0,pe.n)(P,he):Ve.y));return D?Z.pipe((0,ke.Z)(D)):Z}(M.map(S=>S.pipe((0,Ot.q)(1),(0,lt.O)(Ws)))).pipe((0,dn.R)((S,D)=>{let N=!1;return D.reduce((P,Z,he)=>P!==Ws?P:(Z===Ws&&(N=!0),N||!1!==Z&&he!==D.length-1&&!yi(Z)?P:Z),S)},Ws),(0,je.h)(S=>S!==Ws),(0,Le.U)(S=>yi(S)?S:!0===S),(0,Ot.q)(1)))}class Lo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ts,this.attachRef=null}}class Ts{constructor(){this.contexts=new Map}onChildOutletCreated(S,D){const N=this.getOrCreateContext(S);N.outlet=D,this.contexts.set(S,N)}onChildOutletDestroyed(S){const D=this.getContext(S);D&&(D.outlet=null,D.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let D=this.getContext(S);return D||(D=new Lo,this.contexts.set(S,D)),D}getContext(S){return this.contexts.get(S)||null}}let To=(()=>{class M{constructor(D,N,P,Z,he){this.parentContexts=D,this.location=N,this.resolver=P,this.changeDetector=he,this.activated=null,this._activatedRoute=null,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.name=Z||Bt,D.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const D=this.parentContexts.getContext(this.name);D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,N){this.activated=D,this._activatedRoute=N,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,N){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=D;const he=(N=N||this.resolver).resolveComponentFactory(D._futureSnapshot.routeConfig.component),Ie=this.parentContexts.getOrCreateContext(this.name).children,_t=new rs(D,Ie,this.location.injector);this.activated=this.location.createComponent(he,this.location.length,_t),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return M.\u0275fac=function(D){return new(D||M)(w.Y36(Ts),w.Y36(w.s_b),w.Y36(w._Vd),w.$8M("name"),w.Y36(w.sBO))},M.\u0275dir=w.lG2({type:M,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),M})();class rs{constructor(S,D,N){this.route=S,this.childContexts=D,this.parent=N}get(S,D){return S===Si?this.route:S===Ts?this.childContexts:this.parent.get(S,D)}}let ks=(()=>{class M{}return M.\u0275fac=function(D){return new(D||M)},M.\u0275cmp=w.Xpm({type:M,selectors:[["ng-component"]],decls:1,vars:0,template:function(D,N){1&D&&w._UZ(0,"router-outlet")},directives:[To],encapsulation:2}),M})();function zs(M,S=""){for(let D=0;D<M.length;D++){const N=M[D];fo(N,ir(S,N))}}function fo(M,S){M.children&&zs(M.children,S)}function ir(M,S){return S?M||S.path?M&&!S.path?`${M}/`:!M&&S.path?S.path:`${M}/${S.path}`:"":M}function B(M){const S=M.children&&M.children.map(B),D=S?Object.assign(Object.assign({},M),{children:S}):Object.assign({},M);return!D.component&&(S||D.loadChildren)&&D.outlet&&D.outlet!==Bt&&(D.component=ks),D}function X(M){return M.outlet||Bt}function V(M,S){const D=M.filter(N=>X(N)===S);return D.push(...M.filter(N=>X(N)!==S)),D}const ae={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ve(M,S,D){var N;if(""===S.path)return"full"===S.pathMatch&&(M.hasChildren()||D.length>0)?Object.assign({},ae):{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const Z=(S.matcher||xs)(D,M,S);if(!Z)return Object.assign({},ae);const he={};we(Z.posParams,(_t,Qt)=>{he[Qt]=_t.path});const Ie=Z.consumed.length>0?Object.assign(Object.assign({},he),Z.consumed[Z.consumed.length-1].parameters):he;return{matched:!0,consumedSegments:Z.consumed,remainingSegments:D.slice(Z.consumed.length),parameters:Ie,positionalParamSegments:null!==(N=Z.posParams)&&void 0!==N?N:{}}}function st(M,S,D,N,P="corrected"){if(D.length>0&&function ln(M,S,D){return D.some(N=>kn(M,S,N)&&X(N)!==Bt)}(M,D,N)){const he=new Tn(S,function en(M,S,D,N){const P={};P[Bt]=N,N._sourceSegment=M,N._segmentIndexShift=S.length;for(const Z of D)if(""===Z.path&&X(Z)!==Bt){const he=new Tn([],{});he._sourceSegment=M,he._segmentIndexShift=S.length,P[X(Z)]=he}return P}(M,S,N,new Tn(D,M.children)));return he._sourceSegment=M,he._segmentIndexShift=S.length,{segmentGroup:he,slicedSegments:[]}}if(0===D.length&&function Kn(M,S,D){return D.some(N=>kn(M,S,N))}(M,D,N)){const he=new Tn(M.segments,function vt(M,S,D,N,P,Z){const he={};for(const Ie of N)if(kn(M,D,Ie)&&!P[X(Ie)]){const _t=new Tn([],{});_t._sourceSegment=M,_t._segmentIndexShift="legacy"===Z?M.segments.length:S.length,he[X(Ie)]=_t}return Object.assign(Object.assign({},P),he)}(M,S,D,N,M.children,P));return he._sourceSegment=M,he._segmentIndexShift=S.length,{segmentGroup:he,slicedSegments:D}}const Z=new Tn(M.segments,M.children);return Z._sourceSegment=M,Z._segmentIndexShift=S.length,{segmentGroup:Z,slicedSegments:D}}function kn(M,S,D){return(!(M.hasChildren()||S.length>0)||"full"!==D.pathMatch)&&""===D.path}function Wn(M,S,D,N){return!!(X(M)===N||N!==Bt&&kn(S,D,M))&&("**"===M.path||ve(S,M,D).matched)}function Jr(M,S,D){return 0===S.length&&!M.children[D]}class br{constructor(S){this.segmentGroup=S||null}}class Gr{constructor(S){this.urlTree=S}}function Ei(M){return Xe(new br(M))}function qi(M){return Xe(new Gr(M))}class po{constructor(S,D,N,P,Z){this.configLoader=D,this.urlSerializer=N,this.urlTree=P,this.config=Z,this.allowRedirects=!0,this.ngModule=S.get(w.h0i)}apply(){const S=st(this.urlTree.root,[],[],this.config).segmentGroup,D=new Tn(S.segments,S.children);return this.expandSegmentGroup(this.ngModule,this.config,D,Bt).pipe((0,Le.U)(Z=>this.createUrlTree(G(Z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(me(Z=>{if(Z instanceof Gr)return this.allowRedirects=!1,this.match(Z.urlTree);throw Z instanceof br?this.noMatchError(Z):Z}))}match(S){return this.expandSegmentGroup(this.ngModule,this.config,S.root,Bt).pipe((0,Le.U)(P=>this.createUrlTree(G(P),S.queryParams,S.fragment))).pipe(me(P=>{throw P instanceof br?this.noMatchError(P):P}))}noMatchError(S){return new Error(`Cannot match any routes. URL Segment: '${S.segmentGroup}'`)}createUrlTree(S,D,N){const P=S.segments.length>0?new Tn([],{[Bt]:S}):S;return new Ii(P,D,N)}expandSegmentGroup(S,D,N,P){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(S,D,N).pipe((0,Le.U)(Z=>new Tn([],Z))):this.expandSegment(S,N,D,N.segments,P,!0)}expandChildren(S,D,N){const P=[];for(const Z of Object.keys(N.children))"primary"===Z?P.unshift(Z):P.push(Z);return(0,De.D)(P).pipe((0,Kt.b)(Z=>{const he=N.children[Z],Ie=V(D,Z);return this.expandSegmentGroup(S,Ie,he,Z).pipe((0,Le.U)(_t=>({segment:_t,outlet:Z})))}),(0,dn.R)((Z,he)=>(Z[he.outlet]=he.segment,Z),{}),function mt(M,S){const D=arguments.length>=2;return N=>N.pipe(M?(0,je.h)((P,Z)=>M(P,Z,N)):Ve.y,He(1),D?(0,Me.d)(S):(0,tt.T)(()=>new It.K))}())}expandSegment(S,D,N,P,Z,he){return(0,De.D)(N).pipe((0,Kt.b)(Ie=>this.expandSegmentAgainstRoute(S,D,N,Ie,P,Z,he).pipe(me(Qt=>{if(Qt instanceof br)return(0,ze.of)(null);throw Qt}))),(0,qt.P)(Ie=>!!Ie),me((Ie,_t)=>{if(Ie instanceof It.K||"EmptyError"===Ie.name)return Jr(D,P,Z)?(0,ze.of)(new Tn([],{})):Ei(D);throw Ie}))}expandSegmentAgainstRoute(S,D,N,P,Z,he,Ie){return Wn(P,D,Z,he)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(S,D,P,Z,he):Ie&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,D,N,P,Z,he):Ei(D):Ei(D)}expandSegmentAgainstRouteUsingRedirect(S,D,N,P,Z,he){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,N,P,he):this.expandRegularSegmentAgainstRouteUsingRedirect(S,D,N,P,Z,he)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,D,N,P){const Z=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?qi(Z):this.lineralizeSegments(N,Z).pipe((0,Ht.z)(he=>{const Ie=new Tn(he,{});return this.expandSegment(S,Ie,D,he,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,D,N,P,Z,he){const{matched:Ie,consumedSegments:_t,remainingSegments:Qt,positionalParamSegments:zn}=ve(D,P,Z);if(!Ie)return Ei(D);const rn=this.applyRedirectCommands(_t,P.redirectTo,zn);return P.redirectTo.startsWith("/")?qi(rn):this.lineralizeSegments(P,rn).pipe((0,Ht.z)(Cr=>this.expandSegment(S,D,N,Cr.concat(Qt),he,!1)))}matchSegmentAgainstRoute(S,D,N,P,Z){if("**"===N.path)return N.loadChildren?(N._loadedConfig?(0,ze.of)(N._loadedConfig):this.configLoader.load(S.injector,N)).pipe((0,Le.U)(rn=>(N._loadedConfig=rn,new Tn(P,{})))):(0,ze.of)(new Tn(P,{}));const{matched:he,consumedSegments:Ie,remainingSegments:_t}=ve(D,N,P);return he?this.getChildConfig(S,N,P).pipe((0,Ht.z)(zn=>{const rn=zn.module,Cr=zn.routes,{segmentGroup:fr,slicedSegments:Ls}=st(D,Ie,_t,Cr),Ao=new Tn(fr.segments,fr.children);if(0===Ls.length&&Ao.hasChildren())return this.expandChildren(rn,Cr,Ao).pipe((0,Le.U)(Nn=>new Tn(Ie,Nn)));if(0===Cr.length&&0===Ls.length)return(0,ze.of)(new Tn(Ie,{}));const hs=X(N)===Z;return this.expandSegment(rn,Ao,Cr,Ls,hs?Bt:Z,!0).pipe((0,Le.U)(Ds=>new Tn(Ie.concat(Ds.segments),Ds.children)))})):Ei(D)}getChildConfig(S,D,N){return D.children?(0,ze.of)(new Fo(D.children,S)):D.loadChildren?void 0!==D._loadedConfig?(0,ze.of)(D._loadedConfig):this.runCanLoadGuards(S.injector,D,N).pipe((0,Ht.z)(P=>P?this.configLoader.load(S.injector,D).pipe((0,Le.U)(Z=>(D._loadedConfig=Z,Z))):function Wi(M){return Xe(pi(`Cannot load children because the guard of the route "path: '${M.path}'" returned false`))}(D))):(0,ze.of)(new Fo([],S))}runCanLoadGuards(S,D,N){const P=D.canLoad;if(!P||0===P.length)return(0,ze.of)(!0);const Z=P.map(he=>{const Ie=S.get(he);let _t;if(function bo(M){return M&&Os(M.canLoad)}(Ie))_t=Ie.canLoad(D,N);else{if(!Os(Ie))throw new Error("Invalid CanLoad guard");_t=Ie(D,N)}return $e(_t)});return(0,ze.of)(Z).pipe(Ai(),(0,mn.b)(he=>{if(!yi(he))return;const Ie=pi(`Redirecting to "${this.urlSerializer.serialize(he)}"`);throw Ie.url=he,Ie}),(0,Le.U)(he=>!0===he))}lineralizeSegments(S,D){let N=[],P=D.root;for(;;){if(N=N.concat(P.segments),0===P.numberOfChildren)return(0,ze.of)(N);if(P.numberOfChildren>1||!P.children[Bt])return Xe(new Error(`Only absolute redirects can have named outlets. redirectTo: '${S.redirectTo}'`));P=P.children[Bt]}}applyRedirectCommands(S,D,N){return this.applyRedirectCreatreUrlTree(D,this.urlSerializer.parse(D),S,N)}applyRedirectCreatreUrlTree(S,D,N,P){const Z=this.createSegmentGroup(S,D.root,N,P);return new Ii(Z,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(S,D){const N={};return we(S,(P,Z)=>{if("string"==typeof P&&P.startsWith(":")){const Ie=P.substring(1);N[Z]=D[Ie]}else N[Z]=P}),N}createSegmentGroup(S,D,N,P){const Z=this.createSegments(S,D.segments,N,P);let he={};return we(D.children,(Ie,_t)=>{he[_t]=this.createSegmentGroup(S,Ie,N,P)}),new Tn(Z,he)}createSegments(S,D,N,P){return D.map(Z=>Z.path.startsWith(":")?this.findPosParam(S,Z,P):this.findOrReturn(Z,N))}findPosParam(S,D,N){const P=N[D.path.substring(1)];if(!P)throw new Error(`Cannot redirect to '${S}'. Cannot find '${D.path}'.`);return P}findOrReturn(S,D){let N=0;for(const P of D){if(P.path===S.path)return D.splice(N),P;N++}return S}}function G(M){const S={};for(const N of Object.keys(M.children)){const Z=G(M.children[N]);(Z.segments.length>0||Z.hasChildren())&&(S[N]=Z)}return function ro(M){if(1===M.numberOfChildren&&M.children[Bt]){const S=M.children[Bt];return new Tn(M.segments.concat(S.segments),S.children)}return M}(new Tn(M.segments,S))}class k{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class re{constructor(S,D){this.component=S,this.route=D}}function Ee(M,S,D){const N=M._root;return ne(N,S?S._root:null,D,[N.value])}function W(M,S,D){const N=function j(M){if(!M)return null;for(let S=M.parent;S;S=S.parent){const D=S.routeConfig;if(D&&D._loadedConfig)return D._loadedConfig}return null}(S);return(N?N.module.injector:D).get(M)}function ne(M,S,D,N,P={canDeactivateChecks:[],canActivateChecks:[]}){const Z=ii(S);return M.children.forEach(he=>{(function de(M,S,D,N,P={canDeactivateChecks:[],canActivateChecks:[]}){const Z=M.value,he=S?S.value:null,Ie=D?D.getContext(M.value.outlet):null;if(he&&Z.routeConfig===he.routeConfig){const _t=function Ce(M,S,D){if("function"==typeof D)return D(M,S);switch(D){case"pathParamsChange":return!Di(M.url,S.url);case"pathParamsOrQueryParamsChange":return!Di(M.url,S.url)||!Tr(M.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gs(M,S)||!Tr(M.queryParams,S.queryParams);default:return!Gs(M,S)}}(he,Z,Z.routeConfig.runGuardsAndResolvers);_t?P.canActivateChecks.push(new k(N)):(Z.data=he.data,Z._resolvedData=he._resolvedData),ne(M,S,Z.component?Ie?Ie.children:null:D,N,P),_t&&Ie&&Ie.outlet&&Ie.outlet.isActivated&&P.canDeactivateChecks.push(new re(Ie.outlet.component,he))}else he&&et(S,Ie,P),P.canActivateChecks.push(new k(N)),ne(M,null,Z.component?Ie?Ie.children:null:D,N,P)})(he,Z[he.value.outlet],D,N.concat([he.value]),P),delete Z[he.value.outlet]}),we(Z,(he,Ie)=>et(he,D.getContext(Ie),P)),P}function et(M,S,D){const N=ii(M),P=M.value;we(N,(Z,he)=>{et(Z,P.component?S?S.children.getContext(he):null:S,D)}),D.canDeactivateChecks.push(new re(P.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,P))}class Nr{}function wi(M){return new Fe.y(S=>S.error(M))}class Fs{constructor(S,D,N,P,Z,he){this.rootComponentType=S,this.config=D,this.urlTree=N,this.url=P,this.paramsInheritanceStrategy=Z,this.relativeLinkResolution=he}recognize(){const S=st(this.urlTree.root,[],[],this.config.filter(he=>void 0===he.redirectTo),this.relativeLinkResolution).segmentGroup,D=this.processSegmentGroup(this.config,S,Bt);if(null===D)return null;const N=new no([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Bt,this.rootComponentType,null,this.urlTree.root,-1,{}),P=new ei(N,D),Z=new ha(this.url,P);return this.inheritParamsAndData(Z._root),Z}inheritParamsAndData(S){const D=S.value,N=ci(D,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data),S.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(S,D,N){return 0===D.segments.length&&D.hasChildren()?this.processChildren(S,D):this.processSegment(S,D,D.segments,N)}processChildren(S,D){const N=[];for(const Z of Object.keys(D.children)){const he=D.children[Z],Ie=V(S,Z),_t=this.processSegmentGroup(Ie,he,Z);if(null===_t)return null;N.push(..._t)}const P=io(N);return function Zs(M){M.sort((S,D)=>S.value.outlet===Bt?-1:D.value.outlet===Bt?1:S.value.outlet.localeCompare(D.value.outlet))}(P),P}processSegment(S,D,N,P){for(const Z of S){const he=this.processSegmentAgainstRoute(Z,D,N,P);if(null!==he)return he}return Jr(D,N,P)?[]:null}processSegmentAgainstRoute(S,D,N,P){if(S.redirectTo||!Wn(S,D,N,P))return null;let Z,he=[],Ie=[];if("**"===S.path){const fr=N.length>0?xe(N).parameters:{};Z=new no(N,fr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Uo(S),X(S),S.component,S,$a(D),pa(D)+N.length,Ca(S))}else{const fr=ve(D,S,N);if(!fr.matched)return null;he=fr.consumedSegments,Ie=fr.remainingSegments,Z=new no(he,fr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Uo(S),X(S),S.component,S,$a(D),pa(D)+he.length,Ca(S))}const _t=function Qi(M){return M.children?M.children:M.loadChildren?M._loadedConfig.routes:[]}(S),{segmentGroup:Qt,slicedSegments:zn}=st(D,he,Ie,_t.filter(fr=>void 0===fr.redirectTo),this.relativeLinkResolution);if(0===zn.length&&Qt.hasChildren()){const fr=this.processChildren(_t,Qt);return null===fr?null:[new ei(Z,fr)]}if(0===_t.length&&0===zn.length)return[new ei(Z,[])];const rn=X(S)===P,Cr=this.processSegment(_t,Qt,zn,rn?Bt:P);return null===Cr?null:[new ei(Z,Cr)]}}function ki(M){const S=M.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function io(M){const S=[],D=new Set;for(const N of M){if(!ki(N)){S.push(N);continue}const P=S.find(Z=>N.value.routeConfig===Z.value.routeConfig);void 0!==P?(P.children.push(...N.children),D.add(P)):S.push(N)}for(const N of D){const P=io(N.children);S.push(new ei(N.value,P))}return S.filter(N=>!D.has(N))}function $a(M){let S=M;for(;S._sourceSegment;)S=S._sourceSegment;return S}function pa(M){let S=M,D=S._segmentIndexShift?S._segmentIndexShift:0;for(;S._sourceSegment;)S=S._sourceSegment,D+=S._segmentIndexShift?S._segmentIndexShift:0;return D-1}function Uo(M){return M.data||{}}function Ca(M){return M.resolve||{}}function ta(M){return[...Object.keys(M),...Object.getOwnPropertySymbols(M)]}function Ga(M){return(0,ft.w)(S=>{const D=M(S);return D?(0,De.D)(D).pipe((0,Le.U)(()=>S)):(0,ze.of)(S)})}class Mi extends class qa{shouldDetach(S){return!1}store(S,D){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,D){return S.routeConfig===D.routeConfig}}{}const ll=new w.OlP("ROUTES");class Qd{constructor(S,D,N,P){this.injector=S,this.compiler=D,this.onLoadStartListener=N,this.onLoadEndListener=P}load(S,D){if(D._loader$)return D._loader$;this.onLoadStartListener&&this.onLoadStartListener(D);const P=this.loadModuleFactory(D.loadChildren).pipe((0,Le.U)(Z=>{this.onLoadEndListener&&this.onLoadEndListener(D);const he=Z.create(S);return new Fo(Se(he.injector.get(ll,void 0,w.XFs.Self|w.XFs.Optional)).map(B),he)}),me(Z=>{throw D._loader$=void 0,Z}));return D._loader$=new Qe(P,()=>new m.x).pipe(it()),D._loader$}loadModuleFactory(S){return $e(S()).pipe((0,Ht.z)(D=>D instanceof w.YKP?(0,ze.of)(D):(0,De.D)(this.compiler.compileModuleAsync(D))))}}class ul{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,D){return S}}function dd(M){throw M}function hd(M,S,D){return S.parse("/")}function Ks(M,S){return(0,ze.of)(null)}const na={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let sr=(()=>{class M{constructor(D,N,P,Z,he,Ie,_t){this.rootComponentType=D,this.urlSerializer=N,this.rootContexts=P,this.location=Z,this.config=_t,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new m.x,this.errorHandler=dd,this.malformedUriErrorHandler=hd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ks,afterPreactivation:Ks},this.urlHandlingStrategy=new ul,this.routeReuseStrategy=new Mi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=he.get(w.h0i),this.console=he.get(w.c2e);const rn=he.get(w.R0b);this.isNgZoneEnabled=rn instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(_t),this.currentUrlTree=function wt(){return new Ii(new Tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Qd(he,Ie,Cr=>this.triggerEvent(new hn(Cr)),Cr=>this.triggerEvent(new Zi(Cr))),this.routerState=nr(this.currentUrlTree,this.rootComponentType),this.transitions=new ie({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var D;return null===(D=this.location.getState())||void 0===D?void 0:D.\u0275routerPageId}setupNavigations(D){const N=this.events;return D.pipe((0,je.h)(P=>0!==P.id),(0,Le.U)(P=>Object.assign(Object.assign({},P),{extractedUrl:this.urlHandlingStrategy.extract(P.rawUrl)})),(0,ft.w)(P=>{let Z=!1,he=!1;return(0,ze.of)(P).pipe((0,mn.b)(Ie=>{this.currentNavigation={id:Ie.id,initialUrl:Ie.currentRawUrl,extractedUrl:Ie.extractedUrl,trigger:Ie.source,extras:Ie.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,ft.w)(Ie=>{const _t=this.browserUrlTree.toString(),Qt=!this.navigated||Ie.extractedUrl.toString()!==_t||_t!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Qt)&&this.urlHandlingStrategy.shouldProcessUrl(Ie.rawUrl))return wl(Ie.source)&&(this.browserUrlTree=Ie.extractedUrl),(0,ze.of)(Ie).pipe((0,ft.w)(rn=>{const Cr=this.transitions.getValue();return N.next(new kr(rn.id,this.serializeUrl(rn.extractedUrl),rn.source,rn.restoredState)),Cr!==this.transitions.getValue()?ut.E:Promise.resolve(rn)}),function U(M,S,D,N){return(0,ft.w)(P=>function Xo(M,S,D,N,P){return new po(M,S,D,N,P).apply()}(M,S,D,P.extractedUrl,N).pipe((0,Le.U)(Z=>Object.assign(Object.assign({},P),{urlAfterRedirects:Z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mn.b)(rn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:rn.urlAfterRedirects})}),function Ta(M,S,D,N,P){return(0,Ht.z)(Z=>function Gn(M,S,D,N,P="emptyOnly",Z="legacy"){try{const he=new Fs(M,S,D,N,P,Z).recognize();return null===he?wi(new Nr):(0,ze.of)(he)}catch(he){return wi(he)}}(M,S,Z.urlAfterRedirects,D(Z.urlAfterRedirects),N,P).pipe((0,Le.U)(he=>Object.assign(Object.assign({},Z),{targetSnapshot:he}))))}(this.rootComponentType,this.config,rn=>this.serializeUrl(rn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mn.b)(rn=>{if("eager"===this.urlUpdateStrategy){if(!rn.extras.skipLocationChange){const fr=this.urlHandlingStrategy.merge(rn.urlAfterRedirects,rn.rawUrl);this.setBrowserUrl(fr,rn)}this.browserUrlTree=rn.urlAfterRedirects}const Cr=new Mr(rn.id,this.serializeUrl(rn.extractedUrl),this.serializeUrl(rn.urlAfterRedirects),rn.targetSnapshot);N.next(Cr)}));if(Qt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Cr,extractedUrl:fr,source:Ls,restoredState:Ao,extras:hs}=Ie,Fl=new kr(Cr,this.serializeUrl(fr),Ls,Ao);N.next(Fl);const Ds=nr(fr,this.rootComponentType).snapshot;return(0,ze.of)(Object.assign(Object.assign({},Ie),{targetSnapshot:Ds,urlAfterRedirects:fr,extras:Object.assign(Object.assign({},hs),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ie.rawUrl,Ie.resolve(null),ut.E}),Ga(Ie=>{const{targetSnapshot:_t,id:Qt,extractedUrl:zn,rawUrl:rn,extras:{skipLocationChange:Cr,replaceUrl:fr}}=Ie;return this.hooks.beforePreactivation(_t,{navigationId:Qt,appliedUrlTree:zn,rawUrlTree:rn,skipLocationChange:!!Cr,replaceUrl:!!fr})}),(0,mn.b)(Ie=>{const _t=new Yn(Ie.id,this.serializeUrl(Ie.extractedUrl),this.serializeUrl(Ie.urlAfterRedirects),Ie.targetSnapshot);this.triggerEvent(_t)}),(0,Le.U)(Ie=>Object.assign(Object.assign({},Ie),{guards:Ee(Ie.targetSnapshot,Ie.currentSnapshot,this.rootContexts)})),function St(M,S){return(0,Ht.z)(D=>{const{targetSnapshot:N,currentSnapshot:P,guards:{canActivateChecks:Z,canDeactivateChecks:he}}=D;return 0===he.length&&0===Z.length?(0,ze.of)(Object.assign(Object.assign({},D),{guardsResult:!0})):function nn(M,S,D,N){return(0,De.D)(M).pipe((0,Ht.z)(P=>function oi(M,S,D,N,P){const Z=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,ze.of)(!0);const he=Z.map(Ie=>{const _t=W(Ie,S,P);let Qt;if(function vi(M){return M&&Os(M.canDeactivate)}(_t))Qt=$e(_t.canDeactivate(M,S,D,N));else{if(!Os(_t))throw new Error("Invalid CanDeactivate guard");Qt=$e(_t(M,S,D,N))}return Qt.pipe((0,qt.P)())});return(0,ze.of)(he).pipe(Ai())}(P.component,P.route,D,S,N)),(0,qt.P)(P=>!0!==P,!0))}(he,N,P,M).pipe((0,Ht.z)(Ie=>Ie&&function ba(M){return"boolean"==typeof M}(Ie)?function Wt(M,S,D,N){return(0,De.D)(S).pipe((0,Kt.b)(P=>(0,le.z)(function Un(M,S){return null!==M&&S&&S(new Xr(M)),(0,ze.of)(!0)}(P.route.parent,N),function Fn(M,S){return null!==M&&S&&S(new Fr(M)),(0,ze.of)(!0)}(P.route,N),function _r(M,S,D){const N=S[S.length-1],Z=S.slice(0,S.length-1).reverse().map(he=>function Dt(M){const S=M.routeConfig?M.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:M,guards:S}:null}(he)).filter(he=>null!==he).map(he=>Oe(()=>{const Ie=he.guards.map(_t=>{const Qt=W(_t,he.node,D);let zn;if(function Co(M){return M&&Os(M.canActivateChild)}(Qt))zn=$e(Qt.canActivateChild(N,M));else{if(!Os(Qt))throw new Error("Invalid CanActivateChild guard");zn=$e(Qt(N,M))}return zn.pipe((0,qt.P)())});return(0,ze.of)(Ie).pipe(Ai())}));return(0,ze.of)(Z).pipe(Ai())}(M,P.path,D),function lr(M,S,D){const N=S.routeConfig?S.routeConfig.canActivate:null;if(!N||0===N.length)return(0,ze.of)(!0);const P=N.map(Z=>Oe(()=>{const he=W(Z,S,D);let Ie;if(function Gi(M){return M&&Os(M.canActivate)}(he))Ie=$e(he.canActivate(S,M));else{if(!Os(he))throw new Error("Invalid CanActivate guard");Ie=$e(he(S,M))}return Ie.pipe((0,qt.P)())}));return(0,ze.of)(P).pipe(Ai())}(M,P.route,D))),(0,qt.P)(P=>!0!==P,!0))}(N,Z,M,S):(0,ze.of)(Ie)),(0,Le.U)(Ie=>Object.assign(Object.assign({},D),{guardsResult:Ie})))})}(this.ngModule.injector,Ie=>this.triggerEvent(Ie)),(0,mn.b)(Ie=>{if(yi(Ie.guardsResult)){const Qt=pi(`Redirecting to "${this.serializeUrl(Ie.guardsResult)}"`);throw Qt.url=Ie.guardsResult,Qt}const _t=new on(Ie.id,this.serializeUrl(Ie.extractedUrl),this.serializeUrl(Ie.urlAfterRedirects),Ie.targetSnapshot,!!Ie.guardsResult);this.triggerEvent(_t)}),(0,je.h)(Ie=>!!Ie.guardsResult||(this.restoreHistory(Ie),this.cancelNavigationTransition(Ie,""),!1)),Ga(Ie=>{if(Ie.guards.canActivateChecks.length)return(0,ze.of)(Ie).pipe((0,mn.b)(_t=>{const Qt=new Vn(_t.id,this.serializeUrl(_t.extractedUrl),this.serializeUrl(_t.urlAfterRedirects),_t.targetSnapshot);this.triggerEvent(Qt)}),(0,ft.w)(_t=>{let Qt=!1;return(0,ze.of)(_t).pipe(function al(M,S){return(0,Ht.z)(D=>{const{targetSnapshot:N,guards:{canActivateChecks:P}}=D;if(!P.length)return(0,ze.of)(D);let Z=0;return(0,De.D)(P).pipe((0,Kt.b)(he=>function Zu(M,S,D,N){return function El(M,S,D,N){const P=ta(M);if(0===P.length)return(0,ze.of)({});const Z={};return(0,De.D)(P).pipe((0,Ht.z)(he=>function vc(M,S,D,N){const P=W(M,S,N);return $e(P.resolve?P.resolve(S,D):P(S,D))}(M[he],S,D,N).pipe((0,mn.b)(Ie=>{Z[he]=Ie}))),He(1),(0,Ht.z)(()=>ta(Z).length===P.length?(0,ze.of)(Z):ut.E))}(M._resolve,M,S,N).pipe((0,Le.U)(Z=>(M._resolvedData=Z,M.data=Object.assign(Object.assign({},M.data),ci(M,D).resolve),null)))}(he.route,N,M,S)),(0,mn.b)(()=>Z++),He(1),(0,Ht.z)(he=>Z===P.length?(0,ze.of)(D):ut.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mn.b)({next:()=>Qt=!0,complete:()=>{Qt||(this.restoreHistory(_t),this.cancelNavigationTransition(_t,"At least one route resolver didn't emit any value."))}}))}),(0,mn.b)(_t=>{const Qt=new Rn(_t.id,this.serializeUrl(_t.extractedUrl),this.serializeUrl(_t.urlAfterRedirects),_t.targetSnapshot);this.triggerEvent(Qt)}))}),Ga(Ie=>{const{targetSnapshot:_t,id:Qt,extractedUrl:zn,rawUrl:rn,extras:{skipLocationChange:Cr,replaceUrl:fr}}=Ie;return this.hooks.afterPreactivation(_t,{navigationId:Qt,appliedUrlTree:zn,rawUrlTree:rn,skipLocationChange:!!Cr,replaceUrl:!!fr})}),(0,Le.U)(Ie=>{const _t=function Qo(M,S,D){const N=zr(M,S._root,D?D._root:void 0);return new Yr(N,S)}(this.routeReuseStrategy,Ie.targetSnapshot,Ie.currentRouterState);return Object.assign(Object.assign({},Ie),{targetRouterState:_t})}),(0,mn.b)(Ie=>{this.currentUrlTree=Ie.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ie.urlAfterRedirects,Ie.rawUrl),this.routerState=Ie.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ie.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ie),this.browserUrlTree=Ie.urlAfterRedirects)}),((M,S,D)=>(0,Le.U)(N=>(new Cs(S,N.targetRouterState,N.currentRouterState,D).activate(M),N)))(this.rootContexts,this.routeReuseStrategy,Ie=>this.triggerEvent(Ie)),(0,mn.b)({next(){Z=!0},complete(){Z=!0}}),(0,wn.x)(()=>{var Ie;Z||he||this.cancelNavigationTransition(P,`Navigation ID ${P.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ie=this.currentNavigation)||void 0===Ie?void 0:Ie.id)===P.id&&(this.currentNavigation=null)}),me(Ie=>{if(he=!0,function $n(M){return M&&M[li]}(Ie)){const _t=yi(Ie.url);_t||(this.navigated=!0,this.restoreHistory(P,!0));const Qt=new ni(P.id,this.serializeUrl(P.extractedUrl),Ie.message);N.next(Qt),_t?setTimeout(()=>{const zn=this.urlHandlingStrategy.merge(Ie.url,this.rawUrlTree),rn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wl(P.source)};this.scheduleNavigation(zn,"imperative",null,rn,{resolve:P.resolve,reject:P.reject,promise:P.promise})},0):P.resolve(!1)}else{this.restoreHistory(P,!0);const _t=new ar(P.id,this.serializeUrl(P.extractedUrl),Ie);N.next(_t);try{P.resolve(this.errorHandler(Ie))}catch(Qt){P.reject(Qt)}}return ut.E}))}))}resetRootComponentType(D){this.rootComponentType=D,this.routerState.root.component=this.rootComponentType}setTransition(D){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),D))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const N="popstate"===D.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{var P;const Z={replaceUrl:!0},he=(null===(P=D.state)||void 0===P?void 0:P.navigationId)?D.state:null;if(he){const _t=Object.assign({},he);delete _t.navigationId,delete _t.\u0275routerPageId,0!==Object.keys(_t).length&&(Z.state=_t)}const Ie=this.parseUrl(D.url);this.scheduleNavigation(Ie,N,he,Z)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(D){this.events.next(D)}resetConfig(D){zs(D),this.config=D.map(B),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,N={}){const{relativeTo:P,queryParams:Z,fragment:he,queryParamsHandling:Ie,preserveFragment:_t}=N,Qt=P||this.routerState.root,zn=_t?this.currentUrlTree.fragment:he;let rn=null;switch(Ie){case"merge":rn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),Z);break;case"preserve":rn=this.currentUrlTree.queryParams;break;default:rn=Z||null}return null!==rn&&(rn=this.removeEmptyProps(rn)),function Be(M,S,D,N,P){if(0===D.length)return bt(S.root,S.root,S.root,N,P);const Z=function mr(M){if("string"==typeof M[0]&&1===M.length&&"/"===M[0])return new Zt(!0,0,M);let S=0,D=!1;const N=M.reduce((P,Z,he)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const Ie={};return we(Z.outlets,(_t,Qt)=>{Ie[Qt]="string"==typeof _t?_t.split("/"):_t}),[...P,{outlets:Ie}]}if(Z.segmentPath)return[...P,Z.segmentPath]}return"string"!=typeof Z?[...P,Z]:0===he?(Z.split("/").forEach((Ie,_t)=>{0==_t&&"."===Ie||(0==_t&&""===Ie?D=!0:".."===Ie?S++:""!=Ie&&P.push(Ie))}),P):[...P,Z]},[]);return new Zt(D,S,N)}(D);if(Z.toRoot())return bt(S.root,S.root,new Tn([],{}),N,P);const he=function rr(M,S,D){if(M.isAbsolute)return new $r(S.root,!0,0);if(-1===D.snapshot._lastPathIndex){const Z=D.snapshot._urlSegment;return new $r(Z,Z===S.root,0)}const N=be(M.commands[0])?0:1;return function ns(M,S,D){let N=M,P=S,Z=D;for(;Z>P;){if(Z-=P,N=N.parent,!N)throw new Error("Invalid number of '../'");P=N.segments.length}return new $r(N,!1,P-Z)}(D.snapshot._urlSegment,D.snapshot._lastPathIndex+N,M.numberOfDoubleDots)}(Z,S,M),Ie=he.processChildren?ko(he.segmentGroup,he.index,Z.commands):Oi(he.segmentGroup,he.index,Z.commands);return bt(S.root,he.segmentGroup,Ie,N,P)}(Qt,this.currentUrlTree,D,rn,null!=zn?zn:null)}navigateByUrl(D,N={skipLocationChange:!1}){const P=yi(D)?D:this.parseUrl(D),Z=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(Z,"imperative",null,N)}navigate(D,N={skipLocationChange:!1}){return function hu(M){for(let S=0;S<M.length;S++){const D=M[S];if(null==D)throw new Error(`The requested path contains ${D} segment at index ${S}`)}}(D),this.navigateByUrl(this.createUrlTree(D,N),N)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let N;try{N=this.urlSerializer.parse(D)}catch(P){N=this.malformedUriErrorHandler(P,this.urlSerializer,D)}return N}isActive(D,N){let P;if(P=!0===N?Object.assign({},na):!1===N?Object.assign({},Wa):N,yi(D))return an(this.currentUrlTree,D,P);const Z=this.parseUrl(D);return an(this.currentUrlTree,Z,P)}removeEmptyProps(D){return Object.keys(D).reduce((N,P)=>{const Z=D[P];return null!=Z&&(N[P]=Z),N},{})}processNavigations(){this.navigations.subscribe(D=>{this.navigated=!0,this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId,this.events.next(new wr(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,D.resolve(!0)},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}scheduleNavigation(D,N,P,Z,he){var Ie,_t;if(this.disposed)return Promise.resolve(!1);let Qt,zn,rn;he?(Qt=he.resolve,zn=he.reject,rn=he.promise):rn=new Promise((Ls,Ao)=>{Qt=Ls,zn=Ao});const Cr=++this.navigationId;let fr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(P=this.location.getState()),fr=P&&P.\u0275routerPageId?P.\u0275routerPageId:Z.replaceUrl||Z.skipLocationChange?null!==(Ie=this.browserPageId)&&void 0!==Ie?Ie:0:(null!==(_t=this.browserPageId)&&void 0!==_t?_t:0)+1):fr=0,this.setTransition({id:Cr,targetPageId:fr,source:N,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:D,extras:Z,resolve:Qt,reject:zn,promise:rn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),rn.catch(Ls=>Promise.reject(Ls))}setBrowserUrl(D,N){const P=this.urlSerializer.serialize(D),Z=Object.assign(Object.assign({},N.extras.state),this.generateNgRouterState(N.id,N.targetPageId));this.location.isCurrentPathEqualTo(P)||N.extras.replaceUrl?this.location.replaceState(P,"",Z):this.location.go(P,"",Z)}restoreHistory(D,N=!1){var P,Z;if("computed"===this.canceledNavigationResolution){const he=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(P=this.currentNavigation)||void 0===P?void 0:P.finalUrl)||0===he?this.currentUrlTree===(null===(Z=this.currentNavigation)||void 0===Z?void 0:Z.finalUrl)&&0===he&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(he)}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(D,N){const P=new ni(D.id,this.serializeUrl(D.extractedUrl),N);this.triggerEvent(P),D.resolve(!1)}generateNgRouterState(D,N){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:N}:{navigationId:D}}}return M.\u0275fac=function(D){w.$Z()},M.\u0275prov=w.Yz7({token:M,factory:M.\u0275fac}),M})();function wl(M){return"imperative"!==M}class Ia{}class Yu{preload(S,D){return(0,ze.of)(null)}}let Qu=(()=>{class M{constructor(D,N,P,Z){this.router=D,this.injector=P,this.preloadingStrategy=Z,this.loader=new Qd(P,N,_t=>D.triggerEvent(new hn(_t)),_t=>D.triggerEvent(new Zi(_t)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,je.h)(D=>D instanceof wr),(0,Kt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const D=this.injector.get(w.h0i);return this.processRoutes(D,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,N){const P=[];for(const Z of N)if(Z.loadChildren&&!Z.canLoad&&Z._loadedConfig){const he=Z._loadedConfig;P.push(this.processRoutes(he.module,he.routes))}else Z.loadChildren&&!Z.canLoad?P.push(this.preloadConfig(D,Z)):Z.children&&P.push(this.processRoutes(D,Z.children));return(0,De.D)(P).pipe((0,vn.J)(),(0,Le.U)(Z=>{}))}preloadConfig(D,N){return this.preloadingStrategy.preload(N,()=>(N._loadedConfig?(0,ze.of)(N._loadedConfig):this.loader.load(D.injector,N)).pipe((0,Ht.z)(Z=>(N._loadedConfig=Z,this.processRoutes(Z.module,Z.routes)))))}}return M.\u0275fac=function(D){return new(D||M)(w.LFG(sr),w.LFG(w.Sil),w.LFG(w.zs3),w.LFG(Ia))},M.\u0275prov=w.Yz7({token:M,factory:M.\u0275fac}),M})(),xi=(()=>{class M{constructor(D,N,P={}){this.router=D,this.viewportScroller=N,this.options=P,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},P.scrollPositionRestoration=P.scrollPositionRestoration||"disabled",P.anchorScrolling=P.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(D=>{D instanceof kr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof wr&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.router.parseUrl(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Lr&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,N){this.router.triggerEvent(new Lr(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return M.\u0275fac=function(D){w.$Z()},M.\u0275prov=w.Yz7({token:M,factory:M.\u0275fac}),M})();const jo=new w.OlP("ROUTER_CONFIGURATION"),go=new w.OlP("ROUTER_FORROOT_GUARD"),bl=[Ln.Ye,{provide:gi,useClass:$s},{provide:sr,useFactory:function Ri(M,S,D,N,P,Z,he={},Ie,_t){const Qt=new sr(null,M,S,D,N,P,Se(Z));return Ie&&(Qt.urlHandlingStrategy=Ie),_t&&(Qt.routeReuseStrategy=_t),function Ys(M,S){M.errorHandler&&(S.errorHandler=M.errorHandler),M.malformedUriErrorHandler&&(S.malformedUriErrorHandler=M.malformedUriErrorHandler),M.onSameUrlNavigation&&(S.onSameUrlNavigation=M.onSameUrlNavigation),M.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=M.paramsInheritanceStrategy),M.relativeLinkResolution&&(S.relativeLinkResolution=M.relativeLinkResolution),M.urlUpdateStrategy&&(S.urlUpdateStrategy=M.urlUpdateStrategy),M.canceledNavigationResolution&&(S.canceledNavigationResolution=M.canceledNavigationResolution)}(he,Qt),he.enableTracing&&Qt.events.subscribe(zn=>{var rn,Cr;null===(rn=console.group)||void 0===rn||rn.call(console,`Router Event: ${zn.constructor.name}`),console.log(zn.toString()),console.log(zn),null===(Cr=console.groupEnd)||void 0===Cr||Cr.call(console)}),Qt},deps:[gi,Ts,Ln.Ye,w.zs3,w.Sil,ll,jo,[class Jd{},new w.FiY],[class Is{},new w.FiY]]},Ts,{provide:Si,useFactory:function Ni(M){return M.routerState.root},deps:[sr]},Qu,Yu,class Do{preload(S,D){return D().pipe(me(()=>(0,ze.of)(null)))}},{provide:jo,useValue:{enableTracing:!1}}];function Cl(){return new w.PXZ("Router",sr)}let So=(()=>{class M{constructor(D,N){}static forRoot(D,N){return{ngModule:M,providers:[bl,Ho(D),{provide:go,useFactory:bi,deps:[[sr,new w.FiY,new w.tp0]]},{provide:jo,useValue:N||{}},{provide:Ln.S$,useFactory:Fi,deps:[Ln.lw,[new w.tBr(Ln.mr),new w.FiY],jo]},{provide:xi,useFactory:Da,deps:[sr,Ln.EM,jo]},{provide:Ia,useExisting:N&&N.preloadingStrategy?N.preloadingStrategy:Yu},{provide:w.PXZ,multi:!0,useFactory:Cl},[Tl,{provide:w.ip1,multi:!0,useFactory:kl,deps:[Tl]},{provide:yr,useFactory:kt,deps:[Tl]},{provide:w.tb,multi:!0,useExisting:yr}]]}}static forChild(D){return{ngModule:M,providers:[Ho(D)]}}}return M.\u0275fac=function(D){return new(D||M)(w.LFG(go,8),w.LFG(sr,8))},M.\u0275mod=w.oAB({type:M}),M.\u0275inj=w.cJS({}),M})();function Da(M,S,D){return D.scrollOffset&&S.setOffset(D.scrollOffset),new xi(M,S,D)}function Fi(M,S,D={}){return D.useHash?new Ln.Do(M,S):new Ln.b0(M,S)}function bi(M){return"guarded"}function Ho(M){return[{provide:w.deG,multi:!0,useValue:M},{provide:ll,multi:!0,useValue:M}]}let Tl=(()=>{class M{constructor(D){this.injector=D,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new m.x}appInitializer(){return this.injector.get(Ln.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let N=null;const P=new Promise(Ie=>N=Ie),Z=this.injector.get(sr),he=this.injector.get(jo);return"disabled"===he.initialNavigation?(Z.setUpLocationChangeListener(),N(!0)):"enabled"===he.initialNavigation||"enabledBlocking"===he.initialNavigation?(Z.hooks.afterPreactivation=()=>this.initNavigation?(0,ze.of)(null):(this.initNavigation=!0,N(!0),this.resultOfPreactivationDone),Z.initialNavigation()):N(!0),P})}bootstrapListener(D){const N=this.injector.get(jo),P=this.injector.get(Qu),Z=this.injector.get(xi),he=this.injector.get(sr),Ie=this.injector.get(w.z2F);D===Ie.components[0]&&(("enabledNonBlocking"===N.initialNavigation||void 0===N.initialNavigation)&&he.initialNavigation(),P.setUpPreloading(),Z.init(),he.resetRootComponentType(Ie.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return M.\u0275fac=function(D){return new(D||M)(w.LFG(w.zs3))},M.\u0275prov=w.Yz7({token:M,factory:M.\u0275fac}),M})();function kl(M){return M.appInitializer.bind(M)}function kt(M){return M.bootstrapListener.bind(M)}const yr=new w.OlP("Router Initializer")},3942:(Ut,We,$)=>{$.d(We,{Z:()=>rt});var w=$(2090),m=$(4859),ie=$(9681),Fe=$(1877);class z{constructor(Xe,ot){this._delegate=Xe,this.firebase=ot,(0,ie._addComponent)(Xe,new m.wA("app-compat",()=>this,"PUBLIC")),this.container=Xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this._delegate.automaticDataCollectionEnabled=Xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Xe=>{this._delegate.checkDestroyed(),Xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ie.deleteApp)(this._delegate)))}_getService(Xe,ot=ie._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const Lt=this._delegate.container.getProvider(Xe);return!Lt.isInitialized()&&"EXPLICIT"===(null===(Oe=Lt.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&Lt.initialize(),Lt.getImmediate({identifier:ot})}_removeServiceInstance(Xe,ot=ie._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Xe).clearInstance(ot)}_addComponent(Xe){(0,ie._addComponent)(this._delegate,Xe)}_addOrOverwriteComponent(Xe){(0,ie._addOrOverwriteComponent)(this._delegate,Xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ve=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function Ge(){const ht=function ke(ht){const Xe={},ot={__esModule:!0,initializeApp:function ct(It,le={}){const ut=ie.initializeApp(It,le);if((0,w.r3)(Xe,ut.name))return Xe[ut.name];const me=new ht(ut,ot);return Xe[ut.name]=me,me},app:Lt,registerVersion:ie.registerVersion,setLogLevel:ie.setLogLevel,onLog:ie.onLog,apps:null,SDK_VERSION:ie.SDK_VERSION,INTERNAL:{registerComponent:function Qe(It){const le=It.name,ut=le.replace("-compat","");if(ie._registerComponent(It)&&"PUBLIC"===It.type){const me=(je=Lt())=>{if("function"!=typeof je[ut])throw Ve.create("invalid-app-argument",{appName:le});return je[ut]()};void 0!==It.serviceProps&&(0,w.ZB)(me,It.serviceProps),ot[ut]=me,ht.prototype[ut]=function(...je){return this._getService.bind(this,le).apply(this,It.multipleInstances?je:[])}}return"PUBLIC"===It.type?ot[ut]:null},removeApp:function Oe(It){delete Xe[It]},useAsService:function ze(It,le){return"serverAuth"===le?null:le},modularAPIs:ie}};function Lt(It){if(!(0,w.r3)(Xe,It=It||ie._DEFAULT_ENTRY_NAME))throw Ve.create("no-app",{appName:It});return Xe[It]}return ot.default=ot,Object.defineProperty(ot,"apps",{get:function it(){return Object.keys(Xe).map(It=>Xe[It])}}),Lt.App=ht,ot}(z);return ht.INTERNAL=Object.assign(Object.assign({},ht.INTERNAL),{createFirebaseNamespace:Ge,extendNamespace:function Xe(ot){(0,w.ZB)(ht,ot)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),ht}(),ue=new Fe.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ht=self.firebase.SDK_VERSION;ht&&ht.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const rt=pe;!function Ke(ht){(0,ie.registerVersion)("@firebase/app-compat","0.1.26",ht)}()},9681:(Ut,We,$)=>{$.r(We),$.d(We,{FirebaseError:()=>Fe.ZR,SDK_VERSION:()=>ni,_DEFAULT_ENTRY_NAME:()=>Ot,_addComponent:()=>qt,_addOrOverwriteComponent:()=>Ht,_apps:()=>dn,_clearComponents:()=>Ln,_components:()=>Kt,_getProvider:()=>wn,_registerComponent:()=>mn,_removeServiceInstance:()=>vn,deleteApp:()=>on,getApp:()=>Mr,getApps:()=>Yn,initializeApp:()=>ar,onLog:()=>hn,registerVersion:()=>Rn,setLogLevel:()=>Zi});var w=$(5861),m=$(4859),ie=$(1877),Fe=$(2090),z=$(8766);class De{constructor($e){this.container=$e}getPlatformInfoString(){return this.container.getProviders().map(wt=>{if(function Ve(we){const $e=we.getComponent();return"VERSION"===(null==$e?void 0:$e.type)}(wt)){const Vt=wt.getImmediate();return`${Vt.library}/${Vt.version}`}return null}).filter(wt=>wt).join(" ")}}const ke="@firebase/app",pe=new ie.Yd("@firebase/app"),Ot="[DEFAULT]",lt={[ke]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,Kt=new Map;function qt(we,$e){try{we.container.addComponent($e)}catch(wt){pe.debug(`Component ${$e.name} failed to register with FirebaseApp ${we.name}`,wt)}}function Ht(we,$e){we.container.addOrOverwriteComponent($e)}function mn(we){const $e=we.name;if(Kt.has($e))return pe.debug(`There were multiple attempts to register component ${$e}.`),!1;Kt.set($e,we);for(const wt of dn.values())qt(wt,we);return!0}function wn(we,$e){const wt=we.container.getProvider("heartbeat").getImmediate({optional:!0});return wt&&wt.triggerHeartbeat(),we.container.getProvider($e)}function vn(we,$e,wt=Ot){wn(we,$e).clearInstance(wt)}function Ln(){Kt.clear()}const kr=new Fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class wr{constructor($e,wt,Vt){this._isDeleted=!1,this._options=Object.assign({},$e),this._config=Object.assign({},wt),this._name=wt.name,this._automaticDataCollectionEnabled=wt.automaticDataCollectionEnabled,this._container=Vt,this.container.addComponent(new m.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($e){this.checkDestroyed(),this._automaticDataCollectionEnabled=$e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($e){this._isDeleted=$e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}const ni="9.8.2";function ar(we,$e={}){"object"!=typeof $e&&($e={name:$e});const wt=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},$e),Vt=wt.name;if("string"!=typeof Vt||!Vt)throw kr.create("bad-app-name",{appName:String(Vt)});const zt=dn.get(Vt);if(zt){if((0,Fe.vZ)(we,zt.options)&&(0,Fe.vZ)(wt,zt.config))return zt;throw kr.create("duplicate-app",{appName:Vt})}const an=new m.H0(Vt);for(const _n of Kt.values())an.addComponent(_n);const Dr=new wr(we,wt,an);return dn.set(Vt,Dr),Dr}function Mr(we=Ot){const $e=dn.get(we);if(!$e)throw kr.create("no-app",{appName:we});return $e}function Yn(){return Array.from(dn.values())}function on(we){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,w.Z)(function*(we){const $e=we.name;dn.has($e)&&(dn.delete($e),yield Promise.all(we.container.getProviders().map(wt=>wt.delete())),we.isDeleted=!0)})).apply(this,arguments)}function Rn(we,$e,wt){var Vt;let zt=null!==(Vt=lt[we])&&void 0!==Vt?Vt:we;wt&&(zt+=`-${wt}`);const an=zt.match(/\s|\//),Dr=$e.match(/\s|\//);if(an||Dr){const _n=[`Unable to register library "${zt}" with version "${$e}":`];return an&&_n.push(`library name "${zt}" contains illegal characters (whitespace or "/")`),an&&Dr&&_n.push("and"),Dr&&_n.push(`version name "${$e}" contains illegal characters (whitespace or "/")`),void pe.warn(_n.join(" "))}mn(new m.wA(`${zt}-version`,()=>({library:zt,version:$e}),"VERSION"))}function hn(we,$e){if(null!==we&&"function"!=typeof we)throw kr.create("invalid-log-argument");(0,ie.Am)(we,$e)}function Zi(we){(0,ie.Ub)(we)}const Fr="firebase-heartbeat-store";let Hi=null;function Lr(){return Hi||(Hi=(0,z.X3)("firebase-heartbeat-database",1,{upgrade:(we,$e)=>{0===$e&&we.createObjectStore(Fr)}}).catch(we=>{throw kr.create("storage-open",{originalErrorMessage:we.message})})),Hi}function Xt(){return(Xt=(0,w.Z)(function*(we){try{return(yield Lr()).transaction(Fr).objectStore(Fr).get(pi(we))}catch($e){throw kr.create("storage-get",{originalErrorMessage:$e.message})}})).apply(this,arguments)}function tn(we,$e){return li.apply(this,arguments)}function li(){return(li=(0,w.Z)(function*(we,$e){try{const Vt=(yield Lr()).transaction(Fr,"readwrite");return yield Vt.objectStore(Fr).put($e,pi(we)),Vt.done}catch(wt){throw kr.create("storage-set",{originalErrorMessage:wt.message})}})).apply(this,arguments)}function pi(we){return`${we.name}!${we.options.appId}`}class dr{constructor($e){this.container=$e,this._heartbeatsCache=null;const wt=this.container.getProvider("app").getImmediate();this._storage=new Se(wt),this._heartbeatsCachePromise=this._storage.read().then(Vt=>(this._heartbeatsCache=Vt,Vt))}triggerHeartbeat(){var $e=this;return(0,w.Z)(function*(){const Vt=$e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),zt=Tr();if(null===$e._heartbeatsCache&&($e._heartbeatsCache=yield $e._heartbeatsCachePromise),$e._heartbeatsCache.lastSentHeartbeatDate!==zt&&!$e._heartbeatsCache.heartbeats.some(an=>an.date===zt))return $e._heartbeatsCache.heartbeats.push({date:zt,agent:Vt}),$e._heartbeatsCache.heartbeats=$e._heartbeatsCache.heartbeats.filter(an=>{const Dr=new Date(an.date).valueOf();return Date.now()-Dr<=2592e6}),$e._storage.overwrite($e._heartbeatsCache)})()}getHeartbeatsHeader(){var $e=this;return(0,w.Z)(function*(){if(null===$e._heartbeatsCache&&(yield $e._heartbeatsCachePromise),null===$e._heartbeatsCache||0===$e._heartbeatsCache.heartbeats.length)return"";const wt=Tr(),{heartbeatsToSend:Vt,unsentEntries:zt}=function ye(we,$e=1024){const wt=[];let Vt=we.slice();for(const zt of we){const an=wt.find(Dr=>Dr.agent===zt.agent);if(an){if(an.dates.push(zt.date),xe(wt)>$e){an.dates.pop();break}}else if(wt.push({agent:zt.agent,dates:[zt.date]}),xe(wt)>$e){wt.pop();break}Vt=Vt.slice(1)}return{heartbeatsToSend:wt,unsentEntries:Vt}}($e._heartbeatsCache.heartbeats),an=(0,Fe.L)(JSON.stringify({version:2,heartbeats:Vt}));return $e._heartbeatsCache.lastSentHeartbeatDate=wt,zt.length>0?($e._heartbeatsCache.heartbeats=zt,yield $e._storage.overwrite($e._heartbeatsCache)):($e._heartbeatsCache.heartbeats=[],$e._storage.overwrite($e._heartbeatsCache)),an})()}}function Tr(){return(new Date).toISOString().substring(0,10)}class Se{constructor($e){this.app=$e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,Fe.hl)()&&(0,Fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $e=this;return(0,w.Z)(function*(){return(yield $e._canUseIndexedDBPromise)&&(yield function Bt(we){return Xt.apply(this,arguments)}($e.app))||{heartbeats:[]}})()}overwrite($e){var wt=this;return(0,w.Z)(function*(){var Vt;if(yield wt._canUseIndexedDBPromise){const an=yield wt.read();return tn(wt.app,{lastSentHeartbeatDate:null!==(Vt=$e.lastSentHeartbeatDate)&&void 0!==Vt?Vt:an.lastSentHeartbeatDate,heartbeats:$e.heartbeats})}})()}add($e){var wt=this;return(0,w.Z)(function*(){var Vt;if(yield wt._canUseIndexedDBPromise){const an=yield wt.read();return tn(wt.app,{lastSentHeartbeatDate:null!==(Vt=$e.lastSentHeartbeatDate)&&void 0!==Vt?Vt:an.lastSentHeartbeatDate,heartbeats:[...an.heartbeats,...$e.heartbeats]})}})()}}function xe(we){return(0,Fe.L)(JSON.stringify({version:2,heartbeats:we})).length}!function Et(we){mn(new m.wA("platform-logger",$e=>new De($e),"PRIVATE")),mn(new m.wA("heartbeat",$e=>new dr($e),"PRIVATE")),Rn(ke,"0.7.25",we),Rn(ke,"0.7.25","esm2017"),Rn("fire-js","")}("")},4859:(Ut,We,$)=>{$.d(We,{H0:()=>ke,wA:()=>ie,zt:()=>z});var w=$(5861),m=$(2090);class ie{constructor(pe,ue,Pe){this.name=pe,this.instanceFactory=ue,this.type=Pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const Fe="[DEFAULT]";class z{constructor(pe,ue){this.name=pe,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const ue=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(ue)){const Pe=new m.BH;if(this.instancesDeferred.set(ue,Pe),this.isInitialized(ue)||this.shouldAutoInitialize())try{const Tt=this.getOrInitializeService({instanceIdentifier:ue});Tt&&Pe.resolve(Tt)}catch(Tt){}}return this.instancesDeferred.get(ue).promise}getImmediate(pe){var ue;const Pe=this.normalizeInstanceIdentifier(null==pe?void 0:pe.identifier),Tt=null!==(ue=null==pe?void 0:pe.optional)&&void 0!==ue&&ue;if(!this.isInitialized(Pe)&&!this.shouldAutoInitialize()){if(Tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Pe})}catch(Ke){if(Tt)return null;throw Ke}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Ve(Ge){return"EAGER"===Ge.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:Fe})}catch(ue){}for(const[ue,Pe]of this.instancesDeferred.entries()){const Tt=this.normalizeInstanceIdentifier(ue);try{const Ke=this.getOrInitializeService({instanceIdentifier:Tt});Pe.resolve(Ke)}catch(Ke){}}}}clearInstance(pe=Fe){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,w.Z)(function*(){const ue=Array.from(pe.instances.values());yield Promise.all([...ue.filter(Pe=>"INTERNAL"in Pe).map(Pe=>Pe.INTERNAL.delete()),...ue.filter(Pe=>"_delete"in Pe).map(Pe=>Pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=Fe){return this.instances.has(pe)}getOptions(pe=Fe){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:ue={}}=pe,Pe=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Pe))throw Error(`${this.name}(${Pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Tt=this.getOrInitializeService({instanceIdentifier:Pe,options:ue});for(const[Ke,rt]of this.instancesDeferred.entries())Pe===this.normalizeInstanceIdentifier(Ke)&&rt.resolve(Tt);return Tt}onInit(pe,ue){var Pe;const Tt=this.normalizeInstanceIdentifier(ue),Ke=null!==(Pe=this.onInitCallbacks.get(Tt))&&void 0!==Pe?Pe:new Set;Ke.add(pe),this.onInitCallbacks.set(Tt,Ke);const rt=this.instances.get(Tt);return rt&&pe(rt,Tt),()=>{Ke.delete(pe)}}invokeOnInitCallbacks(pe,ue){const Pe=this.onInitCallbacks.get(ue);if(Pe)for(const Tt of Pe)try{Tt(pe,ue)}catch(Ke){}}getOrInitializeService({instanceIdentifier:pe,options:ue={}}){let Pe=this.instances.get(pe);if(!Pe&&this.component&&(Pe=this.component.instanceFactory(this.container,{instanceIdentifier:(Ge=pe,Ge===Fe?void 0:Ge),options:ue}),this.instances.set(pe,Pe),this.instancesOptions.set(pe,ue),this.invokeOnInitCallbacks(Pe,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Pe)}catch(Tt){}var Ge;return Pe||null}normalizeInstanceIdentifier(pe=Fe){return this.component?this.component.multipleInstances?pe:Fe:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ke{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const ue=this.getProvider(pe.name);if(ue.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);ue.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const ue=new z(pe,this);return this.providers.set(pe,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(Ut,We,$)=>{$.d(We,{Am:()=>Ge,Ub:()=>ke,Yd:()=>Ve,in:()=>m});const w=[];var m=(()=>{return(pe=m||(m={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",m;var pe})();const ie={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},Fe=m.INFO,z={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},De=(pe,ue,...Pe)=>{if(ue<pe.logLevel)return;const Tt=(new Date).toISOString(),Ke=z[ue];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[Ke](`[${Tt}]  ${pe.name}:`,...Pe)};class Ve{constructor(ue){this.name=ue,this._logLevel=Fe,this._logHandler=De,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in m))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?ie[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...ue),this._logHandler(this,m.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...ue),this._logHandler(this,m.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,m.INFO,...ue),this._logHandler(this,m.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,m.WARN,...ue),this._logHandler(this,m.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...ue),this._logHandler(this,m.ERROR,...ue)}}function ke(pe){w.forEach(ue=>{ue.setLogLevel(pe)})}function Ge(pe,ue){for(const Pe of w){let Tt=null;ue&&ue.level&&(Tt=ie[ue.level]),Pe.userLogHandler=null===pe?null:(Ke,rt,...ht)=>{const Xe=ht.map(ot=>{if(null==ot)return null;if("string"==typeof ot)return ot;if("number"==typeof ot||"boolean"==typeof ot)return ot.toString();if(ot instanceof Error)return ot.message;try{return JSON.stringify(ot)}catch(Oe){return null}}).filter(ot=>ot).join(" ");rt>=(null!=Tt?Tt:Ke.logLevel)&&pe({level:m[rt].toLowerCase(),message:Xe,args:ht,type:Ke.name})}}}},8766:(Ut,We,$)=>{$.d(We,{Lj:()=>ct,X3:()=>Lt});var w=$(5861);let ie,Fe;const Ve=new WeakMap,ke=new WeakMap,Ge=new WeakMap,pe=new WeakMap,ue=new WeakMap;let Ke={get(le,ut,me){if(le instanceof IDBTransaction){if("done"===ut)return ke.get(le);if("objectStoreNames"===ut)return le.objectStoreNames||Ge.get(le);if("store"===ut)return me.objectStoreNames[1]?void 0:me.objectStore(me.objectStoreNames[0])}return ot(le[ut])},set:(le,ut,me)=>(le[ut]=me,!0),has:(le,ut)=>le instanceof IDBTransaction&&("done"===ut||"store"===ut)||ut in le};function Xe(le){return"function"==typeof le?function ht(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...ut){return le.apply(Oe(this),ut),ot(Ve.get(this))}:function(...ut){return ot(le.apply(Oe(this),ut))}:function(ut,...me){const je=le.call(Oe(this),ut,...me);return Ge.set(je,ut.sort?ut.sort():[ut]),ot(je)}}(le):(le instanceof IDBTransaction&&function Tt(le){if(ke.has(le))return;const ut=new Promise((me,je)=>{const He=()=>{le.removeEventListener("complete",tt),le.removeEventListener("error",Me),le.removeEventListener("abort",Me)},tt=()=>{me(),He()},Me=()=>{je(le.error||new DOMException("AbortError","AbortError")),He()};le.addEventListener("complete",tt),le.addEventListener("error",Me),le.addEventListener("abort",Me)});ke.set(le,ut)}(le),((le,ut)=>ut.some(me=>le instanceof me))(le,function z(){return ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,Ke):le)}function ot(le){if(le instanceof IDBRequest)return function Pe(le){const ut=new Promise((me,je)=>{const He=()=>{le.removeEventListener("success",tt),le.removeEventListener("error",Me)},tt=()=>{me(ot(le.result)),He()},Me=()=>{je(le.error),He()};le.addEventListener("success",tt),le.addEventListener("error",Me)});return ut.then(me=>{me instanceof IDBCursor&&Ve.set(me,le)}).catch(()=>{}),ue.set(ut,le),ut}(le);if(pe.has(le))return pe.get(le);const ut=Xe(le);return ut!==le&&(pe.set(le,ut),ue.set(ut,le)),ut}const Oe=le=>ue.get(le);function Lt(le,ut,{blocked:me,upgrade:je,blocking:He,terminated:tt}={}){const Me=indexedDB.open(le,ut),mt=ot(Me);return je&&Me.addEventListener("upgradeneeded",Le=>{je(ot(Me.result),Le.oldVersion,Le.newVersion,ot(Me.transaction))}),me&&Me.addEventListener("blocked",()=>me()),mt.then(Le=>{tt&&Le.addEventListener("close",()=>tt()),He&&Le.addEventListener("versionchange",()=>He())}).catch(()=>{}),mt}function ct(le,{blocked:ut}={}){const me=indexedDB.deleteDatabase(le);return ut&&me.addEventListener("blocked",()=>ut()),ot(me).then(()=>{})}const it=["get","getKey","getAll","getAllKeys","count"],Qe=["put","add","delete","clear"],ze=new Map;function It(le,ut){if(!(le instanceof IDBDatabase)||ut in le||"string"!=typeof ut)return;if(ze.get(ut))return ze.get(ut);const me=ut.replace(/FromIndex$/,""),je=ut!==me,He=Qe.includes(me);if(!(me in(je?IDBIndex:IDBObjectStore).prototype)||!He&&!it.includes(me))return;const tt=function(){var Me=(0,w.Z)(function*(mt,...Le){const ft=this.transaction(mt,He?"readwrite":"readonly");let Ot=ft.store;return je&&(Ot=Ot.index(Le.shift())),(yield Promise.all([Ot[me](...Le),He&&ft.done]))[0]});return function(Le){return Me.apply(this,arguments)}}();return ze.set(ut,tt),tt}!function rt(le){Ke=le(Ke)}(le=>_w(mw({},le),{get:(ut,me,je)=>It(ut,me)||le.get(ut,me,je),has:(ut,me)=>!!It(ut,me)||le.has(ut,me)}))},5861:(Ut,We,$)=>{function w(ie,Fe,z,De,Ve,ke,Ge){try{var pe=ie[ke](Ge),ue=pe.value}catch(Pe){return void z(Pe)}pe.done?Fe(ue):Promise.resolve(ue).then(De,Ve)}function m(ie){return function(){var Fe=this,z=arguments;return new Promise(function(De,Ve){var ke=ie.apply(Fe,z);function Ge(ue){w(ke,De,Ve,Ge,pe,"next",ue)}function pe(ue){w(ke,De,Ve,Ge,pe,"throw",ue)}Ge(void 0)})}}$.d(We,{Z:()=>m})}},Ut=>{Ut(Ut.s=7158)}]);